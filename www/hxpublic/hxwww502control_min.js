HXWebJS.Controls={};HXWebJS.Controls._InternalFunctions={};HXWebJS.Controls._InternalFunctions._global_res_string_arrary__ok_cancel=null;HXWebJS.Controls._InternalFunctions._get_res_string_array__ok_cancel=function(){if(HXWebJS.Controls._InternalFunctions._global_res_string_arrary__ok_cancel!=null){return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__ok_cancel}var strTemp=HXWebJS.Xml.XmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBCOMBOBOX_RESOURCE_STRING");if(strTemp==null||strTemp==""||strTemp=="TEXT__HXWWW_HXWEBCOMBOBOX_RESOURCE_STRING"){strTemp="OK;Cancel;Of;Clear"}HXWebJS.Controls._InternalFunctions._global_res_string_arrary__ok_cancel=strTemp.split(";");return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__ok_cancel};HXWebJS.Controls._InternalFunctions._global_res_string_arrary__calendar__full=null;HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full=function(){if(HXWebJS.Controls._InternalFunctions._global_res_string_arrary__calendar__full!=null){return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__calendar__full}var strTemp=HXWebJS.Xml.XmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING");if(strTemp==null||strTemp==""||strTemp=="TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING"){strTemp="SUN;MON;TUE;WED;THU;FRI;SAT;January;February;March;April;May;June;July;August;September;October;November;December;Today: {Y}/{M}/{D};{MM},{Y};Year;Month"}HXWebJS.Controls._InternalFunctions._global_res_string_arrary__calendar__full=strTemp.split(";");return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__calendar__full};HXWebJS.Controls._InternalFunctions._global_res_string_arrary__month_abbr_name=null;HXWebJS.Controls._InternalFunctions._get_res_string_array__month_abbr_name=function(){if(HXWebJS.Controls._InternalFunctions._global_res_string_arrary__month_abbr_name!=null){return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__month_abbr_name}var strTemp=HXWebJS.Xml.XmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING__ABBR_MONTH");if(strTemp==null||strTemp==""||strTemp=="TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING__ABBR_MONTH"){strTemp="Jan;Feb;Mar;Apr;May;Jun;Jul;Aug;Sep;Oct;Nov;Dec"}HXWebJS.Controls._InternalFunctions._global_res_string_arrary__month_abbr_name=strTemp.split(";");return HXWebJS.Controls._InternalFunctions._global_res_string_arrary__month_abbr_name};HXWebJS.Controls.PopupMonthPicker={};HXWebJS.Controls.PopupMonthPicker._InternalFunctions={};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"keydown",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onkeydown_process);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onclickprocess_outsidepopuparea);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onclickprocess_outsidepopuparea)}};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onloadprocess);HXWebJS.Controls.PopupMonthPicker.register=function(str_webdatacontrol_id,str_dropdown_btn_id,fnCallbackAfterMonthPicked){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(!c){var c=new Object();c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,fn_callback_month_picked:fnCallbackAfterMonthPicked};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=c}};HXWebJS.Controls.PopupMonthPicker.set_month_picked_callback=function(str_webdatacontrol_id,fnCallbackAfterMonthPicked){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.fn_callback_month_picked=fnCallbackAfterMonthPicked};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onclickprocess=function(objEventData){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_webdatacontrol_id=null;for(key in HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];var objInputTextBox=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,objEventSrcElement);if(objInputTextBox==null){return}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._choose_month(objInputTextBox,objActiveElementInfo,objEventData)};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._get_related_inputbox_object=function(str_webdatacontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onfocusinprocess=function(objEventData){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[strInputBoxId]){return}objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[strInputBoxId];HXWebJS.Controls.PopupMonthPicker._InternalFunctions._choose_month(objInputTextBox,objActiveElementInfo,objEventData)};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onclickprocess_outsidepopuparea=function(objEventData){var objEventSrcElement=objEventData.target;if(objEventSrcElement!==HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox&&objEventSrcElement!==HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_choose_button){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area()}};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onkeydown_process=function(objEventData){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){return}if(objEventData.type=="keydown"&&(objEventData.keyCode==9||objEventData.keyCode==13||objEventData.keyCode==27)){var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(strInputBoxId!=null&&HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[strInputBoxId]!=null){return}if(strInputBoxId=="hxwebpopupmonthpickercontrol_year_inputbox"){objEventData.stopPropagation();return}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area();return}};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._onchangeprocess=function(objEventData){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo==null){return}if(objInputTextBox.value!=null&&objInputTextBox.value!=""){if(!HXWebJS.Utility._InternalFunctions._CheckInputValidation_SingleElement(objInputTextBox)){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area();objEventData.preventDefault();return}}if(objActiveElementInfo.fn_callback_month_picked!=null){objActiveElementInfo.fn_callback_month_picked(objInputTextBox,objInputTextBox.value)}};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._choose_month=function(objInputTextBox,objActiveElementInfo,objEventData,intLeft,intTop){if(!objInputTextBox){return}var intCurrentPeriod=0;var strOrgPeriodValue=objInputTextBox.value;if(strOrgPeriodValue.length==6&&!isNaN(strOrgPeriodValue)){intCurrentPeriod=parseInt(strOrgPeriodValue);if(intCurrentPeriod>=999999||intCurrentPeriod<=100000){intCurrentPeriod=0}}if(intCurrentPeriod==0){var dt=new Date();intYear=dt.getFullYear();intMonth=dt.getMonth()+1;intCurrentPeriod=intYear*100+intMonth}var objEventSrcElement=null;if((!!objEventData.type)&&objEventData.type=="click"){objEventSrcElement=objEventData.target}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox=objInputTextBox;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_choose_button=objEventSrcElement;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period=intCurrentPeriod;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year=parseInt(intCurrentPeriod/100)-4;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._show_popup_month_picker_area(objActiveElementInfo,objEventData,intLeft,intTop)};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._show_popup_month_picker_area=function(objActiveElementInfo,objEventData,intLeft,intTop){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._create_popup_month_picker_area();var objInputTextBox=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox;var objChooseButton=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_choose_button;var intPopupAreaWidth=290,intPopupAreaHeight=160;if(intLeft==null||intTop==null){if(objInputTextBox!=null&&!(objInputTextBox.style.display=="none"||objInputTextBox.style.visibility=="hidden")){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1}else{if(objChooseButton!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1}else{intLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+objEventData.clientX+3;intTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+objEventData.clientY+3}}}var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intPopupAreaWidth>intMaxWidth){intLeft=intMaxWidth-intPopupAreaWidth}var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intPopupAreaHeight>intMaxHeight){intTop=intMaxHeight-intPopupAreaHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intPopupAreaHeight-1;if(intTop<intCurrentDocumentScrollTop){intMaxHeight-intPopupAreaHeight}}}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area.style.left=intLeft+"px";HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area.style.top=intTop+"px";HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content();HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area.style.display=""};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area=function(){if(!HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area){return}if(HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area.style.display=="none"){return}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox=null;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_choose_button=null;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area.style.display="none"};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._create_popup_month_picker_area=function(){if(HXWebJS.DOM.GetElementById("hxwebpopupmonthpickercontrol_area")!=null){return}var sb_html=new HXWebStringBuilder();sb_html.append('<div id=hxwebpopupmonthpickercontrol_area style="display:none; Z-INDEX:8010; LEFT:0px; TOP:0px;WIDTH:300px; HEIGHT:160px; POSITION: absolute; overflow:hidden; padding:1 1 1 1;">');sb_html.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="hxwebpopupmonthpickercontrol_area_table" style="font-size:11px;border-collapse:collapse;table-layout:fixed;">');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_topicline><td style="vertical-align:middle;" width=50>');sb_html.append('<img id=imgbtn_hxwebjs_popupmonthpickercontrol__prevpage src="../images/hxpub_clear.gif" class=hxbtn_prevpage style="vertical-align:middle;margin-left:3px;" />');sb_html.append('</td><td colspan=4 width=200 id=hxwebpopupmonthpickercontrol_displayed_year_range style="text-align:center"></td>');sb_html.append("<td align=right width=50>");sb_html.append('<img id=imgbtn_hxwebjs_popupmonthpickercontrol__nextpage src="../images/hxpub_clear.gif" class=hxbtn_nextpage style="vertical-align:middle;margin-right:3px;" />');sb_html.append("</td></tr>");sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_0 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_1 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_2 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_3 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_4 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=18 id=hxwebpopupmonthpickercontrol_area_dataline_5 class="hxwebpopupmonthpickercontrol_area_dataline"><td></td><td></td><td></td><td></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td><td class="hxwebpopupmonthpickercontrol_month_cell"></td></tr>');sb_html.append('<tr height=34><td colspan=6 height=34><div id=hxwebpopupmonthpickercontrol_bottom_line style="width:100%;height:30px;margin-top:4px;vertical-align:top">');sb_html.append('<span id=hxwebpopupmonthpickercontrol_new_year_input_label style="margin-left:8px;width:32px;text-align:left;height:18px;line-height:18px;">Year</span>');sb_html.append('<input type=text id=hxwebpopupmonthpickercontrol_year_inputbox style="width:60px;height:18px;margin-left:2px;text-align:center;margin-top:4px;padding:0px;" class="hxinputbox" onchange="HXWebJS.Controls.PopupMonthPicker._InternalFunctions._manual_year_input_changed(event)" />');sb_html.append('<input type=button class=hxwebdatacontrol_button id=hxwebpopupmonthpickercontrol_ok_button style="width:50px;margin-left:80px;margin-top:4px;" value="Ok" onclick="HXWebJS.Controls.PopupMonthPicker._InternalFunctions._OKButton_onclicked(event)" ontouchend="HXWebJS.Controls.PopupMonthPicker._InternalFunctions._OKButton_onclicked(event)">');sb_html.append('<input type=button class=hxwebdatacontrol_button id=hxwebpopupmonthpickercontrol_cancel_button style="width:50px;margin-left:3px;margin-top:4px;" value="Cancel" onclick="HXWebJS.Controls.PopupMonthPicker._InternalFunctions._CancelButton_onclicked(event)" ontouchend="HXWebJS.Controls.PopupMonthPicker._InternalFunctions._CancelButton_onclicked(event)">');sb_html.append("</div></td></tr>");sb_html.append("</table>");sb_html.append("</div>");var objDiv=HXWebJS.DOM.CreateElement(sb_html.toString());document.body.appendChild(objDiv);var intRow,intCol,strMonthValue;var arrMonthAbbrName=HXWebJS.Controls._InternalFunctions._get_res_string_array__month_abbr_name();for(var intMonthIndex=0;intMonthIndex<12;intMonthIndex++){intRow=intMonthIndex%6;intCol=parseInt(intMonthIndex/6)+4;strMonthValue=arrMonthAbbrName[intMonthIndex];var objCell=HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_area_dataline_"+intRow,HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area).cells[intCol];HXWebJS.DOM.ElementSetInnerText(objCell,strMonthValue)}var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_new_year_input_label",objDiv),ArraryForCalendarResString[21]);var arrResStringOKCancelOf=HXWebJS.Controls._InternalFunctions._get_res_string_array__ok_cancel();HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_ok_button",objDiv).value=arrResStringOKCancelOf[0];HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_cancel_button",objDiv).value=arrResStringOKCancelOf[1];HXWebJS.EventManager.AddListener(objDiv,"click",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._popup_month_picker_area_clicked);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(objDiv,"touchend",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._popup_month_picker_area_clicked)}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area=objDiv};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content=function(){var intBeginYear=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year;var intCurrentDefaultPeriod=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period;var intCurrentSelectedYear=parseInt(intCurrentDefaultPeriod/100);var intCurrentSelectedMonth=intCurrentDefaultPeriod%100;var dtToday=new Date();var intTodayYear=dtToday.getFullYear();var intTodayMonth=dtToday.getMonth()+1;var intTempYear;for(var i=0;i<24;i++){intTempYear=intBeginYear+i;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_single_cell_year_value(i,intTempYear,intTempYear==intTodayYear,intTempYear==intCurrentSelectedYear)}for(var i=0;i<12;i++){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_single_cell_month_value(i,(i+1==intTodayMonth),(i+1==intCurrentSelectedMonth))}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_title_content(intCurrentSelectedYear,intCurrentSelectedMonth);var objInputBoxForYear=HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_year_inputbox",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area);objInputBoxForYear.value=intCurrentSelectedYear};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_single_cell_month_value=function(intMonthIndex,blnIsTodayMonth,blnIsActiveSelectedMonth){var intRow=intMonthIndex%6;var intCol=parseInt(intMonthIndex/6);var objCell=HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_area_dataline_"+intRow,HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area).cells[intCol+4];objCell.className="hxwebpopupmonthpickercontrol_normal_cell"+(blnIsTodayMonth?" hxwebpopupmonthpickercontrol_todayperiod_cell":"")+(blnIsActiveSelectedMonth?" hxwebpopupmonthpickercontrol_defaultperiod_cell":"")};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_title_content=function(intYear,intMonth){var objElement=HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_displayed_year_range",HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area);var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var strDisplayMonthTemplate=ArraryForCalendarResString[20];var strDisplayMonthContent=strDisplayMonthTemplate.replace(/{Y}/gi,intYear);var strDisplayMonthDesc=ArraryForCalendarResString[6+intMonth];strDisplayMonthContent=strDisplayMonthContent.replace(/{MM}/gi,strDisplayMonthDesc);strDisplayMonthContent=strDisplayMonthContent.replace(/{M}/gi,intMonth);HXWebJS.DOM.ElementSetInnerText(objElement,strDisplayMonthContent)};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_single_cell_year_value=function(intCellIndex,intYearValue,blnIsTodayYear,blnIsActiveSelectedYear){var intRow=parseInt(intCellIndex/4);var intCol=intCellIndex%4;var objCell=HXWebJS.DOM.FindFirstElementById("hxwebpopupmonthpickercontrol_area_dataline_"+intRow,HXWebJS.Controls.PopupMonthPicker._InternalFunctions._global_popup_month_picker_area).cells[intCol];HXWebJS.DOM.ElementSetInnerText(objCell,intYearValue);objCell.className="hxwebpopupmonthpickercontrol_normal_cell"+(blnIsTodayYear?" hxwebpopupmonthpickercontrol_todayperiod_cell":"")+(blnIsActiveSelectedYear?" hxwebpopupmonthpickercontrol_defaultperiod_cell":"")};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._manual_year_input_changed=function(e){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objInputBoxOfYear=objHXEventData.target;var strNewYear=HXWebJS.Utility.Trim(objInputBoxOfYear.value);if(!HXWebJS.Utility.IsNumeric(strNewYear)){objHXEventData.preventDefault();return}var intNewYear=parseInt(strNewYear);if(intNewYear<=5||intNewYear>=9999){objHXEventData.preventDefault();return}var intMonth=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period%100;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period=intNewYear*100+intMonth;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year=intNewYear-4;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content()};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._OKButton_onclicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);if(objEventData.type=="touchend"){objEventData.preventDefault()}var objInputTextBox=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox;var objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[objInputTextBox.id];if(objInputTextBox.tagName.toLowerCase()=="input"){objInputTextBox.value=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period;if(!objInputTextBox.disabled){try{objInputTextBox.focus()}catch(ex){}}}else{HXWebJS.DOM.ElementSetInnerText(objInputTextBox,HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period)}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area();HXWebJS.EventManager.FireEvent(objInputTextBox,"afterupdate");if(objActiveElementInfo!=null&&objActiveElementInfo.fn_callback_month_picked!=null){objActiveElementInfo.fn_callback_month_picked(objInputTextBox,HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period);HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area()}HXWebJS.EventManager.FireEvent(objInputTextBox,"change")};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._CancelButton_onclicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);if(objEventData.type=="touchend"){objEventData.preventDefault()}HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area()};HXWebJS.Controls.PopupMonthPicker._InternalFunctions._popup_month_picker_area_clicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);objEventData.stopPropagation();if(objEventData.type=="touchend"){objEventData.preventDefault()}var objEventSrcElement=objEventData.target;var intCurrentActiveBeginYear=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year;var strEventSrcElementTageName=objEventSrcElement.tagName.toLowerCase();if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupmonthpickercontrol__prevpage"){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year-=24;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content();return}if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupmonthpickercontrol__nextpage"){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_begin_year+=24;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content();return}if(strEventSrcElementTageName=="td"&&objEventSrcElement.parentNode.id.indexOf("hxwebpopupmonthpickercontrol_area_dataline_")!=-1){var intCellIndex=objEventSrcElement.cellIndex;if(intCellIndex>=4){var intTemp=parseInt(objEventSrcElement.parentNode.id.substr(objEventSrcElement.parentNode.id.length-1,1));var intNewMonth=intTemp+(intCellIndex-4)*6+1;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period=parseInt(HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period/100)*100+intNewMonth;HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content()}else{var intNewYear=parseInt(HXWebJS.DOM.ElementGetInnerText(objEventSrcElement));HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period=intNewYear*100+(HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_default_period%100);HXWebJS.Controls.PopupMonthPicker._InternalFunctions._set_yearmonth_content()}}};HXWebPopupMonthPickerControl=HXWebJS.Controls.PopupMonthPicker;HXWebJS.Controls.Calendar={};HXWebCalendarControl=HXWebJS.Controls.Calendar;HXWebJS.Controls.Calendar._InternalFunctions={};HXWebJS.Controls.Calendar.register=function(str_webcalendarcontrol_id,obj_calendarcontrol_container,int_extra_week_lines,int_show_prevnextmonth_btn,int_show_calendar_title,int_show_prevnextyear_btn){if(obj_calendarcontrol_container==null){return}if(int_show_calendar_title==null){int_show_calendar_title=1}if(int_show_prevnextmonth_btn==null){int_show_prevnextmonth_btn=1}if(int_show_prevnextyear_btn==null){int_show_prevnextyear_btn=1}if(int_extra_week_lines==null||int_extra_week_lines<0||int_extra_week_lines>4){int_extra_week_lines=0}var int_current_period=parseInt(HXWebJS.Utility.FormatDateTime(new Date(),1)/100);if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(!c){var c=new Object();c={webcalendarcontrol_id:str_webcalendarcontrol_id,current_period:int_current_period,extra_week_lines:int_extra_week_lines,show_prevnextmonth_btn:int_show_prevnextmonth_btn,show_prevnextyear_btn:int_show_prevnextyear_btn,show_calendar_title:int_show_calendar_title,calendarcontrol_container:obj_calendarcontrol_container};HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id]=c}};HXWebCalendarControl.set_customized_cell_template=function(str_webcalendarcontrol_id,strDateCellTemplateHtml,fn_ondatecellformat_callback){if(strDateCellTemplateHtml==null||strDateCellTemplateHtml==""){return}if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.date_cell_html_template=strDateCellTemplateHtml;objActiveElementInfo.ondatecellformat_callback=fn_ondatecellformat_callback;if(objActiveElementInfo.calendarcontrol_container==null){return}var objCalendarTable=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",objActiveElementInfo.calendarcontrol_container);if(objCalendarTable!=null){var arrElements=HXWebJS.DOM.FindElementsById("td_hxwebcalendar_cell",objCalendarTable);for(var i=0;i<arrElements.length;i++){arrElements[i].innerHTML=strDateCellTemplateHtml}HXWebCalendarControl._Internal._set_dateofmonth_content(objActiveElementInfo)}};HXWebJS.Controls.Calendar.set_callback_functions=function(str_webcalendarcontrol_id,fn_callback__period_changed,fn_callback__date_cell_format,fn_callback__date_cell_clickormouseover){if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.callback_func__period_changed=fn_callback__period_changed;objActiveElementInfo.callback_func__date_cell_format=fn_callback__date_cell_format;objActiveElementInfo.callback_func__date_cell_clickormouseover=fn_callback__date_cell_clickormouseover};HXWebJS.Controls.Calendar.set_calendar_period=function(str_webcalendarcontrol_id,int_period){if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}if(int_period==null){int_period=parseInt(HXWebJS.Utility.FormatDateTime(new Date(),1)/100)}else{if(typeof(int_period)=="string"){int_period=parseInt(int_period)}}objActiveElementInfo.current_period=int_period;HXWebJS.Controls.Calendar._InternalFunctions._create_calendar_area(objActiveElementInfo);HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);HXWebJS.Controls.PopupMonthPicker.register("hxwebcalendarcontrol_current_period","hxwebcalendarcontrol_displayed_month_content",HXWebJS.Controls.Calendar._InternalFunctions._manual_period_input_changed)};HXWebJS.Controls.Calendar.get_calendar_period=function(str_webcalendarcontrol_id){if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}return objActiveElementInfo.current_period};HXWebJS.Controls.Calendar.demo__callback_func__date_cell_format=function(str_webcalendarcontrol_id,int_date,obj_td_cell,obj_span_for_text,div_bg_upper_half,div_bg_lower_half,img_right_upper,img_right_lower){alert("函数原型：function somefuncname(str_webcalendarcontrol_id, int_date/*yyyymmdd*/, obj_td_cell/*指定日期显示单元格HTML对象*/, obj_span_for_text, div_bg_upper_half, div_bg_lower_half, img_right_upper, img_right_lower)")};HXWebJS.Controls.Calendar.demo__callback_func__date_cell_clickormouseover=function(str_webcalendarcontrol_id,int_date,objEventData){alert("函数原型：function somefuncname(str_webcalendarcontrol_id, int_date/*yyyymmdd*/, objEventData)")};HXWebJS.Controls.Calendar.demo__callback_func__period_changed=function(str_webcalendarcontrol_id,intPrevPeriod,objEventData){alert("函数原型：function somefuncname(str_webcalendarcontrol_id, intPrevPeriod/*yyyymm*/, objEventData)")};HXWebJS.Controls.Calendar.get_td_cell_of_date=function(str_webcalendarcontrol_id,int_date){if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}var objHtmlTable=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",objActiveElementInfo.calendarcontrol_container);var intYear=parseInt(objActiveElementInfo.current_period/100);var intMonth=objActiveElementInfo.current_period%100;var int_extra_week_lines=objActiveElementInfo.extra_week_lines;var dtFirstDayOfDisplayMonth=new Date(intYear,intMonth-1,1);var intWeekDay=dtFirstDayOfDisplayMonth.getDay();var dtTemp=new Date(intYear,intMonth-1,1-intWeekDay);var intCellIndex=HXWebJS.Utility.DateDiff(HXWebJS.Utility.ConvertIntegerDate(int_date),dtTemp);if(intCellIndex>=42+int_extra_week_lines*7){return null}var intRow=parseInt(intCellIndex/7);var intCol=intCellIndex%7;var objCell=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_dataline_"+intRow,objHtmlTable).cells[intCol];return objCell};HXWebJS.Controls.Calendar._InternalFunctions._create_calendar_area=function(objActiveElementInfo){var objCalendarControlContainer=objActiveElementInfo.calendarcontrol_container;var objTemp=HXWebJS.DOM.FindElementsById("hxwebcalendarcontrol_calendar_table",objCalendarControlContainer);if(objTemp==null||objTemp.length==0){var str_hxwebcalendarcontrol_id=objActiveElementInfo.webcalendarcontrol_id;var int_extra_week_lines=objActiveElementInfo.extra_week_lines;var int_show_calendar_title=objActiveElementInfo.show_calendar_title;var int_show_prevnextmonth_btn=objActiveElementInfo.show_prevnextmonth_btn;var int_show_prevnextyear_btn=objActiveElementInfo.show_prevnextyear_btn;var sb_html=new HXWebStringBuilder();sb_html.append('<table id="hxwebcalendarcontrol_calendar_table" hxwebcalendarcontrol_code="'+str_hxwebcalendarcontrol_id+'" border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse;cursor:default;">');if(int_show_calendar_title!=0){sb_html.append("<tr height='16px' id=hxwebcalendarcontrol_calendar_topicline style=\"background-color:DarkBlue;color:White;font-size:12px;font-weight:bold;vertical-align:middle;\"><td style=\"vertical-align:middle;\" width='40px'>");if(int_show_prevnextmonth_btn!=0){sb_html.append('<img id=imgbtn_hxwebcalendarcontrol_calendar_prevmonth src="../images/hxpub_clear.gif" class=hxbtn_prevpage style="vertical-align:middle;margin-left:3px;" />')}if(int_show_prevnextyear_btn!=0){sb_html.append('<img id=imgbtn_hxwebcalendarcontrol_calendar_prevyear src="../images/hxpub_clear.gif" class=hxbtn_sort_asc style="vertical-align:middle;margin-left:5px;" />')}sb_html.append('</td><td colspan=5 style=\'text-align:center;\'><input id=hxwebcalendarcontrol_current_period style="display:none;" /><span id="hxwebcalendarcontrol_displayed_month_content" style="cursor:pointer;"></span></td><td align=right width=\'40px\'>');if(int_show_prevnextyear_btn!=0){sb_html.append('<img id=imgbtn_hxwebcalendarcontrol_calendar_nextyear src="../images/hxpub_clear.gif" class=hxbtn_sort_desc style="vertical-align:middle;margin-right:5px;" />')}if(int_show_prevnextmonth_btn!=0){sb_html.append('<img id=imgbtn_hxwebcalendarcontrol_calendar_nextmonth src="../images/hxpub_clear.gif" class=hxbtn_nextpage style="vertical-align:middle;margin-right:3px;" />')}sb_html.append("</td></tr>")}sb_html.append('<tr height=\'16px\' id=hxwebcalendarcontrol_calendar_headline style="text-align:center;color:DarkBlue;font-size:12px;"><td style="color:red;border-bottom:solid 1 darkblue;"></td><td style="border-bottom:solid 1 darkblue;"></td><td style="border-bottom:solid 1 darkblue;"></td><td style="border-bottom:solid 1 darkblue;"></td><td style="border-bottom:solid 1 darkblue;"></td><td style="border-bottom:solid 1 darkblue;"></td><td style="color:red;border-bottom:solid 1 darkblue;"></td></tr>');for(var intLine=0;intLine<6+int_extra_week_lines;intLine++){sb_html.append("<tr id=hxwebcalendarcontrol_calendar_dataline_"+intLine.toString()+' style="text-align:center;height:20px;font-size:12px;">');for(var i=0;i<7;i++){sb_html.append('<td id=td_hxwebcalendar_cell hx_cell_index="'+(intLine*7+i).toString()+'" style="position:relative;left:0;top:0;">');if(objActiveElementInfo.date_cell_html_template!=null){sb_html.append(objActiveElementInfo.date_cell_html_template)}else{sb_html.append('<div id=div_hxwebcalendar_cell_upper_half style="z-index:100;position:absolute;left:0;top:0;width:100%;height:10px;font-size:8px;"></div>');sb_html.append('<div id=div_hxwebcalendar_cell_lower_half style="z-index:100;position:absolute;left:0;top:10;width:100%;height:10px;font-size:8px;"></div>');sb_html.append('<span id=spn_hxwebcalendar_cell_text style="z-index:121;position:absolute;left:0;top:3px;width:100%;height:12px;text-align:center;vertical-align:middle;background-color:transparent;"></span>');sb_html.append('<img id=img_hxwebcalendar_cell_rightupper style="z-index:100;position:absolute;right:2px;top:1px;" src="../images/hxpub_clear.gif" />');sb_html.append('<img id=img_hxwebcalendar_cell_rightlower style="z-index:100;position:absolute;right:2px;bottom:1px;" src="../images/hxpub_clear.gif" />')}sb_html.append("</td>")}sb_html.append("</tr>")}sb_html.append("</table>");var objTempCalendarTable=HXWebJS.DOM.CreateElement(sb_html.toString());objCalendarControlContainer.appendChild(objTempCalendarTable);HXWebJS.EventManager.AddListener(objTempCalendarTable,"click",HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_area_clicked);HXWebJS.EventManager.AddListener(objTempCalendarTable,"mouseover",HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_area_onmouseover);var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var objHeadLineRow=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_headline",objCalendarControlContainer);for(var i=0;i<7;i++){HXWebJS.DOM.ElementSetInnerText(objHeadLineRow.cells[i],ArraryForCalendarResString[i])}}};HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content=function(objActiveElementInfo){var intYear=parseInt(objActiveElementInfo.current_period/100);var intMonth=objActiveElementInfo.current_period%100;var int_extra_week_lines=objActiveElementInfo.extra_week_lines;var objHtmlTable=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",objActiveElementInfo.calendarcontrol_container);var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var strDisplayMonthTemplate=ArraryForCalendarResString[20];var strDisplayMonthContent=strDisplayMonthTemplate.replace(/{Y}/gi,intYear);var strDisplayMonthDesc=ArraryForCalendarResString[6+intMonth];strDisplayMonthContent=strDisplayMonthContent.replace(/{MM}/gi,strDisplayMonthDesc);strDisplayMonthContent=strDisplayMonthContent.replace(/{M}/gi,intMonth);var objTemp=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_displayed_month_content",objHtmlTable);if(objTemp!=null){HXWebJS.DOM.ElementSetInnerText(objTemp,strDisplayMonthContent)}var dtFirstDayOfDisplayMonth=new Date(intYear,intMonth-1,1);var intWeekDay=dtFirstDayOfDisplayMonth.getDay();var dtToday=new Date();dtToday=new Date(dtToday.getFullYear(),dtToday.getMonth(),dtToday.getDate());var dtTemp=new Date(intYear,intMonth-1,1-intWeekDay);for(var i=0;i<42+int_extra_week_lines*7;i++){HXWebJS.Controls.Calendar._InternalFunctions._set_single_cell_date_value(objActiveElementInfo,objHtmlTable,i,HXWebJS.Utility.FormatDateTime(dtTemp,1),(dtTemp.getMonth()==intMonth-1),(dtTemp.valueOf()==dtToday.valueOf()));dtTemp=new Date(dtTemp.getFullYear(),dtTemp.getMonth(),dtTemp.getDate()+1)}};HXWebJS.Controls.Calendar._InternalFunctions._manual_period_input_changed=function(objInputBox,intChoosenPeriod){var objHtmlTableForCalendar=HXWebJS.Controls.Calendar._InternalFunctions.get_html_table_of_calendar_via_child(objInputBox);if(objHtmlTableForCalendar==null){return}var str_webcalendarcontrol_id=objHtmlTableForCalendar.getAttribute("hxwebcalendarcontrol_code");if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.current_period=intChoosenPeriod;HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);if(objActiveElementInfo.callback_func__period_changed!=null){objActiveElementInfo.callback_func__period_changed(str_webcalendarcontrol_id,intChoosenPeriod)}};HXWebJS.Controls.Calendar._InternalFunctions._set_single_cell_date_value=function(objActiveElementInfo,objHtmlTable,intCellIndex,intCurrentDate,blnIsDisplayedMonth,blnIsToday){var intRow=parseInt(intCellIndex/7);var intCol=intCellIndex%7;var objCell=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_dataline_"+intRow,objHtmlTable,"tr").cells[intCol];objCell.style.border=(blnIsToday?"solid 1px red":"none");var objSpanForText=HXWebJS.DOM.FindFirstElementById("spn_hxwebcalendar_cell_text",objCell,"span");HXWebJS.DOM.ElementSetInnerText(objSpanForText,parseInt(intCurrentDate%100));objSpanForText.style.color=(blnIsDisplayedMonth?"black":"darkgray");if(objActiveElementInfo.callback_func__date_cell_format!=null){var div_hxwebcalendar_cell_upper_half=HXWebJS.DOM.FindFirstElementById("div_hxwebcalendar_cell_upper_half",objCell);var div_hxwebcalendar_cell_lower_half=HXWebJS.DOM.FindFirstElementById("div_hxwebcalendar_cell_lower_half",objCell);var img_hxwebcalendar_cell_rightupper=HXWebJS.DOM.FindFirstElementById("img_hxwebcalendar_cell_rightupper",objCell);var img_hxwebcalendar_cell_rightlower=HXWebJS.DOM.FindFirstElementById("img_hxwebcalendar_cell_rightlower",objCell);objActiveElementInfo.callback_func__date_cell_format(objActiveElementInfo.webcalendarcontrol_id,intCurrentDate,objCell,objSpanForText,div_hxwebcalendar_cell_upper_half,div_hxwebcalendar_cell_lower_half,img_hxwebcalendar_cell_rightupper,img_hxwebcalendar_cell_rightlower,blnIsDisplayedMonth,blnIsToday)}if(objActiveElementInfo.ondatecellformat_callback!=null){objActiveElementInfo.ondatecellformat_callback(objActiveElementInfo.webcalendarcontrol_id,intCurrentDate,objCell,objSpanForText,blnIsDisplayedMonth,blnIsToday)}};HXWebJS.Controls.Calendar._InternalFunctions.get_html_table_of_calendar_via_child=function(objChildElement){var objTemp=objChildElement;while(objTemp!=null){if(objTemp.id=="hxwebcalendarcontrol_calendar_table"){return objTemp}objTemp=objTemp.parentNode}return null};HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_area_clicked=function(objEventData){var objEventSrcElement=objEventData.target;if(objEventSrcElement!=null&&objEventSrcElement.id=="hxwebcalendarcontrol_displayed_month_content"){return}objEventData.stopPropagation();var objHtmlTableForCalendar=HXWebJS.Controls.Calendar._InternalFunctions.get_html_table_of_calendar_via_child(objEventSrcElement);if(objHtmlTableForCalendar==null){return}var str_webcalendarcontrol_id=objHtmlTableForCalendar.getAttribute("hxwebcalendarcontrol_code");if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}var intCurrentPeriod=objActiveElementInfo.current_period;var strEventSrcElementTagName=objEventSrcElement.tagName.toLowerCase();if(strEventSrcElementTagName=="img"&&objEventSrcElement.id=="imgbtn_hxwebcalendarcontrol_calendar_prevmonth"){var intPrevPeriod=(parseInt(intCurrentPeriod%100)==1?(parseInt(intCurrentPeriod/100)-1)*100+12:intCurrentPeriod-1);objActiveElementInfo.current_period=intPrevPeriod;HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);if(objActiveElementInfo.callback_func__period_changed!=null){objActiveElementInfo.callback_func__period_changed(str_webcalendarcontrol_id,intPrevPeriod,objEventData)}return}if(strEventSrcElementTagName=="img"&&objEventSrcElement.id=="imgbtn_hxwebcalendarcontrol_calendar_nextmonth"){var intNextPeriod=(parseInt(intCurrentPeriod%100)==12?(parseInt(intCurrentPeriod/100)+1)*100+1:intCurrentPeriod+1);objActiveElementInfo.current_period=intNextPeriod;HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);if(objActiveElementInfo.callback_func__period_changed!=null){objActiveElementInfo.callback_func__period_changed(str_webcalendarcontrol_id,intNextPeriod,objEventData)}return}if(strEventSrcElementTagName=="img"&&objEventSrcElement.id=="imgbtn_hxwebcalendarcontrol_calendar_prevyear"){var intNextPeriod=(parseInt(intCurrentPeriod/100)-1)*100+parseInt(intCurrentPeriod%100);objActiveElementInfo.current_period=intNextPeriod;HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);if(objActiveElementInfo.callback_func__period_changed!=null){objActiveElementInfo.callback_func__period_changed(str_webcalendarcontrol_id,intNextPeriod,objEventData)}return}if(strEventSrcElementTagName=="img"&&objEventSrcElement.id=="imgbtn_hxwebcalendarcontrol_calendar_nextyear"){var intNextPeriod=(parseInt(intCurrentPeriod/100)+1)*100+parseInt(intCurrentPeriod%100);objActiveElementInfo.current_period=intNextPeriod;HXWebJS.Controls.Calendar._InternalFunctions._set_dateofmonth_content(objActiveElementInfo);if(objActiveElementInfo.callback_func__period_changed!=null){objActiveElementInfo.callback_func__period_changed(str_webcalendarcontrol_id,intNextPeriod,objEventData)}return}var objSelectedDateTDElement=HXWebJS.Controls.Calendar._InternalFunctions._get_cell_td_container_via_event_trigger_element(objEventSrcElement);if(objSelectedDateTDElement!=null){var intCellIndex=objSelectedDateTDElement.getAttribute("hx_cell_index");HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_date_cell_clickormouseover(objActiveElementInfo,intCellIndex,objEventData,objSelectedDateTDElement);return}};HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_date_cell_clickormouseover=function(objActiveElementInfo,intCellIndex,objEventData,objCellContainer){if(objActiveElementInfo.callback_func__date_cell_clickormouseover==null){return}var intCurrentPeriod=objActiveElementInfo.current_period;var intYear=parseInt(intCurrentPeriod/100);var intMonth=intCurrentPeriod%100;var dtFirstDayOfDisplayMonth=new Date(intYear,intMonth-1,1);var intWeekDay=dtFirstDayOfDisplayMonth.getDay();var dtTemp=new Date(intYear,intMonth-1,1-intWeekDay);dtTemp.setDate(dtTemp.getDate()+parseInt(intCellIndex));var intSelectedDate=HXWebJS.Utility.FormatDateTime(dtTemp,1);objActiveElementInfo.callback_func__date_cell_clickormouseover(objActiveElementInfo.webcalendarcontrol_id,intSelectedDate,objEventData,objCellContainer)};HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_area_onmouseover=function(objEventData){objEventData.stopPropagation();var objEventSrcElement=objEventData.target;var strEventSrcElementTagName=objEventSrcElement.tagName.toLowerCase();var objSelectedDateTDElement=HXWebJS.Controls.Calendar._InternalFunctions._get_cell_td_container_via_event_trigger_element(objEventSrcElement);if(objSelectedDateTDElement!=null){var objHtmlTableForCalendar=HXWebJS.Controls.Calendar._InternalFunctions.get_html_table_of_calendar_via_child(objEventSrcElement);if(objHtmlTableForCalendar==null){return}var str_webcalendarcontrol_id=objHtmlTableForCalendar.getAttribute("hxwebcalendarcontrol_code");if(str_webcalendarcontrol_id==null){return}if(!HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Calendar._InternalFunctions._registed_elements_info[str_webcalendarcontrol_id];if(objActiveElementInfo==null){return}var intCellIndex=objSelectedDateTDElement.getAttribute("hx_cell_index");HXWebJS.Controls.Calendar._InternalFunctions._hxwebcalendar_date_cell_clickormouseover(objActiveElementInfo,intCellIndex,objEventData,objSelectedDateTDElement)}};HXWebJS.Controls.Calendar._InternalFunctions._get_cell_td_container_via_event_trigger_element=function(objEventSrcElement){while(objEventSrcElement!=null){if(objEventSrcElement.tagName.toLowerCase()=="td"&&objEventSrcElement.id=="td_hxwebcalendar_cell"){return objEventSrcElement}objEventSrcElement=objEventSrcElement.parentNode;if(objEventSrcElement==null){return null}if(objEventSrcElement.tagName.toLowerCase()=="body"){return null}}};HXWebJS.Controls.PopupCalendar={};HXWebJS.Controls.PopupCalendar._InternalFunctions={};HXWebJS.Controls.PopupCalendar._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls.PopupCalendar._InternalFunctions._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"keyup",HXWebJS.Controls.PopupCalendar._InternalFunctions._onkeyup_process);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupCalendar._InternalFunctions._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupCalendar._InternalFunctions._onclickprocess_outsidepopuparea);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls.PopupCalendar._InternalFunctions._onclickprocess_outsidepopuparea)}};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupCalendar._InternalFunctions._onloadprocess);HXWebJS.Controls.PopupCalendar.register=function(str_webdatacontrol_id,str_dropdown_btn_id,intDateFormatType){if(intDateFormatType==null){intDateFormatType=1}if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(!c){var c=new Object();c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,show_year_inputbox:false,fn_callback_date_picked:null,fn_callback_default_display_date_get:null,date_format_type:intDateFormatType};HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=c}};HXWebJS.Controls.PopupCalendar.set_date_picked_callback=function(str_webdatacontrol_id,fnCallbackAfterDatePicked){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.fn_callback_date_picked=fnCallbackAfterDatePicked};HXWebJS.Controls.PopupCalendar.set_dft_display_date_get_callback=function(str_webdatacontrol_id,fnCallbackForDefaultDisplayDateGet){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.fn_callback_default_display_date_get=fnCallbackForDefaultDisplayDateGet};HXWebJS.Controls.PopupCalendar.set_date_format_type=function(str_webdatacontrol_id,intDateFormatType){var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.date_format_type=intDateFormatType};HXWebJS.Controls.PopupCalendar.show_year_input_area=function(str_webdatacontrol_id,blnShowOrHide){};HXWebJS.Controls.PopupCalendar._InternalFunctions._choose_date=function(objInputTextBox,intDateFormat,objEventData){if(!objInputTextBox){return}if(!intDateFormat){intDateFormat=0}if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[objInputTextBox.id];if(objActiveElementInfo==null){return}var strDateValue;var intYear,intMonth,intDay;var strOrgDateValue=objInputTextBox.value;if(strOrgDateValue==""){if(objActiveElementInfo.fn_callback_default_display_date_get!=null){strOrgDateValue=objActiveElementInfo.fn_callback_default_display_date_get(objInputTextBox.id)}}if(strOrgDateValue.length==8){strDateValue=strOrgDateValue;intYear=parseInt(strDateValue.substr(0,4),10);intMonth=parseInt(strDateValue.substr(4,2),10);intDay=parseInt(strDateValue.substr(6,2),10)}if(HXWebJS.Utility.IsDateTime(strOrgDateValue)){strDateValue=HXWebJS.Utility.FormatDateTime(strOrgDateValue,1).toString();intYear=parseInt(strDateValue.substr(0,4),10);intMonth=parseInt(strDateValue.substr(4,2),10);intDay=parseInt(strDateValue.substr(6,2),10)}if(!strDateValue){var dt=new Date();intYear=dt.getFullYear();intMonth=dt.getMonth()+1;intDay=dt.getDate()}var objEventSrcElement=null;if((!!objEventData.type)&&objEventData.type=="click"){objEventSrcElement=objEventData.target}HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_input_textbox=objInputTextBox;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_choose_button=objEventSrcElement;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_year=intYear;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_month=intMonth;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_day=intDay;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=intMonth;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_date_format=intDateFormat;HXWebJS.Controls.PopupCalendar._InternalFunctions._show_popup_calendar_area(objEventData)};HXWebJS.Controls.PopupCalendar._InternalFunctions._show_popup_calendar_area=function(objEventData){var intPopupCalendarAreaWidth=290,intPopupCalendarAreaHeight=150;if(HXWebJS.Core.Browser.IsMobile){if(intPopupCalendarAreaWidth>HXWebJS.Core.WindowGeometry.GetViewportWidth()){intPopupCalendarAreaWidth=HXWebJS.Core.WindowGeometry.GetViewportWidth()}}HXWebJS.Controls.PopupCalendar._InternalFunctions._create_popup_calendar_area(intPopupCalendarAreaWidth);var objInputTextBox=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_input_textbox;var objChooseButton=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_choose_button;var intLeft,intTop;if(objInputTextBox!=null&&!(objInputTextBox.style.display=="none"||objInputTextBox.style.visibility=="hidden")){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1}else{if(objChooseButton!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1}else{intLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+objEventData.clientX+3;intTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+objEventData.clientY+3}}var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intPopupCalendarAreaWidth>intMaxWidth){intLeft=intMaxWidth-intPopupCalendarAreaWidth}var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intPopupCalendarAreaHeight>intMaxHeight){intTop=intMaxHeight-intPopupCalendarAreaHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intPopupCalendarAreaHeight-1;if(intTop<intCurrentDocumentScrollTop){intTop=intMaxHeight-intPopupCalendarAreaHeight}}}HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area.style.left=intLeft+"px";HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area.style.top=intTop+"px";HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area.style.display=""};HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content=function(){var intYear=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year;var intMonth=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month;var objDiv=HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area;var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var strDisplayMonthTemplate=ArraryForCalendarResString[20];var strDisplayMonthContent=strDisplayMonthTemplate.replace(/{Y}/gi,intYear);var strDisplayMonthDesc=ArraryForCalendarResString[6+intMonth];strDisplayMonthContent=strDisplayMonthContent.replace(/{MM}/gi,strDisplayMonthDesc);strDisplayMonthContent=strDisplayMonthContent.replace(/{M}/gi,intMonth);HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("hxwebpopupcalendarcontrol_displayed_month_content",objDiv),strDisplayMonthContent);var objTempInpubBoxForCurrentPeriod=HXWebJS.DOM.FindFirstElementById("hxwebpopupcalendarcontrol_current_period",objDiv);objTempInpubBoxForCurrentPeriod.value=intYear*100+intMonth;var dtFirstDayOfDisplayMonth=new Date(intYear,intMonth-1,1);var dtLastDayOfDisplayMonth=new Date(intYear,intMonth,0);var intWeekDay=dtFirstDayOfDisplayMonth.getDay();var dtToday=new Date();dtToday=new Date(dtToday.getFullYear(),dtToday.getMonth(),dtToday.getDate());var dtDefault=new Date(HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_year,HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_month-1,HXWebJS.Controls.PopupCalendar._InternalFunctions._current_default_date_value_day);var dtTemp,intCellIndex=0;for(var i=0;i<intWeekDay;i++){dtTemp=new Date(intYear,intMonth-1,1-intWeekDay+i);HXWebJS.Controls.PopupCalendar._InternalFunctions._set_single_cell_date_value(intCellIndex,dtTemp.getDate(),false,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()));intCellIndex++}for(var i=0;i<dtLastDayOfDisplayMonth.getDate();i++){dtTemp=new Date(intYear,intMonth-1,1+i);HXWebJS.Controls.PopupCalendar._InternalFunctions._set_single_cell_date_value(intCellIndex,dtTemp.getDate(),true,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()));intCellIndex++}for(var i=0;i<42-intCellIndex;i++){dtTemp=new Date(intYear,intMonth,1+i);HXWebJS.Controls.PopupCalendar._InternalFunctions._set_single_cell_date_value(intCellIndex+i,dtTemp.getDate(),false,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()))}};HXWebJS.Controls.PopupCalendar._InternalFunctions._set_single_cell_date_value=function(intCellIndex,intValue,blnIsDisplayedMonth,blnIsToday,blnIsDefaultDate){var intRow=parseInt(intCellIndex/7);var intCol=intCellIndex%7;var objCell=HXWebJS.DOM.FindFirstElementById("hxwebpopupcalendarcontrol_calendar_dataline_"+intRow,HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area).cells[intCol];HXWebJS.DOM.ElementSetInnerText(objCell,intValue);objCell.className=(blnIsDisplayedMonth?"hxwebpopupcalendarcontrol_currentmonth_cell":"hxwebpopupcalendarcontrol_othermonth_cell")+(blnIsToday?" hxwebpopupcalendarcontrol_today_cell":"")+(blnIsDefaultDate?" hxwebpopupcalendarcontrol_defaultdate_cell":"")};HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area=function(){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area){return}if(HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area.style.display=="none"){return}HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_input_textbox=null;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_choose_button=null;HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area.style.display="none"};HXWebJS.Controls.PopupCalendar._InternalFunctions._popup_calendar_area_clicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);objEventData.stopPropagation();if(objEventData.type=="touchend"){objEventData.preventDefault()}var objEventSrcElement=objEventData.target;var intYear=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year;var intMonth=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month;var strEventSrcElementTageName=objEventSrcElement.tagName.toLowerCase();if(strEventSrcElementTageName=="span"&&objEventSrcElement.id=="hxwebpopupcalendarcontrol_displayed_month_content"){var objDivPopupCalendar=HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area;var objInputTextBox=HXWebJS.DOM.FindFirstElementById("hxwebpopupcalendarcontrol_current_period",objDivPopupCalendar);var objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[objInputTextBox.id];var intLeft=HXWebJS.DOM.GetElementLeftPosition(objDivPopupCalendar);var intTop=HXWebJS.DOM.GetElementTopPosition(objDivPopupCalendar);HXWebJS.Controls.PopupMonthPicker._InternalFunctions._choose_month(objInputTextBox,objActiveElementInfo,objEventData,intLeft,intTop);return}if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupcalendarcontrol_calendar_prevmonth"){if(intMonth==1){HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear-1;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=12}else{HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=intMonth-1}HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();return}if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupcalendarcontrol_calendar_nextmonth"){if(intMonth==12){HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear+1;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=1}else{HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear;HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=intMonth+1}HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();return}if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupcalendarcontrol_calendar_prevyear"){HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear-1;HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();return}if(strEventSrcElementTageName=="img"&&objEventSrcElement.id=="imgbtn_hxwebjs_popupcalendarcontrol_calendar_nextyear"){HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intYear+1;HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();return}if(strEventSrcElementTageName=="span"&&objEventSrcElement.id=="lbl_hxwebjs_popupcalendarcontrol_today_content"){HXWebJS.Controls.PopupCalendar._InternalFunctions._select_date_process(new Date());return}if(strEventSrcElementTageName=="td"&&objEventSrcElement.parentNode.id.indexOf("hxwebpopupcalendarcontrol_calendar_dataline_")!=-1){var strIDOfRow=objEventSrcElement.parentNode.id;var intRow=parseInt(strIDOfRow.substr(strIDOfRow.length-1));var intDay=parseInt(HXWebJS.DOM.ElementGetInnerText(objEventSrcElement));var dtSelected;if(intRow==0&&intDay>20){dtSelected=new Date(intYear,intMonth-1-1,intDay)}else{if(intRow>=4&&intDay<20){dtSelected=new Date(intYear,intMonth,intDay)}else{dtSelected=new Date(intYear,intMonth-1,intDay)}}HXWebJS.Controls.PopupCalendar._InternalFunctions._select_date_process(dtSelected)}};HXWebJS.Controls.PopupCalendar._InternalFunctions._create_popup_calendar_area=function(intWidth){if(HXWebJS.DOM.GetElementById("hxwebpopupcalendarcontrol_calendar_area")!=null){return}var sb_html=new HXWebStringBuilder();sb_html.append('<div id=hxwebpopupcalendarcontrol_calendar_area style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:'+intWidth+'px; HEIGHT:150px; POSITION: absolute; overflow:hidden; padding:1px;">');sb_html.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="hxwebpopupcalendarcontrol_calendar_table" style="font-size:11px;border-collapse:collapse;">');sb_html.append("<tr height=16 id=hxwebpopupcalendarcontrol_calendar_topicline><td style=\"vertical-align:middle;\" width='40px'>");sb_html.append('<img id=imgbtn_hxwebjs_popupcalendarcontrol_calendar_prevmonth src="../images/hxpub_clear.gif" class=hxbtn_prevpage style="vertical-align:middle;margin-left:3px;" />');sb_html.append('<img id=imgbtn_hxwebjs_popupcalendarcontrol_calendar_prevyear src="../images/hxpub_clear.gif" class=hxbtn_sort_asc style="vertical-align:middle;margin-left:5px;" />');sb_html.append("</td><td colspan=5 align=center width='"+(intWidth-90)+'px\'><input id=hxwebpopupcalendarcontrol_current_period style="display:none;" /><span id=hxwebpopupcalendarcontrol_displayed_month_content style="cursor:pointer;"></span></td>');sb_html.append("<td align=right width='40px'>");sb_html.append('<img id=imgbtn_hxwebjs_popupcalendarcontrol_calendar_nextyear src="../images/hxpub_clear.gif" class=hxbtn_sort_desc style="vertical-align:middle;margin-right:5px;" />');sb_html.append('<img id=imgbtn_hxwebjs_popupcalendarcontrol_calendar_nextmonth src="../images/hxpub_clear.gif" class=hxbtn_nextpage style="vertical-align:middle;margin-right:3px;" />');sb_html.append("</td></tr>");sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_headline><td style="color:red"></td><td></td><td></td><td></td><td></td><td></td><td style="color:red"></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_0 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_1 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_2 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_3 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_4 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append('<tr height=16 id=hxwebpopupcalendarcontrol_calendar_dataline_5 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height=24 id=hxwebpopupcalendarcontrol_calendar_footline>");sb_html.append('<td colspan=3 id=hxwebpopupcalendarcontrol_year_input_area style="vertical-align:top;" align=left>');sb_html.append('<td colspan=4 style="vertical-align:middle;padding-bottom:3px;" align=right>');sb_html.append('<span style="vertical-align:middle;margin-left:3px;margin-right:3px;;cursor:pointer;" id=lbl_hxwebjs_popupcalendarcontrol_today_content></span>');sb_html.append("</td></tr></table>");sb_html.append("</div>");var objDiv=HXWebJS.DOM.CreateElement(sb_html.toString());document.body.appendChild(objDiv);HXWebJS.EventManager.AddListener(objDiv,"click",HXWebJS.Controls.PopupCalendar._InternalFunctions._popup_calendar_area_clicked);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(objDiv,"touchend",HXWebJS.Controls.PopupCalendar._InternalFunctions._popup_calendar_area_clicked)}HXWebJS.Controls.PopupCalendar._InternalFunctions._global_popup_calendar_area=objDiv;var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var objHeadLineRow=HXWebJS.DOM.FindFirstElementById("hxwebpopupcalendarcontrol_calendar_headline",objDiv);for(var i=0;i<7;i++){HXWebJS.DOM.ElementSetInnerText(objHeadLineRow.cells[i],ArraryForCalendarResString[i])}var strTodayTemplate=ArraryForCalendarResString[19];var dtToday=new Date();var strTodayContent=strTodayTemplate.replace(/{Y}/gi,dtToday.getFullYear());strTodayContent=strTodayContent.replace(/{M}/gi,(dtToday.getMonth()+1));strTodayContent=strTodayContent.replace(/{D}/gi,(dtToday.getDate()));HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("lbl_hxwebjs_popupcalendarcontrol_today_content",objDiv),strTodayContent);HXWebJS.Controls.PopupMonthPicker.register("hxwebpopupcalendarcontrol_current_period","hxwebpopupcalendarcontrol_displayed_month_content",HXWebJS.Controls.PopupCalendar._InternalFunctions._manual_period_input_changed)};HXWebJS.Controls.PopupCalendar._InternalFunctions._manual_period_input_changed=function(objInputBox,intChoosenPeriod){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area();HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=parseInt(intChoosenPeriod/100);HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_month=intChoosenPeriod%100;HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content()};HXWebJS.Controls.PopupCalendar._InternalFunctions._manual_year_input_changed=function(objHtmlYearInputElement){if(objHtmlYearInputElement.value==""){return}var strNewYear=objHtmlYearInputElement.value;if(isNaN(strNewYear)){return}intNewYear=parseInt(strNewYear);if(intNewYear<1900){return}HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_display_year=intNewYear;HXWebJS.Controls.PopupCalendar._InternalFunctions._set_dateofmonth_content();objHtmlYearInputElement.value=""};HXWebJS.Controls.PopupCalendar._InternalFunctions._select_date_process=function(dtSelected){var intDateFormat=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_date_format;var strSelectedDate=HXWebJS.Utility.FormatDateTime(dtSelected,1);if(intDateFormat==2){strSelectedDate=strSelectedDate.toString().substr(0,6)}if(intDateFormat==1){var strSelectedDate=HXWebJS.Utility.FormatDateTime(dtSelected,2,HXWebPageGlobalVariables.DateDisplayFormatString)}var objInputTextBox=HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_input_textbox;objInputTextBox.value=strSelectedDate;try{objInputTextBox.focus()}catch(ex){}HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area();HXWebJS.EventManager.FireEvent(objInputTextBox,"afterupdate");if(objInputTextBox.id==null){return}if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[objInputTextBox.id];if(objActiveElementInfo==null){return}if(objActiveElementInfo!=null&&objActiveElementInfo.fn_callback_date_picked!=null){objActiveElementInfo.fn_callback_date_picked(objInputTextBox,strSelectedDate);HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area()}HXWebJS.EventManager.FireEvent(objInputTextBox,"change")};HXWebJS.Controls.PopupCalendar._InternalFunctions._get_related_inputbox_object=function(str_webdatacontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.PopupCalendar._InternalFunctions._onclickprocess=function(objEventData){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_webdatacontrol_id=null;for(key in HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[str_webdatacontrol_id];var objInputTextBox=HXWebJS.Controls.PopupCalendar._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,objEventSrcElement);if(objInputTextBox==null){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}HXWebJS.Controls.PopupCalendar._InternalFunctions._choose_date(objInputTextBox,objActiveElementInfo.date_format_type,objEventData)};HXWebJS.Controls.PopupCalendar._InternalFunctions._onfocusinprocess=function(objEventData){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[strInputBoxId]){return}objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[strInputBoxId];HXWebJS.Controls.PopupCalendar._InternalFunctions._choose_date(objInputTextBox,objActiveElementInfo.date_format_type,objEventData)};HXWebJS.Controls.PopupCalendar._InternalFunctions._onclickprocess_outsidepopuparea=function(objEventData){var objEventSrcElement=objEventData.target;if(objEventSrcElement!==HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_input_textbox&&objEventSrcElement!==HXWebJS.Controls.PopupCalendar._InternalFunctions._current_active_choose_button){HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area()}};HXWebJS.Controls.PopupCalendar._InternalFunctions._onkeyup_process=function(objEventData){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}if(objEventData.type=="keyup"&&(objEventData.keyCode==9||objEventData.keyCode==13||objEventData.keyCode==27||(objEventData.keyCode>=37&&objEventData.keyCode<=40))){var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(strInputBoxId!=null&&HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[strInputBoxId]!=null){return}HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area();return}};HXWebJS.Controls.PopupCalendar._InternalFunctions._onchangeprocess=function(objEventData){if(!HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}objActiveElementInfo=HXWebJS.Controls.PopupCalendar._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo==null){return}if(objInputTextBox.value!=null&&objInputTextBox.value!=""){if(!HXWebJS.Utility._InternalFunctions._CheckInputValidation_SingleElement(objInputTextBox,null,HXWebPageGlobalVariables.DateDisplayFormatString)){HXWebJS.Controls.PopupCalendar._InternalFunctions._hide_popup_calendar_area();objEventData.preventDefault();return}}if(objActiveElementInfo.fn_callback_date_picked!=null){objActiveElementInfo.fn_callback_date_picked(objInputTextBox,objInputTextBox.value)}};HXWebPopupCalendarControl=HXWebJS.Controls.PopupCalendar;HXWebJS.Controls.PopupTimePicker={};HXWebJS.Controls.PopupTimePicker._InternalFunctions={};HXWebJS.Controls.PopupTimePicker._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls.PopupTimePicker._InternalFunctions._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupTimePicker._InternalFunctions._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupTimePicker._InternalFunctions._onclickprocess_outsidepopuparea)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupTimePicker._InternalFunctions._onloadprocess);HXWebJS.Controls.PopupTimePicker.register=function(str_webdatacontrol_id,str_dropdown_btn_id){if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(!c){var c=new Object();c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,auto_show_when_focusin:true};HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=c}};HXWebJS.Controls.PopupTimePicker.disable_auto_show_when_focusin=function(str_webdatacontrol_id,blnDisable){if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(blnDisable==null){blnDisable=true}objActiveElementInfo.auto_show_when_focusin=!blnDisable};HXWebJS.Controls.PopupTimePicker._InternalFunctions._onclickprocess=function(objEventData){if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_webdatacontrol_id=null;for(key in HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[str_webdatacontrol_id];var objInputTextBox=HXWebJS.Controls.PopupTimePicker._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,objEventSrcElement);if(objInputTextBox==null){return}HXWebJS.Controls.PopupTimePicker._InternalFunctions._choose_time(objInputTextBox,objActiveElementInfo,objEventData)};HXWebJS.Controls.PopupTimePicker._InternalFunctions._get_related_inputbox_object=function(str_webdatacontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.PopupTimePicker._InternalFunctions._onfocusinprocess=function(objEventData){if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly==true||objInputTextBox.disabled){return}if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[strInputBoxId]){return}objActiveElementInfo=HXWebJS.Controls.PopupTimePicker._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo.auto_show_when_focusin==false){return}HXWebJS.Controls.PopupTimePicker._InternalFunctions._choose_time(objInputTextBox,objActiveElementInfo,objEventData)};HXWebJS.Controls.PopupTimePicker._InternalFunctions._onclickprocess_outsidepopuparea=function(objEventData){var objEventSrcElement=objEventData.target;if(objEventSrcElement!==HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_input_textbox&&objEventSrcElement!==HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_choose_button){HXWebJS.Controls.PopupTimePicker._InternalFunctions._hide_popup_time_picker_area()}};HXWebJS.Controls.PopupTimePicker._InternalFunctions._choose_time=function(objInputTextBox,objActiveElementInfo,objEventData){if(!objInputTextBox){return}var objEventSrcElement=null;if((!!objEventData.type)&&objEventData.type=="click"){objEventSrcElement=objEventData.target}var blnIsAM=(new Date()).getHours()<12?true:false;var intOldChoosedHour=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour;var intOldChoosedMinute=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute;HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(intOldChoosedHour,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(intOldChoosedMinute,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_input_textbox=objInputTextBox;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_choose_button=objEventSrcElement;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_am_or_pm=blnIsAM;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour=-1;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute=-1;HXWebJS.Controls.PopupTimePicker._InternalFunctions._show_popup_time_picker_area(objActiveElementInfo,objEventData)};HXWebJS.Controls.PopupTimePicker._InternalFunctions._show_popup_time_picker_area=function(objActiveElementInfo,objEventData){HXWebJS.Controls.PopupTimePicker._InternalFunctions._create_popup_time_picker_area();var objInputTextBox=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_input_textbox;var objChooseButton=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_choose_button;var intLeft,intTop;if(objInputTextBox!=null&&!(objInputTextBox.style.display=="none"||objInputTextBox.style.visibility=="hidden")){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1}else{if(objChooseButton!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1}else{intLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+objEventData.clientX+3;intTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+objEventData.clientY+3}}var intPopupAreaWidth=290,intPopupAreaHeight=138;var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intPopupAreaWidth>intMaxWidth){intLeft=intMaxWidth-intPopupAreaWidth}var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intPopupAreaHeight>intMaxHeight){intTop=intMaxHeight-intPopupAreaHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intPopupAreaHeight-1;if(intTop<intCurrentDocumentScrollTop){intMaxHeight-intPopupAreaHeight}}}HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area.style.left=intLeft+"px";HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area.style.top=intTop+"px";HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_content();HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area.style.display=""};HXWebJS.Controls.PopupTimePicker._InternalFunctions._hide_popup_time_picker_area=function(){if(!HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area){return}if(HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area.style.display=="none"){return}HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_input_textbox=null;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_choose_button=null;HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area.style.display="none"};HXWebJS.Controls.PopupTimePicker._InternalFunctions._create_popup_time_picker_area=function(){if(HXWebJS.DOM.GetElementById("hxwebpopuptimepickercontrol_area")!=null){return}var sb_html=new HXWebStringBuilder();sb_html.append('<div id=hxwebpopuptimepickercontrol_area style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:400px; HEIGHT:138px; POSITION: absolute; overflow:hidden; padding:1 1 1 1;">');sb_html.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="hxwebpopuptimepickercontrol_area_table" style="font-size:11px;border-collapse:collapse;table-layout:fixed;">');sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_topicline><td colspan=12></td></tr>");sb_html.append("<tr height=20 id=hxwebpopuptimepickercontrol_area_headline><td colspan=2><input type=radio id=hxwebpopuptimepickercontrol_rdbx_am name=hxwebpopuptimepickercontrol_rdbx_ampm value=0 />AM</td><td colspan=2><input type=radio id=hxwebpopuptimepickercontrol_rdbx_pm name=hxwebpopuptimepickercontrol_rdbx_ampm value=1 />PM</td><td colspan=8></td></tr>");sb_html.append('<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_0 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell style="text-align:center"></td><td class=hxwebpopuptimepickercontrol_hour_cell>6</td> <td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>7</td> <td>8</td> <td>9</td></tr>');sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_1 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell>1</td><td class=hxwebpopuptimepickercontrol_hour_cell>7</td> <td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td></tr>");sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_2 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell>2</td><td class=hxwebpopuptimepickercontrol_hour_cell>8</td> <td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td></tr>");sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_3 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell>3</td><td class=hxwebpopuptimepickercontrol_hour_cell>9</td><td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>30</td><td>31</td><td>32</td><td>33</td><td>34</td><td>35</td><td>36</td><td>37</td><td>38</td><td>39</td></tr>");sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_4 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell>4</td><td class=hxwebpopuptimepickercontrol_hour_cell>10</td><td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>40</td><td>41</td><td>42</td><td>43</td><td>44</td><td>45</td><td>46</td><td>47</td><td>48</td><td>49</td></tr>");sb_html.append("<tr height=16 id=hxwebpopuptimepickercontrol_area_dataline_5 class=hxwebpopuptimepickercontrol_area_dataline><td class=hxwebpopuptimepickercontrol_hour_cell>5</td><td class=hxwebpopuptimepickercontrol_hour_cell>11</td><td class=hxwebpopuptimepickercontrol_hour_minute_sepertor_cell>50</td><td>51</td><td>52</td><td>53</td><td>54</td><td>55</td><td>56</td><td>57</td><td>58</td><td>59</td></tr>");sb_html.append("</table>");sb_html.append("</div>");var objDiv=HXWebJS.DOM.CreateElement(sb_html.toString());document.body.appendChild(objDiv);HXWebJS.EventManager.AddListener(objDiv,"click",HXWebJS.Controls.PopupTimePicker._InternalFunctions._popup_time_picker_area_clicked);HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area=objDiv};HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_content=function(){var objDiv=HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area;var blnIsAM=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_am_or_pm;var intFirstDisplayHourNo=blnIsAM?0:12;HXWebJS.DOM.FindFirstElementById("hxwebpopuptimepickercontrol_rdbx_am",objDiv).checked=blnIsAM;HXWebJS.DOM.FindFirstElementById("hxwebpopuptimepickercontrol_rdbx_pm",objDiv).checked=!blnIsAM;for(var i=0;i<6;i++){var objTR=HXWebJS.DOM.FindFirstElementById("hxwebpopuptimepickercontrol_area_dataline_"+i.toString(),objDiv);HXWebJS.DOM.ElementSetInnerText(objTR.cells[0],intFirstDisplayHourNo+i);HXWebJS.DOM.ElementSetInnerText(objTR.cells[1],intFirstDisplayHourNo+6+i)}var intOldChoosedHour=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour;var intOldChoosedMinute=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour=-1;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute=-1;HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(intOldChoosedHour,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(intOldChoosedMinute,false)};HXWebJS.Controls.PopupTimePicker._InternalFunctions._popup_time_picker_area_clicked=function(objEventData){objEventData.stopPropagation();var objEventSrcElement=objEventData.target;var strEventSrcElementTageName=objEventSrcElement.tagName.toLowerCase();if(strEventSrcElementTageName=="input"&&(objEventSrcElement.id=="hxwebpopuptimepickercontrol_rdbx_am"||objEventSrcElement.id=="hxwebpopuptimepickercontrol_rdbx_pm")){HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_am_or_pm=(objEventSrcElement.id=="hxwebpopuptimepickercontrol_rdbx_am");HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_content();return}if(strEventSrcElementTageName=="td"&&objEventSrcElement.parentNode.id.indexOf("hxwebpopuptimepickercontrol_area_dataline_")!=-1){var objTR=objEventSrcElement.parentNode;var strIDOfRow=objTR.id;var intRow=parseInt(strIDOfRow.substr(strIDOfRow.length-1));var intCell=HXWebJS.Controls.PopupTimePicker._InternalFunctions._find_cell_no_of_row(objTR,objEventSrcElement);if(intCell==null){return}if(intCell<2){var intOldChoosedHour=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour;var blnIsAM=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_am_or_pm;var intFirstDisplayHourNo=blnIsAM?0:12;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour=intFirstDisplayHourNo+intRow+intCell*6;if(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute>=0){HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(intOldChoosedHour,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_process(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour,HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute)}else{HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(intOldChoosedHour,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour,true)}}else{var intOldChoosedMinute=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute;HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute=intRow*10+(intCell-2);if(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour>=0){HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(intOldChoosedMinute,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_process(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_hour,HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute)}else{HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(intOldChoosedMinute,false);HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format(HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_choosed_minute,true)}}}};HXWebJS.Controls.PopupTimePicker._InternalFunctions._find_cell_no_of_row=function(objTR,objTargetCell){for(var i=0;i<12;i++){if(objTR.cells[i]===objTargetCell){return i}}return null};HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_hour_cell_display_format=function(intHour,blnChoosed){if(intHour<0){return}if(intHour>=12){intHour-=12}var intRow=(intHour<6?intHour:intHour-6);var intCell=(intHour<6?0:1);var objDiv=HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area;if(objDiv==null){return}var objTR=HXWebJS.DOM.FindFirstElementById("hxwebpopuptimepickercontrol_area_dataline_"+intRow.toString(),objDiv);var objCell=objTR.cells[intCell];if(blnChoosed){HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebpopuptimepickercontrol_choosed_hour")}else{HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebpopuptimepickercontrol_choosed_hour")}};HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_minute_cell_display_format=function(intMinute,blnChoosed){if(intMinute<0){return}var intRow=Math.floor(intMinute/10);var intCell=intMinute%10+2;var objDiv=HXWebJS.Controls.PopupTimePicker._InternalFunctions._global_popup_time_picker_area;if(objDiv==null){return}var objTR=HXWebJS.DOM.FindFirstElementById("hxwebpopuptimepickercontrol_area_dataline_"+intRow.toString(),objDiv);var objCell=objTR.cells[intCell];if(blnChoosed){HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebpopuptimepickercontrol_choosed_minute")}else{HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebpopuptimepickercontrol_choosed_minute")}};HXWebJS.Controls.PopupTimePicker._InternalFunctions._set_time_process=function(intChoosedHour,intChoosedMinute){var objInputTextBox=HXWebJS.Controls.PopupTimePicker._InternalFunctions._current_active_input_textbox;objInputTextBox.value=intChoosedHour.toString()+":"+(intChoosedMinute<10?"0":"")+intChoosedMinute.toString();try{objInputTextBox.focus()}catch(ex){}HXWebJS.Controls.PopupTimePicker._InternalFunctions._hide_popup_time_picker_area();HXWebJS.EventManager.FireEvent(objInputTextBox,"afterupdate");HXWebJS.EventManager.FireEvent(objInputTextBox,"change")};HXWebPopupTimePickerControl=HXWebJS.Controls.PopupTimePicker;HXWebJS.Controls.PopupMenu={};HXWebJS.Controls.PopupMenu._InternalFunctions={};HXWebJS.Controls.PopupMenu._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupMenu._InternalFunctions._onclickprocess_outsidepopupmenuarea);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls.PopupMenu._InternalFunctions._onclickprocess_outsidepopupmenuarea)}};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupMenu._InternalFunctions._onloadprocess);HXWebJS.Controls.PopupMenu.register=function(str_popupmenucontrol_id,int_contentarea_width,bln_show_img_area,fn_onmenuitemclick,fn_onmenuitemmouseover,fn_onmenuitemmouseout,fn_onmenuareamouseout,extraOptions){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!c){var c=new Object();c={popupmenucontrol_id:str_popupmenucontrol_id,left:null,top:null,width:int_contentarea_width,zIndexOffset:0,show_img_area:bln_show_img_area,hidemenu_onmenuitemclick:false,onmenuitemclick_callback_func:fn_onmenuitemclick,onmenuitemmouseover_callback_func:fn_onmenuitemmouseover,onmenuitemmouseout_callback_func:fn_onmenuitemmouseout,onmenuareamouseout_callback_func:fn_onmenuareamouseout,onaftermenuitemcreated_callback:null,obj_for_hide_top_border_partly:null,img_for_hide_border_partly:null,show_border:(extraOptions!=null?extraOptions.show_border:true),show_shadow:(extraOptions!=null?extraOptions.show_shadow:true),ref_id:"",line_height:(extraOptions!=null?extraOptions.line_height:24),popupmenu_show_event_src_object:null,xml_obj_popupmenudata:null};HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id]=c}};HXWebJS.Controls.PopupMenu.set_onaftermenuitemcreated_callback=function(str_popupmenucontrol_id,fnCallback){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}objActiveElementInfo.onaftermenuitemcreated_callback=fnCallback};HXWebJS.Controls.PopupMenu.set_zIndex_offset=function(str_popupmenucontrol_id,intZIndexOffSet){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}objActiveElementInfo.zIndexOffset=intZIndexOffSet};HXWebJS.Controls.PopupMenu.set_ref_id=function(str_popupmenucontrol_id,str_ref_id){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}objActiveElementInfo.ref_id=str_ref_id};HXWebJS.Controls.PopupMenu.fill_items=function(str_popupmenucontrol_id,objHXXmlRootNode_ForMenuData,str_node_name_for_menu,str_field_name_for_key,str_field_name_for_label,str_field_name_for_sperator,str_field_name_for_indicator,str_field_name_for_img_class){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}var str_key,str_label,int_seperator_flag,int_childmenu_indicator,str_img_class_name;var str_temp=".//"+str_node_name_for_menu;var objHXXmlNodes=objHXXmlRootNode_ForMenuData.SelectNodes(str_temp);var objHXXmlNode;for(var i=0;i<objHXXmlNodes.length;i++){objHXXmlNode=objHXXmlNodes[i];str_key=objHXXmlNode.SelectSingleNode(str_field_name_for_key).GetText();str_label=objHXXmlNode.SelectSingleNode(str_field_name_for_label).GetText();if(str_field_name_for_sperator!=null&&str_field_name_for_sperator!=""&&objHXXmlNode.SelectSingleNode(str_field_name_for_sperator)!=null){int_seperator_flag=objHXXmlNode.SelectSingleNode(str_field_name_for_sperator).GetText()}else{int_seperator_flag=0}if(str_field_name_for_indicator!=null&&str_field_name_for_indicator!=""&&objHXXmlNode.SelectSingleNode(str_field_name_for_indicator)!=null){int_childmenu_indicator=objHXXmlNode.SelectSingleNode(str_field_name_for_indicator).GetText()}else{int_childmenu_indicator=0}if(str_field_name_for_img_class!=null&&str_field_name_for_img_class!=""&&objHXXmlNode.SelectSingleNode(str_field_name_for_img_class)!=null){str_img_class_name=objHXXmlNode.SelectSingleNode(str_field_name_for_img_class).GetText()}else{str_img_class_name=""}HXWebJS.Controls.PopupMenu._InternalFunctions._internal_append_item_to_xmldoc(objActiveElementInfo,str_key,str_label,int_seperator_flag,int_childmenu_indicator,str_img_class_name)}HXWebJS.Controls.PopupMenu._InternalFunctions._clear_exist_popupmenu_items_html_content(objActiveElementInfo)};HXWebJS.Controls.PopupMenu.clear_items=function(str_popupmenucontrol_id){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}objActiveElementInfo.xml_obj_popupmenudata=null;HXWebJS.Controls.PopupMenu._InternalFunctions._clear_exist_popupmenu_items_html_content(objActiveElementInfo)};HXWebJS.Controls.PopupMenu.append_item=function(str_popupmenucontrol_id,str_key,str_label,int_seperator_flag,int_childmenu_indicator,str_img_class_name){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}HXWebJS.Controls.PopupMenu._InternalFunctions._internal_append_item_to_xmldoc(objActiveElementInfo,str_key,str_label,int_seperator_flag,int_childmenu_indicator,str_img_class_name);HXWebJS.Controls.PopupMenu._InternalFunctions._clear_exist_popupmenu_items_html_content(objActiveElementInfo)};HXWebJS.Controls.PopupMenu.is_element_in_popupmencontrol=function(str_popupmenucontrol_id,objEventToElement){var objDivPopupControlArea=null;var objTemp=objEventToElement;if(objTemp!=null&&objTemp.id!=null){if(objTemp.id=="hr_hxpopupmenucontrol_partlyline"||objTemp.id=="img_hxpopupmenucontrol_partlyline_for_hide"||objTemp.id.indexOf("div_hxpopupmenucontrol_area_shadow_")!=-1){var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(objTemp.id=="hr_hxpopupmenucontrol_partlyline"){if(objActiveElementInfo.obj_for_hide_top_border_partly===objTemp){return true}}else{if(objTemp.id=="img_hxpopupmenucontrol_partlyline_for_hide"){if(objActiveElementInfo.img_for_hide_border_partly===objTemp){return true}}else{if(objTemp===objActiveElementInfo.div_hxpopupmenu_shadow_1||objTemp===objActiveElementInfo.div_hxpopupmenu_shadow_2||objTemp===objActiveElementInfo.div_hxpopupmenu_shadow_3||objTemp===objActiveElementInfo.div_hxpopupmenu_shadow_4){return true}}}return false}}while(objTemp!=null){if(objTemp.id=="div_hxpopupmenucontrol_area"){objDivPopupControlArea=objTemp;break}objTemp=objTemp.parentNode}if(objDivPopupControlArea!=null){var str_target_popupmenucontrol_id=objDivPopupControlArea.getAttribute("hxpopupmenucontrol_id");if(str_target_popupmenucontrol_id==str_popupmenucontrol_id){return true}}return false};HXWebJS.Controls.PopupMenu.is_registered=function(str_popupmenucontrol_id){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return false}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return false}return true};HXWebJS.Controls.PopupMenu.hide=function(str_popupmenucontrol_id){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}if(objActiveElementInfo.div_hxpopupmenu_shadow_4){objActiveElementInfo.div_hxpopupmenu_shadow_4.style.display="none"}if(objActiveElementInfo.div_hxpopupmenu_shadow_3){objActiveElementInfo.div_hxpopupmenu_shadow_3.style.display="none"}if(objActiveElementInfo.div_hxpopupmenu_shadow_2){objActiveElementInfo.div_hxpopupmenu_shadow_2.style.display="none"}if(objActiveElementInfo.div_hxpopupmenu_shadow_1){objActiveElementInfo.div_hxpopupmenu_shadow_1.style.display="none"}if(objActiveElementInfo.div_hxpopupmenu){objActiveElementInfo.div_hxpopupmenu.style.display="none"}if(objActiveElementInfo.obj_for_hide_top_border_partly){objActiveElementInfo.obj_for_hide_top_border_partly.style.display="none"}if(objActiveElementInfo.img_for_hide_border_partly){objActiveElementInfo.img_for_hide_border_partly.style.display="none"}objActiveElementInfo.popupmenu_show_event_src_object=null};HXWebJS.Controls.PopupMenu.show=function(str_popupmenucontrol_id,objEventData,int_left,int_top,int_width){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}var obj_event_src=objEventData.target;objActiveElementInfo.popupmenu_show_event_src_object=obj_event_src;var intCurrLeft,intCurrTop,intCurrWidth,intCurrHeight;if(int_left!=null){intCurrLeft=int_left}else{intCurrLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+objEventData.clientX-3}if(int_top!=null){intCurrTop=int_top}else{intCurrTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+objEventData.clientY-3}if(intCurrLeft<0){intCurrLeft=0}if(intCurrTop<0){intCurrTop=0}if(int_width!=null&&int_width>0){intCurrWidth=int_width}else{intCurrWidth=objActiveElementInfo.width}var cItemNumbers=(objActiveElementInfo.xml_obj_popupmenudata==null?0:objActiveElementInfo.xml_obj_popupmenudata.SelectNodes("//RS_ROW").length);var intItemHeight=(objActiveElementInfo.line_height!=null?objActiveElementInfo.line_height:24);var intCurrHeight=cItemNumbers*intItemHeight+2;var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intCurrLeft+intCurrWidth>intMaxWidth){intCurrLeft=intMaxWidth-intCurrWidth}var intMaxHeight=HXWebJS.Core.WindowGeometry.GetScrollTop()+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intCurrTop+intCurrHeight+8>intMaxHeight){intCurrTop=intMaxHeight-intCurrHeight-8}HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_html_object(objActiveElementInfo,intCurrLeft,intCurrTop,intCurrWidth,intCurrHeight);window.setTimeout(HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_items_html_content,objActiveElementInfo),50);HXWebJS.Controls.PopupMenu._InternalFunctions._set_popupmenu_visible(objActiveElementInfo)};HXWebJS.Controls.PopupMenu.demo__callback_func__onmenuitemclick=function(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv){alert("the function is just used to show the parameters of callback function of onmenuitemclick.")};HXWebJS.Controls.PopupMenu.demo__callback_func__onmenuitemmouseover=function(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv){alert("the function is just used to show the parameters of callback function of onmenuitemmouseover.")};HXWebJS.Controls.PopupMenu.demo__callback_func__onmenuitemmouseout=function(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv){alert("the function is just used to show the parameters of callback function of onmenuitemmouseout.")};HXWebJS.Controls.PopupMenu.hide_top_border_partly=function(str_popupmenucontrol_id,intLeftRelatedWithPopupArea,intWidth){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}if(!objActiveElementInfo.div_hxpopupmenu){return}if(objActiveElementInfo.div_hxpopupmenu.style.display=="none"){return}if(!objActiveElementInfo.obj_for_hide_top_border_partly){var str_HR_HTMLContent='<div id=hr_hxpopupmenucontrol_partlyline style="display:none; Z-INDEX:11000; WIDTH:1px;HEIGHT:1px; POSITION:absolute;" />';var objHR=HXWebJS.DOM.CreateElement(str_HR_HTMLContent);document.body.appendChild(objHR);objActiveElementInfo.obj_for_hide_top_border_partly=objHR}var objHR=objActiveElementInfo.obj_for_hide_top_border_partly;objHR.style.left=(objActiveElementInfo.div_hxpopupmenu.offsetLeft+intLeftRelatedWithPopupArea)+"px";objHR.style.top=(objActiveElementInfo.div_hxpopupmenu.offsetTop)+"px";objHR.style.width=intWidth+"px";objHR.style.display=""};HXWebJS.Controls.PopupMenu.hide_border_partly=function(str_popupmenucontrol_id,strHidePosition,intHideStartAt,intHideLength){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}if(!objActiveElementInfo.div_hxpopupmenu){return}if(objActiveElementInfo.div_hxpopupmenu.style.display=="none"){return}if(!objActiveElementInfo.img_for_hide_border_partly){var str_img_HTMLContent='<img id="img_hxpopupmenucontrol_partlyline_for_hide" class="'+str_popupmenucontrol_id+'__partlyline_for_hide" style="display:none; Z-INDEX:11000; WIDTH:1px;HEIGHT:1px; POSITION:absolute;" />';var objImg=HXWebJS.DOM.CreateElement(str_img_HTMLContent);document.body.appendChild(objImg);objActiveElementInfo.img_for_hide_border_partly=objImg}var objImg=objActiveElementInfo.img_for_hide_border_partly;if(strHidePosition=="top"){objImg.style.left=intHideStartAt+"px";objImg.style.top=HXWebJS.DOM.GetElementTopPosition(objActiveElementInfo.div_hxpopupmenu)+"px";objImg.style.width=intHideLength+"px";objImg.style.height="1px";objImg.style.display=""}else{if(strHidePosition=="left"){objImg.style.left=HXWebJS.DOM.GetElementLeftPosition(objActiveElementInfo.div_hxpopupmenu)+"px";objImg.style.top=intHideStartAt+"px";objImg.style.width="1px";objImg.style.height=intHideLength+"px";objImg.style.display=""}else{if(strHidePosition=="right"){objImg.style.left=(HXWebJS.DOM.GetElementLeftPosition(objActiveElementInfo.div_hxpopupmenu)+objActiveElementInfo.div_hxpopupmenu.offsetWidth-1)+"px";objImg.style.top=intHideStartAt+"px";objImg.style.width="1px";objImg.style.height=intHideLength+"px";objImg.style.display=""}}}};HXWebJS.Controls.PopupMenu._InternalFunctions._get_popupmenu_control_info=function(str_popupmenucontrol_id){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];return objActiveElementInfo};HXWebJS.Controls.PopupMenu._InternalFunctions._internal_append_item_to_xmldoc=function(objActiveElementInfo,str_key,str_label,int_seperator_flag,int_childmenu_indicator,str_img_class_name){if(int_seperator_flag==null){int_seperator_flag=0}if(int_seperator_flag!=0){int_seperator_flag=1}if(int_childmenu_indicator==null){int_childmenu_indicator=0}if(int_childmenu_indicator!=0){int_childmenu_indicator=1}str_key=str_key.toUpperCase();var sb_temp=new HXWebStringBuilder();sb_temp.append('<RS_ROW KEY="');sb_temp.append(HXWebJS.Xml.MarkXMLSpecialChars(str_key));sb_temp.append('" LABEL="');sb_temp.append(HXWebJS.Xml.MarkXMLSpecialChars(str_label));sb_temp.append('" SEPERATOR="');sb_temp.append(int_seperator_flag);sb_temp.append('" INDICATOR="');sb_temp.append(int_childmenu_indicator);sb_temp.append('" IMG_CLASS_NAME="');sb_temp.append(HXWebJS.Xml.MarkXMLSpecialChars(str_img_class_name));sb_temp.append('" />');var str_xml_popupmenu_single_item=sb_temp.toString();if(objActiveElementInfo.xml_obj_popupmenudata==null){objActiveElementInfo.xml_obj_popupmenudata=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA>"+str_xml_popupmenu_single_item+"</RS_DATA>")}else{var objTempNode=objActiveElementInfo.xml_obj_popupmenudata.SelectSingleNode("//RS_ROW");if(objTempNode==null){objActiveElementInfo.xml_obj_popupmenudata.ReloadXML("<RS_DATA>"+str_xml_popupmenu_single_item+"</RS_DATA>")}else{var objXmlMenuItemNode=objActiveElementInfo.xml_obj_popupmenudata.SelectSingleNode("//RS_ROW[@KEY='"+HXWebJS.Xml.MarkXMLSpecialChars(str_key)+"']");if(objXmlMenuItemNode==null){objXmlMenuItemNode=objActiveElementInfo.xml_obj_popupmenudata.SelectSingleNode("//RS_ROW").CloneNode();objXmlMenuItemNode.SetAttributeValue("KEY",str_key);objActiveElementInfo.xml_obj_popupmenudata.GetRootXmlNode().AppendChild(objXmlMenuItemNode)}objXmlMenuItemNode.SetAttributeValue("LABEL",str_label);objXmlMenuItemNode.SetAttributeValue("SEPERATOR",int_seperator_flag);objXmlMenuItemNode.SetAttributeValue("INDICATOR",int_childmenu_indicator);objXmlMenuItemNode.SetAttributeValue("IMG_CLASS_NAME",str_img_class_name)}}};HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_html_object=function(objActiveElementInfo,int_left,int_top,int_width,int_height){if(objActiveElementInfo.div_hxpopupmenu==null){var sb_div_html=new HXWebStringBuilder();sb_div_html.append("<div id=div_hxpopupmenucontrol_area");sb_div_html.append(' hxpopupmenucontrol_id="'+objActiveElementInfo.popupmenucontrol_id+'" class="hxwebpopupmenucontrol_menuiarea '+objActiveElementInfo.popupmenucontrol_id+'"');sb_div_html.append(' style="POSITION: absolute;display:none; Z-INDEX:10000; WIDTH:'+int_width+"px; HEIGHT:"+int_height+"px;");sb_div_html.append(!!objActiveElementInfo.show_border?"border:solid 1px #999999;color:white;":"");sb_div_html.append('"></div>');var objDiv=HXWebJS.DOM.CreateElement(sb_div_html.toString());document.body.appendChild(objDiv);objDiv.style.left=int_left+"px";objDiv.style.top=int_top+"px";objDiv.style.width=int_width+"px";objDiv.style.height=int_height+"px";objActiveElementInfo.div_hxpopupmenu=objDiv;if(objActiveElementInfo.zIndexOffset>0){objActiveElementInfo.div_hxpopupmenu.style.zIndex=parseInt(objActiveElementInfo.div_hxpopupmenu.style.zIndex)+(objActiveElementInfo.zIndexOffset*10)}HXWebJS.EventManager.AddListener(objDiv,"click",HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_click);HXWebJS.EventManager.AddListener(objDiv,"mouseover",HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_mouseover);HXWebJS.EventManager.AddListener(objDiv,"mouseout",HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_mouseout);if(!!objActiveElementInfo.show_shadow){objActiveElementInfo.div_hxpopupmenu_shadow_1=HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_shadow_div(objActiveElementInfo,1);objActiveElementInfo.div_hxpopupmenu_shadow_2=HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_shadow_div(objActiveElementInfo,2);objActiveElementInfo.div_hxpopupmenu_shadow_3=HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_shadow_div(objActiveElementInfo,3);objActiveElementInfo.div_hxpopupmenu_shadow_4=HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_shadow_div(objActiveElementInfo,4)}}else{objActiveElementInfo.div_hxpopupmenu.style.left=int_left+"px";objActiveElementInfo.div_hxpopupmenu.style.top=int_top+"px";objActiveElementInfo.div_hxpopupmenu.style.width=int_width+"px";objActiveElementInfo.div_hxpopupmenu.style.height=int_height+"px"}};HXWebJS.Controls.PopupMenu._InternalFunctions._set_popupmenu_visible=function(objActiveElementInfo){objActiveElementInfo.div_hxpopupmenu.style.display="";if(!!objActiveElementInfo.show_shadow){HXWebJS.Controls.PopupMenu._InternalFunctions._change_popupmenu_shadow_div_size(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.div_hxpopupmenu_shadow_1,1);HXWebJS.Controls.PopupMenu._InternalFunctions._change_popupmenu_shadow_div_size(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.div_hxpopupmenu_shadow_2,2);HXWebJS.Controls.PopupMenu._InternalFunctions._change_popupmenu_shadow_div_size(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.div_hxpopupmenu_shadow_3,3);HXWebJS.Controls.PopupMenu._InternalFunctions._change_popupmenu_shadow_div_size(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.div_hxpopupmenu_shadow_4,4);objActiveElementInfo.div_hxpopupmenu_shadow_4.style.display="";objActiveElementInfo.div_hxpopupmenu_shadow_3.style.display="";objActiveElementInfo.div_hxpopupmenu_shadow_2.style.display="";objActiveElementInfo.div_hxpopupmenu_shadow_1.style.display=""}};HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_shadow_div=function(objActiveElementInfo,i){var color="#666666";var el=objActiveElementInfo.div_hxpopupmenu;var rect=document.createElement("div");rect.id="div_hxpopupmenucontrol_area_shadow_"+i;var rs=rect.style;rs.position="absolute";rs.left=(el.style.posLeft+i)+"px";rs.top=(el.style.posTop+i)+"px";rs.width=el.offsetWidth+"px";rs.height=el.offsetHeight+"px";rs.zIndex=el.style.zIndex-i;rs.backgroundColor=color;var opacity=1-i/(i+1);rs.opacity=opacity;rs.filter="alpha(opacity="+(100*opacity)+")";el.parentNode.appendChild(rect);rect.setAttribute("hxpopupmenucontrol_id",objActiveElementInfo.popupmenucontrol_id);HXWebJS.EventManager.AddListener(rect,"mouseout",HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_mouseout);return rect};HXWebJS.Controls.PopupMenu._InternalFunctions._change_popupmenu_shadow_div_size=function(el,rect,i){var rs=rect.style;rs.left=(el.offsetLeft+i)+"px";rs.top=(el.offsetTop+i)+"px";rs.width=el.offsetWidth+"px";rs.height=el.offsetHeight+"px";rs.zIndex=el.style.zIndex-i};HXWebJS.Controls.PopupMenu._InternalFunctions._clear_exist_popupmenu_items_html_content=function(objActiveElementInfo){if(objActiveElementInfo.div_hxpopupmenu!=null){objActiveElementInfo.div_hxpopupmenu.innerHTML=""}};HXWebJS.Controls.PopupMenu._InternalFunctions._build_popupmenu_items_html_content=function(objActiveElementInfo){if(objActiveElementInfo.div_hxpopupmenu.innerHTML!=null&&objActiveElementInfo.div_hxpopupmenu.innerHTML!=""){return}if(objActiveElementInfo.xml_obj_popupmenudata==null){return}var objnodelist=objActiveElementInfo.xml_obj_popupmenudata.SelectNodes("//RS_ROW");var i,str_key,str_label,str_seperator,bln_seperator,str_indicator,bln_indicator,str_img_class_name;var objMenuItemDiv;for(i=0;i<objnodelist.length;i++){str_key=objnodelist[i].GetAttributeValue("KEY");str_label=objnodelist[i].GetAttributeValue("LABEL");str_seperator=objnodelist[i].GetAttributeValue("SEPERATOR");bln_seperator=(i>0&&str_seperator!=""&&str_seperator!="0")?true:false;str_indicator=objnodelist[i].GetAttributeValue("INDICATOR");bln_indicator=(str_indicator!=""&&str_indicator!="0")?true:false;str_img_class_name=objnodelist[i].GetAttributeValue("IMG_CLASS_NAME");objMenuItemDiv=HXWebJS.Controls.PopupMenu._InternalFunctions._add_popupmenu_menuitem_html(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.show_img_area,str_key,str_label,bln_seperator,bln_indicator,str_img_class_name);if(objActiveElementInfo.onaftermenuitemcreated_callback!=null){objActiveElementInfo.onaftermenuitemcreated_callback(objActiveElementInfo.div_hxpopupmenu,objActiveElementInfo.show_img_area,str_key,str_label,bln_seperator,bln_indicator,str_img_class_name,objMenuItemDiv)}}};HXWebJS.Controls.PopupMenu._InternalFunctions._add_popupmenu_menuitem_html=function(objHXWebPopup,bln_show_img_area,str_key,str_label,bln_seperator,bln_indicator,str_img_class_name){var intMenuItemLineTotalWidth=objHXWebPopup.offsetWidth-2;var intImgAreaWidth=24;var intIndicatorImgWidth=12;var strDivMenuItem='<div id=div_hxmenuitemline nowrap hxflag_menuitemline style="position:relative;height:24px;width:display:inline-block;'+intMenuItemLineTotalWidth+'px" class=hxwebpopupmenucontrol_menuitem hxflag_key="'+str_key+'"></div>';var objDiv=HXWebJS.DOM.CreateElement(strDivMenuItem);objHXWebPopup.insertBefore(objDiv,null);var sb_MenuItemHtmlContent=new HXWebStringBuilder();if(bln_show_img_area){sb_MenuItemHtmlContent.append('<span id=span_hxmenuitemline_imgarea class=hx_bgcolor_bright style="position:absolute;left:0px;top:0px;width:24px;height:24px;" >');sb_MenuItemHtmlContent.append('<img id=img_hxmenuitemline_icon src="../images/hxpub_clear.gif" class="'+str_img_class_name+'" style="position:absolute;left:5px;top:6px;" /></span>')}sb_MenuItemHtmlContent.append('<span id=span_hxmenuitemline_label nowrap style="position:absolute;');sb_MenuItemHtmlContent.append("left:"+((bln_show_img_area?intImgAreaWidth:0)+6)+"px;width:"+(intMenuItemLineTotalWidth-(bln_show_img_area?intImgAreaWidth:0)-(bln_indicator?intIndicatorImgWidth:0)));sb_MenuItemHtmlContent.append("px; height:24px;padding-left:0px;padding-top:6px;");if(bln_seperator){if(typeof(mstrHXDynamicPageVersion)!="undefined"&&(mstrHXDynamicPageVersion=="1.2"||mstrHXDynamicPageVersion=="1.3")){sb_MenuItemHtmlContent.append('" class="hxwebpopupmenucontrol_menuitem_split_line"')}else{sb_MenuItemHtmlContent.append('border-top:solid 1px #999999"')}}sb_MenuItemHtmlContent.append(' title="'+str_label+'">'+str_label+"</span>");if(bln_indicator){sb_MenuItemHtmlContent.append('<img id=img_hxmenuitemline_indicator src="../images/hxpub_clear.gif" class=hxbtn_small_indicator_right style="position:absolute;');sb_MenuItemHtmlContent.append("left:"+(intMenuItemLineTotalWidth-intIndicatorImgWidth)+'px;top:8px;" />')}objDiv.innerHTML=sb_MenuItemHtmlContent.toString();return objDiv};HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_click=function(objEventData){var objEventSrcElement=objEventData.target;var strTagName=objEventSrcElement.tagName.toLowerCase();if(strTagName=="div"&&objEventSrcElement.id=="div_hxmenuitemline"){HXWebJS.Controls.PopupMenu._InternalFunctions._fire_event(objEventSrcElement,"onclick",objEventData)}else{if((strTagName=="span"&&objEventSrcElement.id=="span_hxmenuitemline_label")||(strTagName=="img"&&objEventSrcElement.id=="img_hxmenuitemline_icon")||(strTagName=="span"&&objEventSrcElement.id=="span_hxmenuitemline_imgarea")||(strTagName=="img"&&objEventSrcElement.id=="img_hxmenuitemline_indicator")){var objMenuItemDiv=objEventSrcElement.parentNode;HXWebJS.Controls.PopupMenu._InternalFunctions._fire_event(objMenuItemDiv,"onclick",objEventData)}}};HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_mouseover=function(objEventData){var objEventSrcElement=objEventData.target;var strTagName=objEventSrcElement.tagName.toLowerCase();var objMenuItemDiv;if(strTagName=="div"&&objEventSrcElement.id=="div_hxmenuitemline"){objMenuItemDiv=objEventSrcElement}else{if(strTagName=="span"&&objEventSrcElement.id=="span_hxmenuitemline_label"){objMenuItemDiv=objEventSrcElement.parentNode}else{return}}var objTempSpan=HXWebJS.DOM.FindFirstElementById("span_hxmenuitemline_imgarea",objMenuItemDiv);if(objTempSpan!=null){objTempSpan.className="hx_bgcolor_dark"}objMenuItemDiv.className="hxwebpopupmenucontrol_menuitem_hover";HXWebJS.Controls.PopupMenu._InternalFunctions._fire_event(objMenuItemDiv,"onmouseover",objEventData)};HXWebJS.Controls.PopupMenu._InternalFunctions._getRelatedMenuItemDiv=function(objEventSrcElement){if(objEventSrcElement==null){return null}var objMenuItemDiv=null;var strTagName=objEventSrcElement.tagName.toLowerCase();if(strTagName=="div"&&objEventSrcElement.id=="div_hxmenuitemline"){objMenuItemDiv=objEventSrcElement}else{if(strTagName=="span"&&(objEventSrcElement.id=="span_hxmenuitemline_label"||objEventSrcElement.id=="span_hxmenuitemline_imgarea")){objMenuItemDiv=objEventSrcElement.parentNode}else{if(strTagName=="img"&&objEventSrcElement.id=="img_hxmenuitemline_indicator"){objMenuItemDiv=objEventSrcElement.parentNode}else{if(strTagName=="img"&&objEventSrcElement.id=="img_hxmenuitemline_icon"){objMenuItemDiv=objEventSrcElement.parentNode.parentNode}else{return null}}}}return objMenuItemDiv};HXWebJS.Controls.PopupMenu._InternalFunctions._hxwebpopupmenuitem_mouseout=function(objEventData){var objEventSrcElement=objEventData.target;var objMoveToElement=objEventData.relatedTarget;var objMenuItemDiv,objMoveToMenuItemDiv;objMenuItemDiv=HXWebJS.Controls.PopupMenu._InternalFunctions._getRelatedMenuItemDiv(objEventSrcElement);if(objMenuItemDiv==null){var str_popupmenucontrol_id=objEventSrcElement.getAttribute("hxpopupmenucontrol_id");var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}if(HXWebPopupMenuControl.is_element_in_popupmencontrol(str_popupmenucontrol_id,objMoveToElement)==false){if(objActiveElementInfo.onmenuareamouseout_callback_func!=null){objActiveElementInfo.onmenuareamouseout_callback_func(str_popupmenucontrol_id,objEventSrcElement,objEventData)}}return}if(objMoveToElement!=null&&objMoveToElement.id!=null){if(objMoveToElement.id=="div_hxpopupmenucontrol_area"&&objMenuItemDiv.parentNode===objMoveToElement){if(HXWebJS.DOM.IsPointInElementArea(objMenuItemDiv,objEventData.clientX,objEventData.clientY)){return}}else{objMoveToMenuItemDiv=HXWebJS.Controls.PopupMenu._InternalFunctions._getRelatedMenuItemDiv(objMoveToElement);if(objMoveToMenuItemDiv!=null){if(objMoveToMenuItemDiv===objMenuItemDiv){return}}}}var blnKeepMenuItemHoverDisplay=HXWebJS.Controls.PopupMenu._InternalFunctions._fire_event(objMenuItemDiv,"onmouseout",objEventData);if(!blnKeepMenuItemHoverDisplay){var objTempSpan=HXWebJS.DOM.FindFirstElementById("span_hxmenuitemline_imgarea",objMenuItemDiv);if(objTempSpan!=null){objTempSpan.className="hx_bgcolor_bright"}objMenuItemDiv.className="hxwebpopupmenucontrol_menuitem"}};HXWebJS.Controls.PopupMenu._InternalFunctions._fire_event=function(objMenuItemDiv,strEventType,objEventData){var str_popupmenucontrol_id=objMenuItemDiv.parentNode.getAttribute("hxpopupmenucontrol_id");var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[str_popupmenucontrol_id];if(!objActiveElementInfo){return}var strKey=objMenuItemDiv.getAttribute("hxflag_key");var strLabel=HXWebJS.DOM.ElementGetInnerText(HXWebJS.DOM.FindFirstElementById("span_hxmenuitemline_label",objMenuItemDiv));var objPopupMenuShowEventSrcObject=objActiveElementInfo.popupmenu_show_event_src_object;if(strEventType=="onclick"){if(objActiveElementInfo.hidemenu_onmenuitemclick==null||objActiveElementInfo.hidemenu_onmenuitemclick==true){HXWebJS.Controls.PopupMenu._InternalFunctions.hide(str_popupmenucontrol_id)}if(objActiveElementInfo.onmenuitemclick_callback_func!=null){objActiveElementInfo.onmenuitemclick_callback_func(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv,objEventData)}}if(strEventType=="onmouseover"&&objActiveElementInfo.onmenuitemmouseover_callback_func!=null){objActiveElementInfo.onmenuitemmouseover_callback_func(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv,objEventData)}if(strEventType=="onmouseout"&&objActiveElementInfo.onmenuitemmouseout_callback_func!=null){return objActiveElementInfo.onmenuitemmouseout_callback_func(str_popupmenucontrol_id,objPopupMenuShowEventSrcObject,strKey,strLabel,objMenuItemDiv,objEventData)}};HXWebJS.Controls.PopupMenu._InternalFunctions._onclickprocess_outsidepopupmenuarea=function(objEventData){if(!HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;if(objEventSrcElement.id=="div_hxmenuitemline"||objEventSrcElement.id=="span_hxmenuitemline_imgarea"||objEventSrcElement.id=="img_hxmenuitemline_icon"||objEventSrcElement.id=="span_hxmenuitemline_label"||objEventSrcElement.id=="img_hxmenuitemline_indicator"||objEventSrcElement.id.indexOf("div_hxpopupmenucontrol_area")!=-1){return}for(key in HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[key].popupmenu_show_event_src_object!=null){if(HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[key].popupmenu_show_event_src_object!==objEventSrcElement){HXWebJS.Controls.PopupMenu.hide(key)}}}};HXWebPopupMenuControl=HXWebJS.Controls.PopupMenu;HXWebJS.Controls._HXWebDataControl_Global={};HXWebJS.Controls._HXWebDataControl_Global._set_current_active_control=function(strWebDataControlType,strWebDataControlID,objWebDataControl_TextBox,objWebDataControl_DropdownButton,intChooseType,intQuickSearchOption,fn_data_choosed_callback,fn_search_data_again,blnSearchFromBegin,blnUseMobileMode){HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_type=strWebDataControlType;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id=strWebDataControlID;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox=objWebDataControl_TextBox;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn=objWebDataControl_DropdownButton;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype=intChooseType;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_quicksearchoption=intQuickSearchOption;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_data_choosed=fn_data_choosed_callback;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_search_data_again=fn_search_data_again;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index=-1;HXWebJS.Controls._HXWebDataControl_Global._create_popup_dataarea(blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._create_popup_controlarea(blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._create_xml_datalist_object();HXWebJS.Controls._HXWebDataControl_Global._create_xml_configdata_object();var objXmlCfgData=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object;objXmlCfgData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_KEY_WORD","");objXmlCfgData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_FROM_BEGIN",(blnSearchFromBegin==true?"1":""))};HXWebJS.Controls._HXWebDataControl_Global._fill_data_content=function(strXmlDataList,intFirstRecordOnPage,intLastRecordOnPage,strOrgSelectedValues){var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;objXmlDataIsland.ReloadXML(strXmlDataList);if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype!=0&&strOrgSelectedValues!=null&&strOrgSelectedValues!=""){var ss=strOrgSelectedValues.split(",");for(key in ss){var objXmlNode=objXmlDataIsland.SelectSingleNode("//RS_ROW[@KEY='"+ss[key]+"']");if(objXmlNode!=null){objXmlNode.SetAttributeValue("IS_CHOOSED","-1")}}}if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object!=null){HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object.SelectSingleNode("//RS_ROW").SetAttributeValue("FIRST_RECORD_ON_PAGE",intFirstRecordOnPage);HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object.SelectSingleNode("//RS_ROW").SetAttributeValue("LAST_RECORD_ON_PAGE",intLastRecordOnPage)}};HXWebJS.Controls._HXWebDataControl_Global._update_record_count=function(intTotalRecordsCount){if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object!=null){HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object.SelectSingleNode("//RS_ROW").SetAttributeValue("TOTAL_RECORDS_COUNT",intTotalRecordsCount)}};HXWebJS.Controls._HXWebDataControl_Global._clear_current_active_control=function(){HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_type=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_data_choosed=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_search_data_again=null;HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index=null;HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area()};HXWebJS.Controls._HXWebDataControl_Global._show_popup_area=function(intLeft,intTop,intWidth,intHeight,blnShowControlAreaChoosePart,blnShowControlAreaSearchPart,blnUseMobileMode){var blnShowControlArea=(blnShowControlAreaChoosePart||blnShowControlAreaSearchPart);var intControAreaHeight=(!blnShowControlArea?0:25);if(blnShowControlArea){HXWebJS.Controls._HXWebDataControl_Global._create_popup_dataarea(blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._changesize_popup_dataarea(intLeft,intTop,intWidth,intHeight-intControAreaHeight);HXWebJS.Controls._HXWebDataControl_Global._create_popup_controlarea(blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._changesize_popup_controlarea(intLeft,intTop+intHeight-intControAreaHeight,intWidth,intControAreaHeight,blnShowControlAreaChoosePart,blnShowControlAreaSearchPart,blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.style.display="";HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea.style.display=""}else{HXWebJS.Controls._HXWebDataControl_Global._create_popup_dataarea(blnUseMobileMode);HXWebJS.Controls._HXWebDataControl_Global._changesize_popup_dataarea(intLeft,intTop,intWidth,intHeight);HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.style.display="";HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea.style.display="none"}};HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area=function(){if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea!=null){HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.style.display="none"}if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea!=null){HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea.style.display="none"}};HXWebJS.Controls._HXWebDataControl_Global._onpopup_data_and_control_area_clicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objEventSrcElement=objEventData.target;objEventData.stopPropagation();if(objEventSrcElement.id=="chkbx_hxwebdatacontrol_data_item_is_choosed"){HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process(objEventData);return}var objChoosedTR=null;if(objEventSrcElement.id=="tr_hxwebdatacontrol_dataline_area"){objChoosedTR=objEventSrcElement}if(objEventSrcElement.parentNode.id=="tr_hxwebdatacontrol_dataline_area"){objChoosedTR=objEventSrcElement.parentNode}if(objEventSrcElement.parentNode.parentNode.id=="tr_hxwebdatacontrol_dataline_area"){objChoosedTR=objEventSrcElement.parentNode.parentNode}if(objChoosedTR!=null){HXWebJS.Controls._HXWebDataControl_Global._datarow_clicked(objChoosedTR);return}};HXWebJS.Controls._HXWebDataControl_Global._create_popup_dataarea=function(blnUseMobileMode){if(blnUseMobileMode==null){blnUseMobileMode=false}if(window.document.getElementById("hxwebdatacontrol_popup_dataarea")==null){var objDiv;var strDivHTMLContent='<div id=hxwebdatacontrol_popup_dataarea style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:200px; HEIGHT:144px; POSITION: absolute; overflow:auto; padding:1px 1px 0 0;" onclick="HXWebJS.Controls._HXWebDataControl_Global._onpopup_data_and_control_area_clicked(event);"></div>';objDiv=HXWebJS.DOM.CreateElement(strDivHTMLContent);var sb_temp=new HXWebStringBuilder();sb_temp.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="hxwebdatacontrol_global_datalist_table"');if(blnUseMobileMode){sb_temp.append(' class="mobile_mode"')}sb_temp.append(' style="cursor:pointer;font-size:11px;border-collapse:collapse;" datasrc=\'#hxwebdatacontrol_popup_xml_datalist_object\' onkeydown="HXWebJS.Controls._HXWebDataControl_Global._onkeydownprocess(event);" tabindex="99999">');sb_temp.append('<tbody><tr height=16 id=tr_hxwebdatacontrol_dataline_area class="hxwebdatacontrol_dataline" onmouseover="this.className=\'hxwebdatacontrol_dataline_hover\';" onmouseout="this.className=\'hxwebdatacontrol_dataline\';" >');sb_temp.append('<td align=right id=hxwebdatacontrol_td_col_choose width="26px" style="display:none;PADDING-LEFT:2px;"><input id=chkbx_hxwebdatacontrol_data_item_is_choosed type=checkbox datafld=is_choosed style="padding:0px;margin:0px" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_1 style="PADDING-LEFT: 2px;"><span datafld="KEY" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_2 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="DESC" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_3 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="ATTR_1" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_4 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="ATTR_2" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_5 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="ATTR_3" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_6 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="ATTR_4" /></td>');sb_temp.append('<td id=hxwebdatacontrol_td_col_7 style="BORDER-LEFT: lightgrey 1px solid;PADDING-LEFT: 3px;display:none"><span datafld="ATTR_5" /></td>');sb_temp.append("</tr></tbody></table>");objDiv.innerHTML=sb_temp.toString();document.body.appendChild(objDiv);HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea=objDiv}};HXWebJS.Controls._HXWebDataControl_Global._datarow_clicked=function(objTR){if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype==0){var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;var objXmlRow=objXmlDataIsland.SelectNodes("//RS_ROW")[HXWebJS.DOM.ElementGetBindingRecordNumber(objTR)-1];if(objXmlRow==null){return}HXWebJS.Controls._HXWebDataControl_Global._data_item_choosed_process(objXmlRow)}else{var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;var objXmlRow=objXmlDataIsland.SelectNodes("//RS_ROW")[HXWebJS.DOM.ElementGetBindingRecordNumber(objTR)-1];if(objXmlRow.GetAttributeValue("IS_CHOOSED")=="-1"){objXmlRow.SetAttributeValue("IS_CHOOSED","0")}else{objXmlRow.SetAttributeValue("IS_CHOOSED","-1")}}};HXWebJS.Controls._HXWebDataControl_Global._onkeydownprocess=function(eventObject){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);var intKeyCode_UpArrow=38,intKeyCode_DownArrow=40,intKeyCode_LeftArrow=37,intKeyCode_RightArrow=39;var intKeyCode_EnterKey=13,intKeyCode_EscKey=27;if(objHXEventData.keyCode==intKeyCode_EnterKey||objHXEventData.keyCode==intKeyCode_EscKey||objHXEventData.keyCode==intKeyCode_UpArrow||objHXEventData.keyCode==intKeyCode_DownArrow||objHXEventData.keyCode==intKeyCode_LeftArrow||objHXEventData.keyCode==intKeyCode_RightArrow){objHXEventData.preventDefault();objHXEventData.stopPropagation()}if(objHXEventData.keyCode==intKeyCode_LeftArrow||objHXEventData.keyCode==intKeyCode_RightArrow){HXWebJS.Controls._HXWebDataControl_Global._CancelButton_onclicked();var objInputBox=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox;if(objInputBox!=null){var objTempInputBox=(objHXEventData.keyCode==intKeyCode_LeftArrow?HXWebJS.DOM.FindPreviousInputElement(objInputBox,true):HXWebJS.DOM.FindNextInputElement(objInputBox,true));if(objTempInputBox!=null){objTempInputBox.focus()}}return}if(objHXEventData.keyCode==intKeyCode_EscKey){HXWebJS.Controls._HXWebDataControl_Global._CancelButton_onclicked();return}if(objHXEventData.keyCode==intKeyCode_EnterKey){if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype==0){var intKeyIndex=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index;if(intKeyIndex==null||intKeyIndex<0){return}if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea!=null){var objDataAreaTable=HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_global_datalist_table",HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea);var objTR=objDataAreaTable.tBodies[intKeyIndex].firstChild;HXWebJS.Controls._HXWebDataControl_Global._datarow_clicked(objTR)}}else{HXWebJS.Controls._HXWebDataControl_Global._OKButton_onclicked()}return}if(objHXEventData.keyCode==intKeyCode_UpArrow||objHXEventData.keyCode==intKeyCode_DownArrow){var objContainerDiv=HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea;if(objContainerDiv==null){return}var objDataAreaTable=HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_global_datalist_table",objContainerDiv);var intItemsCount=objDataAreaTable.tBodies.length;if(intItemsCount==0){return}var intKeyIndex=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index;if(intKeyIndex==null||intKeyIndex<0){HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index=0;objDataAreaTable.tBodies[0].firstChild.className="hxwebdatacontrol_dataline_hover";return}else{var blnIsToUp=(objHXEventData.keyCode==intKeyCode_UpArrow);if(blnIsToUp&&intKeyIndex==0){return}if(!blnIsToUp&&intKeyIndex==intItemsCount-1){return}objDataAreaTable.tBodies[intKeyIndex].firstChild.className="hxwebdatacontrol_dataline";if(blnIsToUp){intKeyIndex--}else{intKeyIndex++}HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index=intKeyIndex;var objChoosedTR=objDataAreaTable.tBodies[intKeyIndex].firstChild;objChoosedTR.className="hxwebdatacontrol_dataline_hover";if(blnIsToUp){if(objChoosedTR.offsetTop<objContainerDiv.scrollTop){objContainerDiv.scrollTop=objChoosedTR.offsetTop}}else{if(objChoosedTR.offsetTop+objChoosedTR.offsetHeight>objContainerDiv.scrollTop+objContainerDiv.offsetHeight){objContainerDiv.scrollTop=(objChoosedTR.offsetTop+objChoosedTR.offsetHeight)-objContainerDiv.offsetHeight}}}}};HXWebJS.Controls._HXWebDataControl_Global._data_item_choosed_process=function(objXmlRow,objXmlNodeList){var str_webdatacontrol_type=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_type;var str_webdatacontrol_id=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id;var obj_webdatacontrol_textbox=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox;var obj_webdatacontrol_dropdownbtn=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn;var fn_datachoosed_callback=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_data_choosed;HXWebJS.Controls._HXWebDataControl_Global._clear_current_active_control();var objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA></RS_DATA>");var objHXXmlRootNode=objXmlDoc.GetRootXmlNode();if(objXmlRow!=null){objHXXmlRootNode.AppendChild(objXmlRow.CloneNode())}else{for(var i=0;i<objXmlNodeList.length;i++){objHXXmlRootNode.AppendChild(objXmlNodeList[i].CloneNode())}}fn_datachoosed_callback(str_webdatacontrol_id,obj_webdatacontrol_textbox,obj_webdatacontrol_dropdownbtn,objHXXmlRootNode)};HXWebJS.Controls._HXWebDataControl_Global._format_display_columns=function(strColumnWidths){var objTable=HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.firstChild;var objContainer;if(HXWebJS.Core.Browser.IsIE==true){objTable.dataSrc="";objTable.refresh();objContainer=objTable}else{objContainer=HXWebJS.Xml._XmlDataIsland._binding_table_template_cache_process(objTable)}var objTempTDColChoose=HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_td_col_choose",objContainer);if(objTempTDColChoose!=null){if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype==0){objTempTDColChoose.style.display="none"}else{objTempTDColChoose.style.display=""}}if(strColumnWidths==null||strColumnWidths==""){strColumnWidths="100%"}if(strColumnWidths.charAt(strColumnWidths.length-1)==";"){strColumnWidths=strColumnWidths.substring(0,strColumnWidths.length-1)}var strColWidth1="0",strColWidth2="0",strColWidth3="0",strColWidth4="0",strColWidth5="0",strColWidth6="0",strColWidth7="0";var strArrary=strColumnWidths.split(";");for(var i=0;i<strArrary.length;i++){eval("strColWidth"+(i+1)+'="'+strArrary[i]+'"')}HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,1,strColWidth1,true);HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,2,strColWidth2,(strColWidth1=="0"||strColWidth1=="0%"?true:false));HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,3,strColWidth3,false);HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,4,strColWidth4,false);HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,5,strColWidth5,false);HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,6,strColWidth6,false);HXWebJS.Controls._HXWebDataControl_Global._set_column_width(objContainer,7,strColWidth7,false);if(HXWebJS.Core.Browser.IsIE==true){objTable.dataSrc="#hxwebdatacontrol_popup_xml_datalist_object";objTable.refresh()}};HXWebJS.Controls._HXWebDataControl_Global._set_column_width=function(objContainer,ColumnId,strWidthRate,blnHideLeftColumnBorder){var objTDs=HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_td_col_"+ColumnId,objContainer);if(objTDs==null){return}if(objTDs.length==null){if(strWidthRate=="0"||strWidthRate=="0%"){objTDs.style.display="none"}else{objTDs.width=strWidthRate;objTDs.style.display="";objTDs.style.borderLeftStyle=(blnHideLeftColumnBorder?"none":"solid")}}else{for(var i=0;i<objTDs.length;i++){var objTD=objTDs[i];if(strWidthRate=="0"||strWidthRate=="0%"){objTD.style.display="none"}else{objTD.width=strWidthRate;objTD.style.display="";objTDs.style.borderLeftStyle=(blnHideLeftColumnBorder?"none":"solid")}}}};HXWebJS.Controls._HXWebDataControl_Global._create_xml_datalist_object=function(){if(window.document.getElementById("hxwebdatacontrol_popup_xml_datalist_object")==null){var strXmlHTMLContent="<xml id=hxwebdatacontrol_popup_xml_datalist_object></xml>";var objXml=HXWebJS.DOM.CreateElement(strXmlHTMLContent);document.body.appendChild(objXml);HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxwebdatacontrol_popup_xml_datalist_object")}};HXWebJS.Controls._HXWebDataControl_Global._create_popup_controlarea=function(blnUseMobileMode){if(blnUseMobileMode==null){blnUseMobileMode=false}var objPopupControlAreaElement=window.document.getElementById("hxwebdatacontrol_popup_controlarea");if(objPopupControlAreaElement==null){var strDivHTMLContent='<div id=hxwebdatacontrol_popup_controlarea style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:200px; HEIGHT:30px; POSITION: absolute; " onclick=" HXWebJS.Controls._HXWebDataControl_Global._onpopup_data_and_control_area_clicked(event)"></div>';var objDiv=HXWebJS.DOM.CreateElement(strDivHTMLContent);var sb_temp=new HXWebStringBuilder();if(blnUseMobileMode){sb_temp.append('<input id="btn_hxwebcomboboxcontrol__clear" type=button class=hxwebdatacontrol_button style="POSITION:absolute;width:50px;left:2px;top:2px;display:none;" value="Clear" onclick="HXWebJS.Controls.ComboBox._InternalFunctions._ClearButton_onclicked(event)" datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_BTN_CLEAR />');sb_temp.append('<div id=hxwebdatacontrol_controlarea_choose_part style="position:absolute;left:0px;top:0px;">');sb_temp.append('<input type=checkbox id=chkbx_hxwebdatacontrol_controlarea_selectall style="padding:0;position:absolute;left:2px;top:0px;" onclick=" HXWebJS.Controls._HXWebDataControl_Global._select_all(event)" />');sb_temp.append('<input type=button class=hxwebdatacontrol_button style="position:absolute;left:24px;width:50px;top:2px;height:20px;" value="Ok" onclick="HXWebJS.Controls._HXWebDataControl_Global._OKButton_onclicked()"  datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_BTN_OK>');sb_temp.append('<input type=button class=hxwebdatacontrol_button style="position:absolute;left:80px;width:50px;top:2px;height:20px;" value="Cancel" onclick="HXWebJS.Controls._HXWebDataControl_Global._CancelButton_onclicked()"  datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_BTN_CANCEL>');sb_temp.append('</div><div id=hxwebdatacontrol_controlarea_search_part style="position:absolute;width:200px;right:2px;top:0px;text-align:right;">');sb_temp.append('<span style="margin-left:2px;" datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=FIRST_RECORD_ON_PAGE></span><span style="margin-left:2px;margin-right:2px;">~</span><span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LAST_RECORD_ON_PAGE ></span>');sb_temp.append('<img class=hxicon_showmore2 style="vertical-align:middle;margin-left:2px;margin-right:2px;"src="../images/hxpub_clear.gif" onclick="HXWebJS.Controls._HXWebDataControl_Global._show_more_content()" />');sb_temp.append("<span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_TEXT_OF>Of</span>&nbsp;<span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=TOTAL_RECORDS_COUNT></span>");sb_temp.append('<input class=hxinputbox id=hxwebdatacontrol_controlarea_search_part_keyword style="width:40px;height:20px;margin-left:3px;margin-top:2px;_margin-top:1px;padding-top:2px;border:solid 1px gray;" onkeyup="HXWebJS.Controls._HXWebDataControl_Global._searchkeyword_keypressed(event)" />');sb_temp.append('<img src="../images/hxpub_clear.gif" style="margin-left:3px;padding:0;vertical-align:middle;" class=hxicon_search ontouchend="HXWebJS.Controls._HXWebDataControl_Global._SearchImageButton_OnClickedOrTouched(event);" ontouchstart="event.preventDefault()" onclick="HXWebJS.Controls._HXWebDataControl_Global._SearchImageButton_OnClickedOrTouched(event)" />');sb_temp.append("</div>")}else{sb_temp.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="hxwebdatacontrol_global_controlarea_table" style="cursor:pointer;font-size:11px;border-collapse:collapse;">');sb_temp.append('<tr><td align=left id=hxwebdatacontrol_controlarea_choose_part style="vertical-align:top;padding:0px">');sb_temp.append('<input type=checkbox id=chkbx_hxwebdatacontrol_controlarea_selectall style="padding:0;margin-left:2px;vertical-align:top;" onclick=" HXWebJS.Controls._HXWebDataControl_Global._select_all(event)" />');sb_temp.append('<input type=button class=hxwebdatacontrol_button style="width:45px;margin-left:2px;margin-top:2px;" value="Ok" onclick="HXWebJS.Controls._HXWebDataControl_Global._OKButton_onclicked()"  datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_BTN_OK>');sb_temp.append('<input type=button class=hxwebdatacontrol_button style="width:45px;margin-left:2px;margin-top:2px;" value="Cancel" onclick="HXWebJS.Controls._HXWebDataControl_Global._CancelButton_onclicked()"  datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_BTN_CANCEL>');sb_temp.append('</td><td id=hxwebdatacontrol_controlarea_search_part align=right style="padding:0px;padding-right:2px;vertical-align:top;padding-top:3px;">');sb_temp.append('<span style="margin-left:2px;" datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=FIRST_RECORD_ON_PAGE></span><span style="margin-left:2px;margin-right:2px;">~</span><span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LAST_RECORD_ON_PAGE ></span>');sb_temp.append('<img class=hxbtn_showmore style="vertical-align:middle;margin-left:2px;margin-right:2px;"src="../images/hxpub_clear.gif" onclick="HXWebJS.Controls._HXWebDataControl_Global._show_more_content()" />');sb_temp.append("<span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=LBL_TEXT_OF>Of</span>&nbsp;<span datasrc=#hxwebdatacontrol_popup_xml_configdata_object datafld=TOTAL_RECORDS_COUNT></span>");sb_temp.append('<input class=hxinputbox id=hxwebdatacontrol_controlarea_search_part_keyword style="width:40px;height:17px;margin-left:3px;" onkeyup="HXWebJS.Controls._HXWebDataControl_Global._searchkeyword_keypressed(event)" />');sb_temp.append('<img src="../images/hxpub_clear.gif" style="margin-left:3px;padding:0;margin-right:3px;vertical-align:middle;" class=hxbtn_search ontouchend="HXWebJS.Controls._HXWebDataControl_Global._SearchImageButton_OnClickedOrTouched(event);" ontouchstart="event.preventDefault()" onclick="HXWebJS.Controls._HXWebDataControl_Global._SearchImageButton_OnClickedOrTouched(event)" />');sb_temp.append("</td></tr></table>")}objDiv.innerHTML=sb_temp.toString();document.body.appendChild(objDiv);HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea=objDiv}else{HXWebJS.DOM.FindFirstElementById("chkbx_hxwebdatacontrol_controlarea_selectall",objPopupControlAreaElement,"input").checked=false;HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_controlarea_search_part_keyword",objPopupControlAreaElement,"input").value=""}};HXWebJS.Controls._HXWebDataControl_Global._select_all=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objCheckBox=objEventData.target;var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;var objXmlNodeList=objXmlDataIsland.SelectNodes("//RS_ROW");var strTemp=(objCheckBox.checked?"-1":"0");for(var i=0;i<objXmlNodeList.length;i++){objXmlNodeList[i]._SetAttributeValueOnly("IS_CHOOSED",strTemp)}var elementList=HXWebJS.DOM.FindElementsById("chkbx_hxwebdatacontrol_data_item_is_choosed",HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea,"input");for(var i=0;i<elementList.length;i++){elementList[i].checked=objCheckBox.checked}};HXWebJS.Controls._HXWebDataControl_Global._begin_search=function(blnShowMoreContent,strSearchKeyWord){if(blnShowMoreContent==null){blnShowMoreContent=false}var objXmlConfigData=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object;if(strSearchKeyWord==null){strSearchKeyWord=objXmlConfigData.SelectSingleNode("//RS_ROW").GetAttributeValue("SEARCH_KEY_WORD")}var strSearchFromBegin=objXmlConfigData.SelectSingleNode("//RS_ROW").GetAttributeValue("SEARCH_FROM_BEGIN");var blnSearchFromBegin=(strSearchFromBegin!=""&&blnSearchFromBegin!="0"?true:false);var strCurrentSelectedValues="";if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_choosetype!=0){var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;var objXmlNodeList=objXmlDataIsland.SelectNodes("//RS_ROW[@IS_CHOOSED !='0']");for(var i=0;i<objXmlNodeList.length;i++){strCurrentSelectedValues+=(strCurrentSelectedValues==""?"":",")+objXmlNodeList[i].GetAttributeValue("KEY")}}var fn_search_data_again=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_callback_func_search_data_again;fn_search_data_again(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id,HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox,HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn,blnShowMoreContent,strSearchKeyWord,blnSearchFromBegin,strCurrentSelectedValues)};HXWebJS.Controls._HXWebDataControl_Global._show_more_content=function(){HXWebJS.Controls._HXWebDataControl_Global._begin_search(true)};HXWebJS.Controls._HXWebDataControl_Global._searchkeyword_keypressed=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);objEventData.stopPropagation();var strSearchKeyWord=objEventData.target.value;var objXmlConfigData=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object;if(objEventData.keyCode==13){HXWebJS.Controls._HXWebDataControl_Global._begin_search()}else{if(objXmlConfigData.SelectSingleNode("//RS_ROW").GetAttributeValue("SEARCH_KEY_WORD")!=strSearchKeyWord){objXmlConfigData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_KEY_WORD",strSearchKeyWord);if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_quicksearchoption==1){HXWebJS.Controls._HXWebDataControl_Global._begin_search()}}}};HXWebJS.Controls._HXWebDataControl_Global._OKButton_onclicked=function(){var objXmlDataIsland=HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_datalist_object;var objXmlNodeList=objXmlDataIsland.SelectNodes("//RS_ROW[@IS_CHOOSED !='0']");HXWebJS.Controls._HXWebDataControl_Global._data_item_choosed_process(null,objXmlNodeList)};HXWebJS.Controls._HXWebDataControl_Global._CancelButton_onclicked=function(){HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area()};HXWebJS.Controls._HXWebDataControl_Global._SearchImageButton_OnClickedOrTouched=function(eventObject){var objEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);if(objEventData.type=="touchend"){objEventData.preventDefault()}HXWebJS.Controls._HXWebDataControl_Global._begin_search(null,document.getElementById("hxwebdatacontrol_controlarea_search_part_keyword").value)};HXWebJS.Controls._HXWebDataControl_Global._create_xml_configdata_object=function(){if(window.document.getElementById("hxwebdatacontrol_popup_xml_configdata_object")==null){var strXmlHTMLContent="<xml id=hxwebdatacontrol_popup_xml_configdata_object></xml>";var objXml=HXWebJS.DOM.CreateElement(strXmlHTMLContent);document.body.appendChild(objXml);var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxwebdatacontrol_popup_xml_configdata_object");objHXXmlDoc.ReloadXML('<RS_DATA><RS_ROW SEARCH_KEY_WORD="" SEARCH_FROM_BEGIN="" TOTAL_RECORDS_COUNT="" FIRST_RECORD_ON_PAGE="" LAST_RECORD_ON_PAGE="" LBL_BTN_OK="OK" LBL_BTN_CANCEL="Cancel" LBL_TEXT_OF="Of" LBL_BTN_CLEAR="Clear" /></RS_DATA>');var arrResStringOKCancelOf=HXWebJS.Controls._InternalFunctions._get_res_string_array__ok_cancel();objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_BTN_OK",arrResStringOKCancelOf[0]);objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_BTN_CANCEL",arrResStringOKCancelOf[1]);objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_TEXT_OF",arrResStringOKCancelOf[2]);if(arrResStringOKCancelOf.length>3){objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_BTN_CLEAR",arrResStringOKCancelOf[3])}HXWebJS.Controls._HXWebDataControl_Global._global_popup_xml_configdata_object=objHXXmlDoc}};HXWebJS.Controls._HXWebDataControl_Global._changesize_popup_dataarea=function(intLeft,intTop,intWidth,intHeight){if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea!=null){var objDiv=HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea;objDiv.style.left=intLeft+"px";objDiv.style.top=intTop+"px";objDiv.style.width=intWidth+"px";objDiv.style.height=intHeight+"px"}};HXWebJS.Controls._HXWebDataControl_Global._changesize_popup_controlarea=function(intLeft,intTop,intWidth,intHeight,blnShowControlAreaChoosePart,blnShowControlAreaSearchPart,blnUseMobileMode){if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea!=null){var objDiv=HXWebJS.Controls._HXWebDataControl_Global._global_popup_controlarea;objDiv.style.left=intLeft+"px";objDiv.style.top=intTop+"px";objDiv.style.width=intWidth+"px";objDiv.style.height=intHeight+"px";HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_controlarea_choose_part",objDiv).style.display=(blnShowControlAreaChoosePart?"":"none");HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_controlarea_search_part",objDiv).style.display=(blnShowControlAreaSearchPart?"":"none");var objClearButton=HXWebJS.DOM.FindFirstElementById("btn_hxwebcomboboxcontrol__clear",objDiv);if(objClearButton!=null){objClearButton.style.display=(blnUseMobileMode&&!blnShowControlAreaChoosePart?"":"none")}}};HXWebJS.Controls._HXWebDataControl_Global._onclickprocess_outsidedropdownarea=function(objEventData){if(!HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea){return}if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.style.display=="none"){return}var objEventSrcElement=objEventData.target;if(objEventSrcElement!==HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox&&objEventSrcElement!==HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn){if(objEventData.type=="click"){HXWebJS.Controls._HXWebDataControl_Global._clear_current_active_control()}else{if(objEventData.type=="touchend"){var blnIsEventSrcElementInPopupDataArea,blnIsEventSrcElementInPopupControlArea;var objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebdatacontrol_popup_dataarea");if(objPopupContainerDiv==null){blnIsEventSrcElementInPopupDataArea=false}else{blnIsEventSrcElementInPopupDataArea=HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objEventSrcElement)}objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebdatacontrol_popup_controlarea");if(objPopupContainerDiv==null){blnIsEventSrcElementInPopupControlArea=false}else{blnIsEventSrcElementInPopupControlArea=HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objEventSrcElement)}if(!blnIsEventSrcElementInPopupDataArea&&!blnIsEventSrcElementInPopupControlArea){HXWebJS.Controls._HXWebDataControl_Global._clear_current_active_control();return}}}}};HXWebJS.Controls.ComboBox={};HXWebComboBoxControl=HXWebJS.Controls.ComboBox;HXWebJS.Controls.ComboBox._InternalFunctions={};HXWebJS.Controls.ComboBox.register=function(str_webdatacontrol_id,str_dropdown_btn_id,str_content_type,int_choose_type,int_is_paging,int_page_size,int_dropdownbox_width,int_dropdownbox_height,str_dropdown_columns_width_rate,fn_filter_data_callback,fn_datachoosed_callback,blnOverwriteExist,fn_oninit_data_callback){if(str_webdatacontrol_id==str_dropdown_btn_id){alert("str_webdatacontrol_id可以没有对应的真实inputbox Html元素，但不能和str_dropdown_btn_id参数值相同（下拉选择框输入html元素不能和下拉选择框触发按钮html元素相同）！")}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info={}}if(blnOverwriteExist==null){blnOverwriteExist=false}var c=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(!c||blnOverwriteExist){var c=new Object();c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,content_type:str_content_type,choose_type:int_choose_type,is_paging:int_is_paging,page_size:int_page_size,new_page_size:int_page_size,limit_in_list:true,dropdownbox_width:int_dropdownbox_width,dropdownbox_height:int_dropdownbox_height,columns_width_rate:str_dropdown_columns_width_rate,search_content_type:HXWebJS.Controls.ComboBox._InternalFunctions._get_search_content_type(str_dropdown_columns_width_rate),binding_datasrc_id:null,binding_datafld_for_key:null,binding_datafld_for_desc:null,binding_datafld_for_attr_1:null,binding_datafld_for_attr_2:null,binding_datafld_for_attr_3:null,binding_datafld_for_attr_4:null,binding_datafld_for_attr_5:null,oninit_callback_func:fn_oninit_data_callback,filter_data_callback_func:fn_filter_data_callback,datachoosed_callback_func:fn_datachoosed_callback,is_use_local_list_data:0,predefined_dropdownlist_values:"",get_local_list_data_callback_func:null,predefined_hxmd_dropdownlist_code:null,predefined_hxmd_dropdownlist_show_blank_row:"no",predefined_hxmd_dropdownlist_blank_row_caption:"",is_allow_quick_search_per_char:0,is_auto_completion_hint_search_from_begin:false,is_search_from_begin:false,extend_webpart_type:"",is_use_autocompletion_hint:1};HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=c}};HXWebJS.Controls.ComboBox.unregister=function(str_webdatacontrol_id){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var c=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(c==null){return}HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=null};HXWebJS.Controls.ComboBox.set_predefined_dropdownlist_code=function(str_webdatacontrol_id,str_dropdownlist_code,str_show_blank_row,str_blank_row_caption){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.predefined_hxmd_dropdownlist_code=str_dropdownlist_code;if(str_show_blank_row==null){str_show_blank_row="no"}if(str_blank_row_caption==null||str_blank_row_caption==""){str_show_blank_row="no"}objActiveElementInfo.predefined_hxmd_dropdownlist_show_blank_row=str_show_blank_row;objActiveElementInfo.predefined_hxmd_dropdownlist_blank_row_caption=str_blank_row_caption};HXWebJS.Controls.ComboBox.set_paging_option=function(str_webdatacontrol_id,blnIsPaging){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(blnIsPaging==null){blnIsPaging=1}objActiveElementInfo.is_paging=(blnIsPaging?1:0)};HXWebJS.Controls.ComboBox.set_predefined_dropdownlist_values=function(str_webdatacontrol_id,str_dropdownlist_values){if(str_dropdownlist_values==null||str_dropdownlist_values==""){return}if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.is_use_local_list_data=1;objActiveElementInfo.predefined_dropdownlist_values=str_dropdownlist_values;objActiveElementInfo.is_paging=0;var blnDescColumnUsed=(str_dropdownlist_values.indexOf("=")>0);objActiveElementInfo.columns_width_rate=(blnDescColumnUsed?"50%;50%":"100%")};HXWebJS.Controls.ComboBox.set_extend_webpart_type=function(str_webdatacontrol_id,strExtendWebPartType){if(strExtendWebPartType==null||strExtendWebPartType==""){return}if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.extend_webpart_type=strExtendWebPartType};HXWebJS.Controls.ComboBox.set_dropdownbox_size=function(str_webdatacontrol_id,int_width,int_height){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.dropdownbox_width=int_width;objActiveElementInfo.dropdownbox_height=int_height};HXWebJS.Controls.ComboBox.set_binding_information=function(str_webdatacontrol_id,str_binding_datasrc_id,str_binding_datafield_for_key,str_binding_datafield_for_desc,str_binding_datafield_for_attr1,str_binding_datafield_for_attr2,str_binding_datafield_for_attr3,str_binding_datafield_for_attr4,str_binding_datafield_for_attr5){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.binding_datasrc_id=str_binding_datasrc_id;objActiveElementInfo.binding_datafld_for_key=str_binding_datafield_for_key;objActiveElementInfo.binding_datafld_for_desc=str_binding_datafield_for_desc;objActiveElementInfo.binding_datafld_for_attr_1=str_binding_datafield_for_attr1;objActiveElementInfo.binding_datafld_for_attr_2=str_binding_datafield_for_attr2;objActiveElementInfo.binding_datafld_for_attr_3=str_binding_datafield_for_attr3;objActiveElementInfo.binding_datafld_for_attr_4=str_binding_datafield_for_attr4;objActiveElementInfo.binding_datafld_for_attr_5=str_binding_datafield_for_attr5};HXWebJS.Controls.ComboBox.set_autocompletion_hint=function(str_webdatacontrol_id,bln_use_autocompletion_hint,bln_search_from_begin){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(bln_use_autocompletion_hint==null){bln_use_autocompletion_hint=true}objActiveElementInfo.is_use_autocompletion_hint=(bln_use_autocompletion_hint?1:0);if(bln_search_from_begin==null){bln_search_from_begin=false}objActiveElementInfo.is_auto_completion_hint_search_from_begin=bln_search_from_begin;objActiveElementInfo.is_search_from_begin=bln_search_from_begin};HXWebJS.Controls.ComboBox.set_limit_in_list=function(str_webdatacontrol_id,bln_limit_in_list){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(bln_limit_in_list==null){bln_limit_in_list=true}objActiveElementInfo.limit_in_list=bln_limit_in_list};HXWebJS.Controls.ComboBox.set_extend_webpart_html_id=function(str_webdatacontrol_id,strExtendWebPartHtmlId){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.extend_web_part_html_id=strExtendWebPartHtmlId};HXWebJS.Controls.ComboBox.set_customized_search_columns=function(str_webdatacontrol_id,strCustomizedSearchColumns){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.search_content_type=strCustomizedSearchColumns};HXWebJS.Controls.ComboBox.set_quick_search_per_char_mode=function(str_webdatacontrol_id,bln_enable_per_char_mode){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(bln_enable_per_char_mode==null){bln_enable_per_char_mode=true}objActiveElementInfo.is_allow_quick_search_per_char=(bln_enable_per_char_mode?1:0)};HXWebJS.Controls.ComboBox.set_pagexmlsvc_assembly_and_class=function(str_webdatacontrol_id,str_webdatalist_pagexmlsvc_assemblyname,str_webdatalist_pagexmlsvc_classname){var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];objActiveElementInfo.webdatalist_pagexmlsvc_assemblyname=str_webdatalist_pagexmlsvc_assemblyname;objActiveElementInfo.webdatalist_pagexmlsvc_classname=str_webdatalist_pagexmlsvc_classname};HXWebJS.Controls.ComboBox.set_mobile_mode=function(str_webdatacontrol_id,blnUseMobileMode){if(blnUseMobileMode==null){blnUseMobileMode=true}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];objActiveElementInfo.use_mobile_mode=blnUseMobileMode};HXWebJS.Controls.ComboBox.set_options=function(str_webdatacontrol_id,options){if(options==null){return}if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}if(options.content_type!=null){objActiveElementInfo.content_type=options.content_type}if(options.choose_type!=null){objActiveElementInfo.choose_type=options.choose_type}if(options.is_paging!=null){objActiveElementInfo.is_paging=options.is_paging}if(options.page_size!=null){objActiveElementInfo.page_size=options.page_size}if(options.limit_in_list!=null){objActiveElementInfo.limit_in_list=options.limit_in_list}if(options.dropdownbox_width!=null){objActiveElementInfo.dropdownbox_width=options.dropdownbox_width}if(options.dropdownbox_height!=null){objActiveElementInfo.dropdownbox_height=options.dropdownbox_height}if(options.columns_width_rate!=null){objActiveElementInfo.columns_width_rate=options.columns_width_rate}if(options.binding_datasrc_id!=null){objActiveElementInfo.binding_datasrc_id=options.binding_datasrc_id}if(options.binding_datafld_for_key!=null){objActiveElementInfo.binding_datafld_for_key=options.binding_datafld_for_key}if(options.binding_datafld_for_desc!=null){objActiveElementInfo.binding_datafld_for_desc=options.binding_datafld_for_desc}if(options.binding_datafld_for_attr_1!=null){objActiveElementInfo.binding_datafld_for_attr_1=options.binding_datafld_for_attr_1}if(options.binding_datafld_for_attr_2!=null){objActiveElementInfo.binding_datafld_for_attr_2=options.binding_datafld_for_attr_2}if(options.binding_datafld_for_attr_3!=null){objActiveElementInfo.binding_datafld_for_attr_3=options.binding_datafld_for_attr_3}if(options.binding_datafld_for_attr_4!=null){objActiveElementInfo.binding_datafld_for_attr_4=options.binding_datafld_for_attr_4}if(options.binding_datafld_for_attr_5!=null){objActiveElementInfo.binding_datafld_for_attr_5=options.binding_datafld_for_attr_5}if(options.oninit_callback_func!=null){objActiveElementInfo.oninit_callback_func=options.oninit_callback_func}if(options.filter_data_callback_func!=null){objActiveElementInfo.filter_data_callback_func=options.filter_data_callback_func}if(options.datachoosed_callback_func!=null){objActiveElementInfo.datachoosed_callback_func=options.datachoosed_callback_func}if(options.is_use_local_list_data!=null){objActiveElementInfo.is_use_local_list_data=options.is_use_local_list_data}if(options.predefined_dropdownlist_values!=null){objActiveElementInfo.predefined_dropdownlist_values=options.predefined_dropdownlist_values}if(options.get_local_list_data_callback_func!=null){objActiveElementInfo.get_local_list_data_callback_func=options.get_local_list_data_callback_func}if(options.predefined_hxmd_dropdownlist_code!=null){objActiveElementInfo.predefined_hxmd_dropdownlist_code=options.predefined_hxmd_dropdownlist_code}if(options.predefined_hxmd_dropdownlist_show_blank_row!=null){objActiveElementInfo.predefined_hxmd_dropdownlist_show_blank_row=options.predefined_hxmd_dropdownlist_show_blank_row}if(options.predefined_hxmd_dropdownlist_blank_row_caption!=null){objActiveElementInfo.predefined_hxmd_dropdownlist_blank_row_caption=options.predefined_hxmd_dropdownlist_blank_row_caption}if(options.is_allow_quick_search_per_char!=null){objActiveElementInfo.is_allow_quick_search_per_char=options.is_allow_quick_search_per_char}if(options.is_auto_completion_hint_search_from_begin!=null){objActiveElementInfo.is_auto_completion_hint_search_from_begin=options.is_auto_completion_hint_search_from_begin}if(options.is_search_from_begin!=null){objActiveElementInfo.is_search_from_begin=options.is_search_from_begin}if(options.extend_webpart_type!=null){objActiveElementInfo.extend_webpart_type=options.extend_webpart_type}if(options.extend_web_part_html_id!=null){objActiveElementInfo.extend_web_part_html_id=options.extend_web_part_html_id}if(options.is_use_autocompletion_hint!=null){objActiveElementInfo.is_use_autocompletion_hint=options.is_use_autocompletion_hint}if(options.use_mobile_mode!=null){objActiveElementInfo.use_mobile_mode=options.use_mobile_mode}};HXWebJS.Controls.ComboBox.register_callback_for_get_local_list_data=function(str_webdatacontrol_id,fn_get_local_list_data_callback){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.is_paging=0;objActiveElementInfo.is_use_local_list_data=1;objActiveElementInfo.get_local_list_data_callback_func=fn_get_local_list_data_callback};HXWebJS.Controls.ComboBox.is_combobox_popuparea_display=function(str_webdatacontrol_id){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return false}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return false}if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea==null){return false}return(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea.style.display=="")};HXWebJS.Controls.ComboBox.set_combobox_popuparea_active_for_keyboard=function(str_webdatacontrol_id){if(HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea==null){return}var objDataAreaTable=HXWebJS.DOM.FindFirstElementById("hxwebdatacontrol_global_datalist_table",HXWebJS.Controls._HXWebDataControl_Global._global_popup_dataarea);if(objDataAreaTable==null){return}objDataAreaTable.focus();var intKeyIndex=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index;if(intKeyIndex!=null&&intKeyIndex>0){objDataAreaTable.tBodies[intKeyIndex].firstChild.className="hxwebdatacontrol_dataline"}HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_current_index=0;objDataAreaTable.tBodies[0].firstChild.className="hxwebdatacontrol_dataline_hover"};HXWebJS.Controls.ComboBox.set_oninit_callback_func=function(str_webdatacontrol_id,fnOnInitCallback){if(str_webdatacontrol_id==null){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.oninit_callback_func=fnOnInitCallback};HXWebJS.Controls.ComboBox.demo__callback_func__get_local_list_data=function(str_webdatacontrol_id){alert("the function is just used to show the parameters of callback function of get_local_list_data().")};HXWebJS.Controls.ComboBox.demo__callback_func__get_filter_data=function(str_webdatacontrol_id,objInputBox,objDropDownButton){alert("the function is just used to show the parameters of callback function of get_filter_data().")};HXWebJS.Controls.ComboBox.demo__callback_func__datachoosed=function(str_webdatacontrol_id,objInputBox,objDropDownButton,objXmlElementForChoosedData){alert("the function is just used to show the parameters of callback function of datachoosed().")};HXWebComboBoxControl._keyup_input_text_inquiry_info={is_current_inquiring:false,current_inquiring_text:"",need_next_inquiring:false,next_keyup_input_text:""};HXWebJS.Controls.ComboBox._InternalFunctions._get_search_content_type=function(strColumnWidths){if(strColumnWidths==null||strColumnWidths==""){strColumnWidths="100%"}if(strColumnWidths.charAt(strColumnWidths.length-1)==";"){strColumnWidths=strColumnWidths.substring(0,strColumnWidths.length-1)}var sb_temp=new HXWebStringBuilder();var strArrary=strColumnWidths.split(";");var blnHasColumnExist=false;if(!(strArrary[0]=="0"||strArrary[0]=="0%")){sb_temp.append("KEY");blnHasColumnExist=true}if(strArrary.length>1&&!(strArrary[1]=="0"||strArrary[1]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("DESC");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>2&&!(strArrary[2]=="0"||strArrary[2]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_1");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>3&&!(strArrary[3]=="0"||strArrary[3]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_2");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>4&&!(strArrary[4]=="0"||strArrary[4]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_3");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>5&&!(strArrary[5]=="0"||strArrary[5]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_4");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>6&&!(strArrary[6]=="0"||strArrary[6]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_5");if(!blnHasColumnExist){blnHasColumnExist=true}}return sb_temp.toString()};HXWebJS.Controls.ComboBox._InternalFunctions._onclickprocess=function(objEventData){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_webdatacontrol_id=null;for(key in HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[key]==null){continue}if(HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}HXWebJS.Controls.ComboBox._InternalFunctions._show_popup_area(str_webdatacontrol_id,objEventSrcElement)};HXWebJS.Controls.ComboBox._InternalFunctions._show_popup_area=function(str_webdatacontrol_id,objButtonForChoosing){if(str_webdatacontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}var objInputTextBox=HXWebJS.Controls.ComboBox._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,objButtonForChoosing);HXWebJS.Controls._HXWebDataControl_Global._set_current_active_control("hxcombobox",str_webdatacontrol_id,objInputTextBox,objButtonForChoosing,objActiveElementInfo.choose_type,objActiveElementInfo.is_allow_quick_search_per_char,HXWebJS.Controls.ComboBox._InternalFunctions._data_choosed_process,HXWebJS.Controls.ComboBox._InternalFunctions._search_data_again,objActiveElementInfo.is_search_from_begin,objActiveElementInfo.use_mobile_mode);objActiveElementInfo.new_page_size=objActiveElementInfo.page_size;HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=false;HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text="";HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=false;HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text="";var str_org_selected_values="";if(objActiveElementInfo.choose_type!=0){str_org_selected_values=HXWebJS.Controls.ComboBox._InternalFunctions._get_org_selected_values(objActiveElementInfo,objInputTextBox,objButtonForChoosing)}HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data(objActiveElementInfo,objInputTextBox,objButtonForChoosing,false,"",true,str_org_selected_values,true)};HXWebJS.Controls.ComboBox._InternalFunctions._get_customized_filter_data=function(objActiveElementInfo,objInputBox,objDropDownButton){if(objActiveElementInfo.oninit_callback_func!=null){if(objActiveElementInfo.oninit_callback_func(objActiveElementInfo.webdatacontrol_id,objInputBox,objDropDownButton,objActiveElementInfo)!=true){return}}var strCustomizedFilterData="";if(HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.filter_data_callback_func)){try{strCustomizedFilterData=objActiveElementInfo.filter_data_callback_func(objActiveElementInfo.webdatacontrol_id,objInputBox,objDropDownButton,objActiveElementInfo.extend_webpart_type);if(strCustomizedFilterData==null){return null}}catch(e){alert("hxcombobox filter_data_callback_func call failed. "+e.description);return null}}if(objActiveElementInfo.predefined_hxmd_dropdownlist_code!=null&&objActiveElementInfo.predefined_hxmd_dropdownlist_code!=""){var sb_XmlDropdownListPart=new HXWebStringBuilder();sb_XmlDropdownListPart.append('<RS_ROW DROPDOWNLIST_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_hxmd_dropdownlist_code)+'"');sb_XmlDropdownListPart.append(' CURRENT_PAGE_ASSEMBLY_CLASS="'+HXWebJS.Xml.MarkXMLSpecialChars(mstrPageXmlServiceClassName)+'"');sb_XmlDropdownListPart.append(' SHOW_BLANK_ROW="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_hxmd_dropdownlist_show_blank_row)+'"');sb_XmlDropdownListPart.append(' BLANK_ROW_CAPTION="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_hxmd_dropdownlist_blank_row_caption)+'"');sb_XmlDropdownListPart.append(" />");var strAllXmlData=HXWebJS.Xml.BuildAllXmlDatas("dropdownlist",sb_XmlDropdownListPart.toString(),"customized_filter_data",strCustomizedFilterData);return strAllXmlData}return strCustomizedFilterData};HXWebJS.Controls.ComboBox._InternalFunctions._fill_datalist_content=function(objActiveElementInfo,objInputTextBox,objChooseButton,strReturnValue,blnShowPopupArea,strOrgSelectedValues,strTriggeredVia){if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_type!="hxcombobox"){return}if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn!==objChooseButton){return}var strXmlDataList,intFirstRecordOnPage,intLastRecordOnPage,strOrgSearchKeyWord="";var objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strReturnValue);var objxmlnode_updated_config_cnt=objXmlDoc.SelectSingleNode("/ALL_DATA/CONFIG_DATA//RS_ROW");if(objxmlnode_updated_config_cnt.GetAttributeValue("ORG_SEARCH_KEY_WORD")!=null){strOrgSearchKeyWord=objxmlnode_updated_config_cnt.GetAttributeValue("ORG_SEARCH_KEY_WORD")}intFirstRecordOnPage=objxmlnode_updated_config_cnt.GetAttributeValue("FIRST_RECORD_ON_PAGE");intLastRecordOnPage=objxmlnode_updated_config_cnt.GetAttributeValue("LAST_RECORD_ON_PAGE");var strCurrentSearchKeyWord=(objInputTextBox==null?"":objInputTextBox.value);if(strTriggeredVia!=null&&strTriggeredVia=="via_keyin"){if(strOrgSearchKeyWord!=strCurrentSearchKeyWord){return}}if(objXmlDoc.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA")==null){strXmlDataList=""}else{strXmlDataList=objXmlDoc.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA").GetXml()}if(blnShowPopupArea){var jsonPosAndSize;if(objActiveElementInfo.use_mobile_mode){jsonPosAndSize=HXWebJS.Controls.ComboBox._InternalFunctions._popup_area_position_and_size_calc_mobile_mode(objActiveElementInfo,objInputTextBox,objChooseButton,strXmlDataList)}else{jsonPosAndSize=HXWebJS.Controls.ComboBox._InternalFunctions._popup_area_position_and_size_calc(objActiveElementInfo,objInputTextBox,objChooseButton,strXmlDataList)}HXWebJS.Controls._HXWebDataControl_Global._format_display_columns(objActiveElementInfo.columns_width_rate);var blnShowControlAreaChoosePart=(objActiveElementInfo.choose_type!=0);var blnShowControlAreaSearchPart=(objActiveElementInfo.is_paging==1);HXWebJS.Controls._HXWebDataControl_Global._show_popup_area(jsonPosAndSize.left,jsonPosAndSize.top,jsonPosAndSize.width,jsonPosAndSize.height,blnShowControlAreaChoosePart,blnShowControlAreaSearchPart,objActiveElementInfo.use_mobile_mode)}HXWebJS.Controls._HXWebDataControl_Global._fill_data_content(strXmlDataList,intFirstRecordOnPage,intLastRecordOnPage,strOrgSelectedValues)};HXWebJS.Controls.ComboBox._InternalFunctions._popup_area_position_and_size_calc=function(objActiveElementInfo,objInputTextBox,objChooseButton,strXmlDataList){var intLeft,intTop,intWidth,intHeight;if(objInputTextBox!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox);intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1;intWidth=objChooseButton.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(objChooseButton)-intLeft;if(objActiveElementInfo.dropdownbox_width!=null&&objActiveElementInfo.dropdownbox_width>intWidth){intWidth=objActiveElementInfo.dropdownbox_width}}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton);intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1;intWidth=(objActiveElementInfo.dropdownbox_width==null?objChooseButton.offsetWidth:objActiveElementInfo.dropdownbox_width)}var int_choose_type=objActiveElementInfo.choose_type;var int_is_paging=objActiveElementInfo.is_paging;if((int_choose_type!=0||int_is_paging==1)&&intWidth<200){intWidth=200}if(int_choose_type!=0&&int_is_paging==1&&intWidth<300){intWidth=300}intHeight=objActiveElementInfo.dropdownbox_height;if(intHeight==null){var intHeightPerLine=24;var intDefaultShowLines=8;var intShowLines=intDefaultShowLines;if(objActiveElementInfo.choose_type==0&&objActiveElementInfo.is_paging==0){var r=strXmlDataList.match(/<RS_ROW/gi);var intDataRowCount=(!r?0:r.length);if(intDataRowCount>0&&intDataRowCount<intDefaultShowLines){intShowLines=intDataRowCount}}intHeight=intShowLines*intHeightPerLine}var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intWidth>intMaxWidth){intLeft=intMaxWidth-intWidth}if(!HXWebJS.Core.Browser.IsMobile){var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intHeight>intMaxHeight){intTop=intMaxHeight-intHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intHeight-1;if(intTop<intCurrentDocumentScrollTop){intTop=intMaxHeight-intHeight}}}}return{left:intLeft,top:intTop,width:intWidth,height:intHeight}};HXWebJS.Controls.ComboBox._InternalFunctions._popup_area_position_and_size_calc_mobile_mode=function(objActiveElementInfo,objInputTextBox,objChooseButton,strXmlDataList){var intLeft,intTop,intWidth,intHeight;intHeight=objActiveElementInfo.dropdownbox_height;if(intHeight==null){var intHeightPerLine=32;var intDefaultShowLines=8;var intShowLines=intDefaultShowLines;if(objActiveElementInfo.choose_type==0&&objActiveElementInfo.is_paging==0){var r=strXmlDataList.match(/<RS_ROW/gi);var intDataRowCount=(!r?0:r.length);if(intDataRowCount>0&&intDataRowCount<intDefaultShowLines){intShowLines=intDataRowCount}}intHeight=intShowLines*intHeightPerLine}var intWidth=HXWebJS.Core.WindowGeometry.GetViewportWidth()-2;intLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+1;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1}else{intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1}var intMaxTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+HXWebJS.Core.WindowGeometry.GetViewportHeight()-intHeight;if(intTop>intMaxTop){intTop=intMaxTop}return{left:intLeft,top:intTop,width:intWidth,height:intHeight}};HXWebJS.Controls.ComboBox._InternalFunctions._update_record_count=function(objActiveElementInfo,objChooseButton,strReturnValue){if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_type!="hxcombobox"){return}if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn!==objChooseButton){return}HXWebJS.Controls._HXWebDataControl_Global._update_record_count(strReturnValue)};HXWebJS.Controls.ComboBox._InternalFunctions._search_data_again=function(str_webdatacontrol_id,objInputTextBox,objChooseButton,blnShowMoreContent,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues){var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data(objActiveElementInfo,objInputTextBox,objChooseButton,blnShowMoreContent,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,false)};HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data=function(objActiveElementInfo,objInputTextBox,objChooseButton,blnShowMoreContent,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,blnShowPopupArea,strTriggeredVia){var strCustomizedFilterData=HXWebJS.Controls.ComboBox._InternalFunctions._get_customized_filter_data(objActiveElementInfo,objInputTextBox,objChooseButton);if(strCustomizedFilterData==null){return}var intNewPageSize=0;if(objActiveElementInfo.is_paging==1){if(blnShowMoreContent){objActiveElementInfo.new_page_size=objActiveElementInfo.new_page_size*2}intNewPageSize=objActiveElementInfo.new_page_size}var fnResponseForDataList=function(strReturnValue){if(strReturnValue==null){return}HXWebJS.Controls.ComboBox._InternalFunctions._fill_datalist_content(objActiveElementInfo,objInputTextBox,objChooseButton,strReturnValue,blnShowPopupArea,strOrgSelectedValues,strTriggeredVia);if(objActiveElementInfo.is_paging==1){var fnResponseForRecordCount=function(strReturnValue){if(strReturnValue==null){return}HXWebJS.Controls.ComboBox._InternalFunctions._update_record_count(objActiveElementInfo,objChooseButton,strReturnValue);if(strTriggeredVia=="via_keyin"){HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process(objActiveElementInfo,objInputTextBox,objChooseButton,blnSearchFromBegin,strOrgSelectedValues)}};var strXmlDataForRecordCount=HXWebJS.Controls.ComboBox._InternalFunctions._build_pagxmlservice_xmlcontent_getdata(objActiveElementInfo.webdatacontrol_id,0,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,strCustomizedFilterData,"recordcount",objActiveElementInfo.search_content_type);HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice_async(strXmlDataForRecordCount,fnResponseForRecordCount,objActiveElementInfo.extend_web_part_html_id)}else{if(strTriggeredVia=="via_keyin"){HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process(objActiveElementInfo,objInputTextBox,objChooseButton,blnSearchFromBegin,strOrgSelectedValues)}}};if(objActiveElementInfo.is_use_local_list_data==1){HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_local(objActiveElementInfo,0,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,fnResponseForDataList)}else{var strXmlDataForDataList=HXWebJS.Controls.ComboBox._InternalFunctions._build_pagxmlservice_xmlcontent_getdata(objActiveElementInfo.webdatacontrol_id,intNewPageSize,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,strCustomizedFilterData,"datalist",objActiveElementInfo.search_content_type);HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice_async(strXmlDataForDataList,fnResponseForDataList,objActiveElementInfo.extend_web_part_html_id)}};HXWebJS.Controls.ComboBox._InternalFunctions._ClearButton_onclicked=function(eventObject){var str_webdatacontrol_id=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id;var obj_webdatacontrol_textbox=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_textbox;var obj_webdatacontrol_dropdownbtn=HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_dropdownbtn;HXWebJS.Controls.ComboBox._InternalFunctions._data_choosed_process(str_webdatacontrol_id,obj_webdatacontrol_textbox,obj_webdatacontrol_dropdownbtn,null);HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area()};HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_local=function(objActiveElementInfo,intRequireRecordsCount,strSearchKeyWord,blnSearchFromBegin,strCurrentSelectedValue,fnResponseForDataList){var strLocalDropDownXmlListData="";var strContentType=objActiveElementInfo.content_type.toUpperCase();if(strContentType!="DESC"){strContentType="KEY"}if(objActiveElementInfo.predefined_dropdownlist_values!=null&&objActiveElementInfo.predefined_dropdownlist_values!=""){strLocalDropDownXmlListData=HXWebJS.Controls.ComboBox._InternalFunctions._build_dropdown_xml_list_data_via_values(objActiveElementInfo.predefined_dropdownlist_values);if(fnResponseForDataList!=null){fnResponseForDataList(strLocalDropDownXmlListData)}return strLocalDropDownXmlListData}if(!HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.get_local_list_data_callback_func)){alert("Application Error:get_local_list_data_callback_func do not registered!");return}var objLocalDropDownXmlListData=objActiveElementInfo.get_local_list_data_callback_func(objActiveElementInfo.webdatacontrol_id);if(objLocalDropDownXmlListData==null||typeof(objLocalDropDownXmlListData)!="object"){alert("Application Error: get_local_list_data_callback_func() must return valid XML object type!");return}if(objLocalDropDownXmlListData==null||(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW")!=null&&(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW/@IS_CHOOSED")==null||objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW/@KEY")==null))){alert('Application Error: get_local_list_data_callback_func() must return a xml object with the format:<RS_DATA><RS_ROW IS_CHOOSED="0" KEY="" DESC="" ... />...</RS_DATA>!');return}if(intRequireRecordsCount==1){if(strCurrentSelectedValue!=null&&strCurrentSelectedValue!=""){if(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW[@KEY='"+HXWebJS.Xml.MarkXMLSpecialChars(strCurrentSelectedValue)+"']")!=null){var strTemp=objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW[@KEY='"+HXWebJS.Xml.MarkXMLSpecialChars(strCurrentSelectedValue)+"']").GetXml();strLocalDropDownXmlListData="<RS_DATA>"+strTemp+"</RS_DATA>"}}if(strSearchKeyWord!=null&&strSearchKeyWord!=""){var objXmlNodeList=objLocalDropDownXmlListData.SelectNodes("//RS_ROW");for(var i=0;i<objXmlNodeList.length;i++){var strTemp=objXmlNodeList[i].GetAttributeValue(strContentType);if(strTemp.indexOf(strSearchKeyWord)==0){strLocalDropDownXmlListData="<RS_DATA>"+objXmlNodeList[i].GetXml()+"</RS_DATA>";break}}}if(fnResponseForDataList!=null){fnResponseForDataList(strLocalDropDownXmlListData)}return strLocalDropDownXmlListData}else{strLocalDropDownXmlListData=objLocalDropDownXmlListData.GetXml()}var strAllXmlData='<ALL_DATA><CONFIG_DATA><RS_DATA><RS_ROW FIRST_RECORD_ON_PAGE="0" LAST_RECORD_ON_PAGE="1" ></RS_ROW></RS_DATA></CONFIG_DATA><RESULT_DATA>'+strLocalDropDownXmlListData+"</RESULT_DATA></ALL_DATA>";if(fnResponseForDataList!=null){fnResponseForDataList(strAllXmlData)}return strAllXmlData};HXWebJS.Controls.ComboBox._InternalFunctions._build_dropdown_xml_list_data_via_values=function(strDropDownListValues){var sb_xml=new HXWebStringBuilder();sb_xml.append('<ALL_DATA><CONFIG_DATA><RS_DATA><RS_ROW FIRST_RECORD_ON_PAGE="0" LAST_RECORD_ON_PAGE="1" ></RS_ROW></RS_DATA></CONFIG_DATA>');sb_xml.append("<RESULT_DATA><RS_DATA>");var arrKeyValueList=strDropDownListValues.split(/;/);var strKeyValue,strKey,strValue;var arrTemp;for(var i=0;i<arrKeyValueList.length;i++){strKeyValue=arrKeyValueList[i];arrTemp=HXWebJS.Utility.Trim(strKeyValue).split(/=/);strKey=arrTemp[0];strValue=(arrTemp.length>1?arrTemp[1]:strKey);sb_xml.append(HXWebJS.Utility.StringFormat('<RS_ROW KEY="{0}" DESC="{1}"></RS_ROW>',strKey,strValue))}sb_xml.append("</RS_DATA></RESULT_DATA>");sb_xml.append("</ALL_DATA>");return sb_xml.toString()};HXWebJS.Controls.ComboBox._InternalFunctions._get_related_inputbox_object=function(str_webdatacontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.ComboBox._InternalFunctions._get_related_choosebutton_object=function(str_webdatacontrol_id,objInputTextBox){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return null}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id]){return null}var str_choosebutton_id=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id].choose_button_id;return HXWebJS.DOM.FindFirstElementById(str_choosebutton_id,objInputTextBox.parentNode.parentNode)};HXWebJS.Controls.ComboBox._InternalFunctions._data_choosed_process=function(str_webdatacontrol_id,obj_webdatacontrol_inputbox,obj_webdatacontrol_dropdownbtn,objXmlChoosedData){var strSelectedKey="",strSelectedDesc="",strSelectedAttr1="",strSelectedAttr2="",strSelectedAttr3="",strSelectedAttr4="",strSelectedAttr5="";var objXmlNodeList=(objXmlChoosedData==null?[]:objXmlChoosedData.SelectNodes("//RS_ROW"));for(var i=0;i<objXmlNodeList.length;i++){strSelectedKey+=(strSelectedKey!=""?",":"")+objXmlNodeList[i].GetAttributeValue("KEY");strSelectedDesc+=(strSelectedDesc!=""?",":"")+objXmlNodeList[i].GetAttributeValue("DESC");strSelectedAttr1+=(strSelectedAttr1!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_1")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_1"):"");strSelectedAttr2+=(strSelectedAttr2!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_2")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_2"):"");strSelectedAttr3+=(strSelectedAttr3!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_3")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_3"):"");strSelectedAttr4+=(strSelectedAttr4!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_4")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_4"):"");strSelectedAttr5+=(strSelectedAttr5!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_5")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_5"):"")}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(objActiveElementInfo==null){return}var objInputTextBox=HXWebJS.Controls.ComboBox._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,obj_webdatacontrol_dropdownbtn);var str_binding_datasrc_id=objActiveElementInfo.binding_datasrc_id;if(!str_binding_datasrc_id){if(objInputTextBox!=null){objInputTextBox.value=(objActiveElementInfo.content_type=="key"?strSelectedKey:strSelectedDesc);try{if(!objInputTextBox.disabled&&!HXWebJS.Core.Browser.IsMobile){objInputTextBox.focus()}}catch(ex){}}}else{var intBindingDataLine=null;var objTempRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(obj_webdatacontrol_dropdownbtn);if(objTempRecordNumber!=null&&objTempRecordNumber!=""){intBindingDataLine=parseInt(objTempRecordNumber)-1}HXWebJS.Controls.ComboBox._InternalFunctions._set_selected_desc_to_textbox(objActiveElementInfo,objInputTextBox,strSelectedDesc);HXWebJS.Controls.ComboBox._InternalFunctions._set_binding_datafields_values(objActiveElementInfo,intBindingDataLine,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5);if(objInputTextBox!=null){try{if(!objInputTextBox.disabled&&!HXWebJS.Core.Browser.IsMobile){objInputTextBox.focus()}}catch(ex){}}}HXWebJS.Controls.ComboBox._InternalFunctions._run_datachoosed_callback_function(objActiveElementInfo,objInputTextBox,obj_webdatacontrol_dropdownbtn,objXmlChoosedData)};HXWebJS.Controls.ComboBox._InternalFunctions._set_selected_desc_to_textbox=function(objActiveElementInfo,objInputTextBox,strSelectedDesc){if(objInputTextBox!=null&&objActiveElementInfo.content_type=="desc"&&(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datafld_for_desc=="")){objInputTextBox.value=strSelectedDesc}};HXWebJS.Controls.ComboBox._InternalFunctions._set_binding_datafields_values=function(objActiveElementInfo,intBindingDataLine,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5){var strTempAttributeValue;var str_binding_datasrc_id=objActiveElementInfo.binding_datasrc_id;if(!str_binding_datasrc_id){return}var objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(str_binding_datasrc_id);if(objDataSrc!=null){var intLineNo=intBindingDataLine;var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;var strDataFieldNameForDesc=objActiveElementInfo.binding_datafld_for_desc;var strDataFieldNameForAttr1=objActiveElementInfo.binding_datafld_for_attr_1;var strDataFieldNameForAttr2=objActiveElementInfo.binding_datafld_for_attr_2;var strDataFieldNameForAttr3=objActiveElementInfo.binding_datafld_for_attr_3;var strDataFieldNameForAttr4=objActiveElementInfo.binding_datafld_for_attr_4;var strDataFieldNameForAttr5=objActiveElementInfo.binding_datafld_for_attr_5;var objHXXmlNode_Binding=null;if(intLineNo!=null){objHXXmlNode_Binding=objDataSrc.SelectNodes("//RS_ROW")[intLineNo]}else{objHXXmlNode_Binding=objDataSrc.SelectSingleNode("//RS_ROW")}if(objHXXmlNode_Binding==null){return}if(strDataFieldNameForKey!=null&&strDataFieldNameForKey!=""){strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForKey);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForKey,strSelectedKey);HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged()}}if(strDataFieldNameForDesc!=null&&strDataFieldNameForDesc!=""){strDataFieldNameForDesc=strDataFieldNameForDesc.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForDesc);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForDesc,strSelectedDesc);HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged()}}if(strDataFieldNameForAttr1!=null&&strDataFieldNameForAttr1!=""){strDataFieldNameForAttr1=strDataFieldNameForAttr1.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr1);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr1,strSelectedAttr1)}}if(strDataFieldNameForAttr2!=null&&strDataFieldNameForAttr2!=""){strDataFieldNameForAttr2=strDataFieldNameForAttr2.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr2);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr2,strSelectedAttr2)}}if(strDataFieldNameForAttr3!=null&&strDataFieldNameForAttr3!=""){strDataFieldNameForAttr3=strDataFieldNameForAttr3.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr3);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr3,strSelectedAttr3)}}if(strDataFieldNameForAttr4!=null&&strDataFieldNameForAttr4!=""){strDataFieldNameForAttr4=strDataFieldNameForAttr4.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr4);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr4,strSelectedAttr4)}}if(strDataFieldNameForAttr5!=null&&strDataFieldNameForAttr5!=""){strDataFieldNameForAttr5=strDataFieldNameForAttr5.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr5);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr5,strSelectedAttr5)}}}};HXWebJS.Controls.ComboBox._InternalFunctions._run_datachoosed_callback_function=function(objActiveElementInfo,objInputTextBox,objDropdownButton,objXmlChoosedData){var str_webdatacontrol_id=objActiveElementInfo.webdatacontrol_id;if(HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.datachoosed_callback_func)){try{objActiveElementInfo.datachoosed_callback_func(str_webdatacontrol_id,objInputTextBox,objDropdownButton,objXmlChoosedData,objActiveElementInfo.extend_webpart_type)}catch(e){alert("hxcombobox datachoosed_callback_func call failed. "+e.description);return}}};HXWebJS.Controls.ComboBox._InternalFunctions._manual_input_value_change_process=function(objInputTextBox){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.readOnly||objInputTextBox.disabled){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId]){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo==null){return}var intBindingDataLine=null;var objTempRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objInputTextBox);if(objTempRecordNumber!=null&&objTempRecordNumber!=""){intBindingDataLine=parseInt(objTempRecordNumber)-1}if(objInputTextBox.value==""){HXWebJS.Controls.ComboBox._InternalFunctions._set_binding_datafields_values(objActiveElementInfo,intBindingDataLine,"","","","","","","");HXWebJS.Controls.ComboBox._InternalFunctions._run_datachoosed_callback_function(objActiveElementInfo,objInputTextBox,null,null);objInputTextBox.setAttribute("hx_org_value_onfousin",objInputTextBox.value);return}if(!objActiveElementInfo.limit_in_list){objInputTextBox.setAttribute("hx_org_value_onfousin",objInputTextBox.value);return}var strCustomizedFilterData=HXWebJS.Controls.ComboBox._InternalFunctions._get_customized_filter_data(objActiveElementInfo,objInputTextBox,null);if(strCustomizedFilterData==null){return}var strReturnValue="";if(objActiveElementInfo.is_use_local_list_data==1){strReturnValue=HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_local(objActiveElementInfo,1,objInputTextBox.value,true,"",null)}else{var blnSearchFromBegin=objActiveElementInfo.is_auto_completion_hint_search_from_begin;var strXmlDataForSingleDataCheck=HXWebJS.Controls.ComboBox._InternalFunctions._build_pagxmlservice_xmlcontent_getdata(objActiveElementInfo.webdatacontrol_id,1,objInputTextBox.value,blnSearchFromBegin,"",strCustomizedFilterData,"singledata",objActiveElementInfo.search_content_type);strReturnValue=HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice(strXmlDataForSingleDataCheck,objActiveElementInfo.extend_web_part_html_id)}if(strReturnValue==null||strReturnValue.indexOf("<RS_ROW")==-1){var strMsg=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBCOMBOBOX_NO_DATA_FOUND");alert(strMsg);objInputTextBox.value="";objInputTextBox.setAttribute("hx_org_value_onfousin",objInputTextBox.value);HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area();HXWebJS.Controls.ComboBox._InternalFunctions._set_binding_datafields_values(objActiveElementInfo,intBindingDataLine,"","","","","","","");HXWebJS.Controls.ComboBox._InternalFunctions._run_datachoosed_callback_function(objActiveElementInfo,objInputTextBox,null,null);return}var objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strReturnValue);var strKey=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("KEY");var strDesc=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("DESC");var strAttr1=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("ATTR_1");var strAttr2=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("ATTR_2");var strAttr3=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("ATTR_3");var strAttr4=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("ATTR_4");var strAttr5=objXmlDoc.SelectSingleNode("//RS_ROW").GetAttributeValue("ATTR_5");if(strAttr1==null){strAttr1=""}if(strAttr2==null){strAttr2=""}if(strAttr3==null){strAttr3=""}if(strAttr4==null){strAttr4=""}if(strAttr5==null){strAttr5=""}HXWebJS.Controls.ComboBox._InternalFunctions._set_selected_desc_to_textbox(objActiveElementInfo,objInputTextBox,strDesc);HXWebJS.Controls.ComboBox._InternalFunctions._set_binding_datafields_values(objActiveElementInfo,intBindingDataLine,strKey,strDesc,strAttr1,strAttr2,strAttr3,strAttr4,strAttr5);objInputTextBox.setAttribute("hx_org_value_onfousin",objInputTextBox.value);HXWebJS.Controls.ComboBox._InternalFunctions._run_datachoosed_callback_function(objActiveElementInfo,objInputTextBox,null,objXmlDoc)};HXWebJS.Controls.ComboBox._InternalFunctions._onkeypress_process=function(objHXEventObject){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objInputTextBox=objHXEventObject.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId]){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId];if(!objActiveElementInfo){return}if(objActiveElementInfo.is_use_autocompletion_hint==1&&objActiveElementInfo.choose_type==1){objHXEventObject.preventDefault()}};HXWebJS.Controls.ComboBox._InternalFunctions._onkeyup_or_onmouseup_process=function(objEventData){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}if(objEventData.type=="keyup"){if(objEventData.keyCode==9||objEventData.keyCode==13||objEventData.keyCode==27){HXWebJS.Controls._HXWebDataControl_Global._hide_popup_area();return}}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId]){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo==null){return}if(objActiveElementInfo.is_use_autocompletion_hint==0){return}if(objInputTextBox.readOnly){var strTemp=HXWebJS.DOM.ElementAttributeGetValue(objInputTextBox,"hx_allow_popup_pick");var blnIsAllowPopupPick=(strTemp!=null&&strTemp!=""&&strTemp!="0");if(!blnIsAllowPopupPick){return}}if(HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id!=null&&HXWebJS.Controls._HXWebDataControl_Global._current_active_webdatacontrol_id!=strInputBoxId){HXWebJS.Controls._HXWebDataControl_Global._clear_current_active_control()}var objChooseButton=HXWebJS.Controls.ComboBox._InternalFunctions._get_related_choosebutton_object(strInputBoxId,objInputTextBox);HXWebJS.Controls._HXWebDataControl_Global._set_current_active_control("hxcombobox",strInputBoxId,objInputTextBox,objChooseButton,objActiveElementInfo.choose_type,objActiveElementInfo.is_allow_quick_search_per_char,HXWebJS.Controls.ComboBox._InternalFunctions._data_choosed_process,HXWebJS.Controls.ComboBox._InternalFunctions._search_data_again,objActiveElementInfo.is_search_from_begin,objActiveElementInfo.use_mobile_mode);objActiveElementInfo.new_page_size=objActiveElementInfo.page_size;var is_first_time_fousin=objInputTextBox.getAttribute("hx_is_fousin_first_time");objInputTextBox.setAttribute("hx_is_fousin_first_time",0);var strSearchKeyWord=objInputTextBox.value;var blnSearchFromBegin=objActiveElementInfo.is_auto_completion_hint_search_from_begin;var str_org_selected_values="";if(objActiveElementInfo.choose_type!=0){str_org_selected_values=HXWebJS.Controls.ComboBox._InternalFunctions._get_org_selected_values(objActiveElementInfo,objInputTextBox,objChooseButton)}if(is_first_time_fousin==1){HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data(objActiveElementInfo,objInputTextBox,objChooseButton,false,"",blnSearchFromBegin,str_org_selected_values,true)}else{if(HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring){HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=true;HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text=strSearchKeyWord}else{HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=true;HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text=strSearchKeyWord;HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data(objActiveElementInfo,objInputTextBox,objChooseButton,false,strSearchKeyWord,blnSearchFromBegin,str_org_selected_values,true,"via_keyin")}}};HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process=function(objActiveElementInfo,objInputTextBox,objChooseButton,blnSearchFromBegin,strOrgSelectedValues){if(HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring&&HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text!=HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text){var strNextSearchKeyWord=HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text;HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text=strNextSearchKeyWord;HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=true;HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=false;HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text="";HXWebJS.Controls.ComboBox._InternalFunctions._internal_search_data(objActiveElementInfo,objInputTextBox,objChooseButton,false,strNextSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,false,"via_keyin")}else{HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=false;HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text="";HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=false;HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text=""}};HXWebJS.Controls.ComboBox._InternalFunctions._onfocusinprocess=function(objEventData){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId]){return}if(objInputTextBox.getAttribute("datafld")==null||objInputTextBox.getAttribute("datafld")==""){return}objInputTextBox.setAttribute("hx_org_value_onfousin",objInputTextBox.value);objInputTextBox.setAttribute("hx_is_fousin_first_time",1)};HXWebJS.Controls.ComboBox._InternalFunctions._onfocusoutprocess=function(objEventData){if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info){return}var objInputTextBox=objEventData.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(!HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId]){return}if(objInputTextBox.getAttribute("datafld")==null||objInputTextBox.getAttribute("datafld")==""){return}if(objInputTextBox.readOnly){return}var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputBoxId];if(objActiveElementInfo==null||!objActiveElementInfo.limit_in_list){return}if(objEventData.relatedTarget!=null){if(objEventData.relatedTarget.id=="tr_hxwebdatacontrol_dataline_area"){return}if(objEventData.relatedTarget.parentNode!=null&&objEventData.relatedTarget.parentNode.id=="tr_hxwebdatacontrol_dataline_area"){return}if(objEventData.relatedTarget.parentNode.parentNode!=null&&objEventData.relatedTarget.parentNode.parentNode.id=="tr_hxwebdatacontrol_dataline_area"){return}if(objEventData.relatedTarget.id=="hxwebdatacontrol_global_datalist_table"){return}}if(objInputTextBox.getAttribute("hx_org_value_onfousin")!=objInputTextBox.value){HXWebJS.Controls.ComboBox._InternalFunctions._manual_input_value_change_process(objInputTextBox)}};HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice_async=function(strXmlContent,fnResponse,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper";HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",strXmlContent,fnResponse,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice=function(strXmlContent,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper";return HXWebJS.Xml.XmlService.CallPageXmlService("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",strXmlContent,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebJS.Controls.ComboBox._InternalFunctions._build_pagxmlservice_xmlcontent_getdata=function(strInputTextBoxId,intNewPageSize,strSearchKeyWord,blnSearchFromBegin,strOrgSelectedValues,strCustomizedFilterData,strReturnDataType,strSearchContentType){var objActiveElementInfo=HXWebJS.Controls.ComboBox._InternalFunctions._registed_elements_info[strInputTextBoxId];if(objActiveElementInfo==null){return}var strWebDataListPageAssemblyName=(objActiveElementInfo.webdatalist_pagexmlsvc_assemblyname?objActiveElementInfo.webdatalist_pagexmlsvc_assemblyname:mstrPageXmlServiceAssemblyName);var strWebDataListPageClassName=(objActiveElementInfo.webdatalist_pagexmlsvc_classname?objActiveElementInfo.webdatalist_pagexmlsvc_classname:mstrPageXmlServiceClassName);var blnIsV6ServerEnginee=(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6");if(objActiveElementInfo.predefined_hxmd_dropdownlist_code!=null&&objActiveElementInfo.predefined_hxmd_dropdownlist_code!=""){if(!blnIsV6ServerEnginee){strWebDataListPageAssemblyName="TrustHX.HXWWW501";strWebDataListPageClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper_PredefinedDropdownList"}}if(strOrgSelectedValues==null){strOrgSelectedValues=""}if(strSearchContentType==null){strSearchContentType=""}if(strCustomizedFilterData==null){strCustomizedFilterData=""}var objSB=new HXWebStringBuilder();objSB.append('<ALL_DATA RETURN_DATA_TYPE="'+strReturnDataType+'"');objSB.append(' ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebDataListPageAssemblyName)+'"');objSB.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebDataListPageClassName)+'"');objSB.append(' HX_WEB_DATA_LIST_TYPE="hxwebcomboboxcontrol"');objSB.append(' HX_WEB_DATA_LIST_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(strInputTextBoxId)+'">');objSB.append("<CONFIG_DATA><RS_ROW");objSB.append(' NEW_PAGE_SIZE="'+intNewPageSize+'"');objSB.append(' SEARCH_KEY_WORD="'+HXWebJS.Xml.MarkXMLSpecialChars(strSearchKeyWord)+'"');objSB.append(' SEARCH_FROM_BEGIN="'+(!blnSearchFromBegin?0:1)+'"');objSB.append(' ORG_SELECTED_VALUES="'+HXWebJS.Xml.MarkXMLSpecialChars(strOrgSelectedValues)+'"');objSB.append(' CUSTOMIZED_FILTER_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(strCustomizedFilterData)+'"');objSB.append(' SEARCH_CONTENT_TYPE="'+strSearchContentType+'" /></CONFIG_DATA>');objSB.append("</ALL_DATA>");return objSB.toString()};HXWebJS.Controls.ComboBox._InternalFunctions._get_org_selected_values=function(objActiveElementInfo,objInputTextBox,objDropdownClickButton){var objDataSrc=null;var strTempAttributeValue=null;var strDataSrc=objActiveElementInfo.binding_datasrc_id;if(strDataSrc!=null&&strDataSrc!=""){objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strDataSrc);if(objDataSrc!=null){var intLineNo=null;var objTempRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownClickButton);if(objTempRecordNumber!=null&&objTempRecordNumber!=""){intLineNo=parseInt(objTempRecordNumber)-1}var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;var objHXXmlNodeTemp=null;if(intLineNo!=null){objHXXmlNodeTemp=objDataSrc.SelectNodes("//RS_ROW")[intLineNo]}else{objHXXmlNodeTemp=objDataSrc.SelectSingleNode("//RS_ROW")}if(strDataFieldNameForKey!=null&&strDataFieldNameForKey!=""&&objHXXmlNodeTemp!=null){strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();strTempAttributeValue=objHXXmlNodeTemp.GetAttributeValue(strDataFieldNameForKey);if(strTempAttributeValue!=null){return strTempAttributeValue}}}}if(objActiveElementInfo.content_type=="key"&&objInputTextBox!=null){return objInputTextBox.value}return null};HXWebJS.Controls.ComboBox._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls._HXWebDataControl_Global._onclickprocess_outsidedropdownarea);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.ComboBox._InternalFunctions._onclickprocess);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls._HXWebDataControl_Global._onclickprocess_outsidedropdownarea)}HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls.ComboBox._InternalFunctions._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"focusout",HXWebJS.Controls.ComboBox._InternalFunctions._onfocusoutprocess);HXWebJS.EventManager.AddListener(document.body,"keyup",HXWebJS.Controls.ComboBox._InternalFunctions._onkeyup_or_onmouseup_process);HXWebJS.EventManager.AddListener(document.body,"mouseup",HXWebJS.Controls.ComboBox._InternalFunctions._onkeyup_or_onmouseup_process)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.ComboBox._InternalFunctions._onloadprocess);HXWebJS.Controls.Tab={};HXWebJS.Controls.Tab._InternalFunctions={};HXWebJS.Controls.Tab.register=function(str_webtabcontrol_id,fn_callback_before_tab_change,fn_callback_after_tab_changed,fn_callback_before_tab_remove,fn_callback_after_tab_removed,strTabScrollLayoutDirection,intRemovedIconMode,intMaxTabTextWidth,blnRemoveIconOnDoubleClick){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(!c){if(strTabScrollLayoutDirection==null){strTabScrollLayoutDirection="h"}else{strTabScrollLayoutDirection=strTabScrollLayoutDirection.toLowerCase();if(strTabScrollLayoutDirection!="v"&&strTabScrollLayoutDirection!="h"){strTabScrollLayoutDirection="h"}}if(intRemovedIconMode==null){intRemovedIconMode=0}if(intMaxTabTextWidth==null){intMaxTabWidth=0}var c=new Object();var objRootContainer=HXWebJS.DOM.GetElementById(str_webtabcontrol_id);if(objRootContainer==null){return}var objTabContainer=HXWebJS.Controls.Tab._InternalFunctions._init_tab_container(objRootContainer,strTabScrollLayoutDirection);c={webtabcontrol_id:str_webtabcontrol_id,container_object:objTabContainer,current_selected_tab_button:null,current_selected_tab_id:"",removed_icon_mode:intRemovedIconMode,max_tab_text_width:intMaxTabTextWidth,is_remove_icon_ondbclick:blnRemoveIconOnDoubleClick,tab_scroll_layout_direction:strTabScrollLayoutDirection,tab_before_remove_callback_func:fn_callback_before_tab_remove,tab_after_removed_callback_func:fn_callback_after_tab_removed,tab_before_change_callback_func:fn_callback_before_tab_change,tab_changed_callback_func:fn_callback_after_tab_changed};HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id]=c;HXWebJS.EventManager.AddListener(c.container_object,"click",HXWebJS.Controls.Tab._InternalFunctions._onclickprocess);HXWebJS.EventManager.AddListener(c.container_object,"dblclick",HXWebJS.Controls.Tab._InternalFunctions._ondblclickprocess)}};HXWebJS.Controls.Tab.demo__callback_func__before_after_tab_changed=function(str_webtabcontrol_id,str_tab_id,str_old_tab_id){alert("函数原型：function somefuncname(str_webtabcontrol_id, str_current_selected_tab_id, str_old_tab_id)")};HXWebJS.Controls.Tab.demo__tab_setting={tab_width:100,is_selected:false,show_remove_icon:false,image_class:"",padding_width:0};HXWebJS.Controls.Tab.add_tab=function(str_webtabcontrol_id,str_tab_id,str_tab_text,objTabSetting){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}var intRemovedIconMode=objActiveElementInfo.removed_icon_mode;var int_tab_width=null;var intTabTextWidth=null;var intTabPaddingWidth=0;var blnSelected=false,blnClosable=false,strImageClassName="";var intBtnImageWidth=16;if(objTabSetting!=null){int_tab_width=objTabSetting.tab_width;intTabTextWidth=objTabSetting.tab_text_width;blnSelected=(objTabSetting.is_selected==null||objTabSetting.is_selected==false?false:true);blnClosable=(objTabSetting.show_remove_icon==null||objTabSetting.show_remove_icon==false?false:true);strImageClassName=(objTabSetting.image_class==null?"":objTabSetting.image_class);if(objTabSetting.padding_width!=null){intTabPaddingWidth=objTabSetting.padding_width}}var blnHasTabImage=(strImageClassName!="");if(intTabTextWidth!=null&&intTabTextWidth>0){}else{if(int_tab_width!=null&&int_tab_width>0){intTabTextWidth=int_tab_width-intTabPaddingWidth*2-(blnHasTabImage?intBtnImageWidth+2:0)-(blnClosable?(intRemovedIconMode==0?7:10):0);if(intTabTextWidth<=0){intTabTextWidth=HXWebJS.Utility.GetStringPixelWidth(str_tab_text)+16}}else{intTabTextWidth=HXWebJS.Utility.GetStringPixelWidth(str_tab_text)+16}}if(objActiveElementInfo.max_tab_text_width>0&&objActiveElementInfo.max_tab_text_width<intTabTextWidth){intTabTextWidth=objActiveElementInfo.max_tab_text_width}int_tab_width=intTabTextWidth+intTabPaddingWidth*2+(blnHasTabImage?intBtnImageWidth+2:0)+(blnClosable?(intRemovedIconMode==0?7:10):0);var sb_html=new HXWebStringBuilder();sb_html.append('<span hx_is_tab_button="1" class="'+(blnSelected?"hxtab_selected":"hxtab_unselected")+'"');sb_html.append(' hx_allow_removed="'+(blnClosable?"1":"0")+'"');sb_html.append(' hxtab_id="'+str_tab_id+'" style="position:relative');if(intTabPaddingWidth>0){sb_html.append(";padding-left:"+intTabPaddingWidth+";padding-right:"+intTabPaddingWidth)}sb_html.append(";display:inline-block;width:"+int_tab_width+'px;">');if(blnHasTabImage){sb_html.append('<img hx_is_tab_button_image="1" class="'+strImageClassName+'" src="../images/hxpub_clear.gif" style="position:absolute;left:'+(intTabPaddingWidth+3)+'px;top:3px;" />')}sb_html.append('<span hx_is_tab_text_area="1"');if(objActiveElementInfo.max_tab_text_width>0){sb_html.append(' class="hxtxt_nowrap"');sb_html.append(' title="'+HXWebJS.Xml.MarkXMLSpecialChars(str_tab_text)+'"')}sb_html.append(' style="');if(blnHasTabImage){sb_html.append("margin-left:16px;")}if(objActiveElementInfo.max_tab_text_width>0){sb_html.append("display:inline-block;width:"+intTabTextWidth+"px;")}sb_html.append('">'+str_tab_text+"</span>");if(blnClosable){if(intRemovedIconMode==0){sb_html.append('<img hx_is_tab_close_tag="1" class="hxicon_tab_close_tag" src="../images/hxpub_clear.gif" style="position:absolute;top:4px;right:4px;width:5px;height:5px;" />')}else{sb_html.append('<img hx_is_tab_close_tag="1" class="hxicon_tab_close_tag_1" src="../images/hxpub_clear.gif" style="position:absolute;margin-top:-4px;top:50%;right:4px;" />')}}sb_html.append(" </span>");var objTabHtml=HXWebJS.DOM.CreateElement(sb_html.toString());objActiveElementInfo.container_object.appendChild(objTabHtml);HXWebJS.Controls.Tab._InternalFunctions._showhide_scroll_button(objActiveElementInfo);if(blnSelected){HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process(objTabHtml,objActiveElementInfo)}};HXWebJS.Controls.Tab.remove_tab=function(str_webtabcontrol_id,str_tab_id,objTabButton){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}if(objTabButton==null){objTabButton=HXWebJS.Controls.Tab._InternalFunctions._find_specified_tab(str_tab_id,objActiveElementInfo);if(objTabButton==null){return}str_tab_id=HXWebJS.DOM.ElementAttributeGetValue(objTabButton,"hxtab_id")}var fn_callback_before_tab_remove=objActiveElementInfo.tab_before_remove_callback_func;if(fn_callback_before_tab_remove!=null){var blnContinue=fn_callback_before_tab_remove(objActiveElementInfo.webtabcontrol_id,str_tab_id);if(blnContinue!=null&&blnContinue==false){return}}if(str_tab_id==objActiveElementInfo.current_selected_tab_id){var objNewSelectedHXTabButton=HXWebJS.Controls.Tab._InternalFunctions._find_first_younger_brother_tab_button(objActiveElementInfo,objTabButton);if(objNewSelectedHXTabButton==null){objNewSelectedHXTabButton=HXWebJS.Controls.Tab._InternalFunctions._find_first_older_brother_tab_button(objActiveElementInfo,objTabButton)}if(objNewSelectedHXTabButton==null){return}var blnChangeTabIsOK=HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process(objNewSelectedHXTabButton,objActiveElementInfo);if(!blnChangeTabIsOK){return}}var objHXTabArea=objActiveElementInfo.container_object;var objHXTabContainer_Root=objHXTabArea.parentNode;if(objActiveElementInfo.tab_scroll_layout_direction=="h"){var objHTmlScrollArrowLeft=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_left",objHXTabContainer_Root);var objHTmlScrollArrowRight=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_right",objHXTabContainer_Root);objHTmlScrollArrowLeft.style.display="none";objHTmlScrollArrowRight.style.display="none"}else{var objHTmlScrollArrowUp=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_top",objHXTabContainer_Root);var objHTmlScrollArrowDown=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_bottom",objHXTabContainer_Root);objHTmlScrollArrowUp.style.display="none";objHTmlScrollArrowDown.style.display="none"}objHXTabArea.removeChild(objTabButton);var fn_callback_after_tab_removed=objActiveElementInfo.tab_after_removed_callback_func;if(fn_callback_after_tab_removed!=null){fn_callback_after_tab_removed(objActiveElementInfo.webtabcontrol_id,str_tab_id)}HXWebJS.Controls.Tab._InternalFunctions._showhide_scroll_button(objActiveElementInfo)};HXWebJS.Controls.Tab.disable_tab=function(str_webtabcontrol_id,str_tab_id,blnDisable){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}var objTabButton=HXWebJS.Controls.Tab._InternalFunctions._find_specified_tab(str_tab_id,objActiveElementInfo);if(objTabButton==null){return}if(blnDisable==null){blnDisable=true}if(blnDisable){HXWebJS.DOM.CSSClass.AddClass(objTabButton,"hxtab_disabled");objTabButton.disabled=true}else{HXWebJS.DOM.CSSClass.RemoveClass(objTabButton,"hxtab_disabled");objTabButton.disabled=false}};HXWebJS.Controls.Tab.select_tab=function(str_webtabcontrol_id,str_tab_id){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}var objEventSrcElement=HXWebJS.Controls.Tab._InternalFunctions._find_specified_tab(str_tab_id,objActiveElementInfo);HXWebJS.Controls.Tab._InternalFunctions._set_active_tab(objEventSrcElement,null)};HXWebJS.Controls.Tab.get_tab_html_object=function(str_webtabcontrol_id,str_tab_id){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return null}var objHXTabButton=HXWebJS.Controls.Tab._InternalFunctions._find_specified_tab(str_tab_id,objActiveElementInfo);return objHXTabButton};HXWebJS.Controls.Tab.is_tab_area_scrolled=function(str_webtabcontrol_id){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return null}var strScrollLayoutDirection=objActiveElementInfo.tab_scroll_layout_direction;var objHXTabContainer_Internal=objActiveElementInfo.container_object;var objHXTabContainer_Root=objHXTabContainer_Internal.parentNode;if(strScrollLayoutDirection=="h"){if(objHXTabContainer_Root.scrollWidth>objHXTabContainer_Root.offsetWidth||objHXTabContainer_Root.scrollHeight>objHXTabContainer_Root.offsetHeight){return true}}else{if(objHXTabContainer_Root.scrollHeight>objHXTabContainer_Root.offsetHeight){return true}}return false};HXWebJS.Controls.Tab._InternalFunctions._init_tab_container=function(objExternalContainer,strTabScrollDirection){var objTemp;if(strTabScrollDirection=="h"){objTemp=HXWebJS.DOM.CreateElement('<img id="hximg_tab_control_scroll_arrow_left" class="hxbtn_prevpage" src="../images/hxpub_clear.gif" style="z-index:99999;position:absolute;right:0px;top:50%;margin-top:-11px;display:none;" onclick="HXWebTabControl._InternalFunctions._doscroll(event,\'left\')" />');objExternalContainer.appendChild(objTemp);objTemp=HXWebJS.DOM.CreateElement('<img id="hximg_tab_control_scroll_arrow_right" class="hxbtn_nextpage" src="../images/hxpub_clear.gif" style="z-index:99999;position:absolute;right:0px;top:50%;display:none;" onclick="HXWebTabControl._InternalFunctions._doscroll(event,\'right\')" />');objExternalContainer.appendChild(objTemp)}else{objTemp=HXWebJS.DOM.CreateElement('<img id="hximg_tab_control_scroll_arrow_top" class="hxbtn_sort_asc" src="../images/hxpub_clear.gif" style="z-index:99999;position:absolute;left:50%;bottom:0px;margin-left:-11px;display:none;" onclick="HXWebTabControl._InternalFunctions._doscroll(event, \'top\')" />');objExternalContainer.appendChild(objTemp);objTemp=HXWebJS.DOM.CreateElement('<img id="hximg_tab_control_scroll_arrow_bottom" class="hxbtn_sort_desc" src="../images/hxpub_clear.gif" style="z-index:99999;position:absolute;left:50%;bottom:0px;margin-left:1px;display:none;" onclick="HXWebTabControl._InternalFunctions._doscroll(event,\'bottom\')" />');objExternalContainer.appendChild(objTemp)}var sb_html=new HXWebStringBuilder();sb_html.append('<div hx_is_tab_container="1" class="hxtab_container"');sb_html.append(' style="position:absolute;left:0px;top:0px;width:100%;height:100%;"></div>');var objTabContainer=HXWebJS.DOM.CreateElement(sb_html.toString());objExternalContainer.appendChild(objTabContainer);return objTabContainer};HXWebJS.Controls.Tab._InternalFunctions._find_specified_tab=function(str_tab_id,objActiveElementInfo){var objHXTabArea=objActiveElementInfo.container_object;var strTempTabId;for(var i=0;i<objHXTabArea.childNodes.length;i++){var objNode=objHXTabArea.childNodes[i];if(objNode.nodeType==1){strTempTabId=objNode.getAttribute("hxtab_id");if(strTempTabId!=null&&strTempTabId!=""&&strTempTabId==str_tab_id){return objNode}}}return null};HXWebJS.Controls.Tab._InternalFunctions._find_first_tab_button=function(objActiveElementInfo,str_excluded_tab_id){var objHXTabArea=objActiveElementInfo.container_object;var strTempTabId;for(var i=0;i<objHXTabArea.childNodes.length;i++){var objNode=objHXTabArea.childNodes[i];if(objNode.nodeType==1){strTempTabId=objNode.getAttribute("hxtab_id");if(strTempTabId!=null&&strTempTabId!=""&&strTempTabId!=str_excluded_tab_id){return objNode}}}return null};HXWebJS.Controls.Tab._InternalFunctions._find_first_younger_brother_tab_button=function(objActiveElementInfo,objTabElement){var objTempElement=objTabElement.nextSibling;while(objTempElement!=null){if(objTempElement.nodeType==1){var strTempTabId=objTempElement.getAttribute("hxtab_id");if(strTempTabId!=null&&strTempTabId!=""){return objTempElement}}objTempElement=objTempElement.nextSibling}return null};HXWebJS.Controls.Tab._InternalFunctions._find_first_older_brother_tab_button=function(objActiveElementInfo,objTabElement){var objTempElement=objTabElement.previousSibling;while(objTempElement!=null){if(objTempElement.nodeType==1){var strTempTabId=objTempElement.getAttribute("hxtab_id");if(strTempTabId!=null&&strTempTabId!=""){return objTempElement}}objTempElement=objTempElement.previousSibling}return null};HXWebJS.Controls.Tab._InternalFunctions._onclickprocess=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objEventSrcElement=objEventData.target;HXWebJS.Controls.Tab._InternalFunctions._set_active_tab(objEventSrcElement,objEventData)};HXWebJS.Controls.Tab._InternalFunctions._ondblclickprocess=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objEventSrcElement=objEventData.target;var strTempIsTabButton=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_button");var strTempIsTabButtonImg=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_button_image");var strTempIsTabTextArea=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_text_area");if(strTempIsTabButton!="1"&&strTempIsTabButtonImg!="1"&&strTempIsTabTextArea!="1"){return}var objHXTabButton=(strTempIsTabButton=="1"?objEventSrcElement:objEventSrcElement.parentNode);if(HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,"hxtab_disabled")){return}if(objHXTabButton.getAttribute("hx_allow_removed")=="0"){return}var str_webtabcontrol_id=objHXTabButton.parentNode.parentNode.id;if(!str_webtabcontrol_id){return}if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}if(!objActiveElementInfo.is_remove_icon_ondbclick){return}var str_tab_id=HXWebJS.DOM.ElementAttributeGetValue(objHXTabButton,"hxtab_id");HXWebJS.Controls.Tab.remove_tab(str_webtabcontrol_id,str_tab_id,objEventSrcElement.parentNode)};HXWebJS.Controls.Tab._InternalFunctions._set_active_tab=function(objEventSrcElement,objEventData){var strTempIsTabButton=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_button");var strTempIsTabButtonImg=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_button_image");var strTempIsTabCloseTag=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_close_tag");var strTempIsTabTextArea=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"hx_is_tab_text_area");if(strTempIsTabButton!="1"&&strTempIsTabCloseTag!="1"&&strTempIsTabButtonImg!="1"&&strTempIsTabTextArea!="1"){return}var objHXTabButton=(strTempIsTabButton=="1"?objEventSrcElement:objEventSrcElement.parentNode);var str_webtabcontrol_id=objHXTabButton.parentNode.parentNode.id;if(!str_webtabcontrol_id){return}if(HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,"hxtab_disabled")){return}if(strTempIsTabCloseTag=="1"){if(objEventData!=null){objEventData.stopPropagation()}var str_tab_id=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement.parentNode,"hxtab_id");HXWebJS.Controls.Tab.remove_tab(str_webtabcontrol_id,str_tab_id,objEventSrcElement.parentNode);return}if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process(objHXTabButton,objActiveElementInfo)};HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process=function(objHXTabButton,objActiveElementInfo){var strClassNameForSelected="hxtab_selected";var strClassNameForUnselected="hxtab_unselected";if(!HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,strClassNameForSelected)&&!HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,strClassNameForUnselected)){return false}var strOldTabId=objActiveElementInfo.current_selected_tab_id;var objOldHXTabButton=objActiveElementInfo.current_selected_tab_button;var strCurrentSelectedTabId=objHXTabButton.getAttribute("hxtab_id");if(strCurrentSelectedTabId==null||strCurrentSelectedTabId==""){return false}if(strOldTabId==""){strOldTabId=strCurrentSelectedTabId}var fn_callback_before_tab_change=objActiveElementInfo.tab_before_change_callback_func;if(fn_callback_before_tab_change!=null){var blnContinue=fn_callback_before_tab_change(objActiveElementInfo.webtabcontrol_id,strCurrentSelectedTabId,strOldTabId);if(blnContinue!=null&&blnContinue==false){return false}}if(objOldHXTabButton!=null){HXWebJS.DOM.CSSClass.RemoveClass(objOldHXTabButton,strClassNameForSelected);HXWebJS.DOM.CSSClass.AddClass(objOldHXTabButton,strClassNameForUnselected)}HXWebJS.DOM.CSSClass.RemoveClass(objHXTabButton,strClassNameForUnselected);HXWebJS.DOM.CSSClass.AddClass(objHXTabButton,strClassNameForSelected);objActiveElementInfo.current_selected_tab_id=strCurrentSelectedTabId;objActiveElementInfo.current_selected_tab_button=objHXTabButton;var fn_callback_after_tab_changed=objActiveElementInfo.tab_changed_callback_func;if(fn_callback_after_tab_changed!=null){fn_callback_after_tab_changed(objActiveElementInfo.webtabcontrol_id,strCurrentSelectedTabId,strOldTabId)}return true};HXWebJS.Controls.Tab._InternalFunctions._showhide_scroll_button=function(objActiveElementInfo){var strScrollLayoutDirection=objActiveElementInfo.tab_scroll_layout_direction;var objHXTabContainer_Internal=objActiveElementInfo.container_object;var objHXTabContainer_Root=objHXTabContainer_Internal.parentNode;if(strScrollLayoutDirection=="h"){var objHTmlScrollArrowLeft=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_left",objHXTabContainer_Root);var objHTmlScrollArrowRight=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_right",objHXTabContainer_Root);if(objHXTabContainer_Root.scrollWidth>objHXTabContainer_Root.offsetWidth||objHXTabContainer_Root.scrollHeight>objHXTabContainer_Root.offsetHeight){objHTmlScrollArrowLeft.style.right=(-1*objHXTabContainer_Root.scrollLeft)+"px";objHTmlScrollArrowRight.style.right=(-1*objHXTabContainer_Root.scrollLeft)+"px";objHTmlScrollArrowLeft.style.display="";objHTmlScrollArrowRight.style.display=""}else{objHTmlScrollArrowLeft.style.display="none";objHTmlScrollArrowRight.style.display="none"}}else{var objHTmlScrollArrowUp=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_top",objHXTabContainer_Root);var objHTmlScrollArrowDown=HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_bottom",objHXTabContainer_Root);if(objHXTabContainer_Root.scrollHeight>objHXTabContainer_Root.offsetHeight){objHTmlScrollArrowUp.style.bottom=(-1*objHXTabContainer_Root.scrollTop)+"px";objHTmlScrollArrowDown.style.bottom=(-1*objHXTabContainer_Root.scrollTop)+"px";objHTmlScrollArrowUp.style.display="";objHTmlScrollArrowDown.style.display=""}else{objHTmlScrollArrowUp.style.display="none";objHTmlScrollArrowDown.style.display="none"}}};HXWebJS.Controls.Tab._InternalFunctions._doscroll=function(e,strScrollDirection){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(e);objHXEventData.stopPropagation();var str_webtabcontrol_id=objHXEventData.target.parentNode.id;if(!str_webtabcontrol_id){return}if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];if(objActiveElementInfo==null){return}var objHXTabContainer_Root=objActiveElementInfo.container_object.parentNode;if(strScrollDirection=="left"){if(objHXTabContainer_Root.scrollLeft<=0){return}var intNewScrollLeft=objHXTabContainer_Root.scrollLeft-100;if(intNewScrollLeft<0){intNewScrollLeft=0}objHXTabContainer_Root.scrollLeft=intNewScrollLeft;objHXEventData.target.style.right=(-1*intNewScrollLeft)+"px";HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_right",objHXTabContainer_Root).style.right=(-1*intNewScrollLeft)+"px"}else{if(strScrollDirection=="right"){var intWidthGap=objHXTabContainer_Root.scrollWidth-objHXTabContainer_Root.offsetWidth;if(objHXTabContainer_Root.scrollLeft>=intWidthGap){return}var intNewScrollLeft=objHXTabContainer_Root.scrollLeft+100;if(intNewScrollLeft>intWidthGap){intNewScrollLeft=intWidthGap}objHXTabContainer_Root.scrollLeft=intNewScrollLeft;objHXEventData.target.style.right=(-1*intNewScrollLeft)+"px";HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_left",objHXTabContainer_Root).style.right=(-1*intNewScrollLeft)+"px"}else{if(strScrollDirection=="top"){if(objHXTabContainer_Root.scrollTop<=0){return}var intNewScrollTop=objHXTabContainer_Root.scrollTop-50;if(intNewScrollTop<0){intNewScrollTop=0}objHXTabContainer_Root.scrollTop=intNewScrollTop;objHXEventData.target.style.bottom=(-1*intNewScrollTop)+"px";HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_bottom",objHXTabContainer_Root).style.bottom=(-1*intNewScrollTop)+"px"}else{if(strScrollDirection=="bottom"){var intHeightGap=objHXTabContainer_Root.scrollHeight-objHXTabContainer_Root.offsetHeight;if(objHXTabContainer_Root.scrollTop>=intHeightGap){return}var intNewScrollTop=objHXTabContainer_Root.scrollTop+50;if(intNewScrollTop>intHeightGap){intNewScrollTop=intHeightGap}objHXTabContainer_Root.scrollTop=intNewScrollTop;objHXEventData.target.style.bottom=(-1*intNewScrollTop)+"px";HXWebJS.DOM.FindFirstElementById("hximg_tab_control_scroll_arrow_top",objHXTabContainer_Root).style.bottom=(-1*intNewScrollTop)+"px"}}}}};HXWebTabControl=HXWebJS.Controls.Tab;HXWebJS.Controls.Tab._InternalFunctions._onclickprocess_old=function(e){if(!HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){return}var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objEventSrcElement=objEventData.target;if(objEventSrcElement==null||objEventSrcElement.parentNode==null){return}var strEventSrcParentElementId=objEventSrcElement.parentNode.id;if(!strEventSrcParentElementId){return}var str_webtabcontrol_id=null;for(key in HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[key].webtabcontrol_id==strEventSrcParentElementId){str_webtabcontrol_id=key;break}}if(str_webtabcontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.Tab._InternalFunctions._registed_elements_info[str_webtabcontrol_id];HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process_old(objEventSrcElement,objActiveElementInfo)};HXWebJS.Controls.Tab._InternalFunctions._hxtab_changed_process_old=function(objHXTabButton,objActiveElementInfo){var strClassNameForSelected="hxtab_selected";var strClassNameForUnselected="hxtab_unselected";if(!HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,strClassNameForSelected)&&!HXWebJS.DOM.CSSClass.HasClass(objHXTabButton,strClassNameForUnselected)){return}var strOldTabId="";var objOldTabControl=null;var strCurrentSelectedTabId=objHXTabButton.getAttribute("hxtab_id");if(strCurrentSelectedTabId==null||strCurrentSelectedTabId==""){return}var objHXTabArea=objHXTabButton.parentNode;for(var i=0;i<objHXTabArea.childNodes.length;i++){var objNode=objHXTabArea.childNodes[i];if(objNode.nodeType==1){var strTempTabId=objNode.getAttribute("hxtab_id");if(strTempTabId!=null&&strTempTabId!=""){if(strTempTabId!=strCurrentSelectedTabId){if(HXWebJS.DOM.CSSClass.HasClass(objNode,strClassNameForSelected)){strOldTabId=strTempTabId;objOldTabControl=objNode;break}}}}}if(strOldTabId==""){strOldTabId=strCurrentSelectedTabId}var fn_callback_before_tab_changed=objActiveElementInfo.tab_before_change_callback_func;if(fn_callback_before_tab_changed!=null){var blnContinue=fn_callback_before_tab_changed(objActiveElementInfo.webtabcontrol_id,strCurrentSelectedTabId,strOldTabId);if(blnContinue!=null&&blnContinue==false){return}}if(objOldTabControl!=null){HXWebJS.DOM.CSSClass.RemoveClass(objOldTabControl,strClassNameForSelected);HXWebJS.DOM.CSSClass.AddClass(objOldTabControl,strClassNameForUnselected)}HXWebJS.DOM.CSSClass.RemoveClass(objHXTabButton,strClassNameForUnselected);HXWebJS.DOM.CSSClass.AddClass(objHXTabButton,strClassNameForSelected)};HXWebJS.Controls.Tab._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.Tab._InternalFunctions._onclickprocess_old)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.Tab._InternalFunctions._onloadprocess);HXWebJS.Controls.ChartWrapper={};HXWebJS.Controls.ChartWrapper.create_chart_area=function(objHtmlContainerForChart,fnCallbackAfterChartCreated,strScrollingType){if(objHtmlContainerForChart==null){return null}var objFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objFrame==null){var strHtmlForChartIframe='<iframe src="../hxpublic/hx_chart_wrapper__hxwebjs.htm" id="hxiframe_chart_window" width="100%" height="100%" frameborder="0"></iframe>';var objFrame=HXWebJS.DOM.CreateElement(strHtmlForChartIframe);if(strScrollingType==null||strScrollingType==""){strScrollingType="auto"}objFrame.scrolling=strScrollingType;objHtmlContainerForChart.appendChild(objFrame)}if(fnCallbackAfterChartCreated!=null){var fnDelegated;if(objFrame.readyState!="complete"){fnDelegated=HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.ChartWrapper.create_chart_area,objHtmlContainerForChart,fnCallbackAfterChartCreated);window.setTimeout(fnDelegated,200);return}var objChartWindow=HXWebJS.Core.GetFrameWindow(objFrame);if(objChartWindow.document.readyState!="complete"){fnDelegated=HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.ChartWrapper.create_chart_area,objHtmlContainerForChart,fnCallbackAfterChartCreated);window.setTimeout(fnDelegated,200);return}fnCallbackAfterChartCreated(objHtmlContainerForChart)}};HXWebJS.Controls.ChartWrapper.get_chart_data_xml_object=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.get_chart_data_xml_object()};HXWebJS.Controls.ChartWrapper.get_chart_axes_x_info_xml_object=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.get_chart_axes_x_info_xml_object()};HXWebJS.Controls.ChartWrapper.get_chart_axes_y_info_xml_object=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.get_chart_axes_y_info_xml_object()};HXWebJS.Controls.ChartWrapper.get_blank_xmlnode_for_data_series=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.get_blank_xmlnode_for_data_series()};HXWebJS.Controls.ChartWrapper.get_blank_xmlnode_for_data_point=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.get_blank_xmlnode_for_data_point()};HXWebJS.Controls.ChartWrapper.set_chart_title=function(objHtmlContainerForChart,strChartTitle,blnToolbarEnabled){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.set_chart_title(strChartTitle,blnToolbarEnabled)};HXWebJS.Controls.ChartWrapper.set_chart_axes_x_info=function(objHtmlContainerForChart){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.set_chart_axes_x_info(strChartAxesXInfoXmlData)};HXWebJS.Controls.ChartWrapper.set_chart_axes_y_info=function(objHtmlContainerForChart,strChartAxesYInfoXmlData){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.set_chart_axes_y_info(strChartAxesYInfoXmlData)};HXWebJS.Controls.ChartWrapper.set_chart_data=function(objHtmlContainerForChart,strChartXmlData){if(strChartXmlData==null||strChartXmlData==""){return}var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.set_chart_data(strChartXmlData)};HXWebJS.Controls.ChartWrapper.show_or_refresh_chart=function(objHtmlContainerForChart,fnCallbackForAttachEvent,strBackgroundColor){var objChartFrame=HXWebJS.DOM.FindFirstElementById("hxiframe_chart_window",objHtmlContainerForChart);if(objChartFrame==null){return}objChartWindow=HXWebJS.Core.GetFrameWindow(objChartFrame);if(objChartWindow==null){return}return objChartWindow.show_or_refresh_chart(fnCallbackForAttachEvent,strBackgroundColor)};HXWebChartControlWrapper=HXWebJS.Controls.ChartWrapper;HXWebJS.Controls.ChartWrapper.build_chart_xml_content=function(jsonChartSetting){var strChartType=jsonChartSetting.chart_type;if(strChartType==null||strChartType==""){return}strChartType=strChartType.toLowerCase();var strChartXmlDataIslandId=jsonChartSetting.chart_xml_data_island_id;var strFieldCodeOfCategory=jsonChartSetting.field_code_of_category;var strFieldCodeOfSerial=jsonChartSetting.field_code_of_serial;var strFieldCodeOfValue=jsonChartSetting.field_code_of_value;var blnAutoDataSort=(jsonChartSetting.auto_data_sort==null||jsonChartSetting.auto_data_sort==""||jsonChartSetting.auto_data_sort=="0"?false:true);var strObjectCode=jsonChartSetting.object_code;var strUITextCodeOfTitle=jsonChartSetting.ui_text_code_of_title;var strShowLegend=jsonChartSetting.show_legend;var blnShowLegend=(strShowLegend==null||strShowLegend==""||strShowLegend!="0"?true:false);var strExploded=jsonChartSetting.exploded;var blnIsExploded=(strExploded==null||strExploded==""||strExploded!="0"?true:false);var strDataPointLabelStyle=jsonChartSetting.data_point_label_style;if(strDataPointLabelStyle==null){strDataPointLabelStyle="Outside"}var blnMultipleSerials=(strFieldCodeOfCategory!=null&&strFieldCodeOfCategory!="");var strPreviousCategoryValue="",strCurrentCategoryValue;var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strChartXmlDataIslandId);if(objHXXmlDoc==null){return""}if(blnMultipleSerials&&blnAutoDataSort){HXWebJS.Utility._InternalFunctions._HXWebXmlList_QuickSort(objHXXmlDoc.GetRootXmlNode()._xmlnode,"@"+strFieldCodeOfCategory.toUpperCase(),false)}var objHXXmlNodeList=objHXXmlDoc.SelectNodes("//RS_ROW");var objTempHXXmlNode;var strTempSerialName,strTempValue;if(objHXXmlNodeList.length==0){return""}var sb_ChartXmlContent=new HXWebStringBuilder();sb_ChartXmlContent.append("<hx_vc__Chart.Series>");for(var intDataRowIndex=0;intDataRowIndex<objHXXmlNodeList.length;intDataRowIndex++){objTempHXXmlNode=objHXXmlNodeList[intDataRowIndex];strCurrentCategoryValue=(blnMultipleSerials?objTempHXXmlNode.SelectSingleNode("@"+strFieldCodeOfCategory.toUpperCase()).GetText():"");if(intDataRowIndex==0||(blnMultipleSerials&&strCurrentCategoryValue!=strPreviousCategoryValue)){if(intDataRowIndex>0){sb_ChartXmlContent.append("</hx_vc__DataSeries.DataPoints>");sb_ChartXmlContent.append("</hx_vc__DataSeries>")}sb_ChartXmlContent.append('<hx_vc__DataSeries RenderAs="'+strChartType+'"');sb_ChartXmlContent.append(' LabelEnabled="True"  LabelText="'+(strChartType=="pie"?"":"#YValue")+'"');if(blnShowLegend){sb_ChartXmlContent.append(' LegendText="'+strCurrentCategoryValue+'" ShowInLegend="True"')}else{sb_ChartXmlContent.append(' LegendText="" ShowInLegend="False"')}sb_ChartXmlContent.append(' LabelLineColor="Black">');sb_ChartXmlContent.append("<hx_vc__DataSeries.DataPoints >")}strTempSerialName=objTempHXXmlNode.SelectSingleNode("@"+strFieldCodeOfSerial.toUpperCase()).GetText();strTempValue=objTempHXXmlNode.SelectSingleNode("@"+strFieldCodeOfValue.toUpperCase()).GetText();sb_ChartXmlContent.append('<hx_vc__DataPoint AxisXLabel="'+strTempSerialName+'" YValue="'+strTempValue+'"');sb_ChartXmlContent.append(' Exploded="'+(blnIsExploded?"True":"False")+'" LabelStyle="'+strDataPointLabelStyle+'" />');strPreviousCategoryValue=strCurrentCategoryValue}sb_ChartXmlContent.append("</hx_vc__DataSeries.DataPoints>");sb_ChartXmlContent.append("</hx_vc__DataSeries>");sb_ChartXmlContent.append("</hx_vc__Chart.Series>");return sb_ChartXmlContent.toString()};HXWebJS.Controls.TreeView={};HXWebJS.Controls.TreeView._InternalFunctions={};HXWebTreeViewControl=HXWebJS.Controls.TreeView;HXWebJS.Controls.TreeView.register=function(str_treeviewcontrol_id,obj_treeview_container,int_is_show_checkbox,int_is_show_images,int_is_show_root_line,fn_callback,str_dft_node_img_class_name,int_is_show_plusminus,int_is_auto_expandshrink,int_node_image_size_mode){if(obj_treeview_container==null){return}if(int_is_show_checkbox==null||int_is_show_checkbox!=1){int_is_show_checkbox=0}if(int_is_show_images==null||int_is_show_images!=1){int_is_show_images=0}if(int_is_show_root_line==null||int_is_show_root_line!=0){int_is_show_root_line=1}if(int_is_show_plusminus==null||int_is_show_plusminus!=0){int_is_show_plusminus=1}if(int_is_auto_expandshrink==null){int_is_auto_expandshrink=0}if(int_node_image_size_mode==null){int_node_image_size_mode=18}if(str_dft_node_img_class_name==null){str_dft_node_img_class_name="hxicon_folder_closed"}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(!c){var c=new Object();c={treeviewcontrol_id:str_treeviewcontrol_id,is_show_root_line:int_is_show_root_line,is_show_plusminus:int_is_show_plusminus,is_show_checkbox:int_is_show_checkbox,is_show_images:int_is_show_images,is_auto_expandshrink:int_is_auto_expandshrink,node_image_size_mode:int_node_image_size_mode,dft_node_img_class_name:str_dft_node_img_class_name,node_type_img_class_collection:null,predefined_treeview_setting_code:null,hxxmldoc_for_treeview_data:null,chosen_node_unique_code_list:"",hxxmldoc_for_chosen_nodes_and_predecessors_data:null,is_keyword_search_mode:false,callback_func:fn_callback,treeview_container_object:obj_treeview_container,last_selected_treenode_table:null};HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id]=c}};HXWebJS.Controls.TreeView.set_pagexmlsvc_assembly_and_class=function(str_treeviewcontrol_id,str_pagexmlsvc_assemblyname,str_pagexmlsvc_classname){if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];objActiveElementInfo.webtreeview_pagexmlsvc_assemblyname=str_pagexmlsvc_assemblyname;objActiveElementInfo.webtreeview_pagexmlsvc_classname=str_pagexmlsvc_classname};HXWebJS.Controls.TreeView.set_extend_webpart_html_id=function(str_treeviewcontrol_id,strExtendWebPartHtmlId){if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.extend_web_part_html_id=strExtendWebPartHtmlId};HXWebJS.Controls.TreeView.demo_callback_func__all_events=function(str_event_type,obj_current_treenode_data){alert("str_event_type={onhxnodeclicked|onhxcheckstatuschanged|onhxchildnodeinit|onhxcheckstatusafterupdated|onhxtreenode_expanded|onhxtreenode_collapsed}.  obj_current_treenode_data has attributes:treeviewcontrol_id,node_unique_code,node_text,node_level,node_type,node_choose_status,node_hint_desc,node_need_init_children, node_attr_1/2/3/4/5")};HXWebJS.Controls.TreeView.set_predefined_treeview_setting_code=function(str_treeviewcontrol_id,str_treeview_setting_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.predefined_treeview_setting_code=str_treeview_setting_code};HXWebJS.Controls.TreeView.set_image_info=function(str_treeviewcontrol_id,obj_node_type_img_class_collection){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.node_type_img_class_collection=obj_node_type_img_class_collection};HXWebJS.Controls.TreeView.set_options=function(str_treeviewcontrol_id,options){if(options==null){return}if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}if(options.is_show_root_line!=null){objActiveElementInfo.is_show_root_line=options.is_show_root_line}if(options.is_show_plusminus!=null){objActiveElementInfo.is_show_plusminus=options.is_show_plusminus}if(options.is_show_checkbox!=null){objActiveElementInfo.is_show_checkbox=options.is_show_checkbox}if(options.is_show_images!=null){objActiveElementInfo.is_show_images=options.is_show_images}if(options.is_auto_expandshrink!=null){objActiveElementInfo.is_auto_expandshrink=options.is_auto_expandshrink}if(options.node_image_size_mode!=null){objActiveElementInfo.node_image_size_mode=options.node_image_size_mode}if(options.dft_node_img_class_name!=null){objActiveElementInfo.dft_node_img_class_name=options.dft_node_img_class_name}if(options.node_type_img_class_collection!=null){objActiveElementInfo.node_type_img_class_collection=options.node_type_img_class_collection}if(options.predefined_treeview_setting_code!=null){objActiveElementInfo.predefined_treeview_setting_code=options.predefined_treeview_setting_code}if(options.is_keyword_search_mode!=null){objActiveElementInfo.is_keyword_search_mode=options.is_keyword_search_mode}if(options.extend_web_part_html_id!=null){objActiveElementInfo.extend_web_part_html_id=options.extend_web_part_html_id}if(options.callback_func!=null){objActiveElementInfo.callback_func=options.callback_func}if(options.node_html_build_mode!=null){objActiveElementInfo.node_html_build_mode=options.node_html_build_mode}};HXWebJS.Controls.TreeView.init_root_nodes=function(str_treeviewcontrol_id,int_is_auto_init_nodes,int_auto_init_level,blnAcquireAllNodeDataFromServer,fnCustomizedAcquireTreeViewData,fnCallbackAfterInitFinished){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}if(int_is_auto_init_nodes==null){int_is_auto_init_nodes=1}if(int_auto_init_level==null||int_auto_init_level<0){int_auto_init_level=-1}if(blnAcquireAllNodeDataFromServer==null){blnAcquireAllNodeDataFromServer=false}if(blnAcquireAllNodeDataFromServer){var fnCallback=function(result){var objHXXmlDocOfTreeViewData=null;if(typeof(result)=="string"){objHXXmlDocOfTreeViewData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(result)}else{objHXXmlDocOfTreeViewData=result}objActiveElementInfo.hxxmldoc_for_treeview_data=objHXXmlDocOfTreeViewData;HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes(objActiveElementInfo,"","",0,int_is_auto_init_nodes,(int_is_auto_init_nodes>1?true:false),0,int_auto_init_level);if(fnCallbackAfterInitFinished!=null){fnCallbackAfterInitFinished(str_treeviewcontrol_id,objHXXmlDocOfTreeViewData)}};if(fnCustomizedAcquireTreeViewData!=null){var objHXXmlDocOfTreeViewData=fnCustomizedAcquireTreeViewData(str_treeviewcontrol_id);fnCallback(objHXXmlDocOfTreeViewData)}else{HXWebTreeViewControl._InternalFunctions._get_init_treeview_data_from_server(objActiveElementInfo,"","",-1,true,false,fnCallback)}return}HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes(objActiveElementInfo,"","",0,int_is_auto_init_nodes,(int_is_auto_init_nodes>1?true:false),0,int_auto_init_level)};HXWebJS.Controls.TreeView.init_and_expand_child_nodes=function(str_treeviewcontrol_id,str_parent_node_unique_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_parent_node_unique_code);var objTemp=HXWebJS.DOM.FindElementsById("img_hx_plusminus",objTreeNodeTable);if(objTemp==null){return}if(objTemp.length!=null){objTemp=objTemp[objTemp.length-1]}if(objTemp!=null){HXWebJS.Controls.TreeView.click_node(str_treeviewcontrol_id,str_parent_node_unique_code,objTemp)}};HXWebTreeViewControl.expand_all_level_nodes=function(str_treeviewcontrol_id){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var arrAllTreeNodeTableList;var arrTopLevelTreeNodeTableList;if(blnIsUseV2HtmlMode){arrAllTreeNodeTableList=HXWebJS.DOM.FindElementsById("hx_node_container_div_object",objActiveElementInfo.treeview_container_object);arrTopLevelTreeNodeTableList=HXWebJS.DOM.FindElementsByAttribute("node_level","0","div",arrAllTreeNodeTableList,false)}else{arrAllTreeNodeTableList=HXWebJS.DOM.FindElementsById("hx_node_table_object",objActiveElementInfo.treeview_container_object);arrTopLevelTreeNodeTableList=HXWebJS.DOM.FindElementsByAttribute("node_level","0","table",arrAllTreeNodeTableList,false)}var objTreeNodeTable;for(var i=0;i<arrTopLevelTreeNodeTableList.length;i++){objTreeNodeTable=arrTopLevelTreeNodeTableList[i];var intNeedInitChildren=parseInt(objTreeNodeTable.getAttribute("hx_is_need_init_children"));if(intNeedInitChildren!=0){var blnTempInitResult=HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes(objActiveElementInfo,objTreeNodeTable.getAttribute("hx_treenode_uuid"),objTreeNodeTable.getAttribute("hx_node_type"),objTreeNodeTable.getAttribute("hx_choose_status"),2,true,0);if(blnTempInitResult==false){continue}}HXWebTreeViewControl._InternalFunctions._ShowAllChildrenOfNode(objActiveElementInfo,objTreeNodeTable,0,null)}};HXWebTreeViewControl.collapse_all_level_nodes=function(str_treeviewcontrol_id){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var arrAllTreeNodeTableList;var arrTopLevelTreeNodeTableList;if(blnIsUseV2HtmlMode){arrAllTreeNodeTableList=HXWebJS.DOM.FindElementsById("hx_node_container_div_object",objActiveElementInfo.treeview_container_object);arrTopLevelTreeNodeTableList=HXWebJS.DOM.FindElementsByAttribute("node_level","0","div",arrAllTreeNodeTableList,false)}else{arrAllTreeNodeTableList=HXWebJS.DOM.FindElementsById("hx_node_table_object",objActiveElementInfo.treeview_container_object);arrTopLevelTreeNodeTableList=HXWebJS.DOM.FindElementsByAttribute("node_level","0","table",arrAllTreeNodeTableList,false)}for(var i=0;i<arrTopLevelTreeNodeTableList.length;i++){HXWebTreeViewControl._InternalFunctions._HideAllChildrenOfNode(objActiveElementInfo,arrTopLevelTreeNodeTableList[i],0,null)}};HXWebTreeViewControl.init_treeview_nodes=function(str_treeviewcontrol_id,options,fnCallbackAfterInitFinished){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}if(options==null){options={}}var strSeachKeyChars=(options.search_key_chars==null?"":HXWebJS.Utility.Trim(options.search_key_chars));var intLevelsToInitShow=(options.init_auto_show_level==null?1:(options.init_auto_show_level<=0?-1:options.init_auto_show_level));if(strSeachKeyChars!=""){intLevelsToInitShow=-1}var strChosenNodeUniqueCodeList=(options.chosen_node_unique_code_list==null?"":options.chosen_node_unique_code_list);var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var blnIsMultipleChosenMode=(objActiveElementInfo.is_show_checkbox==1);var blnAcquireAllTreeviewDataFromServer;var blnAcquireChosenNodePredecessors;if(strSeachKeyChars!=""){blnAcquireAllTreeviewDataFromServer=false;blnAcquireChosenNodePredecessors=true}else{if(intLevelsToInitShow<=0){blnAcquireAllTreeviewDataFromServer=true;if(blnIsMultipleChosenMode){blnAcquireChosenNodePredecessors=true}else{blnAcquireChosenNodePredecessors=false}}else{blnAcquireAllTreeviewDataFromServer=(options.acquire_all_treeview_data==true?true:false);blnAcquireChosenNodePredecessors=true}}var fnCallback=function(result){if(result==null){return}if(result==""){HXWebTreeViewControl.clear_nodes(str_treeviewcontrol_id);if(fnCallbackAfterInitFinished!=null){fnCallbackAfterInitFinished(str_treeviewcontrol_id,objActiveElementInfo)}return}objActiveElementInfo.is_keyword_search_mode=(strSeachKeyChars!=""?true:false);objActiveElementInfo.chosen_node_unique_code_list=strChosenNodeUniqueCodeList;objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data=null;var objHXXmlDoc_ReturnData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(result);var objHXXmlDocOfTreeViewData;if(result.substr(0,14)=="<HX_ALL_DATAS>"){var strChosenNodesAndPredecessorXmlInfo=objHXXmlDoc_ReturnData.SelectSingleNode("//HX_DATA_BLOCK[@CODE='chosen_nodes_and_predecessors_info']").GetText();if(strChosenNodesAndPredecessorXmlInfo==""){objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data=null}else{objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strChosenNodesAndPredecessorXmlInfo)}var strXmlTreeViewData=objHXXmlDoc_ReturnData.SelectSingleNode("//HX_DATA_BLOCK[@CODE='treeview_nodes_data']").GetText();var objHXXmlDocOfTreeViewData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlTreeViewData)}else{objHXXmlDocOfTreeViewData=objHXXmlDoc_ReturnData}if(blnAcquireAllTreeviewDataFromServer){objActiveElementInfo.hxxmldoc_for_treeview_data=objHXXmlDocOfTreeViewData}HXWebTreeViewControl.clear_nodes(str_treeviewcontrol_id);HXWebTreeViewControl._InternalFunctions._init_append_nodes_with_multi_levels(objActiveElementInfo,objHXXmlDocOfTreeViewData,blnAcquireAllTreeviewDataFromServer,intLevelsToInitShow);if(fnCallbackAfterInitFinished!=null){fnCallbackAfterInitFinished(str_treeviewcontrol_id,objActiveElementInfo)}};HXWebTreeViewControl._InternalFunctions._get_init_treeview_data_from_server(objActiveElementInfo,strSeachKeyChars,strChosenNodeUniqueCodeList,intLevelsToInitShow,blnAcquireAllTreeviewDataFromServer,blnAcquireChosenNodePredecessors,fnCallback)};HXWebJS.Controls.TreeView.mark_node_as_checked=function(str_treeviewcontrol_id,str_node_unique_code,blnIsChecked,blnAutoCheckAllChildren){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(objTreeNodeTable==null){return}if(blnIsChecked==null){blnIsChecked=true}if(blnAutoCheckAllChildren==null){blnAutoCheckAllChildren=false}var objCheckedElement=HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTreeNodeTable);objCheckedElement.checked=blnIsChecked;objCheckedElement.indeterminat=false;objTreeNodeTable.setAttribute("hx_choose_status",(blnIsChecked?1:0));objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTreeNodeTable);while(objTemp!=null){var intTempChildNodesChooseStatus=HXWebJS.Controls.TreeView._InternalFunctions._check_child_choose_status(objActiveElementInfo,objTemp);objCheckedElement=HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTemp);objCheckedElement.checked=(intTempChildNodesChooseStatus==0?false:true);objCheckedElement.indeterminate=(intTempChildNodesChooseStatus==2?true:false);objTemp.setAttribute("hx_choose_status",intTempChildNodesChooseStatus);objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTemp)}if(!blnAutoCheckAllChildren){return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intNodeLevel=parseInt(objTreeNodeTable.getAttribute("node_level"));var objTemp=(blnIsUseV2HtmlMode?objTreeNodeTable.nextSibling:objTreeNodeTable.parentNode.nextSibling);while(objTemp!=null){var objTempHXNodeTableObject=(blnIsUseV2HtmlMode?objTemp:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp));if(parseInt(objTempHXNodeTableObject.getAttribute("node_level"))>intNodeLevel){objCheckedElement=HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTempHXNodeTableObject);objCheckedElement.checked=blnIsChecked;objCheckedElement.indeterminat=false;objTempHXNodeTableObject.setAttribute("hx_choose_status",(blnIsChecked?1:0))}else{break}objTemp=objTemp.nextSibling}};HXWebJS.Controls.TreeView.set_dragdrop_info=function(str_treeviewcontrol_id,int_is_allow_dragdrop,fn_callback_before_ondrop,int_allow_drag_to_root_node){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}if(int_is_allow_dragdrop==null||int_is_allow_dragdrop!=1){int_is_allow_dragdrop=0}if(int_allow_drag_to_root_node==null||int_allow_drag_to_root_node!=1){int_allow_drag_to_root_node=0}objActiveElementInfo.is_allow_dragdrop=int_is_allow_dragdrop;objActiveElementInfo.callback_func_before_ondrop=fn_callback_before_ondrop;objActiveElementInfo.is_allow_drag_to_root_node=int_allow_drag_to_root_node;if(int_is_allow_dragdrop!=0){HXWebJS.EventManager.AddListener(objActiveElementInfo.treeview_container_object,"dragstart",HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.TreeView._InternalFunctions._ondragstart_process,objActiveElementInfo));HXWebJS.EventManager.AddListener(objActiveElementInfo.treeview_container_object,"dragenter",HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.TreeView._InternalFunctions._ondragenterandover_process,objActiveElementInfo));HXWebJS.EventManager.AddListener(objActiveElementInfo.treeview_container_object,"dragover",HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.TreeView._InternalFunctions._ondragenterandover_process,objActiveElementInfo));HXWebJS.EventManager.AddListener(objActiveElementInfo.treeview_container_object,"drop",HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Controls.TreeView._InternalFunctions._ondrop_process,objActiveElementInfo))}};HXWebJS.Controls.TreeView.set_filter_data_get_callback=function(str_treeviewcontrol_id,fn_filter_data_callback){if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.filter_data_callback_func=fn_filter_data_callback};HXWebJS.Controls.TreeView.append_node=function(str_treeviewcontrol_id,str_node_unique_code,str_node_text,str_node_hint_desc,str_node_type,str_parent_node_unique_code,str_young_brother_node_unique_code,int_need_init_children,int_is_checked,str_attr_1,str_attr_2,str_attr_3,str_attr_4,str_attr_5,blnNodeIsLeaf,str_node_image_class_name,int_auto_init_level,str_node_category){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var nodeData={node_unique_code:str_node_unique_code,node_text:str_node_text,node_type:str_node_type,node_category:str_node_category,node_hint_desc:str_node_hint_desc,node_attr_1:str_attr_1,node_attr_2:str_attr_2,node_attr_3:str_attr_3,node_attr_4:str_attr_4,node_attr_5:str_attr_5,node_image_class_name:str_node_image_class_name};HXWebJS.Controls.TreeView._InternalFunctions._append_node(objActiveElementInfo,nodeData,str_parent_node_unique_code,str_young_brother_node_unique_code,int_is_checked,blnNodeIsLeaf);if(int_need_init_children==null||(int_need_init_children!=1&&int_need_init_children!=2)){int_need_init_children=0}if(int_need_init_children==2){var obj_parent_node_table=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_parent_node_unique_code);var intNodeLevel=(str_parent_node_unique_code==null||str_parent_node_unique_code==""?0:parseInt(obj_parent_node_table.getAttribute("node_level"))+1);HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes(objActiveElementInfo,str_node_unique_code,str_node_type,int_is_checked,int_need_init_children,true,intNodeLevel,int_auto_init_level)}return};HXWebJS.Controls.TreeView.change_node_data=function(str_treeviewcontrol_id,str_node_unique_code,str_node_text,str_node_hint_desc,str_attr_1,str_attr_2,str_attr_3,str_attr_4,str_attr_5){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var obj_node_table=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(obj_node_table==null){throw"HXWebJS.Controls.TreeView.change_node_data() Error! the node ("+str_node_unique_code+") you want to update do not exist in the treeview.";return}if(str_node_text!=null){HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",obj_node_table),str_node_text)}if(str_node_hint_desc!=null){HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",obj_node_table).title=str_node_hint_desc}if(str_attr_1!=null){obj_node_table.setAttribute("hx_attr_1",str_attr_1,0)}if(str_attr_2!=null){obj_node_table.setAttribute("hx_attr_2",str_attr_2,0)}if(str_attr_3!=null){obj_node_table.setAttribute("hx_attr_3",str_attr_3,0)}if(str_attr_4!=null){obj_node_table.setAttribute("hx_attr_4",str_attr_4,0)}if(str_attr_5!=null){obj_node_table.setAttribute("hx_attr_5",str_attr_5,0)}};HXWebJS.Controls.TreeView.clear_nodes=function(str_treeviewcontrol_id){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}objActiveElementInfo.last_selected_treenode_table=null;objActiveElementInfo.treeview_container_object.innerHTML=""};HXWebJS.Controls.TreeView.remove_node=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var obj_node_table=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(obj_node_table==null){return}HXWebJS.Controls.TreeView._InternalFunctions._remove_node_by_object(objActiveElementInfo,obj_node_table)};HXWebJS.Controls.TreeView.click_node=function(str_treeviewcontrol_id,str_node_unique_code,obj_event_src_element,eventObject){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}if(obj_event_src_element==null&&eventObject==null){return}var objHXEventObject=HXWebJS.EventManager.GetCurrentEventData(eventObject);var objSrcElement=(obj_event_src_element==null?objHXEventObject.target:obj_event_src_element);var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);var intHasChildren=parseInt(objTreeNodeTable.getAttribute("hx_has_children"));var intNeedInitChildren=parseInt(objTreeNodeTable.getAttribute("hx_is_need_init_children"));var intIsExpanded=parseInt(objTreeNodeTable.getAttribute("hx_is_expanded"));var strParentNodeUUID=objTreeNodeTable.getAttribute("hx_parent_node_uuid");var intNodeLevel=parseInt(objTreeNodeTable.getAttribute("node_level"));var strNodeUniqueCode=objTreeNodeTable.getAttribute("hx_treenode_uuid");var strNodeType=objTreeNodeTable.getAttribute("hx_node_type");var strNodeCategory=objTreeNodeTable.getAttribute("hx_node_category");var intChooseStatus=objTreeNodeTable.getAttribute("hx_choose_status");if(objSrcElement.id=="img_hx_plusminus"){if(intHasChildren==0&&intNeedInitChildren==0){return}if(intIsExpanded==0){if(intNeedInitChildren!=0&&objActiveElementInfo.is_keyword_search_mode==false){var blnTempInitResult=HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes(objActiveElementInfo,strNodeUniqueCode,strNodeType,intChooseStatus,1,true,intNodeLevel,null);if(blnTempInitResult==false){return}}var objTemp=(blnIsUseV2HtmlMode?objTreeNodeTable.nextSibling:objTreeNodeTable.parentNode.nextSibling);var intChildCounts=0;var intTempNodeLevel=-1;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}while(objTemp!=null&&intTempNodeLevel>intNodeLevel){if(intTempNodeLevel==intNodeLevel+1){objTemp.style.display="";intChildCounts++}objTemp=objTemp.nextSibling;if(objTemp==null){break}if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}if(intChildCounts>0){objSrcElement.className=objSrcElement.className.replace("plus","minus")}else{if(blnIsUseV2HtmlMode){objSrcElement.className=""}else{objSrcElement.className=objSrcElement.className.replace("_plus","")}objTreeNodeTable.setAttribute("hx_has_children",0)}objTreeNodeTable.setAttribute("hx_is_expanded",1);if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);objActiveElementInfo.callback_func("onhxtreenode_expanded",objTempTreeNodeData,objHXEventObject)}return}else{HXWebTreeViewControl._InternalFunctions._HideAllChildrenOfNode(objActiveElementInfo,objTreeNodeTable,intNodeLevel,objHXEventObject);return}}if(objSrcElement.id=="chkbx_hx_treenode"){var blnCurrCheckedStatus=objSrcElement.checked;var blnTempReturnResult=true;if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);blnTempReturnResult=objActiveElementInfo.callback_func("onhxcheckstatuschanged",objTempTreeNodeData,objHXEventObject)}if(blnTempReturnResult==false){objSrcElement.checked=!blnCurrCheckedStatus;return}objSrcElement.checked=blnCurrCheckedStatus;objSrcElement.indeterminat=false;objTreeNodeTable.setAttribute("hx_choose_status",(blnCurrCheckedStatus?1:0));var objTemp=(blnIsUseV2HtmlMode?objTreeNodeTable.nextSibling:objTreeNodeTable.parentNode.nextSibling);while(objTemp!=null){var objTempHXNodeTableObject=(blnIsUseV2HtmlMode?objTemp:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp));if(parseInt(objTempHXNodeTableObject.getAttribute("node_level"))>intNodeLevel){HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTempHXNodeTableObject).checked=blnCurrCheckedStatus;HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTempHXNodeTableObject).indeterminat=false;objTempHXNodeTableObject.setAttribute("hx_choose_status",(blnCurrCheckedStatus?1:0))}else{break}objTemp=objTemp.nextSibling}if(objActiveElementInfo.is_keyword_search_mode==false){objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTreeNodeTable);while(objTemp!=null){var intTempChildNodesChooseStatus=HXWebJS.Controls.TreeView._InternalFunctions._check_child_choose_status(objActiveElementInfo,objTemp);HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTemp).checked=(intTempChildNodesChooseStatus==0?false:true);HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objTemp).indeterminate=(intTempChildNodesChooseStatus==2?true:false);objTemp.setAttribute("hx_choose_status",intTempChildNodesChooseStatus);objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTemp)}}if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);objActiveElementInfo.callback_func("onhxcheckstatusafterupdated",objTempTreeNodeData,objHXEventObject)}}if(objSrcElement.id=="img_hx_treenode"||objSrcElement.id=="spn_hx_treenode"){var blnTempReturnResult=true;if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);blnTempReturnResult=objActiveElementInfo.callback_func("onhxnodeclicked",objTempTreeNodeData,objHXEventObject)}if(blnTempReturnResult==false){return}HXWebJS.Controls.TreeView._InternalFunctions._mark_treenode_as_selected(objActiveElementInfo,objTreeNodeTable,intNodeLevel);if(intHasChildren>0&&objActiveElementInfo.is_auto_expandshrink==1){var objTemp=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",objTreeNodeTable);if(objTemp!=null){HXWebJS.Controls.TreeView.click_node(str_treeviewcontrol_id,str_node_unique_code,objTemp)}}}};HXWebJS.Controls.TreeView.get_node_data=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return null}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(objTreeNodeTable==null){return null}var objData={choose_status:objTreeNodeTable.getAttribute("hx_choose_status"),node_level:objTreeNodeTable.getAttribute("node_level"),node_type:objTreeNodeTable.getAttribute("hx_node_type"),key:str_node_unique_code,node_category:objTreeNodeTable.getAttribute("hx_node_category"),parent_node_unique_code:objTreeNodeTable.getAttribute("hx_parent_node_uuid"),desc:HXWebJS.DOM.ElementGetInnerText(HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable)),attr_1:HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_1")),attr_2:HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_2")),attr_3:HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_3")),attr_4:HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_4")),attr_5:HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_5"))};return objData};HXWebJS.Controls.TreeView.get_hovering_node_info=function(str_treeviewcontrol_id,objSrcElement){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return null}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return null}if(objSrcElement==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object_via_event_src_element(objActiveElementInfo,objSrcElement);if(objTreeNodeTable==null){return null}var objNodeTextSpan=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable);var objResultData=new Object();objResultData.node_unique_code=objTreeNodeTable.getAttribute("hx_treenode_uuid");objResultData.node_text=HXWebJS.DOM.ElementGetInnerText(objNodeTextSpan);objResultData.node_textarea_pos_left=HXWebJS.DOM.GetElementLeftPosition(objNodeTextSpan);objResultData.node_textarea_pos_right=objResultData.node_textarea_pos_left+objNodeTextSpan.offsetWidth;objResultData.node_textarea_pos_top=HXWebJS.DOM.GetElementTopPosition(objNodeTextSpan);objResultData.node_textarea_pos_bottom=objResultData.node_textarea_pos_top+objNodeTextSpan.offsetHeight;return objResultData};HXWebJS.Controls.TreeView.get_node_textarea_info_via_code=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return null}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(objTreeNodeTable==null){return null}var objNodeTextSpan=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable);var objResultData=new Object();objResultData.node_unique_code=objTreeNodeTable.getAttribute("hx_treenode_uuid");objResultData.node_text=HXWebJS.DOM.ElementGetInnerTexto(bjNodeTextSpan);objResultData.node_textarea_pos_left=HXWebJS.DOM.GetElementLeftPosition(objNodeTextSpan);objResultData.node_textarea_pos_right=objResultData.node_textarea_pos_left+objNodeTextSpan.offsetWidth;objResultData.node_textarea_pos_top=HXWebJS.DOM.GetElementTopPosition(objNodeTextSpan);objResultData.node_textarea_pos_bottom=objResultData.node_textarea_pos_top+objNodeTextSpan.offsetHeight;objResultData.node_textarea_object=objNodeTextSpan;return objResultData};HXWebJS.Controls.TreeView._InternalFunctions._mark_treenode_as_selected=function(objActiveElementInfo,objTreeNodeTable,intNodeLevel){var objSpanTreeNode;if(objActiveElementInfo.last_selected_treenode_table!=null&&objActiveElementInfo.last_selected_treenode_table.innerHTML!=""){objSpanTreeNode=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objActiveElementInfo.last_selected_treenode_table);if(parseInt(objActiveElementInfo.last_selected_treenode_table.getAttribute("node_level"))==0){HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_click");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_hover");HXWebJS.DOM.CSSClass.AddClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_normal")}else{HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_click");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_hover");HXWebJS.DOM.CSSClass.AddClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_normal")}}objSpanTreeNode=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable);if(intNodeLevel==0){HXWebJS.DOM.CSSClass.AddClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_click");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_normal");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_root_node_hover")}else{HXWebJS.DOM.CSSClass.AddClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_click");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_normal");HXWebJS.DOM.CSSClass.RemoveClass(objSpanTreeNode,"hxwebtreeviewcontrol_child_node_hover")}objActiveElementInfo.last_selected_treenode_table=objTreeNodeTable};HXWebJS.Controls.TreeView._InternalFunctions._init_child_nodes=function(objActiveElementInfo,str_parent_node_unique_code,str_parent_node_type,int_check_status,int_is_auto_init_child,blnIsDirectDataAcquire,int_parent_node_level,int_auto_init_level){if(int_check_status==null){int_check_status=0}if(int_is_auto_init_child==null){int_is_auto_init_child=1}if(blnIsDirectDataAcquire==null){blnIsDirectDataAcquire=false}if(int_is_auto_init_child==2&&int_auto_init_level>0&&int_parent_node_level>=int_auto_init_level){return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var fnResponseForDataList=function(strReturnValue){if(strReturnValue==null){HXWebPopupTreeViewControl._InternalFunctions._current_active_control_process_fail=true;return}var objXmlDoc;if(typeof(strReturnValue)=="string"){if(strReturnValue==""){objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA />")}else{objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strReturnValue)}}else{if(typeof(strReturnValue)=="object"){objXmlDoc=strReturnValue}else{return}}var objTempNodeDiv_ForYoungBrotherOfParent=null;if(str_parent_node_unique_code!=null&&str_parent_node_unique_code!=""){var tmpNodeTable=HXWebTreeViewControl._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_parent_node_unique_code);tmpNodeTable=HXWebTreeViewControl._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,tmpNodeTable);objTempNodeDiv_ForYoungBrotherOfParent=(tmpNodeTable==null?null:(blnIsUseV2HtmlMode?tmpNodeTable:tmpNodeTable.parentNode))}var objTempXmlNode,objNodeData;var objXmlNodeList=objXmlDoc.SelectNodes("//RS_ROW");for(var i=0;i<objXmlNodeList.length;i++){objTempXmlNode=objXmlNodeList[i];objNodeData=HXWebTreeViewControl._InternalFunctions._get_node_data_with_json_array(objTempXmlNode,int_parent_node_level+1);var objTempCurrentNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,objNodeData.node_unique_code);if(objTempCurrentNodeTable!=null){HXWebTreeViewControl._InternalFunctions._node_with_children_position_move(objActiveElementInfo,objTempCurrentNodeTable,int_parent_node_level+1,objTempNodeDiv_ForYoungBrotherOfParent);continue}var int_node_choose_status=0;if(int_check_status==1){int_node_choose_status=1}else{if(HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node(objActiveElementInfo.chosen_node_unique_code_list,objNodeData.node_unique_code)){int_node_choose_status=1}else{if(HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node_predecessor(objActiveElementInfo,objNodeData.node_unique_code)){int_node_choose_status=2}}}HXWebJS.Controls.TreeView.append_node(objActiveElementInfo.treeviewcontrol_id,objNodeData.node_unique_code,objNodeData.node_text,objNodeData.node_hint_desc,objNodeData.node_type,str_parent_node_unique_code,"",int_is_auto_init_child,int_node_choose_status,objNodeData.node_attr_1,objNodeData.node_attr_2,objNodeData.node_attr_3,objNodeData.node_attr_4,objNodeData.node_attr_5,objNodeData.node_is_leaf,objNodeData.node_image_class_name,int_auto_init_level,objNodeData.node_category)}if(str_parent_node_unique_code!=null&&str_parent_node_unique_code!=""){var objTreeNodeTableTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_parent_node_unique_code);if(objTreeNodeTableTemp!=null){objTreeNodeTableTemp.setAttribute("hx_is_need_init_children",0);objTreeNodeTableTemp.setAttribute("hx_has_children",(objXmlNodeList.length>0?1:0));if(objXmlNodeList.length>0&&objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTableTemp);objActiveElementInfo.callback_func("onhxchildnodeinit",objTempTreeNodeData)}}}};if(objActiveElementInfo.hxxmldoc_for_treeview_data!=null){var objHXXmlDocForChildNodesData=HXWebJS.Controls.TreeView._InternalFunctions._get_child_nodes_data_via_xmldataisland(objActiveElementInfo.hxxmldoc_for_treeview_data,str_parent_node_unique_code,str_parent_node_type);fnResponseForDataList(objHXXmlDocForChildNodesData);return}var strCustomizedFilterData=HXWebJS.Controls.TreeView._InternalFunctions._get_customized_filter_data(objActiveElementInfo);if(strCustomizedFilterData==null){return false}var strXmlDataForDataAcquire=HXWebJS.Controls.TreeView._InternalFunctions._build_pagxmlservice_xmlcontent_getdata(objActiveElementInfo,str_parent_node_unique_code,str_parent_node_type,strCustomizedFilterData,true);if(blnIsDirectDataAcquire==true){var strReturnValue=HXWebJS.Controls.TreeView._InternalFunctions._call_gettreeviewdata_pagxmlservice(strXmlDataForDataAcquire,objActiveElementInfo.extend_web_part_html_id);fnResponseForDataList(strReturnValue);if(strReturnValue==null){return false}else{return true}}else{HXWebJS.Controls.TreeView._InternalFunctions._call_gettreeviewdata_pagxmlservice_async(strXmlDataForDataAcquire,fnResponseForDataList,objActiveElementInfo.extend_web_part_html_id);return null}};HXWebJS.Controls.TreeView.select_node=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);var obj_event_src_element=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable);HXWebJS.Controls.TreeView.click_node(str_treeviewcontrol_id,str_node_unique_code,obj_event_src_element)};HXWebJS.Controls.TreeView.mark_node_as_current_selected=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(objTreeNodeTable==null){return}var intNodeLevel=parseInt(objTreeNodeTable.getAttribute("node_level"));HXWebJS.Controls.TreeView._InternalFunctions._mark_treenode_as_selected(objActiveElementInfo,objTreeNodeTable,intNodeLevel)};HXWebJS.Controls.TreeView.get_node_value=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);return HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable)};HXWebJS.Controls.TreeView.get_node_chain_name=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return""}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return""}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);var strNodeChainName="";while(objTreeNodeTable!=null){strTemp=HXWebJS.DOM.ElementGetInnerText(HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable));strNodeChainName=strTemp+(strNodeChainName!=""?"|"+strNodeChainName:"");objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTreeNodeTable)}return strNodeChainName};HXWebJS.Controls.TreeView.get_parent_node_unique_code=function(str_treeviewcontrol_id,str_node_unique_code){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return null}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return null}var objTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_node_unique_code);if(objTreeNodeTable==null){return null}var objParentTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTreeNodeTable);if(objParentTreeNodeTable==null){return null}return objParentTreeNodeTable.getAttribute("hx_treenode_uuid")};HXWebJS.Controls.TreeView.get_last_selected_node_unique_code=function(str_treeviewcontrol_id){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return null}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return null}if(objActiveElementInfo.last_selected_treenode_table!=null){return HXWebJS.DOM.ElementAttributeGetValue(objActiveElementInfo.last_selected_treenode_table,"hx_treenode_uuid")}return null};HXWebJS.Controls.TreeView.get_choosed_nodes=function(str_treeviewcontrol_id,int_choose_return_value_option){if(str_treeviewcontrol_id==null){return null}if(!HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info){return null}var objActiveElementInfo=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_treeviewcontrol_id];if(objActiveElementInfo==null){return null}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";if(int_choose_return_value_option==null){int_choose_return_value_option=3}var objtablelist;if(blnIsUseV2HtmlMode){objtablelist=HXWebJS.DOM.FindElementsById("hx_node_container_div_object",objActiveElementInfo.treeview_container_object)}else{objtablelist=HXWebJS.DOM.FindElementsById("hx_node_table_object",objActiveElementInfo.treeview_container_object)}if(objtablelist==null){return""}var objTreeNodeTable="",strUUID="",intNodeLevel;var objSB_Temp=new HXWebStringBuilder();objSB_Temp.append("<SELECTED_NODES>");var strChosenNodesInfoNotLoadedInTreeviewContainer=HXWebJS.Controls.TreeView._InternalFunctions._get_chosen_nodes_info_not_loaded_in_treeview_container(objActiveElementInfo,objtablelist);if(strChosenNodesInfoNotLoadedInTreeviewContainer!=""){objSB_Temp.append(strChosenNodesInfoNotLoadedInTreeviewContainer)}for(var i=0;i<objtablelist.length;i++){var objTreeNodeTable=objtablelist[i];if(objTreeNodeTable.getAttribute("hx_choose_status")!=0){strUUID=objTreeNodeTable.getAttribute("hx_treenode_uuid");if(int_choose_return_value_option==1){if(HXWebJS.Controls.TreeView._InternalFunctions._get_firstchild_node_object(objActiveElementInfo,objTreeNodeTable)!=null){continue}}if(int_choose_return_value_option==1||int_choose_return_value_option==2){if(objTreeNodeTable.getAttribute("hx_choose_status")==2){continue}}objSB_Temp.append("<RS_ROW");objSB_Temp.append(' UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strUUID)+'"');objSB_Temp.append(' CHOOSE_STATUS="'+objTreeNodeTable.getAttribute("hx_choose_status")+'"');objSB_Temp.append(' NODE_LEVEL="'+objTreeNodeTable.getAttribute("node_level")+'"');objSB_Temp.append(' NODE_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_node_type"))+'"');objSB_Temp.append(' NODE_CATEGORY="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_node_category"))+'"');objSB_Temp.append(' KEY="'+HXWebJS.Xml.MarkXMLSpecialChars(strUUID)+'"');objSB_Temp.append(' DESC="'+HXWebJS.Xml.MarkXMLSpecialChars(HXWebJS.DOM.ElementGetInnerText(HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable)))+'"');objSB_Temp.append(' ATTR_1="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_1"))+'"');objSB_Temp.append(' ATTR_2="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_2"))+'"');objSB_Temp.append(' ATTR_3="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_3"))+'"');objSB_Temp.append(' ATTR_4="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_4"))+'"');objSB_Temp.append(' ATTR_5="'+HXWebJS.Xml.MarkXMLSpecialChars(objTreeNodeTable.getAttribute("hx_attr_5"))+'"');objSB_Temp.append(" />")}}objSB_Temp.append("</SELECTED_NODES>");var strTempXmlResult=objSB_Temp.toString();if(strTempXmlResult=="<SELECTED_NODES></SELECTED_NODES>"){return""}else{return strTempXmlResult}};HXWebTreeViewControl._InternalFunctions._node_with_children_position_move=function(objActiveElementInfo,objCurrentNodeTable,intCurrentNodeLevel,objTargetNodeDiv_MoveBefore){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var arrNodeList=[];arrNodeList.push(objCurrentNodeTable);var objTempTreeNodeDivArea=(blnIsUseV2HtmlMode?objCurrentNodeTable.nextSibling:objCurrentNodeTable.parentNode.nextSibling);var objTempNodeTable,intTempLevelNo;while(objTempTreeNodeDivArea!=null){objTempNodeTable=(blnIsUseV2HtmlMode?objTempTreeNodeDivArea:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea));intTempLevelNo=parseInt(objTempNodeTable.getAttribute("node_level"));if(intTempLevelNo>intCurrentNodeLevel){arrNodeList.push(objTempNodeTable)}else{break}objTempTreeNodeDivArea=objTempTreeNodeDivArea.nextSibling}for(var i=0;i<arrNodeList.length;i++){if(blnIsUseV2HtmlMode){objCurrentNodeTable.parentNode.insertBefore(arrNodeList[i],objTargetNodeDiv_MoveBefore)}else{objCurrentNodeTable.parentNode.parentNode.insertBefore(arrNodeList[i].parentNode,objTargetNodeDiv_MoveBefore)}}};HXWebJS.Controls.TreeView._InternalFunctions._ondragstart_process=function(objActiveElementInfo){if(objActiveElementInfo==null){return}if(event==null){return}var objDragSourceNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object_via_event_src_element(objActiveElementInfo,event.srcElement);if(objDragSourceNodeTable==null){return}var objSB=new HXWebStringBuilder();objSB.append("hxwebjs_hxwebtreeviewcontrol;");objSB.append(objActiveElementInfo.treeviewcontrol_id+";");objSB.append(objDragSourceNodeTable.getAttribute("hx_treenode_uuid")+";");objSB.append(objDragSourceNodeTable.getAttribute("hx_node_type")+";");objSB.append(objDragSourceNodeTable.getAttribute("hx_node_category")+";");event.dataTransfer.setData("Text",objSB.toString());event.dataTransfer.effectAllowed="move"};HXWebJS.Controls.TreeView._InternalFunctions._ondragenterandover_process=function(objActiveElementInfo){if(event==null){return}var blnIsOlderVersionIE=(typeof(event.returnValue)!="undefined");if(event.preventDefault!=null){event.preventDefault()}else{event.returnValue=false}var objDragTargetNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object_via_event_src_element(objActiveElementInfo,event.srcElement);if(objDragTargetNodeTable==null){return}var strDragDropData=event.dataTransfer.getData("Text");if(strDragDropData==null){return}var strArrayDragSrcNodeInfo=strDragDropData.split(";");if(strArrayDragSrcNodeInfo[0]!="hxwebjs_hxwebtreeviewcontrol"||strArrayDragSrcNodeInfo[1]!=objActiveElementInfo.treeviewcontrol_id){if(blnIsOlderVersionIE){event.returnValue=false}else{event.preventDefault()}event.dataTransfer.dropEffect="move";return}var strDragSrcNode_Code=strArrayDragSrcNodeInfo[2];var strDragSrcNode_Type=strArrayDragSrcNodeInfo[3];var strDragSrcNode_Category=strArrayDragSrcNodeInfo[4];var strDragTargetNode_Code=objDragTargetNodeTable.getAttribute("hx_treenode_uuid");var strDragTargetNode_Type=objDragTargetNodeTable.getAttribute("hx_node_type");var strDragTargetNode_Category=objDragTargetNodeTable.getAttribute("hx_node_category");var objSrcNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,strDragSrcNode_Code);var objTgtNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,strDragTargetNode_Code);var blnIsAllowDrop=false;if(HXWebJS.Controls.TreeView._InternalFunctions._is_descendent_node(objActiveElementInfo,objTgtNodeTable,objSrcNodeTable)){blnIsAllowDrop=false}else{if(strDragSrcNode_Category==""&&strDragTargetNode_Category==""){if(objTgtNodeTable.getAttribute("node_level")=="0"&&objActiveElementInfo.is_allow_drag_to_root_node==0){blnIsAllowDrop=false}else{blnIsAllowDrop=true}}if(strDragSrcNode_Category!=""&&strDragTargetNode_Category!=""){if(strDragSrcNode_Category==strDragTargetNode_Category){blnIsAllowDrop=true}else{if(objSrcNodeTable!=null){var objNodeTable_ParentOfSrcNode=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objSrcNodeTable);if(objNodeTable_ParentOfSrcNode!=null){if(objNodeTable_ParentOfSrcNode.getAttribute("hx_node_category")==strDragTargetNode_Category){blnIsAllowDrop=true}}}}}}if(blnIsAllowDrop){if(blnIsOlderVersionIE){event.returnValue=false}else{event.preventDefault()}event.dataTransfer.dropEffect="move"}};HXWebJS.Controls.TreeView._InternalFunctions._ondrop_process=function(objActiveElementInfo){if(objActiveElementInfo==null){return}if(event==null){return}var objDragTargetNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object_via_event_src_element(objActiveElementInfo,event.srcElement);if(objDragTargetNodeTable==null){return}var objDragTargetTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objDragTargetNodeTable);var strDragTargetNode_TreeViewControlId=objDragTargetTreeNodeData.treeviewcontrol_id;var strDragTargetNode_Code=objDragTargetTreeNodeData.node_unique_code;var strDragTargetNode_Type=objDragTargetTreeNodeData.node_type;var strDragTargetNode_Category=objDragTargetTreeNodeData.node_category;var strDragDropData=event.dataTransfer.getData("Text");if(strDragDropData==null){return}var strArrayDragSrcNodeInfo=strDragDropData.split(";");if(strArrayDragSrcNodeInfo[0]!="hxwebjs_hxwebtreeviewcontrol"||strArrayDragSrcNodeInfo[1]!=objActiveElementInfo.treeviewcontrol_id){if(objActiveElementInfo.callback_func_before_ondrop!=null){objActiveElementInfo.callback_func_before_ondrop(strDragDropData,objDragTargetTreeNodeData)}return}var strDragSrcNode_Code=strArrayDragSrcNodeInfo[2];var strDragSrcNode_Type=strArrayDragSrcNodeInfo[3];var strDragSrcNode_Category=strArrayDragSrcNodeInfo[4];var intNodeMoveStyle=0;var objTgtNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,strDragTargetNode_Code);var objSrcNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,strDragSrcNode_Code);if(HXWebJS.Controls.TreeView._InternalFunctions._is_descendent_node(objActiveElementInfo,objTgtNodeTable,objSrcNodeTable)){return}if(strDragSrcNode_Category==""&&strDragTargetNode_Category==""){intNodeMoveStyle=1;if(HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objSrcNodeTable)===objTgtNodeTable){intNodeMoveStyle=2}}if(strDragSrcNode_Category!=""&&strDragTargetNode_Category!=""){if(strDragSrcNode_Category==strDragTargetNode_Category){intNodeMoveStyle=2;if(HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTgtNodeTable)===objSrcNodeTable){intNodeMoveStyle=0}}else{intNodeMoveStyle=0;var objNodeTable_ParentOfSrcNode=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objSrcNodeTable);if(objNodeTable_ParentOfSrcNode!=null){if(objNodeTable_ParentOfSrcNode.getAttribute("hx_node_category")==strDragTargetNode_Category){intNodeMoveStyle=1}}}}if(intNodeMoveStyle==0){return}if(objActiveElementInfo.callback_func_before_ondrop!=null){var blnTempReturnResult=objActiveElementInfo.callback_func_before_ondrop(strDragDropData,objDragTargetTreeNodeData);if(blnTempReturnResult==false){return}}var int_drag_src_node_level=parseInt(objSrcNodeTable.getAttribute("node_level"));var strTemp_ParentNodeUniqueCode,strTemp_YoungBrotherNodeUniqueCode;if(intNodeMoveStyle==1){strTemp_ParentNodeUniqueCode=strDragTargetNode_Code;var objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_firstchild_node_object(objActiveElementInfo,objTgtNodeTable);strTemp_YoungBrotherNodeUniqueCode=(objTemp!=null?objTemp.getAttribute("hx_treenode_uuid"):"")}else{var objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTgtNodeTable);strTemp_ParentNodeUniqueCode=(objTemp!=null?objTemp.getAttribute("hx_treenode_uuid"):"");objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTgtNodeTable);strTemp_YoungBrotherNodeUniqueCode=(objTemp!=null?objTemp.getAttribute("hx_treenode_uuid"):"")}var arrTempNodeDataForMove=new Array();var arrTempNodeParentUniqueCode=new Array();var arrTempNodeYoungBrotherUniqueCode=new Array();var objTempNodeTable=objSrcNodeTable;while(objTempNodeTable!=null){var objTempNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTempNodeTable);arrTempNodeDataForMove[objTempNodeData.node_unique_code]=objTempNodeData;arrTempNodeParentUniqueCode[objTempNodeData.node_unique_code]=strTemp_ParentNodeUniqueCode;arrTempNodeYoungBrotherUniqueCode[objTempNodeData.node_unique_code]=strTemp_YoungBrotherNodeUniqueCode;objTempNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_next_node_object(objActiveElementInfo,objTempNodeTable);if(objTempNodeTable==null){break}if(parseInt(objTempNodeTable.getAttribute("node_level"))<=int_drag_src_node_level){break}var objTemp=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTempNodeTable);strTemp_ParentNodeUniqueCode=(objTemp!=null?objTemp.getAttribute("hx_treenode_uuid"):"");strTemp_YoungBrotherNodeUniqueCode=""}HXWebJS.Controls.TreeView._InternalFunctions._remove_node_by_object(objActiveElementInfo,objSrcNodeTable);for(var strTempNodeUniqueCode in arrTempNodeDataForMove){var objTempNodeData=arrTempNodeDataForMove[strTempNodeUniqueCode];strTemp_ParentNodeUniqueCode=arrTempNodeParentUniqueCode[strTempNodeUniqueCode];strTemp_YoungBrotherNodeUniqueCode=arrTempNodeYoungBrotherUniqueCode[strTempNodeUniqueCode];HXWebJS.Controls.TreeView.append_node(objActiveElementInfo.treeviewcontrol_id,objTempNodeData.node_unique_code,objTempNodeData.node_text,objTempNodeData.node_hint_desc,objTempNodeData.node_type,strTemp_ParentNodeUniqueCode,strTemp_YoungBrotherNodeUniqueCode,objTempNodeData.node_need_init_children,(objTempNodeData.node_choose_status==0?false:true),objTempNodeData.node_attr_1,objTempNodeData.node_attr_2,objTempNodeData.node_attr_3,objTempNodeData.node_attr_4,objTempNodeData.node_attr_5,!objTempNodeData.node_has_children,objTempNodeData.node_image_class_name,null,objTempNodeData.node_category)}};HXWebJS.Controls.TreeView._InternalFunctions._is_descendent_node=function(objActiveElementInfo,objNodeTable1,objNodeTable2){var intCurrentNodeLevelNo=parseInt(objNodeTable2.getAttribute("node_level"));var objTempTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_next_node_object(objActiveElementInfo,objNodeTable2);var intTempLevelNo;while(objTempTreeNodeTable!=null){intTempLevelNo=parseInt(objTempTreeNodeTable.getAttribute("node_level"));if(intTempLevelNo<=intCurrentNodeLevelNo){return false}if(objTempTreeNodeTable===objNodeTable1){return true}objTempTreeNodeTable=HXWebJS.Controls.TreeView._InternalFunctions._get_next_node_object(objActiveElementInfo,objTempTreeNodeTable)}return false};HXWebJS.Controls.TreeView._InternalFunctions._remove_node_by_object=function(objActiveElementInfo,obj_node_table){if(obj_node_table==null){return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intNodeLevel;var objTemp;var objTempOld,strNode_UUID_Temp;var intTempNodeLevel;intNodeLevel=parseInt(obj_node_table.getAttribute("node_level"));var strLastSelectedNodeUUID="";if(objActiveElementInfo.last_selected_treenode_table!=null){strLastSelectedNodeUUID=objActiveElementInfo.last_selected_treenode_table.getAttribute("hx_treenode_uuid");if(obj_node_table.getAttribute("hx_treenode_uuid")==strLastSelectedNodeUUID){objActiveElementInfo.last_selected_treenode_table=null}}objTemp=(blnIsUseV2HtmlMode?obj_node_table.nextSibling:obj_node_table.parentNode.nextSibling);while(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}if(intTempNodeLevel<=intNodeLevel){break}if(blnIsUseV2HtmlMode){strNode_UUID_Temp=objTemp.getAttribute("hx_treenode_uuid")}else{strNode_UUID_Temp=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("hx_treenode_uuid")}if(strNode_UUID_Temp==strLastSelectedNodeUUID){objActiveElementInfo.last_selected_treenode_table=null}objTempOld=objTemp;objTemp=objTemp.nextSibling;objTempOld.parentNode.removeChild(objTempOld)}var blnIsNodeLastChild=(HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,obj_node_table)==null?true:false);if(blnIsNodeLastChild==true){objTemp=(blnIsUseV2HtmlMode?obj_node_table.previousSibling:obj_node_table.parentNode.previousSibling);if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}if(intTempNodeLevel>=intNodeLevel){if(intTempNodeLevel>intNodeLevel){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),intNodeLevel,-1);objTemp=objTemp.previousSibling;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}else{intTempNodeLevel=-1}while(intTempNodeLevel>intNodeLevel){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),intNodeLevel,-1);objTemp=objTemp.previousSibling;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}else{intTempNodeLevel=-1}}}if(intNodeLevel==0){if(objTemp.previousSibling!=null){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),intNodeLevel,3)}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),0,0)}}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),intNodeLevel,3)}}}}var objTempNodeDivArea_PreviousSiblingOfRemovedNode;var objTempNodeDivArea_NextSiblingOfRemovedNode;if(blnIsUseV2HtmlMode){objTempNodeDivArea_PreviousSiblingOfRemovedNode=obj_node_table.previousSibling;objTempNodeDivArea_NextSiblingOfRemovedNode=obj_node_table.nextSibling}else{objTempNodeDivArea_PreviousSiblingOfRemovedNode=obj_node_table.parentNode.previousSibling;objTempNodeDivArea_NextSiblingOfRemovedNode=obj_node_table.parentNode.nextSibling}if(blnIsUseV2HtmlMode){obj_node_table.parentNode.removeChild(obj_node_table)}else{obj_node_table.parentNode.parentNode.removeChild(obj_node_table.parentNode)}if(objTempNodeDivArea_PreviousSiblingOfRemovedNode!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTempNodeDivArea_PreviousSiblingOfRemovedNode.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempNodeDivArea_PreviousSiblingOfRemovedNode).getAttribute("node_level"))}if(intTempNodeLevel==intNodeLevel-1){if(objTempNodeDivArea_NextSiblingOfRemovedNode==null){intTempNodeLevel=-1}else{if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTempNodeDivArea_NextSiblingOfRemovedNode.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempNodeDivArea_NextSiblingOfRemovedNode).getAttribute("node_level"))}}if(objTempNodeDivArea_NextSiblingOfRemovedNode==null||intTempNodeLevel<intNodeLevel){if(blnIsUseV2HtmlMode){objTableParentTreeNode=objTempNodeDivArea_PreviousSiblingOfRemovedNode}else{objTableParentTreeNode=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempNodeDivArea_PreviousSiblingOfRemovedNode)}objTableParentTreeNode.setAttribute("hx_has_children",0);var objTempTableParentTreeNodeOfParent=HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object(objActiveElementInfo,objTableParentTreeNode);var objTableYongBrotherNode=HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTableParentTreeNode);HXWebJS.Controls.TreeView._InternalFunctions._process_tree_lines_images(objActiveElementInfo,objTableParentTreeNode,objTempTableParentTreeNodeOfParent,null,objTableYongBrotherNode)}}}else{if(objTempNodeDivArea_NextSiblingOfRemovedNode!=null){var objTableNextYongBrotherRootNode;if(blnIsUseV2HtmlMode){objTableNextYongBrotherRootNode=objTempNodeDivArea_NextSiblingOfRemovedNode}else{objTableNextYongBrotherRootNode=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempNodeDivArea_NextSiblingOfRemovedNode)}var objTableYongBrotherNode=HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTableNextYongBrotherRootNode);HXWebJS.Controls.TreeView._InternalFunctions._process_tree_lines_images(objActiveElementInfo,objTableNextYongBrotherRootNode,null,null,objTableYongBrotherNode)}}};HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data=function(objActiveElementInfo,objTreeNodeTable){if(objActiveElementInfo==null||objTreeNodeTable==null){return null}var objData=new Object();objData.treeviewcontrol_id=objActiveElementInfo.treeviewcontrol_id;objData.node_unique_code=objTreeNodeTable.getAttribute("hx_treenode_uuid");objData.node_text=HXWebJS.DOM.ElementGetInnerText(HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable));objData.node_level=parseInt(objTreeNodeTable.getAttribute("node_level"));objData.node_type=objTreeNodeTable.getAttribute("hx_node_type");objData.node_category=objTreeNodeTable.getAttribute("hx_node_category");objData.node_choose_status=objTreeNodeTable.getAttribute("hx_choose_status");objData.node_hint_desc=HXWebJS.DOM.FindFirstElementById("spn_hx_treenode",objTreeNodeTable).title;objData.node_need_init_children=objTreeNodeTable.getAttribute("hx_is_need_init_children");objData.node_has_children=objTreeNodeTable.getAttribute("hx_has_children");objData.node_attr_1=objTreeNodeTable.getAttribute("hx_attr_1");objData.node_attr_2=objTreeNodeTable.getAttribute("hx_attr_2");objData.node_attr_3=objTreeNodeTable.getAttribute("hx_attr_3");objData.node_attr_4=objTreeNodeTable.getAttribute("hx_attr_4");objData.node_attr_5=objTreeNodeTable.getAttribute("hx_attr_5");objData.node_image_class_name=HXWebJS.DOM.ElementAttributeGetValue(HXWebJS.DOM.FindFirstElementById("img_hx_treenode",objTreeNodeTable),"class");return objData};HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object_via_event_src_element=function(objActiveElementInfo,objEventSrcElement){var strEventSrcElementId=objEventSrcElement.id;if(strEventSrcElementId==null){return null}var objNodeTable=null;var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";if(strEventSrcElementId=="img_hx_treenode"||strEventSrcElementId=="spn_hx_treenode"){if(blnIsUseV2HtmlMode){objNodeTable=objEventSrcElement.parentNode}else{objNodeTable=objEventSrcElement.parentNode.parentNode.parentNode.parentNode}}if(strEventSrcElementId=="hx_img_line_td"||strEventSrcElementId=="hx_content_line_td"){objNodeTable=objEventSrcElement.parentNode.parentNode.parentNode}if(objNodeTable!=null){if(blnIsUseV2HtmlMode){if(objNodeTable.parentNode!==objActiveElementInfo.treeview_container_object){return null}else{if(objNodeTable.parentNode.parentNode!==objActiveElementInfo.treeview_container_object){return null}}}}return objNodeTable};HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object=function(objActiveElementInfo,str_node_unique_code){if(str_node_unique_code==null||str_node_unique_code==""){return null}if(objActiveElementInfo.node_html_build_mode=="v2"){var objdivlist=HXWebJS.DOM.FindElementsByAttribute("hx_treenode_uuid",str_node_unique_code,"div",objActiveElementInfo.treeview_container_object.childNodes,false,-1,true);if(objdivlist==null||objdivlist.length==0){return null}return objdivlist[0]}var arrNodeContainerDIVs=objActiveElementInfo.treeview_container_object.childNodes;var obj_node_table;for(var i=0;i<arrNodeContainerDIVs.length;i++){if(arrNodeContainerDIVs[i].nodeType!=1){continue}obj_node_table=arrNodeContainerDIVs[i].childNodes[0];if(obj_node_table.nodeType!=1){continue}if(obj_node_table.getAttribute("hx_treenode_uuid")==str_node_unique_code){return obj_node_table}}return null};HXWebJS.Controls.TreeView._InternalFunctions._get_old_brother_node_object=function(objActiveElementInfo,obj_node_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intCurrentNodeLevelNo=parseInt(obj_node_table.getAttribute("node_level"));var objTempTreeNodeDivArea=blnIsUseV2HtmlMode?obj_node_table.previousSibling:obj_node_table.parentNode.previousSibling;var objTempNodeTable;var intTempLevelNo;while(objTempTreeNodeDivArea!=null){if(blnIsUseV2HtmlMode){objTempNodeTable=objTempTreeNodeDivArea}else{objTempNodeTable=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)}intTempLevelNo=parseInt(objTempNodeTable.getAttribute("node_level"));if(intTempLevelNo==intCurrentNodeLevelNo){return objTempNodeTable}if(intTempLevelNo<intCurrentNodeLevelNo){return null}objTempTreeNodeDivArea=objTempTreeNodeDivArea.previousSibling}return null};HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object=function(objActiveElementInfo,obj_brother_node_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intCurrentNodeLevelNo=parseInt(obj_brother_node_table.getAttribute("node_level"));var objTempTreeNodeDivArea=(blnIsUseV2HtmlMode?obj_brother_node_table.nextSibling:obj_brother_node_table.parentNode.nextSibling);var objTempNodeTable,intTempLevelNo;while(objTempTreeNodeDivArea!=null){if(blnIsUseV2HtmlMode){objTempNodeTable=objTempTreeNodeDivArea}else{objTempNodeTable=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)}intTempLevelNo=parseInt(objTempNodeTable.getAttribute("node_level"));if(intTempLevelNo==intCurrentNodeLevelNo){return objTempNodeTable}if(intTempLevelNo<intCurrentNodeLevelNo){return null}objTempTreeNodeDivArea=objTempTreeNodeDivArea.nextSibling}return null};HXWebJS.Controls.TreeView._InternalFunctions._get_parent_node_object=function(objActiveElementInfo,obj_treenode_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intCurrentNodeLevelNo=parseInt(obj_treenode_table.getAttribute("node_level"));var objTempTreeNodeDivArea=(blnIsUseV2HtmlMode?obj_treenode_table.previousSibling:obj_treenode_table.parentNode.previousSibling);var objTempNodeTable,intTempLevelNo;while(objTempTreeNodeDivArea!=null){if(objTempTreeNodeDivArea.nodeType==1){if(blnIsUseV2HtmlMode){objTempNodeTable=objTempTreeNodeDivArea}else{objTempNodeTable=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)}intTempLevelNo=parseInt(objTempNodeTable.getAttribute("node_level"));if(intTempLevelNo==intCurrentNodeLevelNo-1){return objTempNodeTable}}objTempTreeNodeDivArea=objTempTreeNodeDivArea.previousSibling}return null};HXWebJS.Controls.TreeView._InternalFunctions._get_firstchild_node_object=function(objActiveElementInfo,obj_treenode_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intCurrentNodeLevelNo=parseInt(obj_treenode_table.getAttribute("node_level"));var objTempTreeNodeDivArea=(blnIsUseV2HtmlMode?obj_treenode_table.nextSibling:obj_treenode_table.parentNode.nextSibling);var objTempNodeTable,intTempLevelNo;if(objTempTreeNodeDivArea!=null){if(blnIsUseV2HtmlMode){objTempNodeTable=objTempTreeNodeDivArea}else{objTempNodeTable=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)}intTempLevelNo=parseInt(objTempNodeTable.getAttribute("node_level"));if(intTempLevelNo==intCurrentNodeLevelNo+1){return objTempNodeTable}}return null};HXWebJS.Controls.TreeView._InternalFunctions._get_previous_node_object=function(objActiveElementInfo,obj_treenode_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";if(blnIsUseV2HtmlMode){return obj_treenode_table.previousSibling}var objTempTreeNodeDivArea=obj_treenode_table.parentNode.previousSibling;if(objTempTreeNodeDivArea==null){return null}return HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)};HXWebJS.Controls.TreeView._InternalFunctions._get_next_node_object=function(objActiveElementInfo,obj_treenode_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";if(blnIsUseV2HtmlMode){return obj_treenode_table.nextSibling}var objTempTreeNodeDivArea=obj_treenode_table.parentNode.nextSibling;if(objTempTreeNodeDivArea==null){return null}return HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea)};HXWebJS.Controls.TreeView._InternalFunctions._get_brother_and_next_node_object=function(objActiveElementInfo,obj_parent_node_table,obj_young_brother_node_table){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intTempNodeLevel;var objTempNodeTable;var objBrotherAndNextNode=new Object();if(obj_parent_node_table==null){if(obj_young_brother_node_table!=null){if(parseInt(obj_young_brother_node_table.getAttribute("node_level"))!=0){obj_young_brother_node_table=null}}var objTempTreeNodeDivArea;if(obj_young_brother_node_table==null){objTempTreeNodeDivArea=objActiveElementInfo.treeview_container_object.lastChild;if(objTempTreeNodeDivArea==null||objTempTreeNodeDivArea.nodeType!=1){return null}}else{objTempTreeNodeDivArea=(blnIsUseV2HtmlMode?obj_young_brother_node_table.previousSibling:obj_young_brother_node_table.parentNode.previousSibling);if(objTempTreeNodeDivArea==null){objBrotherAndNextNode.BrotherNodeTable=null;objBrotherAndNextNode.NextNodeTable=obj_young_brother_node_table;return objBrotherAndNextNode}}while(objTempTreeNodeDivArea!=null){if(blnIsUseV2HtmlMode==true){intTempNodeLevel=parseInt(objTempTreeNodeDivArea.getAttribute("node_level"))}else{objTempNodeTable=HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTempTreeNodeDivArea);intTempNodeLevel=parseInt(objTempNodeTable.getAttribute("node_level"))}if(intTempNodeLevel==0){objBrotherAndNextNode.BrotherNodeTable=objTempNodeTable;objBrotherAndNextNode.NextNodeTable=obj_young_brother_node_table;return objBrotherAndNextNode}objTempTreeNodeDivArea=objTempTreeNodeDivArea.previousSibling}}else{var intParentNodeLevel=parseInt(obj_parent_node_table.getAttribute("node_level"));if(obj_young_brother_node_table!=null&&parseInt(obj_young_brother_node_table.getAttribute("node_level"))!=intParentNodeLevel+1){obj_young_brother_node_table=null}var objTemp=(blnIsUseV2HtmlMode?obj_parent_node_table.nextSibling:obj_parent_node_table.parentNode.nextSibling);var objLastBrotherNodeArea=null;var objNextTreeNodeArea=null;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}if(intTempNodeLevel<=intParentNodeLevel){objBrotherAndNextNode.BrotherNodeTable=null;objBrotherAndNextNode.NextNodeTable=(blnIsUseV2HtmlMode?objTemp:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp));return objBrotherAndNextNode}}intTempNodeLevel=-1;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}while(objTemp!=null&&intTempNodeLevel>intParentNodeLevel){if(intTempNodeLevel==intParentNodeLevel+1){if(blnIsUseV2HtmlMode){if(objTemp!=obj_young_brother_node_table){objLastBrotherNodeArea=objTemp}else{objNextTreeNodeArea=obj_young_brother_node_table;break}}else{if(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp)!=obj_young_brother_node_table){objLastBrotherNodeArea=objTemp}else{objNextTreeNodeArea=obj_young_brother_node_table.parentNode;break}}}objTemp=objTemp.nextSibling;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}else{intTempNodeLevel=-1}if(objNextTreeNodeArea==null&&objTemp!=null&&intTempNodeLevel<=intParentNodeLevel){objNextTreeNodeArea=objTemp}}if(objLastBrotherNodeArea==null){objBrotherAndNextNode.BrotherNodeTable=null}else{objBrotherAndNextNode.BrotherNodeTable=(blnIsUseV2HtmlMode?objLastBrotherNodeArea:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objLastBrotherNodeArea))}if(objNextTreeNodeArea==null){objBrotherAndNextNode.NextNodeTable=null}else{objBrotherAndNextNode.NextNodeTable=(blnIsUseV2HtmlMode?objNextTreeNodeArea:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objNextTreeNodeArea))}return objBrotherAndNextNode}};HXWebJS.Controls.TreeView._InternalFunctions._check_child_choose_status=function(objActiveElementInfo,obj_treenode_table){var intChildNodesCount=0,intChoosedNodesCount=0,intHalfChosenNodesCount=0;var intTemp;var objTempNode=HXWebJS.Controls.TreeView._InternalFunctions._get_firstchild_node_object(objActiveElementInfo,obj_treenode_table);while(objTempNode!=null){intChildNodesCount++;intTemp=parseInt(objTempNode.getAttribute("hx_choose_status"));if(intTemp==1){intChoosedNodesCount++}else{if(intTemp==2){intHalfChosenNodesCount++}}objTempNode=HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTempNode)}if(intChildNodesCount==0){return -1}if(intChoosedNodesCount==intChildNodesCount){return 1}if(intChoosedNodesCount+intHalfChosenNodesCount>0){return 2}return 0};HXWebJS.Controls.TreeView._InternalFunctions._build_prefix_tds_html=function(objActiveElementInfo,int_node_level){var strHeightStyle="height:"+objActiveElementInfo.node_image_size_mode+"px;";var objSB_TD_HTML=new HXWebStringBuilder();for(var i=(objActiveElementInfo.is_show_root_line==1?0:1);i<=int_node_level;i++){objSB_TD_HTML.append("<td id=hx_prefix_td_"+i+' style="'+strHeightStyle+'">');objSB_TD_HTML.append('<img id=hx_tree_img src="../images/hxpub_clear.gif"');objSB_TD_HTML.append(' style="'+strHeightStyle+'" />');objSB_TD_HTML.append("</td>")}return objSB_TD_HTML.toString()};HXWebJS.Controls.TreeView._InternalFunctions._build_prefix_tree_img_html=function(objActiveElementInfo,int_node_level,bln_node_is_leaf){var strImgSizeStyle=objActiveElementInfo.node_image_size_mode==24?"width:24px;height:24px;":"width:17px;height:18px";var intIndentWidth=15*int_node_level;var strNodeExpandShrinkImgClassName=(bln_node_is_leaf?"":"hxicon_treeview_plus_hline");if(objActiveElementInfo.node_image_size_mode==24){strNodeExpandShrinkImgClassName+="_24"}var sb_html=new HXWebStringBuilder();sb_html.append('<img id=img_hx_plusminus src="../images/hxpub_clear.gif" style="');sb_html.append("display:inline-block;"+strImgSizeStyle+";margin-left:"+intIndentWidth+"px;");if(!bln_node_is_leaf){sb_html.append("cursor:pointer;")}sb_html.append('" class="'+strNodeExpandShrinkImgClassName+'" />');return sb_html.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_checkbox_td_html=function(objActiveElementInfo,int_is_checked){if(objActiveElementInfo.is_show_checkbox==0){return""}var strWidthStyle="width:"+(HXWebJS.Core.Browser.IsIE&&!HXWebJS.Core.Browser.IsIE11?"18":"14")+"px;";var strHeightStyle="height:"+objActiveElementInfo.node_image_size_mode+"px;";var objSB_TD_HTML=new HXWebStringBuilder();objSB_TD_HTML.append("<td id=hx_checkbox_line_td style='"+strHeightStyle+"'>");objSB_TD_HTML.append("<input id=chkbx_hx_treenode type=checkbox style='cursor:pointer;"+strWidthStyle+strHeightStyle+"'");if(int_is_checked==1){objSB_TD_HTML.append(" checked")}objSB_TD_HTML.append("/></td>");return objSB_TD_HTML.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_checkbox_part_html=function(objActiveElementInfo,int_is_checked){if(objActiveElementInfo.is_show_checkbox==0){return""}var strWidthStyle="width:"+(HXWebJS.Core.Browser.IsIE&&!HXWebJS.Core.Browser.IsIE11?"18":"14")+"px;";var strHeightStyle="height:"+objActiveElementInfo.node_image_size_mode+"px;";var strMarginLeftStyle=(HXWebJS.Core.Browser.IsIE&&!HXWebJS.Core.Browser.IsIE11?"margin-left:-3px;":"");var sb_html=new HXWebStringBuilder();sb_html.append("<input id=chkbx_hx_treenode type=checkbox style='display:inline-block;cursor:pointer;vertical-align:top;"+strWidthStyle+strHeightStyle+strMarginLeftStyle+"'");if(int_is_checked==1){sb_html.append(" checked")}sb_html.append("/>");return sb_html.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_image_td_html=function(objActiveElementInfo,str_node_type,str_node_image_class_name){if(objActiveElementInfo.is_show_images==0){return""}if(str_node_image_class_name==null||str_node_image_class_name==""){str_node_image_class_name=objActiveElementInfo.dft_node_img_class_name;if(objActiveElementInfo.node_type_img_class_collection!=null){if(objActiveElementInfo.node_type_img_class_collection[str_node_type]!=null){str_node_image_class_name=objActiveElementInfo.node_type_img_class_collection[str_node_type]}}}var strHeightStyle="width:"+objActiveElementInfo.node_image_size_mode+"px;height:"+objActiveElementInfo.node_image_size_mode+"px;";var objSB_TD_HTML=new HXWebStringBuilder();objSB_TD_HTML.append("<td id=hx_img_line_td style='"+strHeightStyle+"'>");objSB_TD_HTML.append('<img id=img_hx_treenode src="../images/hxpub_clear.gif" style="cursor:pointer;"');objSB_TD_HTML.append(' class="'+str_node_image_class_name+'" />');objSB_TD_HTML.append("</td>");return objSB_TD_HTML.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_node_image_part_html=function(objActiveElementInfo,str_node_type,str_node_image_class_name){if(objActiveElementInfo.is_show_images==0){return""}if(str_node_image_class_name==null||str_node_image_class_name==""){str_node_image_class_name=objActiveElementInfo.dft_node_img_class_name;if(objActiveElementInfo.node_type_img_class_collection!=null){if(objActiveElementInfo.node_type_img_class_collection[str_node_type]!=null){str_node_image_class_name=objActiveElementInfo.node_type_img_class_collection[str_node_type]}}}var strImgSizeStyle=objActiveElementInfo.node_image_size_mode==24?"width:24px;height:24px;":"width:18px;height:18px";var sb_html=new HXWebStringBuilder();sb_html.append('<img id=img_hx_treenode src="../images/hxpub_clear.gif" style="cursor:pointer;vertical-align:top;"');sb_html.append(' class="'+str_node_image_class_name+'" style="display:inline-block;'+strImgSizeStyle+'" />');return sb_html.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_content_td_html=function(objActiveElementInfo,str_nodetext,str_node_hint_desc,int_node_level,str_node_type){var objSB_TD_HTML=new HXWebStringBuilder();var normal_class_name=(int_node_level==0?"hxwebtreeviewcontrol_root_node_normal":"hxwebtreeviewcontrol_child_node_normal");objSB_TD_HTML.append("<td id=hx_content_line_td style='width:100%;height:"+objActiveElementInfo.node_image_size_mode+"px;'>");objSB_TD_HTML.append("<span id=spn_hx_treenode style='padding-left:0;'");objSB_TD_HTML.append(' class="');objSB_TD_HTML.append(int_node_level==0?"hxwebtreeviewcontrol_root_node_normal":"hxwebtreeviewcontrol_child_node_normal");objSB_TD_HTML.append(" hxwebtreeviewcontrol_node_level_"+int_node_level);if(str_node_type!=null&&str_node_type!=""){objSB_TD_HTML.append(" hxwebtreeviewcontrol_node_type_"+str_node_type)}objSB_TD_HTML.append('"');if(str_node_hint_desc!=null){objSB_TD_HTML.append(' title="'+str_node_hint_desc.replace(/\"/g,"&quot;")+'"')}objSB_TD_HTML.append(' onmouseover="HXWebTreeViewControl._InternalFunctions._node_onmouseover(this)"');objSB_TD_HTML.append(' onmouseout="HXWebTreeViewControl._InternalFunctions._node_onmouseout(this)"');objSB_TD_HTML.append(">"+str_nodetext+"</span></td>");return objSB_TD_HTML.toString()};HXWebJS.Controls.TreeView._InternalFunctions._get_node_content_part_html=function(objActiveElementInfo,str_nodetext,str_node_hint_desc,int_node_level,str_node_type){var offsetMarginLeft=int_node_level*15+objActiveElementInfo.node_image_size_mode+2;if(objActiveElementInfo.is_show_checkbox==1){offsetMarginLeft+=(HXWebJS.Core.Browser.IsIE&&!HXWebJS.Core.Browser.IsIE11?18:14)}if(objActiveElementInfo.is_show_images==1){offsetMarginLeft+=objActiveElementInfo.node_image_size_mode}var sb_html=new HXWebStringBuilder();var strSpanClassContent=(int_node_level==0?"hxwebtreeviewcontrol_root_node_normal":"hxwebtreeviewcontrol_child_node_normal");strSpanClassContent+=" hxwebtreeviewcontrol_node_level_"+int_node_level;if(str_node_type!=null&&str_node_type!=""){strSpanClassContent+=" hxwebtreeviewcontrol_node_type_"+str_node_type}sb_html.append('<span id=spn_hx_treenode style="display:inline-block;vertical-align:top;');sb_html.append("width:calc( 100% - "+offsetMarginLeft+"px );");sb_html.append("width:expression(this.parentNode.offsetWidth - "+offsetMarginLeft+");");sb_html.append("height:"+objActiveElementInfo.node_image_size_mode+"px;");sb_html.append('padding-left:0px;" class="'+strSpanClassContent+'"');if(str_node_hint_desc!=null){sb_html.append(' title="'+str_node_hint_desc.replace(/\"/g,"&quot;")+'"')}sb_html.append(' onmouseover="HXWebTreeViewControl._InternalFunctions._node_onmouseover(this)"');sb_html.append(' onmouseout="HXWebTreeViewControl._InternalFunctions._node_onmouseout(this)"');sb_html.append(">"+str_nodetext+"</span>");return sb_html.toString()};HXWebTreeViewControl._InternalFunctions._node_onmouseover=function(objSpanOfTreeNodeContent){if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_click")){HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_hover");return}if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_click")){HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_hover");return}if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_normal")){HXWebJS.DOM.CSSClass.RemoveClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_normal");HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_hover");return}if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_normal")){HXWebJS.DOM.CSSClass.RemoveClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_normal");HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_hover");return}};HXWebTreeViewControl._InternalFunctions._node_onmouseout=function(objSpanOfTreeNodeContent){if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_hover")){HXWebJS.DOM.CSSClass.RemoveClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_hover");if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_click")){return}HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_root_node_normal");return}if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_hover")){HXWebJS.DOM.CSSClass.RemoveClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_hover");if(HXWebJS.DOM.CSSClass.HasClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_click")){return}HXWebJS.DOM.CSSClass.AddClass(objSpanOfTreeNodeContent,"hxwebtreeviewcontrol_child_node_normal");return}};HXWebJS.Controls.TreeView._InternalFunctions._process_tree_lines_images=function(objActiveElementInfo,objTableNewNode,objTableParentNode,objTableBrotherNode,objTableYongBrotherNode){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var intIsRootNode=(parseInt(objTableNewNode.getAttribute("node_level"))==0?true:false);if(intIsRootNode==true){if(objTableBrotherNode==null){if(objTableYongBrotherNode==null){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,0,0)}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,0,1);var blnYongBrotherNodeHasChild=(HXWebJS.Controls.TreeView._InternalFunctions._get_young_brother_node_object(objActiveElementInfo,objTableYongBrotherNode)==null?false:true);HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableYongBrotherNode,0,(blnYongBrotherNodeHasChild?2:3))}}else{if(objTableYongBrotherNode==null){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,0,3)}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,0,2)}if((blnIsUseV2HtmlMode&&objTableBrotherNode.previousSibling==null)||(!blnIsUseV2HtmlMode&&objTableBrotherNode.parentNode.previousSibling==null)){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableBrotherNode,0,1)}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableBrotherNode,0,2)}var objTemp=(blnIsUseV2HtmlMode?objTableBrotherNode.nextSibling:objTableBrotherNode.parentNode.nextSibling);while(objTemp!=null&&objTemp!=(blnIsUseV2HtmlMode?objTableNewNode:objTableNewNode.parentNode)){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),0,4);objTemp=objTemp.nextSibling}}}else{var intLevelNo=parseInt(objTableNewNode.getAttribute("node_level"));if(objTableYongBrotherNode==null){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,intLevelNo,3)}else{HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,intLevelNo,2)}if(objTableBrotherNode!=null){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableBrotherNode,intLevelNo,2);var objTemp=(blnIsUseV2HtmlMode?objTableBrotherNode.nextSibling:objTableBrotherNode.parentNode.nextSibling);while(objTemp!=(blnIsUseV2HtmlMode?objTableNewNode:objTableNewNode.parentNode)){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp),intLevelNo,4);objTemp=objTemp.nextSibling}}var objTemp=(blnIsUseV2HtmlMode?objTableNewNode.nextSibling:objTableNewNode.parentNode.nextSibling);var intTempLevelNo_LastUpdated=intLevelNo;var blnParentHasYoungBrother=false;var intTempLevelNo;while(objTemp!=null){if(blnIsUseV2HtmlMode){intTempLevelNo=parseInt(objTemp.getAttribute("node_level"))}else{intTempLevelNo=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}if(intTempLevelNo<intLevelNo){if(intTempLevelNo<intTempLevelNo_LastUpdated){HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableNewNode,intTempLevelNo,4);intTempLevelNo_LastUpdated=intTempLevelNo}}if(intTempLevelNo==intLevelNo-1){blnParentHasYoungBrother=true}objTemp=objTemp.nextSibling}objTableParentNode.setAttribute("hx_has_children",1);objTableParentNode.setAttribute("hx_is_expanded",1);var intParentNodeLevelNo=parseInt(objTableParentNode.getAttribute("node_level"));var intTmpImgType=-1;if(intParentNodeLevelNo==0){if((blnIsUseV2HtmlMode?objTableParentNode.previousSibling:objTableParentNode.parentNode.previousSibling)==null){intTmpImgType=(blnParentHasYoungBrother?1:0)}else{intTmpImgType=(blnParentHasYoungBrother?2:3)}}else{intTmpImgType=(blnParentHasYoungBrother?2:3)}HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage(objActiveElementInfo,objTableParentNode,intParentNodeLevelNo,intTmpImgType)}};HXWebJS.Controls.TreeView._InternalFunctions._setTreeLineImage=function(objActiveElementInfo,objTreeNodeTable,intLevelNo,intImgType){if(objActiveElementInfo.is_show_root_line==0&&intLevelNo==0){return}var strWidthAndHeightStyle=objActiveElementInfo.node_image_size_mode==24?"width:24px;height:24px;":"width:17px;height:18px;";var tempImg;if(intImgType==-1){if(objActiveElementInfo.node_html_build_mode=="v2"){tempImg=HXWebJS.DOM.FindElementsByAttribute("hx_prefix_tree_img_no",intLevelNo,"img",objTreeNodeTable)[0];tempImg.className="";tempImg.id="";tempImg.style.cursor="normal"}else{HXWebJS.DOM.FindFirstElementById("hx_prefix_td_"+intLevelNo,objTreeNodeTable).innerHTML='<img src="../images/hxpub_clear.gif" style=\''+strWidthAndHeightStyle+"'>"}return}var intHasChildren=parseInt(objTreeNodeTable.getAttribute("hx_has_children"));var intIsExpanded=parseInt(objTreeNodeTable.getAttribute("hx_is_expanded"));var intCurrNodeLevelNo=parseInt(objTreeNodeTable.getAttribute("node_level"));if(intCurrNodeLevelNo<intLevelNo){return}var strImgClassName;if(intImgType==4){strImgClassName="hxicon_treeview_vline"+(objActiveElementInfo.node_image_size_mode==24?"_24":"")}else{var strImgClassNamePart_PlusOrMinus,strImgClassNamePart_FirstOrMiddleOrLast;if(objActiveElementInfo.is_show_plusminus==1&&intHasChildren>0){strImgClassNamePart_PlusOrMinus=(intIsExpanded==1?"_minus":"_plus")}else{strImgClassNamePart_PlusOrMinus=""}switch(intImgType){case 0:strImgClassNamePart_FirstOrMiddleOrLast="_hline";break;case 1:strImgClassNamePart_FirstOrMiddleOrLast="_first";break;case 2:strImgClassNamePart_FirstOrMiddleOrLast="_middle";break;case 3:strImgClassNamePart_FirstOrMiddleOrLast="_last";break}strImgClassName="hxicon_treeview"+strImgClassNamePart_PlusOrMinus+strImgClassNamePart_FirstOrMiddleOrLast+(objActiveElementInfo.node_image_size_mode==24?"_24":"")}if(objActiveElementInfo.node_html_build_mode=="v2"){tempImg=HXWebJS.DOM.FindElementsByAttribute("hx_prefix_tree_img_no",intLevelNo,"img",objTreeNodeTable)[0];tempImg.className=strImgClassName;tempImg.id="img_hx_plusminus";if(objActiveElementInfo.is_show_plusminus==1&&intHasChildren>0){tempImg.style.cursor="pointer"}return}var objSB_HTML=new HXWebStringBuilder();objSB_HTML.append('<img id=img_hx_plusminus src="../images/hxpub_clear.gif" class="'+strImgClassName+'"');if(intCurrNodeLevelNo==intLevelNo){if(objActiveElementInfo.is_show_plusminus==1&&intHasChildren>0){objSB_HTML.append("  style='cursor:pointer;"+strWidthAndHeightStyle+"'")}}else{objSB_HTML.append(" style='"+strWidthAndHeightStyle+"'")}objSB_HTML.append(">");HXWebJS.DOM.FindFirstElementById("hx_prefix_td_"+intLevelNo,objTreeNodeTable).innerHTML=objSB_HTML.toString()};HXWebTreeViewControl._InternalFunctions._HideAllChildrenOfNode=function(objActiveElementInfo,objTreeNodeTable,intNodeLevel,objHXEventObject){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var objTemp=(blnIsUseV2HtmlMode?objTreeNodeTable.nextSibling:objTreeNodeTable.parentNode.nextSibling);var intChildCounts=0;var intTempNodeLevel;if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}var objTempImgHXPlusMinus;while(objTemp!=null&&intTempNodeLevel>intNodeLevel){objTemp.style.display="none";if(blnIsUseV2HtmlMode){objTempImgHXPlusMinus=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",objTemp,"img")}else{objTempImgHXPlusMinus=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",HXWebJS.DOM.FindFirstElementById("hx_prefix_td_"+intTempNodeLevel,objTemp))}if(objTempImgHXPlusMinus!=null){objTempImgHXPlusMinus.className=objTempImgHXPlusMinus.className.replace("_minus","_plus");if(blnIsUseV2HtmlMode){objTemp.setAttribute("hx_is_expanded",0)}else{HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).setAttribute("hx_is_expanded",0)}}if(intTempNodeLevel==intNodeLevel+1){intChildCounts++}objTemp=objTemp.nextSibling;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}}var objSrcElement;if(blnIsUseV2HtmlMode){objSrcElement=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",objTreeNodeTable,"img")}else{objSrcElement=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",HXWebJS.DOM.FindFirstElementById("hx_prefix_td_"+intNodeLevel,objTreeNodeTable))}if(objSrcElement!=null){if(intChildCounts>0){objSrcElement.className=objSrcElement.className.replace("minus","plus")}else{if(blnIsUseV2HtmlMode){objSrcElement.className=""}else{objSrcElement.className=objSrcElement.className.replace("_minus","")}objTreeNodeTable.setAttribute("hx_has_children",0)}objTreeNodeTable.setAttribute("hx_is_expanded",0);if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);objActiveElementInfo.callback_func("onhxtreenode_collapsed",objTempTreeNodeData,objHXEventObject)}}};HXWebTreeViewControl._InternalFunctions._ShowAllChildrenOfNode=function(objActiveElementInfo,objTreeNodeTable,intNodeLevel,objHXEventObject){var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var objTemp=(blnIsUseV2HtmlMode?objTreeNodeTable.nextSibling:objTreeNodeTable.parentNode.nextSibling);var intChildCounts=0;var intTempNodeLevel;if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}var objTempImgHXPlusMinus;while(objTemp!=null&&intTempNodeLevel>intNodeLevel){objTemp.style.display="";if(blnIsUseV2HtmlMode){objTempImgHXPlusMinus=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",objTemp)}else{objTempImgHXPlusMinus=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",HXWebJS.DOM.FindFirstElementById("hx_prefix_td_"+intTempNodeLevel,objTemp))}if(objTempImgHXPlusMinus!=null){objTempImgHXPlusMinus.className=objTempImgHXPlusMinus.className.replace("_plus","_minus");if(blnIsUseV2HtmlMode){objTemp.setAttribute("hx_is_expanded",1)}else{HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).setAttribute("hx_is_expanded",1)}}if(intTempNodeLevel==intNodeLevel+1){intChildCounts++}objTemp=objTemp.nextSibling;if(objTemp!=null){if(blnIsUseV2HtmlMode){intTempNodeLevel=parseInt(objTemp.getAttribute("node_level"))}else{intTempNodeLevel=parseInt(HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objTemp).getAttribute("node_level"))}}}var objSrcElement=HXWebJS.DOM.FindFirstElementById("img_hx_plusminus",objTreeNodeTable);if(objSrcElement!=null){if(intChildCounts>0){objSrcElement.className=objSrcElement.className.replace("_plus","_minus")}else{objSrcElement.className=objSrcElement.className.replace("_plus","");objTreeNodeTable.setAttribute("hx_has_children",0)}}objTreeNodeTable.setAttribute("hx_is_expanded",1);if(objActiveElementInfo.callback_func!=null){var objTempTreeNodeData=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_data(objActiveElementInfo,objTreeNodeTable);objActiveElementInfo.callback_func("onhxtreenode_expanded",objTempTreeNodeData,objHXEventObject)}};HXWebJS.Controls.TreeView._InternalFunctions._get_customized_filter_data=function(objActiveElementInfo){var strCustomizedFilterData="";if(!!objActiveElementInfo.filter_data_callback_func){try{strCustomizedFilterData=objActiveElementInfo.filter_data_callback_func(objActiveElementInfo.treeviewcontrol_id);if(strCustomizedFilterData==null){return null}}catch(e){alert(e.description);return null}}return strCustomizedFilterData};HXWebJS.Controls.TreeView._InternalFunctions._build_pagxmlservice_xmlcontent_getdata=function(objActiveElementInfo,str_parent_node_unique_code,str_parent_node_type,strCustomizedFilterData,blnIsReadDirectChildNodes,blnReadAllTreeviewNodesData,strKeyCharsToFind,strSelectedNodeCodeList,intTreeviewLevelsToRead,blnAcquireChosenNodePredecessors){var strWebTreeviewPageAssemblyName=(objActiveElementInfo.webtreeview_pagexmlsvc_assemblyname?objActiveElementInfo.webtreeview_pagexmlsvc_assemblyname:mstrPageXmlServiceAssemblyName);var strWebTreeviewPageClassName=(objActiveElementInfo.webtreeview_pagexmlsvc_classname?objActiveElementInfo.webtreeview_pagexmlsvc_classname:mstrPageXmlServiceClassName);if(str_parent_node_unique_code==null){str_parent_node_unique_code=""}if(str_parent_node_type==null){str_parent_node_type=""}var strTreeViewSettingCode=objActiveElementInfo.predefined_treeview_setting_code;if(strTreeViewSettingCode==null){strTreeViewSettingCode=""}if(blnReadAllTreeviewNodesData==null){blnReadAllTreeviewNodesData=false}if(intTreeviewLevelsToRead==null){intTreeviewLevelsToRead=1}if(strKeyCharsToFind==null){strKeyCharsToFind=""}if(strSelectedNodeCodeList==null){strSelectedNodeCodeList=""}var strXmlContent='<ALL_DATA RETURN_DATA_TYPE="" ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebTreeviewPageAssemblyName)+'" CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebTreeviewPageClassName)+'" HX_WEB_TREEVIEW_SETTING_CODE="'+strTreeViewSettingCode+'" HX_WEB_TREEVIEW_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.treeviewcontrol_id)+'" HX_READ_DIRECT_CHILD_NODES="'+(blnIsReadDirectChildNodes?"1":"0")+'" HX_READ_ALL_LEVEL_NODES_DATA="'+(blnReadAllTreeviewNodesData?"1":"0")+'" HX_NODE_LEVELS_TO_READ="'+intTreeviewLevelsToRead+'" HX_KEY_CHARS_TO_FIND="'+HXWebJS.Xml.MarkXMLSpecialChars(strKeyCharsToFind)+'" HX_SELECTED_NODES_CODE_LIST="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedNodeCodeList)+'" HX_READ_CHOSEN_NODE_PREDECESSORS="'+(blnAcquireChosenNodePredecessors?"1":"0")+'" ><CONFIG_DATA><RS_ROW PARENT_NODE_UNIQUE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(str_parent_node_unique_code)+'" PARENT_NODE_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(str_parent_node_type)+'" CUSTOMIZED_FILTER_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(strCustomizedFilterData)+'" CURRENT_PAGE_ASSEMBLY_CLASS="'+HXWebJS.Xml.MarkXMLSpecialChars(mstrPageXmlServiceClassName)+'" /></CONFIG_DATA></ALL_DATA>';return strXmlContent};HXWebJS.Controls.TreeView._InternalFunctions._call_gettreeviewdata_pagxmlservice_async=function(strXmlContent,fnResponse,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebTreeViewControlHelper";HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBTREEVIEWCONTROL_GET_DATA_LIST",strXmlContent,fnResponse,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebJS.Controls.TreeView._InternalFunctions._call_gettreeviewdata_pagxmlservice=function(strXmlContent,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebTreeViewControlHelper";return HXWebJS.Xml.XmlService.CallPageXmlService("HXWEBTREEVIEWCONTROL_GET_DATA_LIST",strXmlContent,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebTreeViewControl._InternalFunctions._get_child_nodes_data_via_xmldataisland=function(objHXXmlDocForAllTreeViewNodeData,str_parent_node_unique_code){var objHXXmlDocForChildNodes=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA />");var objHXXmlNodeList=objHXXmlDocForAllTreeViewNodeData.SelectNodes("//RS_ROW[@PARENT_NODE_UNIQUE_CODE='"+str_parent_node_unique_code+"']");for(var i=0;i<objHXXmlNodeList.length;i++){objHXXmlDocForChildNodes.AppendChild(objHXXmlNodeList[i].CloneNode())}return objHXXmlDocForChildNodes};HXWebTreeViewControl._InternalFunctions._get_init_treeview_data_from_server=function(objActiveElementInfo,strKeyCharsToFind,strSelectedNodeCodeList,intTreeviewLevelsToRead,blnReadAllTreeviewNodesData,blnAcquireChosenNodePredecessors,fnContinueProcess){var strCustomizedFilterData=HXWebJS.Controls.TreeView._InternalFunctions._get_customized_filter_data(objActiveElementInfo);if(strCustomizedFilterData==null){return}var fnResponseForDataList=function(strXmlResult){if(strXmlResult==null){return}fnContinueProcess(strXmlResult)};var strXmlDataForDataAcquire=HXWebJS.Controls.TreeView._InternalFunctions._build_pagxmlservice_xmlcontent_getdata(objActiveElementInfo,"","",strCustomizedFilterData,false,blnReadAllTreeviewNodesData,strKeyCharsToFind,strSelectedNodeCodeList,intTreeviewLevelsToRead,blnAcquireChosenNodePredecessors);HXWebJS.Controls.TreeView._InternalFunctions._call_gettreeviewdata_pagxmlservice_async(strXmlDataForDataAcquire,fnResponseForDataList,objActiveElementInfo.extend_web_part_html_id)};HXWebJS.Controls.TreeView._InternalFunctions._append_node=function(objActiveElementInfo,nodeData,str_parent_node_unique_code,str_young_brother_node_unique_code,int_node_choose_status,bln_node_is_leaf){var obj_node_table_or_container_div=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,nodeData.node_unique_code);if(obj_node_table_or_container_div!=null){throw"TreeView追加节点(_append_node)失败！待追加节点 ("+nodeData.node_unique_code+") 已存在！";return}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var obj_parent_node_table=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_parent_node_unique_code);var obj_young_brother_node_table=(str_young_brother_node_unique_code==null?null:HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo,str_young_brother_node_unique_code));var objBrotherAndNextNode=HXWebJS.Controls.TreeView._InternalFunctions._get_brother_and_next_node_object(objActiveElementInfo,obj_parent_node_table,obj_young_brother_node_table);var obj_brother_node_table=(objBrotherAndNextNode==null?null:objBrotherAndNextNode.BrotherNodeTable);var obj_next_node_table=(objBrotherAndNextNode==null?null:objBrotherAndNextNode.NextNodeTable);var intNodeLevel=(str_parent_node_unique_code==null||str_parent_node_unique_code==""?0:parseInt(obj_parent_node_table.getAttribute("node_level"))+1);if(int_node_choose_status==null){int_node_choose_status=0}if(nodeData.node_type==null){nodeData.node_type=""}if(nodeData.node_category==null){nodeData.node_category=""}if(nodeData.node_image_class_name==null){nodeData.node_image_class_name=""}if(nodeData.node_attr_1==null){nodeData.node_attr_1=""}if(nodeData.node_attr_2==null){nodeData.node_attr_2=""}if(nodeData.node_attr_3==null){nodeData.node_attr_3=""}if(nodeData.node_attr_4==null){nodeData.node_attr_4=""}if(nodeData.node_attr_5==null){nodeData.node_attr_5=""}if(nodeData.node_attr_1!=""){nodeData.node_attr_1=nodeData.node_attr_1.replace(/\"/g,"&quot;")}if(nodeData.node_attr_2!=""){nodeData.node_attr_2=nodeData.node_attr_2.replace(/\"/g,"&quot;")}if(nodeData.node_attr_3!=""){nodeData.node_attr_3=nodeData.node_attr_3.replace(/\"/g,"&quot;")}if(nodeData.node_attr_4!=""){nodeData.node_attr_4=nodeData.node_attr_4.replace(/\"/g,"&quot;")}if(nodeData.node_attr_5!=""){nodeData.node_attr_5=nodeData.node_attr_5.replace(/\"/g,"&quot;")}if(bln_node_is_leaf==null){bln_node_is_leaf=false}var objDivTable;var objSB_NodeHtml=new HXWebStringBuilder();if(blnIsUseV2HtmlMode){objSB_NodeHtml.append("<div id=hx_node_container_div_object");objSB_NodeHtml.append(HXWebJS.Utility.StringFormat(' style="width:100%;height:{0}px;min-hegith:{0}px;"',objActiveElementInfo.node_image_size_mode));objSB_NodeHtml.append(" hx_has_children="+(bln_node_is_leaf?"0":"1"));objSB_NodeHtml.append(" hx_is_expanded="+(bln_node_is_leaf?"1":"0"));objSB_NodeHtml.append(' hx_node_is_leaf="'+(bln_node_is_leaf?"1":"0")+'"');objSB_NodeHtml.append(' hx_is_need_init_children="'+(bln_node_is_leaf?"0":"1")+'"');objSB_NodeHtml.append(" hx_choose_status="+int_node_choose_status);objSB_NodeHtml.append(' hx_parent_node_uuid="'+(str_parent_node_unique_code==null?"":str_parent_node_unique_code)+'"');objSB_NodeHtml.append(' hx_treenode_uuid="'+nodeData.node_unique_code+'"');objSB_NodeHtml.append(' node_level="'+intNodeLevel.toString()+'"');objSB_NodeHtml.append(' hx_node_type="'+nodeData.node_type+'"');objSB_NodeHtml.append(' hx_node_category="'+nodeData.node_category+'"');objSB_NodeHtml.append(' hx_attr_1="'+nodeData.node_attr_1+'" hx_attr_2="'+nodeData.node_attr_2+'" hx_attr_3="'+nodeData.node_attr_3+'" hx_attr_4="'+nodeData.node_attr_4+'" hx_attr_5="'+nodeData.node_attr_5+'"');objSB_NodeHtml.append(" onclick=\"HXWebJS.EventManager.GetCurrentEventData(event).stopPropagation();HXWebJS.Controls.TreeView.click_node('"+objActiveElementInfo.treeviewcontrol_id+"', '"+nodeData.node_unique_code+"', null, event);\" ");objSB_NodeHtml.append(">");objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._build_prefix_tree_img_html(objActiveElementInfo,intNodeLevel,bln_node_is_leaf));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_checkbox_part_html(objActiveElementInfo,int_node_choose_status));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_node_image_part_html(objActiveElementInfo,nodeData.node_type,nodeData.node_image_class_name));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_node_content_part_html(objActiveElementInfo,nodeData.node_text,nodeData.node_hint_desc,intNodeLevel,nodeData.node_type));objSB_NodeHtml.append("</div>");objDivTable=HXWebJS.DOM.CreateElement(objSB_NodeHtml.toString())}else{objSB_NodeHtml.append('<table id=hx_node_table_object  border=0 style="BORDER-COLLAPSE:collapse;" cellSpacing=0 cellPadding=0');objSB_NodeHtml.append(" hx_has_children="+(bln_node_is_leaf?"0":"1"));objSB_NodeHtml.append(" hx_is_expanded="+(bln_node_is_leaf?"1":"0"));objSB_NodeHtml.append(' hx_node_is_leaf="'+(bln_node_is_leaf?"1":"0")+'"');objSB_NodeHtml.append(' hx_is_need_init_children="'+(bln_node_is_leaf?"0":"1")+'"');objSB_NodeHtml.append(" hx_choose_status="+int_node_choose_status);objSB_NodeHtml.append(' hx_parent_node_uuid="'+(str_parent_node_unique_code==null?"":str_parent_node_unique_code)+'"');objSB_NodeHtml.append(' hx_treenode_uuid="'+nodeData.node_unique_code+'"');objSB_NodeHtml.append(' node_level="'+intNodeLevel.toString()+'"');objSB_NodeHtml.append(' hx_node_type="'+nodeData.node_type+'"');objSB_NodeHtml.append(' hx_node_category="'+nodeData.node_category+'"');objSB_NodeHtml.append(' hx_attr_1="'+nodeData.node_attr_1+'" hx_attr_2="'+nodeData.node_attr_2+'" hx_attr_3="'+nodeData.node_attr_3+'" hx_attr_4="'+nodeData.node_attr_4+'" hx_attr_5="'+nodeData.node_attr_5+'"');objSB_NodeHtml.append(" onclick=\"HXWebJS.EventManager.GetCurrentEventData(event).stopPropagation();HXWebJS.Controls.TreeView.click_node('"+objActiveElementInfo.treeviewcontrol_id+"', '"+nodeData.node_unique_code+"', null, event);\" ");objSB_NodeHtml.append("><tr>");objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._build_prefix_tds_html(objActiveElementInfo,intNodeLevel));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_checkbox_td_html(objActiveElementInfo,int_node_choose_status));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_image_td_html(objActiveElementInfo,nodeData.node_type,nodeData.node_image_class_name));objSB_NodeHtml.append(HXWebJS.Controls.TreeView._InternalFunctions._get_content_td_html(objActiveElementInfo,nodeData.node_text,nodeData.node_hint_desc,intNodeLevel,nodeData.node_type));objSB_NodeHtml.append("</tr></table>");objDivTable=document.createElement("div");objDivTable.style.width="100%";objDivTable.style.border="none";var strHeight=(objActiveElementInfo.node_image_size_mode==18?"18px":"24px");if(HXWebJS.Core.Browser.IsIE&&!HXWebJS.Core.Browser.IsIE11){objDivTable.style.height=strHeight}else{objDivTable.style.minHeight=strHeight}objDivTable.innerHTML=objSB_NodeHtml.toString()}if(obj_next_node_table==null){objActiveElementInfo.treeview_container_object.appendChild(objDivTable)}else{if(blnIsUseV2HtmlMode){objActiveElementInfo.treeview_container_object.insertBefore(objDivTable,obj_next_node_table)}else{objActiveElementInfo.treeview_container_object.insertBefore(objDivTable,obj_next_node_table.parentNode)}}if(int_node_choose_status==2){var objTempCheckBox=HXWebJS.DOM.FindFirstElementById("chkbx_hx_treenode",objDivTable);if(objTempCheckBox!=null){objTempCheckBox.indeterminate=true}}if(!blnIsUseV2HtmlMode){HXWebJS.Controls.TreeView._InternalFunctions._process_tree_lines_images(objActiveElementInfo,(blnIsUseV2HtmlMode?objDivTable:HXWebJS.DOM.FindFirstElementById("hx_node_table_object",objDivTable)),obj_parent_node_table,obj_brother_node_table,obj_young_brother_node_table)}};HXWebTreeViewControl._InternalFunctions._get_child_nodes_data_with_json_array=function(objHXXmlDocForAllTreeViewNodeData,str_parent_node_unique_code,int_parent_node_level){var arrNodeDataList=new Array();var objHXXmlNodeList=objHXXmlDocForAllTreeViewNodeData.SelectNodes("//RS_ROW[@PARENT_NODE_UNIQUE_CODE='"+str_parent_node_unique_code+"']");var objTempXmlNode,objNodeData;for(var i=0;i<objHXXmlNodeList.length;i++){objTempXmlNode=objHXXmlNodeList[i];objNodeData=HXWebTreeViewControl._InternalFunctions._get_node_data_with_json_array(objTempXmlNode,int_parent_node_level+1);arrNodeDataList.push(objNodeData)}return arrNodeDataList};HXWebTreeViewControl._InternalFunctions._get_node_data_with_json_array=function(objXmlNode,intNodeLevel){var objTempXmlNode;var objNodeData={};objNodeData.node_unique_code=objXmlNode.SelectSingleNode("@NODE_UNIQUE_CODE").GetText();objTempXmlNode=objXmlNode.SelectSingleNode("@PARENT_NODE_UNIQUE_CODE");objNodeData.parent_node_unique_code=(objTempXmlNode==null?"":objTempXmlNode.GetText());objNodeData.node_text=objXmlNode.SelectSingleNode("@NODE_TEXT").GetText();objNodeData.node_hint_desc=objXmlNode.SelectSingleNode("@NODE_DESC").GetText();objNodeData.node_type=objXmlNode.SelectSingleNode("@NODE_TYPE").GetText();objNodeData.node_category="";if(objXmlNode.SelectSingleNode("@NODE_CATEGORY")!=null){objNodeData.node_category=objXmlNode.SelectSingleNode("@NODE_CATEGORY").GetText()}objNodeData.node_attr_1=(objXmlNode.SelectSingleNode("@ATTR_1")==null?"":objXmlNode.SelectSingleNode("@ATTR_1").GetText());objNodeData.node_attr_2=(objXmlNode.SelectSingleNode("@ATTR_2")==null?"":objXmlNode.SelectSingleNode("@ATTR_2").GetText());objNodeData.node_attr_3=(objXmlNode.SelectSingleNode("@ATTR_3")==null?"":objXmlNode.SelectSingleNode("@ATTR_3").GetText());objNodeData.node_attr_4=(objXmlNode.SelectSingleNode("@ATTR_4")==null?"":objXmlNode.SelectSingleNode("@ATTR_4").GetText());objNodeData.node_attr_5=(objXmlNode.SelectSingleNode("@ATTR_5")==null?"":objXmlNode.SelectSingleNode("@ATTR_5").GetText());objNodeData.node_image_class_name=(objXmlNode.SelectSingleNode("@NODE_IMAGE_CLASS_NAME")==null?"":objXmlNode.SelectSingleNode("@NODE_IMAGE_CLASS_NAME").GetText());var strTemp=(objXmlNode.SelectSingleNode("@NODE_IS_LEAF")==null?"0":objXmlNode.SelectSingleNode("@NODE_IS_LEAF").GetText());objNodeData.node_is_leaf=(strTemp!=""&&strTemp!="0"?true:false);objNodeData.node_level=intNodeLevel;return objNodeData};HXWebTreeViewControl._InternalFunctions._init_append_nodes_with_multi_levels=function(objActiveElementInfo,objHXXmlDocOfTreeViewData,blnIsAllTreeviewDataHasRead,intLevelsToInitShow){var arrQueue=new Array();var arrTempNodeDataList=HXWebTreeViewControl._InternalFunctions._get_child_nodes_data_with_json_array(objHXXmlDocOfTreeViewData,"",-1);for(var i=0;i<arrTempNodeDataList.length;i++){arrQueue.push(arrTempNodeDataList[i])}while(arrQueue.length>0){var currNodeData=arrQueue.shift();if(intLevelsToInitShow>0&&(currNodeData.node_level+1)>intLevelsToInitShow){return}arrTempNodeDataList=HXWebTreeViewControl._InternalFunctions._get_child_nodes_data_with_json_array(objHXXmlDocOfTreeViewData,currNodeData.node_unique_code,currNodeData.node_level);for(var i=0;i<arrTempNodeDataList.length;i++){arrQueue.push(arrTempNodeDataList[i])}var int_node_choose_status=0;if(HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node(objActiveElementInfo.chosen_node_unique_code_list,currNodeData.node_unique_code)){int_node_choose_status=1}else{if(HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node_predecessor(objActiveElementInfo,currNodeData.node_unique_code)){int_node_choose_status=2}}var bln_node_is_leaf=currNodeData.node_is_leaf;HXWebJS.Controls.TreeView._InternalFunctions._append_node(objActiveElementInfo,currNodeData,currNodeData.parent_node_unique_code,"",int_node_choose_status,bln_node_is_leaf)}};HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node_predecessor=function(objActiveElementInfo,strNodeUniqueCode){if(objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data==null){return false}var objXmlNode=objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+strNodeUniqueCode+"']");return(objXmlNode!=null?true:false)};HXWebTreeViewControl._InternalFunctions._is_member_of_chosen_node=function(strChosenNodeCodeList,strNodeUniqueCode){if(strChosenNodeCodeList==null||strChosenNodeCodeList==""){return false}var arrChosenNodeCodeList=strChosenNodeCodeList.split(/[,|;]/g);for(var i=0;i<arrChosenNodeCodeList.length;i++){if(arrChosenNodeCodeList[i]==strNodeUniqueCode){return true}}return false};HXWebJS.Controls.TreeView._InternalFunctions._get_chosen_nodes_info_not_loaded_in_treeview_container=function(objActiveElementInfo,objNodeTablesListLoaded){if(objActiveElementInfo.chosen_node_unique_code_list==null||objActiveElementInfo.chosen_node_unique_code_list==""){return""}if(objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data==null){return""}var blnIsUseV2HtmlMode=objActiveElementInfo.node_html_build_mode=="v2";var objSB_Temp=new HXWebStringBuilder();var arr_ChosenNodeCodeList=objActiveElementInfo.chosen_node_unique_code_list.split(/[,|;]/g);var arrTempNodeTableList;for(var i=0;i<arr_ChosenNodeCodeList.length;i++){var strNodeUniqueCode=arr_ChosenNodeCodeList[i];if(blnIsUseV2HtmlMode){arrTempNodeTableList=HXWebJS.DOM.FindElementsByAttribute("hx_treenode_uuid",strNodeUniqueCode,"div",objNodeTablesListLoaded,false)}else{arrTempNodeTableList=HXWebJS.DOM.FindElementsByAttribute("hx_treenode_uuid",strNodeUniqueCode,"table",objNodeTablesListLoaded,false)}if(arrTempNodeTableList.length>0){continue}var objHXXmlNode=objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+strNodeUniqueCode+"']");if(objHXXmlNode==null){continue}var objNodeTable_YoungestPredecessorLoaded=null;var strNodeUniqueCode_YoungestPredecessorLoaded=objHXXmlNode.SelectSingleNode("@PARENT_NODE_UNIQUE_CODE").GetText();while(strNodeUniqueCode_YoungestPredecessorLoaded!=""){if(blnIsUseV2HtmlMode){arrTempNodeTableList=HXWebJS.DOM.FindElementsByAttribute("hx_treenode_uuid",strNodeUniqueCode_YoungestPredecessorLoaded,"div",objNodeTablesListLoaded,false)}else{arrTempNodeTableList=HXWebJS.DOM.FindElementsByAttribute("hx_treenode_uuid",strNodeUniqueCode_YoungestPredecessorLoaded,"table",objNodeTablesListLoaded,false)}if(arrTempNodeTableList.length>0){objNodeTable_YoungestPredecessorLoaded=arrTempNodeTableList[0];break}strNodeUniqueCode_YoungestPredecessorLoaded=objActiveElementInfo.hxxmldoc_for_chosen_nodes_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+strNodeUniqueCode_YoungestPredecessorLoaded+"']/@PARENT_NODE_UNIQUE_CODE").GetText()}if(strNodeUniqueCode_YoungestPredecessorLoaded==""){continue}var intChosenStatusOfYoungestPredecessorLoaded=objNodeTable_YoungestPredecessorLoaded.getAttribute("hx_choose_status");if(intChosenStatusOfYoungestPredecessorLoaded==0||intChosenStatusOfYoungestPredecessorLoaded==1){continue}objSB_Temp.append("<RS_ROW");objSB_Temp.append(' UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strNodeUniqueCode)+'"');objSB_Temp.append(' CHOOSE_STATUS="1"');objSB_Temp.append(' NODE_LEVEL="'+objHXXmlNode.SelectSingleNode("@NODE_LEVEL").GetText()+'"');objSB_Temp.append(' NODE_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@NODE_TYPE").GetText())+'"');objSB_Temp.append(' KEY="'+HXWebJS.Xml.MarkXMLSpecialChars(strNodeUniqueCode)+'"');objSB_Temp.append(' DESC="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@NODE_TEXT").GetText())+'"');objSB_Temp.append(' ATTR_1="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@ATTR_1").GetText())+'"');objSB_Temp.append(' ATTR_2="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@ATTR_2").GetText())+'"');objSB_Temp.append(' ATTR_3="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@ATTR_3").GetText())+'"');objSB_Temp.append(' ATTR_4="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@ATTR_4").GetText())+'"');objSB_Temp.append(' ATTR_5="'+HXWebJS.Xml.MarkXMLSpecialChars(objHXXmlNode.SelectSingleNode("@ATTR_5").GetText())+'"');objSB_Temp.append(" />")}return objSB_Temp.toString()};HXWebJS.Controls.PopupTreeView={};HXWebJS.Controls.PopupTreeView._InternalFunctions={};HXWebPopupTreeViewControl=HXWebJS.Controls.PopupTreeView;HXWebJS.Controls.PopupTreeView.register=function(str_popuptreeviewcontrol_id,str_dropdown_btn_id,obj_popuptreeviewcontrol_setting){if(obj_popuptreeviewcontrol_setting==null){obj_popuptreeviewcontrol_setting=new Object()}if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(!c){var c=new Object();c={popuptreeviewcontrol_id:str_popuptreeviewcontrol_id,choose_button_id:str_dropdown_btn_id,content_type:(obj_popuptreeviewcontrol_setting.content_type==null?"desc":obj_popuptreeviewcontrol_setting.content_type),choose_type:(obj_popuptreeviewcontrol_setting.choose_type==null?0:obj_popuptreeviewcontrol_setting.choose_type),choose_return_value_option:(obj_popuptreeviewcontrol_setting.choose_return_value_option==null?1:obj_popuptreeviewcontrol_setting.choose_return_value_option),dropdownbox_width:obj_popuptreeviewcontrol_setting.dropdownbox_width,dropdownbox_height:obj_popuptreeviewcontrol_setting.dropdownbox_height,binding_datasrc_id:obj_popuptreeviewcontrol_setting.binding_datasrc_id,binding_datafld_for_key:obj_popuptreeviewcontrol_setting.binding_datafield_for_key,binding_datafld_for_desc:obj_popuptreeviewcontrol_setting.binding_datafield_for_desc,binding_datafld_for_attr_1:obj_popuptreeviewcontrol_setting.binding_datafield_for_attr1,binding_datafld_for_attr_2:obj_popuptreeviewcontrol_setting.binding_datafield_for_attr2,binding_datafld_for_attr_3:obj_popuptreeviewcontrol_setting.binding_datafield_for_attr3,binding_datafld_for_attr_4:obj_popuptreeviewcontrol_setting.binding_datafield_for_attr4,binding_datafld_for_attr_5:obj_popuptreeviewcontrol_setting.binding_datafield_for_attr5,oninit_callback_func:obj_popuptreeviewcontrol_setting.oninit_callback_func,filter_data_callback_func:obj_popuptreeviewcontrol_setting.filter_data_callback_func,datachoosed_callback_func:obj_popuptreeviewcontrol_setting.datachoosed_callback_func,use_keyword_search:obj_popuptreeviewcontrol_setting.use_keyword_search,is_show_images:obj_popuptreeviewcontrol_setting.is_show_images,dft_node_img_class_name:obj_popuptreeviewcontrol_setting.dft_node_img_class_name,node_type_img_class_collection:obj_popuptreeviewcontrol_setting.node_type_img_class_collection,is_show_plusminus:obj_popuptreeviewcontrol_setting.is_show_plusminus,node_image_size_mode:obj_popuptreeviewcontrol_setting.node_image_size_mode,auto_expend_onitemclick:obj_popuptreeviewcontrol_setting.auto_expend_onitemclick,auto_init_descendant_children_nodes:obj_popuptreeviewcontrol_setting.auto_init_descendant_children_nodes,auto_init_node_levels:obj_popuptreeviewcontrol_setting.auto_init_node_levels,predefined_treeview_setting_code:obj_popuptreeviewcontrol_setting.predefined_treeview_setting_code,extend_webpart_type:obj_popuptreeviewcontrol_setting.extend_webpart_type,user_new_treeview_process_version:obj_popuptreeviewcontrol_setting.user_new_treeview_process_version,extend_web_part_html_id:obj_popuptreeviewcontrol_setting.extend_web_part_html_id,node_html_build_mode:obj_popuptreeviewcontrol_setting.node_html_build_mode,is_show_root_line:obj_popuptreeviewcontrol_setting.is_show_root_line};HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id]=c}};HXWebJS.Controls.PopupTreeView.unregister=function(str_webdatacontrol_id){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var c=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(c==null){return}HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=null};HXWebJS.Controls.PopupTreeView.demo_callback_func__filter_data=function(str_popuptreeviewcontrol_id,objWebPopupControl_DropdownButton){alert("filter_data_callback_func:fn(str_popuptreeviewcontrol_id, objInputTextBox/*may be null*/, objDropdownButton)")};HXWebJS.Controls.PopupTreeView.demo_callback_func__datachoosed=function(str_popuptreeviewcontrol_id,objWebPopupControl_DropdownButton){alert("datachoosed_callback_func:fn(str_popuptreeviewcontrol_id, objInputTextBox/*may be null*/, objDropdownButton, objXmlChoosedData)")};HXWebJS.Controls.PopupTreeView.set_options=function(str_popuptreeviewcontrol_id,options){if(options==null){return}if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(objActiveElementInfo==null){return}if(options.content_type!=null){objActiveElementInfo.content_type=options.content_type}if(options.choose_type!=null){objActiveElementInfo.choose_type=options.choose_type}if(options.choose_return_value_option!=null){objActiveElementInfo.choose_return_value_option=options.choose_return_value_option}if(options.user_new_treeview_process_version!=null){objActiveElementInfo.user_new_treeview_process_version=options.user_new_treeview_process_version}if(options.use_keyword_search!=null){objActiveElementInfo.use_keyword_search=options.use_keyword_search}if(options.dropdownbox_width!=null){objActiveElementInfo.dropdownbox_width=options.dropdownbox_width}if(options.dropdownbox_height!=null){objActiveElementInfo.dropdownbox_height=options.dropdownbox_height}if(options.binding_datasrc_id!=null){objActiveElementInfo.binding_datasrc_id=options.binding_datasrc_id}if(options.binding_datafld_for_key!=null){objActiveElementInfo.binding_datafld_for_key=options.binding_datafld_for_key}if(options.binding_datafld_for_desc!=null){objActiveElementInfo.binding_datafld_for_desc=options.binding_datafld_for_desc}if(options.binding_datafld_for_attr_1!=null){objActiveElementInfo.binding_datafld_for_attr_1=options.binding_datafld_for_attr_1}if(options.binding_datafld_for_attr_2!=null){objActiveElementInfo.binding_datafld_for_attr_2=options.binding_datafld_for_attr_2}if(options.binding_datafld_for_attr_3!=null){objActiveElementInfo.binding_datafld_for_attr_3=options.binding_datafld_for_attr_3}if(options.binding_datafld_for_attr_4!=null){objActiveElementInfo.binding_datafld_for_attr_4=options.binding_datafld_for_attr_4}if(options.binding_datafld_for_attr_5!=null){objActiveElementInfo.binding_datafld_for_attr_5=options.binding_datafld_for_attr_5}if(options.is_show_images!=null){objActiveElementInfo.is_show_images=options.is_show_images}if(options.dft_node_img_class_name!=null){objActiveElementInfo.dft_node_img_class_name=options.dft_node_img_class_name}if(options.node_type_img_class_collection!=null){objActiveElementInfo.node_type_img_class_collection=options.node_type_img_class_collection}if(options.is_show_plusminus!=null){objActiveElementInfo.is_show_plusminus=options.is_show_plusminus}if(options.node_image_size_mode!=null){objActiveElementInfo.node_image_size_mode=options.node_image_size_mode}if(options.is_show_root_line!=null){objActiveElementInfo.is_show_root_line=options.is_show_root_line}if(options.auto_expend_onitemclick!=null){objActiveElementInfo.auto_expend_onitemclick=options.auto_expend_onitemclick}if(options.auto_init_descendant_children_nodes!=null){objActiveElementInfo.auto_init_descendant_children_nodes=options.auto_init_descendant_children_nodes}if(options.auto_init_node_levels!=null){objActiveElementInfo.auto_init_node_levels=options.auto_init_node_levels}if(options.use_mobile_mode!=null){objActiveElementInfo.use_mobile_mode=options.use_mobile_mode}if(options.predefined_treeview_setting_code!=null){objActiveElementInfo.predefined_treeview_setting_code=options.predefined_treeview_setting_code}if(options.extend_web_part_html_id!=null){objActiveElementInfo.extend_web_part_html_id=options.extend_web_part_html_id}if(options.node_html_build_mode!=null){objActiveElementInfo.node_html_build_mode=options.node_html_build_mode}};HXWebJS.Controls.PopupTreeView._InternalFunctions._onclickprocess=function(objHXEventObject){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objHXEventObject.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_popuptreeviewcontrol_id=null;for(key in HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_popuptreeviewcontrol_id=key;break}}if(str_popuptreeviewcontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];var objInputTextBox=HXWebJS.Controls.PopupTreeView._InternalFunctions._get_related_inputbox_object(str_popuptreeviewcontrol_id,objEventSrcElement);if(objInputTextBox!=null){if(objInputTextBox.readOnly==true){if(HXWebJS.DOM.ElementAttributeGetValue(objInputTextBox,"hx_allow_popup_pick")!="1"){return}}}HXWebJS.Controls.PopupTreeView._InternalFunctions._set_current_active_control("hxwebpopuptreeview",str_popuptreeviewcontrol_id,objInputTextBox,objEventSrcElement,objActiveElementInfo)};HXWebJS.Controls.PopupTreeView._InternalFunctions._get_related_inputbox_object=function(str_popuptreeviewcontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_popuptreeviewcontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.PopupTreeView._InternalFunctions._set_current_active_control=function(strWebDataControlType,str_popuptreeviewcontrol_id,objWebPopupControl_TextBox,objWebPopupControl_DropdownButton,objActiveElementInfo){if(HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_control_process_fail){HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_control_process_fail=false;return}if(objActiveElementInfo.oninit_callback_func!=null){if(objActiveElementInfo.oninit_callback_func(str_popuptreeviewcontrol_id,objWebPopupControl_TextBox,objWebPopupControl_DropdownButton,objActiveElementInfo)!=true){return}}HXWebJS.Controls.PopupTreeView._InternalFunctions._create_popup_treeviewarea();HXWebJS.Controls.PopupTreeView._InternalFunctions._create_popup_controlarea();HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_id=str_popuptreeviewcontrol_id;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox=objWebPopupControl_TextBox;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn=objWebPopupControl_DropdownButton;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_merged_chosn_node_code_list=null;HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.innerHTML="";HXWebJS.DOM.FindFirstElementById("txtbx_hxwebpopuptreeviewcontrol__controlarea_search_keyword",HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea).value="";var intLeft,intTop,intWidth,intHeight;if(objWebPopupControl_TextBox!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objWebPopupControl_TextBox);intTop=HXWebJS.DOM.GetElementTopPosition(objWebPopupControl_TextBox)+objWebPopupControl_TextBox.offsetHeight+1;intWidth=(objActiveElementInfo.dropdownbox_width==null?objWebPopupControl_DropdownButton.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(objWebPopupControl_DropdownButton)-HXWebJS.DOM.GetElementLeftPosition(objWebPopupControl_TextBox):objActiveElementInfo.dropdownbox_width)}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objWebPopupControl_DropdownButton);intTop=HXWebJS.DOM.GetElementTopPosition(objWebPopupControl_DropdownButton)+objChooseButton.offsetHeight+1;intWidth=(objActiveElementInfo.dropdownbox_width==null?objWebPopupControl_DropdownButton.offsetWidth:objActiveElementInfo.dropdownbox_width)}if(intWidth<200){intWidth=200}intHeight=(objActiveElementInfo.dropdownbox_height==null?200:objActiveElementInfo.dropdownbox_height);if(intHeight<200){intHeight=200}var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intWidth>intMaxWidth){intLeft=intMaxWidth-intWidth}var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intHeight>intMaxHeight){intTop=intMaxHeight-intHeight;if(objWebPopupControl_TextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objWebPopupControl_TextBox)-intHeight-1;if(intTop<intCurrentDocumentScrollTop){intMaxHeight-intHeight}}}HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.left=intLeft+"px";HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.top=intTop+"px";HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.width=intWidth+"px";HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.height=(intHeight-(objActiveElementInfo.choose_type==0&&!objActiveElementInfo.use_keyword_search?0:30))+"px";var objHtmlGlobalPopupControlArea=HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea;objHtmlGlobalPopupControlArea.style.left=intLeft+"px";objHtmlGlobalPopupControlArea.style.top=(intTop+intHeight-30-1)+"px";objHtmlGlobalPopupControlArea.style.width=intWidth+"px";if(objActiveElementInfo.choose_type==0){if(objActiveElementInfo.use_keyword_search){HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__ok",objHtmlGlobalPopupControlArea).style.display="none";HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__cancel",objHtmlGlobalPopupControlArea).style.display="none";HXWebJS.DOM.FindFirstElementById("hxwebpopuptreeviewcontrol__controlarea_search_part",objHtmlGlobalPopupControlArea).style.display="";HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__clear",objHtmlGlobalPopupControlArea).style.display="";objHtmlGlobalPopupControlArea.style.display=""}else{objHtmlGlobalPopupControlArea.style.display="none"}}else{objHtmlGlobalPopupControlArea.style.display="";if(objActiveElementInfo.use_keyword_search){HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__ok",objHtmlGlobalPopupControlArea).style.display="";HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__cancel",objHtmlGlobalPopupControlArea).style.display="";HXWebJS.DOM.FindFirstElementById("hxwebpopuptreeviewcontrol__controlarea_search_part",objHtmlGlobalPopupControlArea).style.display=""}else{HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__ok",objHtmlGlobalPopupControlArea).style.display="";HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__cancel",objHtmlGlobalPopupControlArea).style.display="";HXWebJS.DOM.FindFirstElementById("hxwebpopuptreeviewcontrol__controlarea_search_part",objHtmlGlobalPopupControlArea).style.display="none"}HXWebJS.DOM.FindFirstElementById("btn_hxwebpopuptreeviewcontrol__clear",objHtmlGlobalPopupControlArea).style.display="none"}HXWebTreeViewControl.register(str_popuptreeviewcontrol_id,HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea,objActiveElementInfo.choose_type,objActiveElementInfo.is_show_images,objActiveElementInfo.is_show_root_line,HXWebJS.Controls.PopupTreeView._InternalFunctions._onhxnodeclicked_or_onhxcheckstatusafterupdated,objActiveElementInfo.dft_node_img_class_name,objActiveElementInfo.is_show_plusminus,null,objActiveElementInfo.node_image_size_mode);if(objActiveElementInfo.filter_data_callback_func!=null){HXWebTreeViewControl.set_filter_data_get_callback(str_popuptreeviewcontrol_id,HXWebJS.Controls.PopupTreeView._InternalFunctions._active_control_filter_data_get_callback_func)}if(objActiveElementInfo.extend_web_part_html_id!=null){HXWebTreeViewControl.set_extend_webpart_html_id(str_popuptreeviewcontrol_id,objActiveElementInfo.extend_web_part_html_id)}if(objActiveElementInfo.node_type_img_class_collection!=null){HXWebTreeViewControl.set_image_info(str_popuptreeviewcontrol_id,objActiveElementInfo.node_type_img_class_collection)}if(objActiveElementInfo.predefined_treeview_setting_code!=null){HXWebTreeViewControl.set_predefined_treeview_setting_code(str_popuptreeviewcontrol_id,objActiveElementInfo.predefined_treeview_setting_code)}HXWebTreeViewControl.set_options(str_popuptreeviewcontrol_id,{node_html_build_mode:objActiveElementInfo.node_html_build_mode});if(objActiveElementInfo.user_new_treeview_process_version){var strChosenNodeCodeList=HXWebPopupTreeViewControl._InternalFunctions._get_binding_key_field_value(objActiveElementInfo,objWebPopupControl_TextBox,objWebPopupControl_DropdownButton);var options={init_auto_show_level:objActiveElementInfo.auto_init_node_levels,chosen_node_unique_code_list:strChosenNodeCodeList,acquire_all_treeview_data:objActiveElementInfo.acquire_all_nodes_data_one_time};HXWebTreeViewControl.init_treeview_nodes(str_popuptreeviewcontrol_id,options)}else{HXWebTreeViewControl.init_root_nodes(str_popuptreeviewcontrol_id,objActiveElementInfo.auto_init_descendant_children_nodes,objActiveElementInfo.auto_init_node_levels,objActiveElementInfo.acquire_all_nodes_data_one_time)}HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.display=""};HXWebPopupTreeViewControl._InternalFunctions._get_binding_key_field_value=function(objActiveElementInfo,objTextBox,objDropdownButton){var strBindingDataSrc=objActiveElementInfo.binding_datasrc_id;if(strBindingDataSrc==null||strBindingDataSrc==""){return objTextBox.value}var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;if(strDataFieldNameForKey==null||strDataFieldNameForKey==""){return objTextBox.value}strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();var intBindingDataLine=null;if(HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownButton)!=null){intBindingDataLine=HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownButton)-1}var objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strBindingDataSrc);if(intBindingDataLine!=null){objXmlNodeForKey=objDataSrc.SelectNodes("//RS_ROW")[intBindingDataLine].SelectSingleNode("@"+strDataFieldNameForKey)}else{objXmlNodeForKey=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForKey)}if(objXmlNodeForKey==null){return""}return objXmlNodeForKey.GetText()};HXWebJS.Controls.PopupTreeView._InternalFunctions._active_control_filter_data_get_callback_func=function(str_popuptreeviewcontrol_id){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return""}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(objActiveElementInfo==null){return""}if(objActiveElementInfo.filter_data_callback_func==null){return""}var objInputBox=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox;var objWebPopupControl_DropdownButton=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn;var strCustomizedFilterData=objActiveElementInfo.filter_data_callback_func(str_popuptreeviewcontrol_id,objInputBox,objWebPopupControl_DropdownButton,objActiveElementInfo.extend_webpart_type);return strCustomizedFilterData};HXWebJS.Controls.PopupTreeView._InternalFunctions._onhxnodeclicked_or_onhxcheckstatusafterupdated=function(str_event_type,obj_current_treenode_data){if(str_event_type!="onhxnodeclicked"&&str_event_type!="onhxcheckstatusafterupdated"){return}var str_popuptreeviewcontrol_id=obj_current_treenode_data.treeviewcontrol_id;if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(objActiveElementInfo==null){return}if(str_event_type=="onhxnodeclicked"&&objActiveElementInfo.auto_expend_onitemclick==1){if(obj_current_treenode_data.node_need_init_children!=0||obj_current_treenode_data.node_has_children!=0){HXWebTreeViewControl.init_and_expand_child_nodes(str_popuptreeviewcontrol_id,obj_current_treenode_data.node_unique_code);return}}var strSelectedKey="",strSelectedDesc="",strSelectedAttr1="",strSelectedAttr2="",strSelectedAttr3="",strSelectedAttr4="",strSelectedAttr5="";var objSB_Temp=new HXWebStringBuilder();objSB_Temp.append("<SELECTED_NODES>");var strXmlDataForChoosedNodes="";var objXmlChoosedData=null;if(objActiveElementInfo.choose_type!=null&&objActiveElementInfo.choose_type!=0){return}strSelectedKey=obj_current_treenode_data.node_unique_code;strSelectedDesc=obj_current_treenode_data.node_text;strSelectedAttr1=obj_current_treenode_data.node_attr_1;strSelectedAttr2=obj_current_treenode_data.node_attr_2;strSelectedAttr3=obj_current_treenode_data.node_attr_3;strSelectedAttr4=obj_current_treenode_data.node_attr_4;strSelectedAttr5=obj_current_treenode_data.node_attr_5;objSB_Temp.append("<RS_ROW");objSB_Temp.append(' UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedKey)+'"');objSB_Temp.append(' CHOOSE_STATUS="'+(obj_current_treenode_data.node_choosed_status==null?"":obj_current_treenode_data.node_choosed_status)+'"');objSB_Temp.append(' NODE_LEVEL="'+obj_current_treenode_data.node_level+'"');objSB_Temp.append(' NODE_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(obj_current_treenode_data.node_type)+'"');objSB_Temp.append(' KEY="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedKey)+'"');objSB_Temp.append(' DESC="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedDesc)+'"');objSB_Temp.append(' ATTR_1="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedAttr1)+'"');objSB_Temp.append(' ATTR_2="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedAttr2)+'"');objSB_Temp.append(' ATTR_3="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedAttr3)+'"');objSB_Temp.append(' ATTR_4="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedAttr4)+'"');objSB_Temp.append(' ATTR_5="'+HXWebJS.Xml.MarkXMLSpecialChars(strSelectedAttr5)+'"');objSB_Temp.append(" /></SELECTED_NODES>");strXmlDataForChoosedNodes=objSB_Temp.toString();objXmlChoosedData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlDataForChoosedNodes);HXWebJS.Controls.PopupTreeView._InternalFunctions._UpdateBindingXmlDataIslandAndRunDataChosenCallback(objActiveElementInfo,objXmlChoosedData,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5)};HXWebJS.Controls.PopupTreeView._InternalFunctions._set_selected_desc_to_textbox=function(objActiveElementInfo,objInputTextBox,strSelectedDesc){if(objInputTextBox!=null&&objActiveElementInfo.content_type=="desc"&&(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datafld_for_desc=="")){objInputTextBox.value=strSelectedDesc;try{objInputTextBox.focus()}catch(ex){}}};HXWebJS.Controls.PopupTreeView._InternalFunctions._set_binding_datafields_values=function(objActiveElementInfo,intBindingDataLine,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5){var objXmlNodeForKey=null,objXmlNodeForDesc=null,objXmlNodeForAttr1=null,objXmlNodeForAttr2=null,objXmlNodeForAttr3=null,objXmlNodeForAttr4=null,objXmlNodeForAttr5=null;var str_binding_datasrc_id=objActiveElementInfo.binding_datasrc_id;if(!str_binding_datasrc_id){return}var objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(str_binding_datasrc_id);if(objDataSrc!=null){var intLineNo=intBindingDataLine;var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;var strDataFieldNameForDesc=objActiveElementInfo.binding_datafld_for_desc;var strDataFieldNameForAttr1=objActiveElementInfo.binding_datafld_for_attr_1;var strDataFieldNameForAttr2=objActiveElementInfo.binding_datafld_for_attr_2;var strDataFieldNameForAttr3=objActiveElementInfo.binding_datafld_for_attr_3;var strDataFieldNameForAttr4=objActiveElementInfo.binding_datafld_for_attr_4;var strDataFieldNameForAttr5=objActiveElementInfo.binding_datafld_for_attr_5;if(strDataFieldNameForKey!=null&&strDataFieldNameForKey!=""){strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();if(intLineNo!=null){objXmlNodeForKey=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForKey)}else{objXmlNodeForKey=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForKey)}}if(strDataFieldNameForDesc!=null&&strDataFieldNameForDesc!=""){strDataFieldNameForDesc=strDataFieldNameForDesc.toUpperCase();if(intLineNo!=null){objXmlNodeForDesc=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForDesc)}else{objXmlNodeForDesc=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForDesc)}}if(strDataFieldNameForAttr1!=null&&strDataFieldNameForAttr1!=""){strDataFieldNameForAttr1=strDataFieldNameForAttr1.toUpperCase();if(intLineNo!=null){objXmlNodeForAttr1=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForAttr1)}else{objXmlNodeForAttr1=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForAttr1)}}if(strDataFieldNameForAttr2!=null&&strDataFieldNameForAttr2!=""){strDataFieldNameForAttr2=strDataFieldNameForAttr2.toUpperCase();if(intLineNo!=null){objXmlNodeForAttr2=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForAttr2)}else{objXmlNodeForAttr2=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForAttr2)}}if(strDataFieldNameForAttr3!=null&&strDataFieldNameForAttr3!=""){strDataFieldNameForAttr3=strDataFieldNameForAttr3.toUpperCase();if(intLineNo!=null){objXmlNodeForAttr3=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForAttr3)}else{objXmlNodeForAttr3=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForAttr3)}}if(strDataFieldNameForAttr4!=null&&strDataFieldNameForAttr4!=""){strDataFieldNameForAttr4=strDataFieldNameForAttr4.toUpperCase();if(intLineNo!=null){objXmlNodeForAttr4=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForAttr4)}else{objXmlNodeForAttr4=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForAttr4)}}if(strDataFieldNameForAttr5!=null&&strDataFieldNameForAttr5!=""){strDataFieldNameForAttr5=strDataFieldNameForAttr5.toUpperCase();if(intLineNo!=null){objXmlNodeForAttr5=objDataSrc.SelectNodes("//RS_ROW")[intLineNo].SelectSingleNode("@"+strDataFieldNameForAttr5)}else{objXmlNodeForAttr5=objDataSrc.SelectSingleNode("//RS_ROW/@"+strDataFieldNameForAttr5)}}}if(objXmlNodeForKey!=null){objXmlNodeForKey.SetText(strSelectedKey)}if(objXmlNodeForDesc!=null){objXmlNodeForDesc.SetText(strSelectedDesc)}if(objXmlNodeForAttr1!=null){objXmlNodeForAttr1.SetText(strSelectedAttr1)}if(objXmlNodeForAttr2!=null){objXmlNodeForAttr2.SetText(strSelectedAttr2)}if(objXmlNodeForAttr3!=null){objXmlNodeForAttr3.SetText(strSelectedAttr3)}if(objXmlNodeForAttr4!=null){objXmlNodeForAttr4.SetText(strSelectedAttr4)}if(objXmlNodeForAttr5!=null){objXmlNodeForAttr5.SetText(strSelectedAttr5)}};HXWebJS.Controls.PopupTreeView._InternalFunctions._run_datachoosed_callback_function=function(objActiveElementInfo,objInputTextBox,objDropdownButton,objXmlChoosedData){var str_popuptreeviewcontrol_id=objActiveElementInfo.popuptreeviewcontrol_id;if(!!objActiveElementInfo.datachoosed_callback_func){try{objActiveElementInfo.datachoosed_callback_func(str_popuptreeviewcontrol_id,objInputTextBox,objDropdownButton,objXmlChoosedData,objActiveElementInfo.extend_webpart_type);return}catch(e){alert("hxwebpopuptreeview datachoosed_callback_func call failed. "+e.description);return}}};HXWebJS.Controls.PopupTreeView._InternalFunctions._clear_current_active_control_and_hide=function(){HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_id=null;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn=null;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox=null;HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_merged_chosn_node_code_list=null;HXWebJS.Controls.PopupTreeView._InternalFunctions._hide_popup_area()};HXWebJS.Controls.PopupTreeView._InternalFunctions._hide_popup_area=function(){if(HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea!=null){HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.display="none"}if(HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea!=null){HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea.style.display="none"}};HXWebJS.Controls.PopupTreeView._InternalFunctions._onclickprocess_outsidedropdownarea=function(objEventData){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea){return}if(HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea.style.display=="none"){return}var objEventSrcElement=objEventData.target;if(objEventSrcElement!==HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox&&objEventSrcElement!==HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn&&objEventSrcElement!==HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea){if(objEventData.type=="click"){HXWebJS.Controls.PopupTreeView._InternalFunctions._clear_current_active_control_and_hide()}else{if(objEventData.type=="touchend"){var blnIsEventSrcElementInPopupDataArea,blnIsEventSrcElementInPopupControlArea;var objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebpopuptreeviewcontrol_popup_treeviewarea");if(objPopupContainerDiv==null){blnIsEventSrcElementInPopupDataArea=false}else{blnIsEventSrcElementInPopupDataArea=HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objEventSrcElement)}objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebpopuptreeviewcontrol_popup_controlarea");if(objPopupContainerDiv==null){blnIsEventSrcElementInPopupControlArea=false}else{blnIsEventSrcElementInPopupControlArea=HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objEventSrcElement)}if(!blnIsEventSrcElementInPopupDataArea&&!blnIsEventSrcElementInPopupControlArea){HXWebJS.Controls.PopupTreeView._InternalFunctions._clear_current_active_control_and_hide();return}}}}};HXWebJS.Controls.PopupTreeView._InternalFunctions._create_popup_treeviewarea=function(){if(window.document.getElementById("hxwebpopuptreeviewcontrol_popup_treeviewarea")==null){var strDivHTMLContent='<div id=hxwebpopuptreeviewcontrol_popup_treeviewarea style="display:none; Z-INDEX:8001; LEFT:0px; TOP:0px;WIDTH:200px; HEIGHT:100px; POSITION: absolute; overflow:auto; padding:1 1 0 0;" onclick="HXWebJS.EventManager.GetCurrentEventData(event).stopPropagation();"></div>';var objDiv=HXWebJS.DOM.CreateElement(strDivHTMLContent);document.body.appendChild(objDiv);HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_treeviewarea=objDiv}};HXWebJS.Controls.PopupTreeView._InternalFunctions._OKButton_onclicked=function(){var str_popuptreeviewcontrol_id=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_id;if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(objActiveElementInfo==null){return}var strXmlDataForChoosedNodes=HXWebTreeViewControl.get_choosed_nodes(str_popuptreeviewcontrol_id,objActiveElementInfo.choose_return_value_option);var objXmlChoosedData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlDataForChoosedNodes);var strSelectedKey="",strSelectedDesc="",strSelectedAttr1="",strSelectedAttr2="",strSelectedAttr3="",strSelectedAttr4="",strSelectedAttr5="";if(strXmlDataForChoosedNodes!=null&&strXmlDataForChoosedNodes!=""){var objXmlNodeList=objXmlChoosedData.SelectNodes("//RS_ROW");for(var i=0;i<objXmlNodeList.length;i++){strSelectedKey+=(strSelectedKey!=""?",":"")+objXmlNodeList[i].SelectSingleNode(".//@UUID").GetText();strSelectedDesc+=(strSelectedDesc!=""?",":"")+objXmlNodeList[i].SelectSingleNode(".//@DESC").GetText();strSelectedAttr1+=(strSelectedAttr1!=""?",":"")+(objXmlNodeList[i].SelectSingleNode(".//@ATTR_1")!=null?objXmlNodeList[i].SelectSingleNode(".//@ATTR_1").GetText():"");strSelectedAttr2+=(strSelectedAttr2!=""?",":"")+(objXmlNodeList[i].SelectSingleNode(".//@ATTR_2")!=null?objXmlNodeList[i].SelectSingleNode(".//@ATTR_2").GetText():"");strSelectedAttr3+=(strSelectedAttr3!=""?",":"")+(objXmlNodeList[i].SelectSingleNode(".//@ATTR_3")!=null?objXmlNodeList[i].SelectSingleNode(".//@ATTR_3").GetText():"");strSelectedAttr4+=(strSelectedAttr4!=""?",":"")+(objXmlNodeList[i].SelectSingleNode(".//@ATTR_4")!=null?objXmlNodeList[i].SelectSingleNode(".//@ATTR_4").GetText():"");strSelectedAttr5+=(strSelectedAttr5!=""?",":"")+(objXmlNodeList[i].SelectSingleNode(".//@ATTR_5")!=null?objXmlNodeList[i].SelectSingleNode(".//@ATTR_5").GetText():"")}}HXWebJS.Controls.PopupTreeView._InternalFunctions._UpdateBindingXmlDataIslandAndRunDataChosenCallback(objActiveElementInfo,objXmlChoosedData,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5)};HXWebJS.Controls.PopupTreeView._InternalFunctions._CancelButton_onclicked=function(eventObject){HXWebJS.Controls.PopupTreeView._InternalFunctions._clear_current_active_control_and_hide()};HXWebJS.Controls.PopupTreeView._InternalFunctions._ClearButton_onclicked=function(eventObject){var str_popuptreeviewcontrol_id=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_id;if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(objActiveElementInfo==null){return}var objXmlChoosedData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("");HXWebJS.Controls.PopupTreeView._InternalFunctions._UpdateBindingXmlDataIslandAndRunDataChosenCallback(objActiveElementInfo,objXmlChoosedData,"","","","","","","")};HXWebJS.Controls.PopupTreeView._InternalFunctions._UpdateBindingXmlDataIslandAndRunDataChosenCallback=function(objActiveElementInfo,objXmlChoosedData,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5){var objInputTextBox=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox;var objDropdownButton=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn;var str_binding_datasrc_id=objActiveElementInfo.binding_datasrc_id;if(str_binding_datasrc_id==null){if(objInputTextBox!=null){objInputTextBox.value=(objActiveElementInfo.content_type=="key"?strSelectedKey:strSelectedDesc);try{objInputTextBox.focus()}catch(ex){}}}else{var intBindingDataLine=null;if(HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownButton)!=null){intBindingDataLine=HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownButton)-1}HXWebJS.Controls.PopupTreeView._InternalFunctions._set_selected_desc_to_textbox(objActiveElementInfo,objInputTextBox,strSelectedDesc);HXWebJS.Controls.PopupTreeView._InternalFunctions._set_binding_datafields_values(objActiveElementInfo,intBindingDataLine,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5)}HXWebJS.Controls.PopupTreeView._InternalFunctions._clear_current_active_control_and_hide();HXWebJS.Controls.PopupTreeView._InternalFunctions._run_datachoosed_callback_function(objActiveElementInfo,objInputTextBox,objDropdownButton,objXmlChoosedData)};HXWebJS.Controls.PopupTreeView._InternalFunctions._create_popup_controlarea=function(){if(window.document.getElementById("hxwebpopuptreeviewcontrol_popup_controlarea")==null){var strLabelOfButtonOk="OK";var strLabelOfButtonCancel="Cancel";var strLabelOfButtonClear="Clear";var arrResStringOKCancelOf=HXWebJS.Controls._InternalFunctions._get_res_string_array__ok_cancel();strLabelOfButtonOk=arrResStringOKCancelOf[0];strLabelOfButtonCancel=arrResStringOKCancelOf[1];if(arrResStringOKCancelOf.length>3){strLabelOfButtonClear=arrResStringOKCancelOf[3]}var sb_temp=new HXWebJS.Core.StringBuilder();sb_temp.append('<div id=hxwebpopuptreeviewcontrol_popup_controlarea style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:300px; HEIGHT:34px; POSITION: absolute;" onclick="HXWebJS.EventManager.GetCurrentEventData(event).stopPropagation();" >');sb_temp.append('<input id="btn_hxwebpopuptreeviewcontrol__clear" type=button class=hxwebdatacontrol_button style="POSITION:absolute;width:50px;height:20px;left:6px;top:7px;" value="'+strLabelOfButtonClear+'" onclick="HXWebJS.Controls.PopupTreeView._InternalFunctions._ClearButton_onclicked(event)" />');sb_temp.append('<input id="btn_hxwebpopuptreeviewcontrol__ok" type=button class=hxwebdatacontrol_button style="POSITION:absolute;width:50px;height:20px;left:6px;top:7px;" value="'+strLabelOfButtonOk+'" onclick="HXWebJS.Controls.PopupTreeView._InternalFunctions._OKButton_onclicked(event)" />');sb_temp.append('<input id="btn_hxwebpopuptreeviewcontrol__cancel" type=button class=hxwebdatacontrol_button style="POSITION: absolute;width:50px;height:20px;left:60px;top:7px;" value="'+strLabelOfButtonCancel+'" onclick="HXWebJS.Controls.PopupTreeView._InternalFunctions._CancelButton_onclicked(event)" />');sb_temp.append('<div id="hxwebpopuptreeviewcontrol__controlarea_search_part" style="position:absolute;right:3px;width:150px;height:34px;border:none;text-align:right;display:none;">');sb_temp.append('<input class=hxinputbox id=txtbx_hxwebpopuptreeviewcontrol__controlarea_search_keyword style="width:90px;height:26px;margin-left:4px;margin-top:4px;" onkeyup="HXWebPopupTreeViewControl._InternalFunctions._searchkeyword_keypressed(event)" />');sb_temp.append('<img src="../images/hxpub_clear.gif" id=img_hxwebpopuptreeviewcontrol__controlarea_search_btn style="margin-top:6px;margin-left:4px;vertical-align:middle;cursor:pointer;" class="hxbtn_search" onclick="HXWebPopupTreeViewControl._InternalFunctions._begin_keyword_search(event)" />');sb_temp.append("</div>");sb_temp.append("</div>");var strDivHTMLContent=sb_temp.toString();var objDiv=HXWebJS.DOM.CreateElement(strDivHTMLContent);document.body.appendChild(objDiv);HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea=objDiv}};HXWebPopupTreeViewControl._InternalFunctions._searchkeyword_keypressed=function(eventObject){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);if(objHXEventData.keyCode==13){HXWebPopupTreeViewControl._InternalFunctions._begin_keyword_search()}};HXWebPopupTreeViewControl._InternalFunctions._begin_keyword_search=function(){var objSearchKeyWordTextBox=HXWebJS.DOM.FindFirstElementById("txtbx_hxwebpopuptreeviewcontrol__controlarea_search_keyword",HXWebJS.Controls.PopupTreeView._InternalFunctions._global_popup_controlarea);var strSearchKeyWord=HXWebJS.Utility.Trim(objSearchKeyWordTextBox.value);var str_popuptreeviewcontrol_id=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_id;var objWebPopupControl_TextBox=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_textbox;var objWebPopupControl_DropdownButton=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_dropdownbtn;var objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];var options;if(strSearchKeyWord!=""){if(objActiveElementInfo.choose_type==1){var strMergedChosenNodeCodeList=HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_merged_chosn_node_code_list;if(strMergedChosenNodeCodeList==null){strMergedChosenNodeCodeList=HXWebPopupTreeViewControl._InternalFunctions._get_binding_key_field_value(objActiveElementInfo,objWebPopupControl_TextBox,objWebPopupControl_DropdownButton)}strMergedChosenNodeCodeList=HXWebPopupTreeViewControl._InternalFunctions._merge_current_checked_nodes_into_chosen_node_list(str_popuptreeviewcontrol_id,objActiveElementInfo,strMergedChosenNodeCodeList);HXWebJS.Controls.PopupTreeView._InternalFunctions._current_active_webpopupcontrol_merged_chosn_node_code_list=strMergedChosenNodeCodeList}options={chosen_node_unique_code_list:strMergedChosenNodeCodeList,search_key_chars:strSearchKeyWord}}else{var strChosenNodeCodeList=HXWebPopupTreeViewControl._InternalFunctions._get_binding_key_field_value(objActiveElementInfo,objWebPopupControl_TextBox,objWebPopupControl_DropdownButton);options={init_auto_show_level:objActiveElementInfo.auto_init_node_levels,chosen_node_unique_code_list:strChosenNodeCodeList,acquire_all_treeview_data:objActiveElementInfo.acquire_all_nodes_data_one_time}}HXWebTreeViewControl.init_treeview_nodes(str_popuptreeviewcontrol_id,options)};HXWebJS.Controls.PopupTreeView._InternalFunctions._onkeydownprocess=function(objHXEventObject){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objInputTextBox=objHXEventObject.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}var str_popuptreeviewcontrol_id=strInputBoxId;objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(!objActiveElementInfo){return}if(objActiveElementInfo.oninit_callback_func!=null){if(objActiveElementInfo.oninit_callback_func(str_popuptreeviewcontrol_id,objInputTextBox,null,objActiveElementInfo)!=true){return}}objHXEventObject.preventDefault()};HXWebJS.Controls.PopupTreeView._InternalFunctions._onfocusinprocess=function(objHXEventObject){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return}var objInputTextBox=objHXEventObject.target;var strInputBoxId=objInputTextBox.id;if(!strInputBoxId){return}if(objInputTextBox.disabled){return}if(objInputTextBox.readOnly==true){if(HXWebJS.DOM.ElementAttributeGetValue(objInputTextBox,"hx_allow_popup_pick")!="1"){return}}var str_popuptreeviewcontrol_id=strInputBoxId;objActiveElementInfo=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];if(!objActiveElementInfo){return}var objChooseButton=HXWebJS.Controls.PopupTreeView._InternalFunctions._get_related_choosebutton_object(strInputBoxId,objInputTextBox);HXWebJS.Controls.PopupTreeView._InternalFunctions._set_current_active_control("hxwebpopuptreeview",str_popuptreeviewcontrol_id,objInputTextBox,objChooseButton,objActiveElementInfo)};HXWebJS.Controls.PopupTreeView._InternalFunctions._get_related_choosebutton_object=function(str_webdatacontrol_id,objInputTextBox){if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info){return null}if(!HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_webdatacontrol_id]){return null}var str_choosebutton_id=HXWebJS.Controls.PopupTreeView._InternalFunctions._registed_elements_info[str_webdatacontrol_id].choose_button_id;return HXWebJS.DOM.FindFirstElementById(str_choosebutton_id,objInputTextBox.parentNode.parentNode)};HXWebPopupTreeViewControl._InternalFunctions._merge_current_checked_nodes_into_chosen_node_list=function(str_popuptreeviewcontrol_id,objActiveElementInfo,strChosenNodeCodeList){var arrCurrentChosenNodeCodeInTreeView=[];var strXmlDataForChoosedNodes=HXWebTreeViewControl.get_choosed_nodes(str_popuptreeviewcontrol_id,objActiveElementInfo.choose_return_value_option);if(strXmlDataForChoosedNodes!=null&&strXmlDataForChoosedNodes!=""){var objXmlChoosedData=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlDataForChoosedNodes);var objXmlNodeList=objXmlChoosedData.SelectNodes("//RS_ROW");for(var i=0;i<objXmlNodeList.length;i++){arrCurrentChosenNodeCodeInTreeView.push(objXmlNodeList[i].SelectSingleNode("@UUID").GetText())}}var arrOrginalChosenNodeCodeList=[];if(strChosenNodeCodeList!=null&&strChosenNodeCodeList!=""){arrOrginalChosenNodeCodeList=strChosenNodeCodeList.split(/[,|;]/)}var arrMergedChosenNodeCodeList=[];var strNodeUniqueCode,objNodeTableElement;for(var i=0;i<arrOrginalChosenNodeCodeList.length;i++){strNodeUniqueCode=arrOrginalChosenNodeCodeList[i];var objActiveElementInfo_TreeView=HXWebJS.Controls.TreeView._InternalFunctions._registed_elements_info[str_popuptreeviewcontrol_id];objNodeTableElement=HXWebJS.Controls.TreeView._InternalFunctions._get_treenode_table_object(objActiveElementInfo_TreeView,strNodeUniqueCode);if(objNodeTableElement==null){arrMergedChosenNodeCodeList.push(strNodeUniqueCode)}}for(var i=0;i<arrCurrentChosenNodeCodeInTreeView.length;i++){strNodeUniqueCode=arrCurrentChosenNodeCodeInTreeView[i];if(!HXWebJS.Utility.StringInArray(arrMergedChosenNodeCodeList,strNodeUniqueCode)){arrMergedChosenNodeCodeList.push(strNodeUniqueCode)}}return arrMergedChosenNodeCodeList.join(",")};HXWebJS.Controls.PopupTreeView._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls.PopupTreeView._InternalFunctions._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"keydown",HXWebJS.Controls.PopupTreeView._InternalFunctions._onkeydownprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupTreeView._InternalFunctions._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupTreeView._InternalFunctions._onclickprocess_outsidedropdownarea);if(HXWebJS.Core.Browser.IsMobile){HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls.PopupTreeView._InternalFunctions._onclickprocess_outsidedropdownarea)}};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupTreeView._InternalFunctions._onloadprocess);HXWebJS.Controls.FileBox={};HXWebJS.Controls.FileBox._InternalFunctions={};HXWebFileBoxControl=HXWebJS.Controls.FileBox;HXWebJS.Controls.FileBox.register=function(str_web_control_id,objFileBoxSetting){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info={}}if(objFileBoxSetting==null){objFileBoxSetting={}}var c=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(!c){var c=new Object();c={web_control_id:str_web_control_id,binding_object_code:objFileBoxSetting.binding_object_code==null?"":objFileBoxSetting.binding_object_code,binding_object_view_code:objFileBoxSetting.binding_object_view_code==null?"":objFileBoxSetting.binding_object_view_code,binding_datasrc_id:objFileBoxSetting.binding_datasrc_id==null?"":objFileBoxSetting.binding_datasrc_id,binding_datafld_for_filename:objFileBoxSetting.binding_datafld_for_filename==null?"":objFileBoxSetting.binding_datafld_for_filename,binding_datafld_for_tempname:objFileBoxSetting.binding_datafld_for_tempname==null?"":objFileBoxSetting.binding_datafld_for_tempname,binding_datafld_for_filedesc:objFileBoxSetting.binding_datafld_for_filedesc==null?"":objFileBoxSetting.binding_datafld_for_filedesc,is_show_file_remove_button:objFileBoxSetting.is_show_file_remove_button==null?0:objFileBoxSetting.is_show_file_remove_button,max_file_size_kb:objFileBoxSetting.max_file_size_kb==null||objFileBoxSetting.max_file_size_kb<=0?10000:objFileBoxSetting.max_file_size_kb,allow_file_type_list:objFileBoxSetting.allow_file_type_list==null?"":objFileBoxSetting.allow_file_type_list,use_new_file_upload_mode:objFileBoxSetting.use_new_file_upload_mode,allow_multi_files_upload:objFileBoxSetting.allow_multi_files_upload,input_file_accept_cnt:objFileBoxSetting.input_file_accept_cnt,callback_func_filebox_extra_format_process:objFileBoxSetting.callback_func_filebox_extra_format_process,callback_func_after_file_uploaded:objFileBoxSetting.callback_func_after_file_uploaded,callback_func_after_file_upload_failed:objFileBoxSetting.callback_func_after_file_upload_failed,callback_func_after_file_downloaded:objFileBoxSetting.callback_func_after_file_downloaded};HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id]=c;if(c.is_show_file_remove_button!=null&&c.is_show_file_remove_button!=0){HXWebFileBoxControl.show_file_remove_button(str_web_control_id,null,true)}}};HXWebFileBoxControl.set_options=function(str_web_control_id,options){if(options==null){return}if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(objActiveElementInfo==null){return}if(options.binding_object_code!=null){objActiveElementInfo.binding_object_code=options.binding_object_code}if(options.binding_object_view_code!=null){objActiveElementInfo.binding_object_view_code=options.binding_object_view_code}if(options.binding_datasrc_id!=null){objActiveElementInfo.binding_datasrc_id=options.binding_datasrc_id}if(options.binding_datafld_for_filename!=null){objActiveElementInfo.binding_datafld_for_filename=options.binding_datafld_for_filename}if(options.binding_datafld_for_tempname!=null){objActiveElementInfo.binding_datafld_for_tempname=options.binding_datafld_for_tempname}if(options.binding_datafld_for_filedesc!=null){objActiveElementInfo.binding_datafld_for_filedesc=options.binding_datafld_for_filedesc}if(options.is_show_file_remove_button!=null){objActiveElementInfo.is_show_file_remove_button=options.is_show_file_remove_button}if(options.max_file_size_kb!=null){objActiveElementInfo.max_file_size_kb=options.max_file_size_kb}if(options.allow_file_type_list!=null){objActiveElementInfo.allow_file_type_list=options.allow_file_type_list}if(options.use_new_file_upload_mode!=null){objActiveElementInfo.use_new_file_upload_mode=options.use_new_file_upload_mode}if(options.allow_multi_files_upload!=null){objActiveElementInfo.allow_multi_files_upload=options.allow_multi_files_upload}if(options.input_file_accept_cnt!=null){objActiveElementInfo.input_file_accept_cnt=options.input_file_accept_cnt}if(options.callback_func_filebox_extra_format_process!=null){objActiveElementInfo.callback_func_filebox_extra_format_process=options.callback_func_filebox_extra_format_process}if(options.callback_func_after_file_uploaded!=null){objActiveElementInfo.callback_func_after_file_uploaded=options.callback_func_after_file_uploaded}if(options.callback_func_after_file_upload_failed!=null){objActiveElementInfo.callback_func_after_file_upload_failed=options.callback_func_after_file_upload_failed}if(options.callback_func_after_file_downloaded!=null){objActiveElementInfo.callback_func_after_file_downloaded=options.callback_func_after_file_downloaded}if(objActiveElementInfo.is_show_file_remove_button!=null&&objActiveElementInfo.is_show_file_remove_button!=0){HXWebFileBoxControl.show_file_remove_button(str_web_control_id,null,true)}};HXWebJS.Controls.FileBox._InternalFunctions._onclick_handler_on_filebox=function(objEvent){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(objEvent);var objEventElement=objHXEventData.target;var strSrcElementId=objEventElement.id;if(strSrcElementId!="hximgbtn_filebox_btn__upload"&&strSrcElementId!="hximgbtn_filebox_btn__remove"&&strSrcElementId!="hxlbl_filebox_btn__showfile"){return}var objContainerDiv=objEventElement.parentNode;var str_web_control_id=objContainerDiv.id;if(strSrcElementId=="hximgbtn_filebox_btn__upload"){HXWebJS.Controls.FileBox.upload_file(str_web_control_id,objContainerDiv)}if(strSrcElementId=="hximgbtn_filebox_btn__remove"){HXWebJS.Controls.FileBox._InternalFunctions._remove_file(str_web_control_id,objContainerDiv)}if(strSrcElementId=="hxlbl_filebox_btn__showfile"){var blnIsDisabled=objEventElement.disabled;if(blnIsDisabled!=null&&blnIsDisabled==true){return}HXWebJS.Controls.FileBox.download_file(str_web_control_id,objContainerDiv)}};HXWebJS.Controls.FileBox._InternalFunctions._get_registed_filebox_list=function(){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return""}var sb_Xml=new HXWebStringBuilder();sb_Xml.append("<RS_DATA>");var objTemp;var strObjectCode,strFieldCode;for(key in HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){objTemp=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[key];strObjectCode=objTemp.binding_object_code;strFieldCode=objTemp.binding_datafld_for_filename;sb_Xml.append('<RS_ROW OBJECT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strObjectCode)+'" FIELD_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strFieldCode)+'" />')}sb_Xml.append("</RS_DATA>");return sb_Xml.toString()};HXWebJS.Controls.FileBox.show_file_remove_button=function(str_web_control_id,objFileBoxContainerDiv,blnShow){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(objActiveElementInfo==null){return}if(blnShow==null){blnShow=true}var objHXXmlNodeOfRecordRowForFileBox;var objFileBoxContainers=(objFileBoxContainerDiv==null?HXWebJS.DOM.FindElementsById(str_web_control_id):[objFileBoxContainerDiv]);for(var i=0;i<objFileBoxContainers.length;i++){var objImageButtonForRemoveFile=HXWebJS.DOM.FindFirstElementById("hximgbtn_filebox_btn__remove",objFileBoxContainers[i]);if(objImageButtonForRemoveFile!=null){var strDisplayStyleValue=(blnShow?"":"none");objHXXmlNodeOfRecordRowForFileBox=HXWebJS.Controls.FileBox._InternalFunctions._get_related_binding_xmlnode(objActiveElementInfo,objFileBoxContainers[i]);if(objHXXmlNodeOfRecordRowForFileBox!=null&&objActiveElementInfo.binding_datafld_for_filename!=""){var objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_filename.toUpperCase());if(objTempHXXmlNode!=null&&objTempHXXmlNode.GetText()==""){strDisplayStyleValue="none"}}objImageButtonForRemoveFile.style.display=strDisplayStyleValue;if(objImageButtonForRemoveFile.style.visibility=="hidden"&&strDisplayStyleValue==""){objImageButtonForRemoveFile.style.visibility="visible"}else{if(objImageButtonForRemoveFile.style.visibility=="visible"&&strDisplayStyleValue=="none"){objImageButtonForRemoveFile.style.visibility="hidden"}}}}};HXWebJS.Controls.FileBox.disable_file_download_hyperlink=function(str_web_control_id,objFileBoxContainerDiv,blnDisable){if(blnDisable==null){blnDisable=true}var objFileBoxContainers=(objFileBoxContainerDiv==null?HXWebJS.DOM.FindElementsById(str_web_control_id):[objFileBoxContainerDiv]);for(var i=0;i<objFileBoxContainers.length;i++){var objHyperlinkDiv=HXWebJS.DOM.GetElementById("hxlbl_filebox_btn__showfile",objFileBoxContainers[i]);if(objHyperlinkDiv!=null){objHyperlinkDiv.disabled=blnDisable}}};HXWebJS.Controls.FileBox.hide_file_upload_button=function(str_web_control_id,objFileBoxContainerDiv,blnHide){if(blnHide==null){blnHide=true}var strDisplayStyleValue=(blnHide?"none":"");var objFileBoxContainers=(objFileBoxContainerDiv==null?HXWebJS.DOM.FindElementsById(str_web_control_id):[objFileBoxContainerDiv]);for(var i=0;i<objFileBoxContainers.length;i++){var objButton=HXWebJS.DOM.GetElementById("hximgbtn_filebox_btn__upload",objFileBoxContainers[i]);if(objButton!=null){objButton.style.display=strDisplayStyleValue}}};HXWebJS.Controls.FileBox.upload_file_to_new_row=function(str_web_control_id,strViaClipBoardContent){HXWebJS.Controls.FileBox.upload_file(str_web_control_id,null,strViaClipBoardContent)};HXWebJS.Controls.FileBox.upload_file=function(str_web_control_id,objFileBoxContainerDiv,strViaClipBoardContent){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(objActiveElementInfo==null){return}var fnCallback=function(objResult){if(objResult==null){return}HXWebJS.Controls.FileBox._InternalFunctions._callback_process_after_upload_file(str_web_control_id,objFileBoxContainerDiv,objActiveElementInfo,objResult.upload_file_name,objResult.upload_file_temp_name,strUsedScene);return};if(strViaClipBoardContent=="via_clipboard_image"){HXWebJS.PageHelper.Common.upload_clipboard_image_or_files(fnCallback,objActiveElementInfo.max_file_size_kb,true)}else{if(strViaClipBoardContent=="via_clipboard_files"){HXWebJS.PageHelper.Common.upload_clipboard_image_or_files(fnCallback,objActiveElementInfo.max_file_size_kb,false,objActiveElementInfo.allow_file_type_list)}else{var blnIsHtml5Browser=(!(HXWebJS.Core.Browser.IsIE&&HXWebJS.Core.Browser.Version<=10));if(objActiveElementInfo.use_new_file_upload_mode&&blnIsHtml5Browser){var intBindingLineNo=null,strUsedScene="edit";if(objFileBoxContainerDiv!=null){intBindingLineNo=HXWebJS.DOM.ElementGetBindingRecordNumber(objFileBoxContainerDiv);if(intBindingLineNo!=null){strUsedScene="line_edit"}}else{strUsedScene="line_add"}var options={input_file_accept_cnt:objActiveElementInfo.input_file_accept_cnt,allow_multi_files_upload:objActiveElementInfo.allow_multi_files_upload,max_file_size_kb:objActiveElementInfo.max_file_size_kb,allow_file_type_list:objActiveElementInfo.allow_file_type_list,binding_line_no:intBindingLineNo,used_scene:strUsedScene,callback_func_name:"HXWebJS.Controls.FileBox._InternalFunctions._callback_process_after_upload_file_html5mode"};HXWebFileBoxControl._Internal._UploadFileInHtml5Mode(str_web_control_id,options)}else{HXWebJS.PageHelper.Common.upload_file_directly(objActiveElementInfo.max_file_size_kb,objActiveElementInfo.allow_file_type_list,fnCallback)}}}};HXWebJS.Controls.FileBox.download_file=function(str_web_control_id,objFileBoxContainerDiv){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(objActiveElementInfo==null){return}if(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datasrc_id==""){return}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.binding_datasrc_id);if(objHXXmlDoc==null){return}if(objFileBoxContainerDiv==null){return}var strTempFileNameOnServer=HXWebJS.DOM.ElementAttributeGetValue(objFileBoxContainerDiv,"hx_temp_file_name_on_server");if(strTempFileNameOnServer!=null&&strTempFileNameOnServer!=""){HXWebJS.Navigation.OpenFileDownloadOnlyPage("tempfiles/"+strTempFileNameOnServer);return}var objHXXmlNodeOfRecordRowForFileBox=HXWebJS.Controls.FileBox._InternalFunctions._get_related_binding_xmlnode(objActiveElementInfo,objFileBoxContainerDiv);if(objHXXmlNodeOfRecordRowForFileBox==null){return}var objTempXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@UUID");if(objTempXmlNode==null){objTempXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@HX_UUID")}var strRecordUUID=(objTempXmlNode!=null?objTempXmlNode.GetText():"");if(strRecordUUID==""){if(objActiveElementInfo.binding_datafld_for_tempname!=""){var objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_tempname.toUpperCase());if(objTempHXXmlNode!=null){var strTempFileNameOnServer=objTempHXXmlNode.GetText();if(strTempFileNameOnServer!=null&&strTempFileNameOnServer!=""){HXWebJS.Navigation.OpenFileDownloadOnlyPage("tempfiles/"+strTempFileNameOnServer);return}}}return}if(objActiveElementInfo.binding_object_code==""){return}var strObjectCode=objActiveElementInfo.binding_object_code;if(objActiveElementInfo.binding_datafld_for_filename==""){return}var strFieldCodeForFileName=objActiveElementInfo.binding_datafld_for_filename;var strTemp=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+strFieldCodeForFileName.toUpperCase()).GetText();if(strTemp==""){return}HXWebJS.Controls.FileBox.DownloadAndShowFileDirectly(strObjectCode,strFieldCodeForFileName,strRecordUUID,objActiveElementInfo.binding_object_view_code)};HXWebJS.Controls.FileBox.DownloadAndShowFileDirectly=function(strObjectCode,strFieldCodeForFileName,strRecordUUID,strObjectViewCode){var strPageXmlServiceClassName="",strPageName="";if(typeof(mstrPageXmlServiceClassName)=="string"){strPageXmlServiceClassName=mstrPageXmlServiceClassName}if(typeof(mstrCurrentWebPageName)=="string"){strPageName=mstrCurrentWebPageName}if(strObjectViewCode==null){strObjectViewCode=""}var arrParamKeyValues=["object_code",strObjectCode,"field_code",strFieldCodeForFileName,"uuid",strRecordUUID,"page_xml_svc_class",strPageXmlServiceClassName,"page_name",strPageName,"object_view_code",strObjectViewCode];var strPageParamUUID=HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray(arrParamKeyValues);if(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6"){if(strPageParamUUID==null||strPageParamUUID==""){return}var strUrl=gstrWebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_object_file_download&hx_page_param_uuid="+strPageParamUUID;HXWebJS.Navigation.OpenWebPopupPage(strUrl,null,null,"no");return}var strUrl=gstrWebRootPath+"hxmd/hxmd_object_file_download_directly.aspx?hx_page_param_uuid="+strPageParamUUID;HXWebJS.Navigation.OpenWebPopupPage(strUrl,null,null,"no")};HXWebJS.Controls.FileBox._InternalFunctions._remove_file=function(str_web_control_id,objFileBoxContainerDiv){if(!HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[str_web_control_id];if(objActiveElementInfo==null){return}if(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datasrc_id==""){return}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.binding_datasrc_id);if(objHXXmlDoc==null){return}if(objFileBoxContainerDiv==null){return}var objHXXmlNodeOfRecordRowForFileBox=HXWebJS.Controls.FileBox._InternalFunctions._get_related_binding_xmlnode(objActiveElementInfo,objFileBoxContainerDiv);if(objHXXmlNodeOfRecordRowForFileBox==null){return}var objTempHXXmlNode;if(objActiveElementInfo.binding_datafld_for_filename!=""){objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_filename.toUpperCase());if(objTempHXXmlNode!=null){objTempHXXmlNode.SetText("")}}if(objActiveElementInfo.binding_datafld_for_tempname!=""){objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_tempname.toUpperCase());if(objTempHXXmlNode!=null){objTempHXXmlNode.SetText("")}}var objImageButtonForRemoveFile=HXWebJS.DOM.FindFirstElementById("hximgbtn_filebox_btn__remove",objFileBoxContainerDiv);if(objImageButtonForRemoveFile!=null){objImageButtonForRemoveFile.style.display="none";objImageButtonForRemoveFile.style.visibility="hidden"}HXWebJS.DOM.ElementAttributeSetValue(objFileBoxContainerDiv,"hx_temp_file_name_on_server","")};HXWebJS.Controls.FileBox._InternalFunctions._callback_process_after_upload_file=function(str_web_control_id,objFileBoxContainerDiv,objActiveElementInfo,strUploadFileOrgName,strUploadFileTempName,strUsedScene){var objHXXmlNodeOfRecordRowForFileBox=null;if(objActiveElementInfo.binding_datasrc_id!=null&&objActiveElementInfo.binding_datasrc_id!=""){var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.binding_datasrc_id);if(objHXXmlDoc!=null){if(objFileBoxContainerDiv!=null){objHXXmlNodeOfRecordRowForFileBox=HXWebJS.Controls.FileBox._InternalFunctions._get_related_binding_xmlnode(objActiveElementInfo,objFileBoxContainerDiv)}else{var strRelatedBlankRowXmlDataIslandName="";if(objActiveElementInfo.binding_datasrc_id.length>19&&objActiveElementInfo.binding_datasrc_id.substr(0,19)=="hxxmldata_sublist__"){strRelatedBlankRowXmlDataIslandName=objActiveElementInfo.binding_datasrc_id.substr(0,17)+"_blankrow"+objActiveElementInfo.binding_datasrc_id.substr(17)}else{if(objActiveElementInfo.binding_datasrc_id.length>24&&objActiveElementInfo.binding_datasrc_id.substr(0,24)=="hxxml_datalist_content__"){strRelatedBlankRowXmlDataIslandName=objActiveElementInfo.binding_datasrc_id.substr(0,22)+"_blankrow"+objActiveElementInfo.binding_datasrc_id.substr(22)}}if(strRelatedBlankRowXmlDataIslandName!=""){var objHXXmlDocForBlankRow=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strRelatedBlankRowXmlDataIslandName);if(objHXXmlDocForBlankRow!=null){if(objHXXmlDoc.GetXml().indexOf("<RS_ROW")==-1){objHXXmlDoc.ReloadXML(objHXXmlDocForBlankRow.GetXml());objHXXmlNodeOfRecordRowForFileBox=objHXXmlDoc.SelectSingleNode("//RS_ROW")}else{objHXXmlNodeOfRecordRowForFileBox=objHXXmlDocForBlankRow.SelectSingleNode("//RS_ROW").CloneNode();objHXXmlDoc.GetRootXmlNode().AppendChild(objHXXmlNodeOfRecordRowForFileBox)}}}}}}var objTempHXXmlNode;if(objHXXmlNodeOfRecordRowForFileBox!=null){if(objActiveElementInfo.binding_datafld_for_filename!=""){objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_filename.toUpperCase());if(objTempHXXmlNode!=null){objTempHXXmlNode.SetText(strUploadFileOrgName);HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged(true)}}if(objActiveElementInfo.binding_datafld_for_tempname!=""){objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_tempname.toUpperCase());if(objTempHXXmlNode!=null){objTempHXXmlNode.SetText(strUploadFileTempName)}else{objHXXmlNodeOfRecordRowForFileBox.SetAttributeValue(objActiveElementInfo.binding_datafld_for_tempname.toUpperCase(),strUploadFileTempName,true)}}if(objActiveElementInfo.binding_datafld_for_filedesc!=""){objTempHXXmlNode=objHXXmlNodeOfRecordRowForFileBox.SelectSingleNode("@"+objActiveElementInfo.binding_datafld_for_filedesc.toUpperCase());if(objTempHXXmlNode!=null&&objTempHXXmlNode.GetText()==""){objTempHXXmlNode.SetText(strUploadFileOrgName)}}}if(objFileBoxContainerDiv!=null){HXWebJS.DOM.ElementAttributeSetValue(objFileBoxContainerDiv,"hx_temp_file_name_on_server",strUploadFileTempName);if(objActiveElementInfo.is_show_file_remove_button!=null&&objActiveElementInfo.is_show_file_remove_button!=0){var objImageButtonForRemoveFile=HXWebJS.DOM.FindFirstElementById("hximgbtn_filebox_btn__remove",objFileBoxContainerDiv);if(objImageButtonForRemoveFile!=null){objImageButtonForRemoveFile.style.display="";objImageButtonForRemoveFile.style.visibility="visible"}}if(objActiveElementInfo.callback_func_filebox_extra_format_process!=null){objActiveElementInfo.callback_func_filebox_extra_format_process(str_web_control_id,objFileBoxContainerDiv,strUploadFileOrgName,strUploadFileTempName,objHXXmlNodeOfRecordRowForFileBox)}}if(objActiveElementInfo.callback_func_after_file_uploaded!=null){objActiveElementInfo.callback_func_after_file_uploaded(str_web_control_id,objFileBoxContainerDiv,strUploadFileOrgName,strUploadFileTempName,objHXXmlNodeOfRecordRowForFileBox)}};HXWebJS.Controls.FileBox._InternalFunctions._callback_process_after_upload_file_html5mode=function(strWebControlHtmlId,intBindingLineNo,strUsedScene,blnIsUploadOK,arrUploadedFileInfo,strWarningMessage){var objActiveElementInfo=HXWebJS.Controls.FileBox._InternalFunctions._registed_elements_info[strWebControlHtmlId];if(objActiveElementInfo==null){return}var objFileBoxContainerDiv=null;if(strUsedScene=="line_edit"&&intBindingLineNo!=null&&intBindingLineNo>0){var arrElements=HXWebJS.DOM.FindElementsById(strWebControlHtmlId);if(arrElements!=null&&arrElements.length>=intBindingLineNo){objFileBoxContainerDiv=arrElements[intBindingLineNo-1]}}else{if(strUsedScene=="edit"){objFileBoxContainerDiv=document.getElementById(strWebControlHtmlId)}}if(!blnIsUploadOK){if(objActiveElementInfo.callback_func_after_file_upload_failed==null){console.log("HXWebFileBoxControl("+strWebControlHtmlId+") upload file failed. message:"+strWarningMessage);return}objActiveElementInfo.callback_func_after_file_upload_failed(strWebControlHtmlId,objFileBoxContainerDiv,strWarningMessage,intBindingLineNo,strUsedScene);return}for(var i=0;i<arrUploadedFileInfo.length;i++){HXWebJS.Controls.FileBox._InternalFunctions._callback_process_after_upload_file(strWebControlHtmlId,objFileBoxContainerDiv,objActiveElementInfo,arrUploadedFileInfo[i].file_name,arrUploadedFileInfo[i].file_temp_name,intBindingLineNo,strUsedScene)}};HXWebJS.Controls.FileBox._InternalFunctions._get_related_binding_xmlnode=function(objActiveElementInfo,objFileBoxContainerDiv){if(objFileBoxContainerDiv==null){return null}if(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datasrc_id==""){return null}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.binding_datasrc_id);if(objHXXmlDoc==null){return null}var intBindingDataLine=null;var objTempRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objFileBoxContainerDiv);if(objTempRecordNumber!=null&&objTempRecordNumber!=""){intBindingDataLine=parseInt(objTempRecordNumber)-1}if(intBindingDataLine==null){objHXXmlNodeOfRecordRowForFileBox=objHXXmlDoc.SelectSingleNode("//RS_ROW")}else{objHXXmlNodeOfRecordRowForFileBox=objHXXmlDoc.SelectNodes("//RS_ROW")[intBindingDataLine]}return objHXXmlNodeOfRecordRowForFileBox};HXWebJS.Controls.FileBox.demo_callback_func_after_file_uploaded=function(str_web_control_id,objFileBoxContainerDiv,strUploadedFileName,strTempUploadedFileName,objHXXmlNodeOfRecordRowForFileBox){};HXWebFileBoxControl.UploadFileDirectlyV6=function(strWebControlHtmlId,objFileBoxContainerDiv,options){if(options==null){options={}}var blnIsHtml5Browser=(!(HXWebJS.Core.Browser.IsIE&&HXWebJS.Core.Browser.Version<=10));if(blnIsHtml5Browser){HXWebFileBoxControl._Internal._UploadFileInHtml5Mode(strWebControlHtmlId,options)}else{var fnCallback=function(objResult){if(objResult==null){if(typeof(HXWebDynamicPageJSExt)=="undefined"||HXWebDynamicPageJSExt==null||HXWebDynamicPageJSExt.OnFileUploadFailed==null){return}HXWebDynamicPageJSExt.OnFileUploadFailed(strWebControlHtmlId,objFileBoxContainerDiv,"");return}if(HXWebDynamicPageJSExt!=null&&HXWebDynamicPageJSExt.OnAfterFileUploaded!=null){HXWebDynamicPageJSExt.OnAfterFileUploaded(strWebControlHtmlId,objFileBoxContainerDiv,objResult.upload_file_name,objResult.upload_file_temp_name)}return};HXWebJS.PageHelper.Common.upload_file_directly(options.max_file_size_kb,options.allow_file_type_list,fnCallback)}};HXWebFileBoxControl._Internal={};HXWebFileBoxControl._Internal._UploadFileInHtml5Mode=function(strWebControlHtmlId,options){if(options==null){options={}}var frmHXUploadFile=document.getElementById("hxwebfileboxcontrol_upload_file_form");if(frmHXUploadFile==null){var iframeForUploadFileResponse=HXWebJS.DOM.CreateElement('<iframe id="hxwebfileboxcontrol_upload_file_response_iframe" name="hxwebfileboxcontrol_upload_file_response_iframe" style="display:none;" src="about:blank"></iframe>');document.body.appendChild(iframeForUploadFileResponse);var sb_html=new HXWebStringBuilder();sb_html.append('<form method="post" name="hxwebfileboxcontrol_upload_file_form" id="hxwebfileboxcontrol_upload_file_form"');sb_html.append(' enctype="multipart/form-data" target="hxwebfileboxcontrol_upload_file_response_iframe"');var blnIsV13DynamicPage=false;if(typeof(mstrHXDynamicPageVersion)!="undefined"&&mstrHXDynamicPageVersion=="1.3"){blnIsV13DynamicPage=true}if(blnIsV13DynamicPage){sb_html.append(' action="'+gstrWebRootPath+'hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_filebox_upload_file">')}else{sb_html.append(' action="'+gstrWebRootPath+'hxsm/hx_filebox_upload_files_for_html5_mode.aspx">')}sb_html.append('<input type="file" id="hxwebfileboxcontrol_upload_file_inputbox" name="hxwebfileboxcontrol_upload_file_inputbox" style="display:none;" accept="*/*"');sb_html.append('  onchange="HXWebFileBoxControl._Internal._OnFileInputBoxChanged(event)" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_controlhtmlid" name="hxwebfileboxcontrol_upload_file_controlhtmlid" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_fileboxsettingcode" name="hxwebfileboxcontrol_upload_file_fileboxsettingcode" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_allowfiletypelist" name="hxwebfileboxcontrol_upload_file_allowfiletypelist" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_maxfilesizekb" name="hxwebfileboxcontrol_upload_file_maxfilesizekb" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_bindinglineno" name="hxwebfileboxcontrol_upload_file_bindinglineno" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_usedscene" name="hxwebfileboxcontrol_upload_file_usedscene" value="" />');sb_html.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file__callbackfuncname" name="hxwebfileboxcontrol_upload_file__callbackfuncname" value="" />');sb_html.append("</form>");frmHXUploadFile=HXWebJS.DOM.CreateElement(sb_html.toString());document.body.appendChild(frmHXUploadFile)}var objFileInputBox=document.getElementById("hxwebfileboxcontrol_upload_file_inputbox");if(options.allow_multi_files_upload){objFileInputBox.setAttribute("multiple","multiple")}else{objFileInputBox.removeAttribute("multiple")}if(options.input_file_accept_cnt!=null){objFileInputBox.setAttribute("accept",options.input_file_accept_cnt)}else{objFileInputBox.removeAttribute("accept")}document.getElementById("hxwebfileboxcontrol_upload_file_controlhtmlid").value=strWebControlHtmlId;document.getElementById("hxwebfileboxcontrol_upload_file_allowfiletypelist").value=(options.allow_file_type_list==null?"":options.allow_file_type_list);document.getElementById("hxwebfileboxcontrol_upload_file_maxfilesizekb").value=(options.max_file_size_kb==null?"":options.max_file_size_kb);document.getElementById("hxwebfileboxcontrol_upload_file_fileboxsettingcode").value=(options.filebox_setting_code==null?"":options.filebox_setting_code);document.getElementById("hxwebfileboxcontrol_upload_file_bindinglineno").value=(options.binding_line_no==null?"":options.binding_line_no);document.getElementById("hxwebfileboxcontrol_upload_file_usedscene").value=(options.used_scene==null?"":options.used_scene);document.getElementById("hxwebfileboxcontrol_upload_file__callbackfuncname").value=(options.callback_func_name==null?"":options.callback_func_name);objFileInputBox.value="";objFileInputBox.click()};HXWebFileBoxControl._Internal._OnFileInputBoxChanged=function(eventObject){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);var strChosenValue=objHXEventData.target.value;if(strChosenValue==null||strChosenValue==""){return}document.getElementById("hxwebfileboxcontrol_upload_file_form").submit()};HXWebFileBoxControl._Internal._OnAfterFileUploadedToServer=function(strXmlData){var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlData);var strWebControlHtmlId=objHXXmlDoc.SelectSingleNode("//@CONTROL_HTML_ID").GetText();var strTemp=objHXXmlDoc.SelectSingleNode("//@BINDING_LINE_NO").GetText();var intBindingLineNo=(strTemp==""?null:parseInt(strTemp));var strUsedScene="";if(objHXXmlDoc.SelectSingleNode("//@USED_SCENE")!=null){strUsedScene=objHXXmlDoc.SelectSingleNode("//@USED_SCENE").GetText().toLowerCase()}var strCallbackFuncName="";if(objHXXmlDoc.SelectSingleNode("//@CALLBACK_FUNC_NAME")!=null){strCallbackFuncName=objHXXmlDoc.SelectSingleNode("//@CALLBACK_FUNC_NAME").GetText()}var strTemp=objHXXmlDoc.SelectSingleNode("//@RESULT").GetText();var blnIsUploadOK=(strTemp=="upload_ok");var arrUploadedFileInfo=[];var strUploadFileInfo=objHXXmlDoc.SelectSingleNode("//@DATA").GetText();if(strUploadFileInfo!=""){var arrUploadFilesList=strUploadFileInfo.split(/;/g);var arrTemp,strOrgFileName,strUploadTempName;for(var i=0;i<arrUploadFilesList.length;i++){arrTemp=arrUploadFilesList[i].split(/:/);arrUploadedFileInfo.push({file_name:arrTemp[0],file_temp_name:arrTemp[1]})}}var strWarningMessage=objHXXmlDoc.SelectSingleNode("//@MESSAGE").GetText();if(strCallbackFuncName!=""){var fn=eval(strCallbackFuncName);if(typeof(fn)=="function"){fn(strWebControlHtmlId,intBindingLineNo,strUsedScene,blnIsUploadOK,arrUploadedFileInfo,strWarningMessage)}return}if(!blnIsUploadOK){if(HXWebDynamicPageJSExt==null||HXWebDynamicPageJSExt.OnFileUploadFailed==null){if(strWarningMessage!=""){alert(strWarningMessage)}return}HXWebDynamicPageJSExt.OnFileUploadFailed(strWebControlHtmlId,null,strWarningMessage,intBindingLineNo,strUsedScene);return}else{if(HXWebDynamicPageJSExt==null||HXWebDynamicPageJSExt.OnAfterFileUploaded==null){return}if(arrUploadedFileInfo.length==1){HXWebDynamicPageJSExt.OnAfterFileUploaded(strWebControlHtmlId,null,arrUploadedFileInfo[0].file_name,arrUploadedFileInfo[0].file_temp_name,null,intBindingLineNo,strUsedScene)}else{HXWebDynamicPageJSExt.OnAfterFileUploaded(strWebControlHtmlId,null,arrUploadedFileInfo,null,null,intBindingLineNo,strUsedScene)}}};HXWebJS.Controls.PopupTextBox={};HXWebJS.Controls.PopupTextBox._InternalFunctions={};HXWebJS.Controls.PopupTextBox._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls.PopupTextBox._InternalFunctions._onclickprocess)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls.PopupTextBox._InternalFunctions._onloadprocess);HXWebJS.Controls.PopupTextBox.register=function(str_webdatacontrol_id,str_dropdown_btn_id,intPopupDialogWidth,intPopupDialogHeight){if(intPopupDialogWidth==null){intPopupDialogWidth=800}if(intPopupDialogHeight==null){intPopupDialogHeight=500}if(!HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info){HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info={}}var c=HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];if(!c){var c=new Object();c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,dialog_width:intPopupDialogWidth,dialog_height:intPopupDialogHeight};HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id]=c}};HXWebJS.Controls.PopupTextBox._InternalFunctions._onclickprocess=function(objEventData){if(!HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info){return}var objEventSrcElement=objEventData.target;var strEventSrcElementId=objEventSrcElement.id;if(!strEventSrcElementId){return}var str_webdatacontrol_id=null;for(key in HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info){if(HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}var objActiveElementInfo=HXWebJS.Controls.PopupTextBox._InternalFunctions._registed_elements_info[str_webdatacontrol_id];var objInputTextBox=HXWebJS.Controls.PopupTextBox._InternalFunctions._get_related_inputbox_object(str_webdatacontrol_id,objEventSrcElement);if(objInputTextBox==null){return}HXWebJS.Controls.PopupTextBox._InternalFunctions._show_text_box_dialog(objInputTextBox,objEventData,objActiveElementInfo.dialog_width,objActiveElementInfo.dialog_height)};HXWebJS.Controls.PopupTextBox._InternalFunctions._get_related_inputbox_object=function(str_webdatacontrol_id,objDropdownButton){return HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objDropdownButton.parentNode.parentNode)};HXWebJS.Controls.PopupTextBox._InternalFunctions._show_text_box_dialog=function(objInputTextBox,objEventData,intDialogWidth,intDialogHeight){if(!objInputTextBox){return}var strOrgValue=objInputTextBox.value;var objEventSrcElement=null;if((!!objEventData.type)&&objEventData.type=="click"){objEventSrcElement=objEventData.target}var objParam={htmlcontent:strOrgValue,title:"",readonly:objInputTextBox.readOnly};var fnCallback=function(objResult){if(objResult!=null){objInputTextBox.value=objResult;var blnIsIE=HXWebJS.Core.Browser.IsIE&&parseFloat(HXWebJS.Core.Browser.Version)<10;if(!blnIsIE){HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_xmldataisland_update(objInputTextBox,"change")}}};var blnIsV6ServerEnginee=(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6");if(blnIsV6ServerEnginee){var objWindowSetting={show_style:1,dialog_width:intDialogWidth,dialog_height:intDialogHeight,dialog_scroll:false,dialog_argument:objParam,dialog_callback_func:fnCallback};HXWebJS.AppUtility.OpenDynamicDataCommonPageViaFile("hxsm_v6/hx_large_text_editor.hxpage.xhtml",objWindowSetting,null,"1.3");return}var strURL=gstrWebRootPath+"hxpublic/hx_large_text_editor.aspx";HXWebJS.Navigation.OpenWebDialog(strURL,objParam,intDialogWidth,intDialogHeight,false,fnCallback)};HXWebJS.PageHelper={};HXWebJS.PageHelper.Common={};HXWebJS.PageHelper.Common._InternalFunctions={};HXWebCommonPageHelper=HXWebJS.PageHelper.Common;HXWebJS.PageHelper.Common.get_binding_xml_object_of_html_table=function(tableIdOrElement){if(tableIdOrElement==null){return null}var objTable=(typeof(tableIdOrElement)=="string"?HXWebJS.DOM.FindFirstElementById(tableIdOrElement):(tableIdOrElement.tagName.toLowerCase()=="table"?tableIdOrElement:null));if(objTable==null){return null}var strTempDataSrcName=objTable.getAttribute("datasrc");if(strTempDataSrcName==null||strTempDataSrcName==""){return null}var strXmlDataIslandName=strTempDataSrcName.substr(1);return HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strXmlDataIslandName)};HXWebJS.PageHelper.Common.field_input_area_showhide_required_value_flag=function(div_for_field_input,bln_is_field_value_required){var objTempSpanList=HXWebJS.DOM.FindElementsByAttribute("hx_is_value_required_flag","1","span",div_for_field_input,false);if(objTempSpanList!=null&&objTempSpanList.length>0){objTempSpanList[0].style.visibility=(bln_is_field_value_required?"visible":"hidden")}};HXWebJS.PageHelper.Common.field_input_area_display_format_process=function(div_for_field_input,bln_is_field_allow_edit,bln_is_field_value_required){var objTempSpanList=HXWebJS.DOM.FindElementsByAttribute("hx_is_value_required_flag","1","span",div_for_field_input,false);if(objTempSpanList!=null&&objTempSpanList.length>0){objTempSpanList[0].style.visibility=(bln_is_field_allow_edit&&bln_is_field_value_required?"visible":"hidden")}var objInputBoxes=HXWebJS.DOM.FindElementsByAttribute("hx_is_field_input_textbox","1","input",div_for_field_input,false);for(var j=0;j<objInputBoxes.length;j++){var objInputBox=objInputBoxes[j];if(objInputBox.type=="text"){objInputBox.readOnly=(bln_is_field_allow_edit?false:true);HXWebJS.DOM.CSSClass.RemoveClass(objInputBox,(bln_is_field_allow_edit?"hxinputbox_labelstyle":"hxinputbox"));HXWebJS.DOM.CSSClass.AddClass(objInputBox,(bln_is_field_allow_edit?"hxinputbox":"hxinputbox_labelstyle"))}else{objInputBox.disabled=(bln_is_field_allow_edit?false:true)}}var objTextAreas=HXWebJS.DOM.FindElementsByAttribute("hx_is_field_input_textbox","1","textarea",div_for_field_input,false);for(var j=0;j<objTextAreas.length;j++){var objTextArea=objTextAreas[j];objTextArea.readOnly=(bln_is_field_allow_edit?false:true);HXWebJS.DOM.CSSClass.RemoveClass(objTextArea,(bln_is_field_allow_edit?"hxinputbox_labelstyle":"hxinputbox"));HXWebJS.DOM.CSSClass.AddClass(objTextArea,(bln_is_field_allow_edit?"hxinputbox":"hxinputbox_labelstyle"))}var objChooseImgBtnes=HXWebJS.DOM.FindElementsByAttribute("hx_is_field_input_choose_button","1","img",div_for_field_input,false);for(var k=0;k<objChooseImgBtnes.length;k++){var objChooseImgBtn=objChooseImgBtnes[k];objChooseImgBtn.style.visibility=(bln_is_field_allow_edit?"visible":"hidden")}};HXWebJS.PageHelper.Common.head_line_sort_process=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objSrcElement=objEventData.target;while(objSrcElement!=null&&objSrcElement.tagName!=null&&objSrcElement.tagName.toLowerCase()!="td"){objSrcElement=objSrcElement.parentNode}if(objSrcElement==null){return}if(objSrcElement.tagName==null){return}if(objSrcElement.getAttribute("hx_field_name")==null){return}var objParentTableElement=null;objParentTableElement=objSrcElement.parentNode;while(objParentTableElement!=null&&objParentTableElement.tagName.toLowerCase()!="table"){objParentTableElement=objParentTableElement.parentNode}if(objParentTableElement==null){return}var strTempDataSrcName=objParentTableElement.getAttribute("datasrc");if(strTempDataSrcName==null||strTempDataSrcName==""){return}var strXmlDataIslandName=strTempDataSrcName.substr(1);var objXmlDataIsland=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strXmlDataIslandName);if(objXmlDataIsland==null){return}if(objXmlDataIsland.SelectSingleNode("//RS_ROW")==null){return}var strCurrentChoosedFieldName=objSrcElement.getAttribute("hx_field_name").toLowerCase();var strLastTimeSortFieldName="";var strLastTimeSortType="";var objTempSortButton;if(objSrcElement.parentNode.getAttribute("hx_last_time_sort_field_name")!=null){strLastTimeSortFieldName=objSrcElement.parentNode.getAttribute("hx_last_time_sort_field_name").toLowerCase()}if(objSrcElement.parentNode.getAttribute("hx_last_time_sort_type")!=null){strLastTimeSortType=objSrcElement.parentNode.getAttribute("hx_last_time_sort_type").toUpperCase()}if(strLastTimeSortFieldName!=strCurrentChoosedFieldName){var hx_td_list=HXWebJS.DOM.FindElementsByTagName("td",objSrcElement.parentNode);var objTempTDNode;for(var i=0;i<hx_td_list.length;i++){objTempTDNode=hx_td_list[i];if(objTempTDNode.getAttribute("hx_field_name")!=null){if(objTempTDNode.getAttribute("hx_field_name").toLowerCase()==strLastTimeSortFieldName){objTempSortButton=HXWebJS.DOM.FindFirstElementById("hxbtn_sort_direction",objTempTDNode);if(objTempSortButton!=null){objTempSortButton.className="hxbtn_sort_hide";break}}}}}var strCurrentSortType="ASC";if(strLastTimeSortFieldName==strCurrentChoosedFieldName){strCurrentSortType=(strLastTimeSortType=="ASC"?"DESC":"ASC")}objTempSortButton=HXWebJS.DOM.FindFirstElementById("hxbtn_sort_direction",objSrcElement);if(objTempSortButton==null){objTempSortButton=HXWebJS.DOM.CreateElement("<img id='hxbtn_sort_direction' src=\"../images/hxpub_clear.gif\" class='hxbtn_sort_hide' style='margin-left:3px;' />");objSrcElement.firstChild.appendChild(objTempSortButton)}objTempSortButton.className=(strCurrentSortType=="ASC"?"hxbtn_sort_asc":"hxbtn_sort_desc");objSrcElement.parentNode.setAttribute("hx_last_time_sort_field_name",strCurrentChoosedFieldName);objSrcElement.parentNode.setAttribute("hx_last_time_sort_type",strCurrentSortType);var blnAscOrDesc=(strCurrentSortType=="ASC"?true:false);var strXmlDataContentTemp=objXmlDataIsland.GetXml();var objTempHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlDataContentTemp);if(objTempHXXmlDoc==null){return}HXWebJS.Utility._InternalFunctions._HXWebXmlList_QuickSort(objTempHXXmlDoc.GetRootXmlNode()._xmlnode,"@"+strCurrentChoosedFieldName.toUpperCase(),blnAscOrDesc);strXmlDataContentTemp=objTempHXXmlDoc.GetXml();objXmlDataIsland.ReloadXML(strXmlDataContentTemp)};HXWebJS.PageHelper.Common.demo__hxfn_callback_webdatalist__after_data_row_rebinding=function(strTableId,intLineNo,objTBodyOfRow,objHXXmlNodeOfRow){alert("函数原型：function hxfn_callback_webdatalist__after_data_row_rebinding(strTableId, intLineNo, objTBodyOfRow, objHXXmlNodeOfRow)")};HXWebJS.PageHelper.Common.set_object_field_label_remark_content=function(objEventSrcElement){if(objEventSrcElement==null){return}if(objEventSrcElement.title!=null&&objEventSrcElement.title!=""){return}var strFieldName=HXWebJS.DOM.ElementGetInnerText(objEventSrcElement);if(strFieldName==null){return}var strDataSrcName=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"datasrc");if(strDataSrcName==null||strDataSrcName==""||strDataSrcName.substr(0,1)!="#"){objEventSrcElement.title=strFieldName;return}var strXmlDataIslandName=strDataSrcName.substr(1);var strDataFld=HXWebJS.DOM.ElementAttributeGetValue(objEventSrcElement,"datafld");if(strDataFld==null||strDataFld==""||strDataFld.length<5){objEventSrcElement.title=strFieldName;return}var strFieldCode=strDataFld.substr(5);var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strXmlDataIslandName);if(objHXXmlDoc==null){objEventSrcElement.title=strFieldName;return}var objHXXmlNode_FieldRemark=objHXXmlDoc.SelectSingleNode("//@RMK__"+strFieldCode.toUpperCase());var strFieldRemark=(objHXXmlNode_FieldRemark==null?"":objHXXmlNode_FieldRemark.GetText());if(strFieldRemark==""){objEventSrcElement.title=strFieldName;return}else{objEventSrcElement.title=strFieldName+"\r\n"+strFieldRemark}};HXWebJS.PageHelper.Common.auto_adjust_frame_win_width_and_height=function(iframe_id_or_object,blnAdjustWidth,blnAdjustHeight){if(iframe_id_or_object==null){return}var objIFrameHtmlElement;if(typeof(iframe_id_or_object)=="string"){objIFrameHtmlElement=HXWebJS.DOM.GetElementById(iframe_id_or_object)}else{objIFrameHtmlElement=iframe_id_or_object}if(objIFrameHtmlElement==null){return}var objFrameWindow=HXWebJS.Core.GetFrameWindow(objIFrameHtmlElement);if(objFrameWindow==null){return}if(blnAdjustWidth==null){blnAdjustWidth=true}if(blnAdjustHeight==null){blnAdjustHeight=true}var intContentPageDocumentWidth=HXWebJS.Core.WindowGeometry.GetDocumentWidth(objFrameWindow);var intContentPageDocumentHeight=HXWebJS.Core.WindowGeometry.GetDocumentHeight(objFrameWindow);var intContentPageViewportWidth=HXWebJS.Core.WindowGeometry.GetViewportWidth(objFrameWindow);var intContentPageViewportHeight=HXWebJS.Core.WindowGeometry.GetViewportHeight(objFrameWindow);var intIFrameElementMinWidth=HXWebJS.Core.WindowGeometry.GetViewportWidth(objFrameWindow.parent)-HXWebJS.DOM.GetElementLeftPosition(objIFrameHtmlElement);var intIFrameElementMinHeight=HXWebJS.Core.WindowGeometry.GetViewportHeight(objFrameWindow.parent)-HXWebJS.DOM.GetElementTopPosition(objIFrameHtmlElement);var blnFrameWinSizeChanged=false;if(blnAdjustHeight&&intContentPageDocumentHeight>intContentPageViewportHeight){var intTempNewHeight=intContentPageDocumentHeight+(objIFrameHtmlElement.offsetHeight-intContentPageViewportHeight);if(intTempNewHeight<intIFrameElementMinHeight){intTempNewHeight=intIFrameElementMinHeight}objIFrameHtmlElement.style.height=intTempNewHeight+"px";blnFrameWinSizeChanged=true}if(blnAdjustWidth&&intContentPageDocumentWidth>intContentPageViewportWidth){var intTempNewWidth=intContentPageDocumentWidth+(objIFrameHtmlElement.offsetWidth-intContentPageViewportWidth);if(intTempNewWidth<intIFrameElementMinWidth){intTempNewWidth=intIFrameElementMinWidth}objIFrameHtmlElement.style.width=intTempNewWidth+"px";blnFrameWinSizeChanged=true}if(blnFrameWinSizeChanged==true){var fnTemp=HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.PageHelper.Common.auto_adjust_frame_win_width_and_height,iframe_id_or_object,blnAdjustWidth,blnAdjustHeight);window.setTimeout(fnTemp,200)}};HXWebJS.PageHelper.Common.upload_clipboard_image_or_files=function(fnCallback,intMaxFileSizeKB,blnUploadClipboardImage,strAllowFileTypeList){var strMessageText;if(typeof(ActiveXObject)=="undefined"){strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__BROWSER_DO_NOT_SUPPORT_UPLOAD_CLIPBOARD_DATA");alert(strMessageText);return}var objLocalAppAccessHelper=null;try{objLocalAppAccessHelper=new ActiveXObject("HXWebLocalAccess501.LocalAppAccessHelper")}catch(ex){strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__BROWSER_HXWEBLOCALACCESS_ADDIN_DO_NOT_INSTALL_OR_ENABLED");alert(strMessageText);return}var strClipboardImageOrFilesData="";if(blnUploadClipboardImage){strClipboardImageOrFilesData=objLocalAppAccessHelper.PasteClipboardImageContentAsBase64String(intMaxFileSizeKB)}else{strClipboardImageOrFilesData=objLocalAppAccessHelper.PasteClipboardFileListContentAsBase64String(intMaxFileSizeKB,strAllowFileTypeList)}if(strClipboardImageOrFilesData==""){if(blnUploadClipboardImage){strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__CLIPBOARD_IMAGE_EMPTY_OR_TOO_LARGE");strMessageText=strMessageText.replace("{0}",intMaxFileSizeKB.toString())}else{strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__CLIPBOARD_FILE_EMPTY_OR_TOO_LARGE_OR_FORBIDDEN");strMessageText=strMessageText.replace("{0}",intMaxFileSizeKB.toString())}alert(strMessageText);return}HXWebJS.Core._InternalFunctions.ShowHideProgressBar(true);var fnTemp=function(strXmlResult){HXWebJS.Core._InternalFunctions.ShowHideProgressBar(false);if(strXmlResult!=null&&strXmlResult!=""){var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlResult);var objHXXmlNodeList=objHXXmlDoc.SelectNodes("//RS_ROW");var strUploadFileName,strUploadFileTempName;var objResult;for(var i=0;i<objHXXmlNodeList.length;i++){strUploadFileName=objHXXmlNodeList[i].GetAttributeValue("UPLOAD_FILE_NAME");strUploadFileTempName=objHXXmlNodeList[i].GetAttributeValue("UPLOAD_FILE_TEMP_NAME");objResult={upload_file_name:strUploadFileName,upload_file_temp_name:strUploadFileTempName};fnCallback(objResult)}}};var sb=new HXWebStringBuilder();sb.append(blnUploadClipboardImage?"CLIPBOARD_IMAGE_DATA:":"CLIPBOARD_FILES_DATA:");sb.append(strClipboardImageOrFilesData);HXWebJS.Xml.XmlService.SayToServerAsync("HXSM","HXSM_CLIPBOARD_IMAGE_OR_FILE_DATA_UPLOAD",sb.toString(),fnTemp)};HXWebJS.PageHelper.Common.download_file_directly=function(strObjectCode,strFieldCodeForFileName,strRecordUUID,fnAsyncCallback){var sb_XmlContent=new HXWebStringBuilder();sb_XmlContent.append("<RS_DATA><RS_ROW");sb_XmlContent.append(' FIELD_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strFieldCodeForFileName)+'"');sb_XmlContent.append(' RECORD_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strRecordUUID)+'"');sb_XmlContent.append(" /></RS_DATA>");if(fnAsyncCallback==null){fnAsyncCallback=function(strXmlResult){if(strXmlResult!=null&&strXmlResult!=""){HXWebJS.Navigation.OpenFileDownloadOnlyPage("tempfiles/"+strXmlResult)}}}HXWebXmlService.CallObjectXmlServiceAsyncWithProgressBar(strObjectCode,"FILE_DOWNLOAD",sb_XmlContent.toString(),1,fnAsyncCallback,null,null,null,strObjectCode)};HXWebJS.PageHelper.Common.ShowImage=function(strObjectCode,strFieldCodeForFileName,strRecordUUID,objHtmlImage){var fnAsyncCallback=function(strXmlResult){if(strXmlResult!=null&&strXmlResult!=""){if(typeof(objHtmlImage)=="string"){objHtmlImage=HXWebJS.DOM.GetElementById(objHtmlImage)}objHtmlImage.src=HXWebPageGlobalVariables.WebRootPath+"tempfiles/"+strXmlResult}};HXWebJS.PageHelper.Common.download_file_directly(strObjectCode,strFieldCodeForFileName,strRecordUUID,fnAsyncCallback)};HXWebJS.PageHelper.Common.upload_file_directly=function(intMaxFileSizeKB,strAllowFileTypeList,fnCallback){if(intMaxFileSizeKB==null){intMaxFileSizeKB=10000}if(strAllowFileTypeList==null){strAllowFileTypeList=""}var strUrl;if(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6"){strUrl=gstrWebRootPath+"hxpublic_v6/hxdynamicpage6.aspx?_hxpage=hxsm_v6/hxsm_file_upload_process.hxpage.xhtml&max_file_size_kb="+intMaxFileSizeKB+"&allow_file_type_list="+strAllowFileTypeList}else{strUrl=gstrWebRootPath+"hxsm/hxsm_fileupload_process__v2.aspx?max_file_size_kb="+intMaxFileSizeKB+"&allow_file_type_list="+strAllowFileTypeList}var intDialogWidth=500,intDialogHeight=240;if(HXWebJS.Core.Browser.IsMobile){var intViewPortWidth=HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intViewPortWidth<intDialogWidth){intDialogWidth=intViewPortWidth}}HXWebJS.Navigation.OpenWebDialog(strUrl,null,intDialogWidth,intDialogHeight,"no",fnCallback)};HXWebJS.PageHelper.Common.CalcAndFillObjectAutoSumFieldValue=function(strXmlDataIslandCode,strFieldCode,objElementForAutoSumResult){var strTemp=HXWebJS.DOM.ElementAttributeGetValue(objElementForAutoSumResult,"hx_decimal_use_group_seperator");var blnFormatWithGroupSeperator=(strTemp!=null&&strTemp!=""&&strTemp!="0"?true:false);strTemp=HXWebJS.DOM.ElementAttributeGetValue(objElementForAutoSumResult,"hx_decimal_scale");var intDecimalScale=(strTemp==null||strTemp==""?(blnFormatWithGroupSeperator?2:null):parseInt(strTemp));var tmpValue=HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue(strXmlDataIslandCode,strFieldCode,intDecimalScale,blnFormatWithGroupSeperator,blnFormatWithGroupSeperator);HXWebJS.DOM.ElementSetInnerText(objElementForAutoSumResult,tmpValue)};HXWebJS.PageHelper.Common._InternalFunctions._delete_data_process=function(strObjectCode,intUseDefaultProcess,strXmlDataForDeletedRecords,fnAsyncCallback,strExtendAssemblyClassName,strExtraData,strObjectOrViewCode){if(intUseDefaultProcess==null){intUseDefaultProcess=1}if(strExtendAssemblyClassName==null){strExtendAssemblyClassName=""}if(strExtraData==null){strExtraData=""}var sb_Xml_ForDeleteDataBasicInfo=new HXWebStringBuilder();sb_Xml_ForDeleteDataBasicInfo.append("<RS_DATA><RS_ROW");sb_Xml_ForDeleteDataBasicInfo.append(' OBJECT_OR_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strObjectOrViewCode)+'"');sb_Xml_ForDeleteDataBasicInfo.append(' EXTEND_ASSEMBLY_CLASS="'+HXWebJS.Xml.MarkXMLSpecialChars(strExtendAssemblyClassName)+'"');sb_Xml_ForDeleteDataBasicInfo.append(' EXTRA_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(strExtraData)+'"');sb_Xml_ForDeleteDataBasicInfo.append(" /></RS_DATA>");var strAllXmlData=HXWebJS.Xml.BuildAllXmlDatas("delete_data_basic_info",sb_Xml_ForDeleteDataBasicInfo.toString(),"delete_data_content",strXmlDataForDeletedRecords);HXWebXmlService.CallObjectXmlServiceAsyncWithProgressBar(strObjectCode,"DELETE",strAllXmlData,intUseDefaultProcess,fnAsyncCallback,null,null,null,strObjectOrViewCode)};HXWebJS.PageHelper.Common._InternalFunctions._body_onclick_default_process=function(e){if(parent!=null&&parent!=window.self){try{HXWebJS.EventManager.FireEvent(parent.document.body,"click")}catch(e){}}var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(e);if(HXWebCommonPageHelper._InternalFunctions.enable_dataline_highlight==true){var objEventSrcElement=objHXEventData.target;var strTagName=objEventSrcElement.tagName.toLowerCase();var intBindingRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objEventSrcElement);if(intBindingRecordNumber==null){return}if(strTagName!="input"&&strTagName!="textarea"&&strTagName!="select"){return}if(objEventSrcElement.disabled){return}var objContainerTBody=objEventSrcElement;while(objContainerTBody!=null&&objContainerTBody.tagName.toLowerCase()!="tbody"){objContainerTBody=objContainerTBody.parentNode;if(objContainerTBody.nodeType!=1){objContainerTBody=null}}if(objContainerTBody==null){return}var objContainerTable=objContainerTBody.parentNode;var intOldRowNo=HXWebJS.DOM.ElementAttributeGetValue(objContainerTable,"hx_last_highlight_dataline_row_no");HXWebJS.DOM._InternalFunctions._hightlight_data_row(objContainerTable,intOldRowNo,intBindingRecordNumber-1)}};HXWebJS.PageHelper.Common._InternalFunctions._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.PageHelper.Common._InternalFunctions._body_onclick_default_process);HXWebJS.EventManager.AddListener(document.body,"move",function(){var fn=null;try{if(parent!=null&&parent!=window.self&&parent.hxmainpage_adjust_content_zone_height!=null){fn=parent.hxmainpage_adjust_content_zone_height}}catch(ex){}if(fn!=null){fn()}});HXWebJS.EventManager.AddListener(document.body,"resizeend",function(){var fn=null;try{if(parent!=null&&parent!=window.self&&parent.hxmainpage_adjust_content_zone_height!=null){fn=parent.hxmainpage_adjust_content_zone_height}}catch(ex){}if(fn!=null){fn()}});HXWebJS.EventManager.AddListener(document.body,"load",function(){try{if(parent!=null&&parent!=window.self&&parent.hxmainpage_adjust_content_zone_height!=null){parent.hxmainpage_adjust_content_zone_height()}}catch(ex){}});try{if(parent!=null&&parent!=window.self&&parent.hxmainpage_adjust_content_zone_height!=null){parent.hxmainpage_adjust_content_zone_height()}}catch(ex){}};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.PageHelper.Common._InternalFunctions._onloadprocess);if(typeof(HXWebDynamicPageDesignModeHelper)!="undefined"&&HXWebDynamicPageDesignModeHelper._RunAfterLoad!=null){HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebDynamicPageDesignModeHelper._RunAfterLoad)};HXWebJS.MenuHelper={};HXWebJS.MenuHelper._Internal={};HXWebJS.MenuHelper.register=function(str_control_html_id,options){var obj_menu_container=document.getElementById(str_control_html_id);if(obj_menu_container==null){return}if(options==null){return}if(!HXWebJS.MenuHelper._Internal._registed_elements_info){HXWebJS.MenuHelper._Internal._registed_elements_info={}}var c=HXWebJS.MenuHelper._Internal._registed_elements_info[str_control_html_id];if(!c){var c=new Object();c={control_id:str_control_html_id,menu_type:options.menu_type,menu_set_code:options.menu_set_code,menuitem_xml_data_island_id:options.menuitem_xml_data_island_id.toLowerCase(),is_async_loading:options.is_async_loading,record_last_access_cmd:options.record_last_access_cmd,show_childmenu_onhover:options.show_childmenu_onhover,is_popup_child_menu_shown:false,current_chosn_master_menu_item_code:"",popup_child_menu_line_height:options.popup_child_menu_line_height,dft_show_page_in:options.dft_show_page_in};HXWebJS.MenuHelper._Internal._registed_elements_info[str_control_html_id]=c;var blnIsAsyncLoading=options.is_async_loading;if(!!blnIsAsyncLoading){var fnCallback=function(){HXWebJS.MenuHelper._Internal._binding_mouse_event_for_menu(str_control_html_id,obj_menu_container,c)};HXWebJS.MenuHelper._Internal._async_load_menu_items_data(str_control_html_id,c.menu_set_code,c.menuitem_xml_data_island_id,fnCallback)}else{HXWebJS.MenuHelper._Internal._binding_mouse_event_for_menu(str_control_html_id,obj_menu_container,c)}}};HXWebJS.MenuHelper.SetPopupChildMenuLineHeight=function(str_control_html_id,intLineHeight){var objActiveElementInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[str_control_html_id];if(objActiveElementInfo==null){return}objActiveElementInfo.popup_child_menu_line_height=intLineHeight};HXWebJS.MenuHelper.ShowHideMenuBarContainer=function(blnHide,strMenuBarContainerId,strContentDisplayAreaId,strMenuBarShowButtonId,strMenuBarHideButtonId){if(blnHide==null){blnHide=false}if(strMenuBarContainerId==null){strMenuBarContainerId="WebPageMenuBarContainer"}if(strContentDisplayAreaId==null){strContentDisplayAreaId="ContentPageDisplayArea"}if(strMenuBarShowButtonId==null){strMenuBarShowButtonId="WebPageMenuBarShowButton"}if(strMenuBarHideButtonId==null){strMenuBarHideButtonId="WebPageMenuBarHideButton"}var el;if(blnHide){el=document.getElementById(strMenuBarContainerId);if(el!=null){el.style.display="none"}el=document.getElementById(strMenuBarShowButtonId);if(el!=null){el.style.display="inline"}el=document.getElementById(strMenuBarHideButtonId);if(el!=null){el.style.display="none"}el=document.getElementById(strContentDisplayAreaId);if(el!=null){HXWebJS.DOM.CSSClass.AddClass(el,"hide_menu")}}else{el=document.getElementById(strMenuBarContainerId);if(el!=null){el.style.display=""}el=document.getElementById(strMenuBarShowButtonId);if(el!=null){el.style.display="none"}el=document.getElementById(strMenuBarHideButtonId);if(el!=null){el.style.display="inline"}el=document.getElementById(strContentDisplayAreaId);if(el!=null){HXWebJS.DOM.CSSClass.RemoveClass(el,"hide_menu")}}};HXWebJS.MenuHelper.CreateDefaultShowhideButtons=function(str_control_html_id,blnDefaultShow){var showButton=HXWebJS.DOM.CreateElement('<img id="WebPageMenuBarShowButton" src="../hximages_v6/hxpub_clear.gif" class="hxicon_showblock" onclick="HXWebJS.MenuHelper.ShowHideMenuBarContainer(false)" style="display:'+(blnDefaultShow?"none":"inline")+'" />');document.body.appendChild(showButton);var hideButton=HXWebJS.DOM.CreateElement('<img id="WebPageMenuBarHideButton" src="../hximages_v6/hxpub_clear.gif" class="hxicon_hideblock" onclick="HXWebJS.MenuHelper.ShowHideMenuBarContainer(true)" style="display:'+(blnDefaultShow?"inline":"none")+'" />');document.body.appendChild(hideButton)};HXWebJS.MenuHelper._Internal._async_load_menu_items_data=function(str_control_html_id,str_menu_set_code,str_menu_item_xml_data_island_id,fnCallback){var fnAfterMenuDataGet=function(strXmlResult){if(strXmlResult==null||strXmlResult==""){return}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(str_menu_item_xml_data_island_id);objHXXmlDoc.ReloadXML(strXmlResult);if(fnCallback!=null){fnCallback()}};var strPageXmlSvcContent='<RS_DATA><RS_ROW MENU_WEB_PART_HTML_ID="'+str_control_html_id+'" MENU_SET_CODE="'+str_menu_set_code+'" /></RS_DATA>';if(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6"){HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXDYNAMICPAGE_COMMON__MENU_ITEMS_DATA_GET",strPageXmlSvcContent,fnAfterMenuDataGet,"TrustHX.HXWWW6")}else{HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("_HXDYNAMICPAGE_COMMON__MENU_ITEMS_DATA_GET",strPageXmlSvcContent,fnAfterMenuDataGet,"hxeims501.www.hxmd","hxeims501.www.hxmd.hxdynamicpage_v12")}};HXWebJS.MenuHelper._Internal._binding_mouse_event_for_menu=function(str_control_html_id,objDivContainerArea){HXWebJS.EventManager.AddListener(objDivContainerArea,"mouseover",HXWebJS.MenuHelper._Internal._mastermenuitem_onmouseover_or_clicked);HXWebJS.EventManager.AddListener(objDivContainerArea,"mouseout",HXWebJS.MenuHelper._Internal._mastermenuitem_onmouseout);HXWebJS.EventManager.AddListener(objDivContainerArea,"click",HXWebJS.MenuHelper._Internal._mastermenuitem_onmouseover_or_clicked);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.MenuHelper._Internal._hxsysmenu__body_onclicked)};HXWebJS.MenuHelper._Internal._mastermenuitem_onmouseover_or_clicked=function(eventObject){var objEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);var blnHoverOnMenuItem=(objEventData.type=="mouseover"?true:false);var objThis=objEventData.target;if(objThis.id!="hxmastermenuitem_container"&&objThis.id!="img_mastermenuitem_icon"&&objThis.id!="spn_mastermenuitem_text"){return}objEventData.stopPropagation();if(objThis.id=="img_mastermenuitem_icon"||objThis.id=="spn_mastermenuitem_text"){objThis=objThis.parentNode}var objMenuAreaContainerTable=objThis.parentNode.parentNode.parentNode;var strMenuWebPartHtmlId=objMenuAreaContainerTable.getAttribute("hxmenuwebpart_htmlid");if(strMenuWebPartHtmlId==null||strMenuWebPartHtmlId==""){return}var objActiveElementInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[strMenuWebPartHtmlId];if(objActiveElementInfo==null){return}var objHXXmlDocForMasterMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.menuitem_xml_data_island_id);var strCurrentMasterMenuItemCode=objThis.getAttribute("hx_mastermenuitem_code");var objXmlNode=objHXXmlDocForMasterMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+strCurrentMasterMenuItemCode+"']");var strMenuCmdTagName=objXmlNode.SelectSingleNode("@MENU_ITEM_NAME").GetText();var strCurrentMasterMenuItemHasSubMenu=objXmlNode.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(objActiveElementInfo.current_chosn_master_menu_item_code!=""&&objActiveElementInfo.current_chosn_master_menu_item_code!=strCurrentMasterMenuItemCode){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper._Internal._get_master_menu_item_div_object(objActiveElementInfo.control_id,objActiveElementInfo.current_chosn_master_menu_item_code);if(objPreviousChoosedMasterItem!=null){HXWebJS.DOM.CSSClass.RemoveClass(objPreviousChoosedMasterItem,"hxmastermenuitem_hover");objActiveElementInfo.current_chosn_master_menu_item_code="";HXWebJS.MenuHelper._Internal._hide_child_popupmenus()}}if(blnHoverOnMenuItem==false){var strCurrentMasterMenuItemHref=objXmlNode.SelectSingleNode("@MENU_COMMAND_HREF").GetText();if(strCurrentMasterMenuItemHref==""){return}var strShowIn=objXmlNode.SelectSingleNode("@SHOW_IN_STYLE").GetText();var strCurrentMenuCommandCode=objXmlNode.SelectSingleNode("@MENU_COMMAND_CODE").GetText();HXWebJS.MenuHelper.ExecuteMenuCommand(strCurrentMenuCommandCode,strCurrentMasterMenuItemHref,strShowIn,true,strMenuCmdTagName);objActiveElementInfo.is_popup_child_menu_shown=false;return}if(strCurrentMasterMenuItemHasSubMenu=="0"&&blnHoverOnMenuItem==true){HXWebJS.DOM.CSSClass.AddClass(objThis,"hxmastermenuitem_hover");return}var blnShowChildMenuOnHover=objActiveElementInfo.show_childmenu_onhover;if(blnHoverOnMenuItem&&blnShowChildMenuOnHover==false){return}var intWidth=parseInt(objXmlNode.SelectSingleNode("@MAX_CHILD_MENU_TEXT_WIDTH").GetText());if(objActiveElementInfo.menu_type=="topside_popup"){if(intWidth<objThis.offsetWidth){intWidth=objThis.offsetWidth}}var strCurrentMasterMenuItemPosAt=objXmlNode.SelectSingleNode("@POS_AT").GetText();HXWebJS.MenuHelper._Internal._init_and_show_popup_child_menu_area(objActiveElementInfo,1,objThis,strCurrentMasterMenuItemCode,intWidth,strCurrentMasterMenuItemPosAt,false);objActiveElementInfo.current_chosn_master_menu_item_code=strCurrentMasterMenuItemCode;objActiveElementInfo.is_popup_child_menu_shown=true;HXWebJS.DOM.CSSClass.AddClass(objThis,"hxmastermenuitem_hover")};HXWebJS.MenuHelper._Internal._mastermenuitem_onmouseout=function(eventObject){var objEventData=HXWebJS.EventManager.GetCurrentEventData(eventObject);var blnHoverOnMenuItem=(objEventData.type=="mouseover"?true:false);var objThis=objEventData.target;if(objThis.id!="hxmastermenuitem_container"&&objThis.id!="img_mastermenuitem_icon"&&objThis.id!="spn_mastermenuitem_text"){return}objEventData.stopPropagation();if(objThis.id=="img_mastermenuitem_icon"||objThis.id=="spn_mastermenuitem_text"){objThis=objThis.parentNode}var objToElement=objEventData.relatedTarget;var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_1";if(HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement)){return}HXWebJS.DOM.CSSClass.RemoveClass(objThis,"hxmastermenuitem_hover");HXWebJS.MenuHelper._Internal._hide_child_popupmenus()};HXWebJS.MenuHelper._Internal._init_and_show_popup_child_menu_area=function(objActiveElementInfo,intChildMenuItemLevel,objParentMenuItemContainer,strParentMenuItemCode,intChildPopupMenuAreaWidth,strCurrentMasterMenuItemPosAt,blnCurrentMenuItemHasSeperator){var strMenuType=objActiveElementInfo.menu_type;var strWebPopupMenuControlCode="hxmastermenu_popupchildmenu_level_"+intChildMenuItemLevel;if(!HXWebPopupMenuControl.is_registered(strWebPopupMenuControlCode)){HXWebPopupMenuControl.register(strWebPopupMenuControlCode,100,false,HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_onclicked,HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_mouseover,HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_mouseout,HXWebJS.MenuHelper._Internal._fnhxchildmenuarea_mouseout,{show_border:(intChildMenuItemLevel==1?false:true),show_shadow:false,line_height:objActiveElementInfo.popup_child_menu_line_height});HXWebJS.Controls.PopupMenu.set_zIndex_offset(strWebPopupMenuControlCode,intChildMenuItemLevel)}HXWebJS.Controls.PopupMenu.set_ref_id(strWebPopupMenuControlCode,objActiveElementInfo.control_id);var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.menuitem_xml_data_island_id);HXWebPopupMenuControl.clear_items(strWebPopupMenuControlCode);HXWebPopupMenuControl.fill_items(strWebPopupMenuControlCode,objHXXmlDocForMenuItemData.GetRootXmlNode(),"RS_ROW[@MENU_ITEM_LEVEL="+(intChildMenuItemLevel+1).toString()+" and @PARENT_MENU_ITEM_CODE='"+strParentMenuItemCode+"']","@MENU_ITEM_CODE","@MENU_ITEM_NAME","@HAS_SEPERATOR","@HAS_CHILD_MENU","@IMG_CLASS_NAME");var intLeft,intTop;if(intChildMenuItemLevel==1){if(strMenuType=="topside_popup"){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemContainer);intTop=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemContainer)+objParentMenuItemContainer.offsetHeight-1;if(strCurrentMasterMenuItemPosAt!="L"){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemContainer)+1+objParentMenuItemContainer.offsetWidth-intChildPopupMenuAreaWidth}}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemContainer)+objParentMenuItemContainer.offsetWidth-1;intTop=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemContainer)}}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemContainer)+objParentMenuItemContainer.offsetWidth;intTop=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemContainer)-1;if(strMenuType=="topside_popup"&&strCurrentMasterMenuItemPosAt!="L"){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemContainer)-intChildPopupMenuAreaWidth+1}}HXWebPopupMenuControl.show(strWebPopupMenuControlCode,strCurrentMasterMenuItemPosAt,intLeft,intTop,intChildPopupMenuAreaWidth);if(intChildMenuItemLevel>1){var strHidePosition=(strMenuType=="topside_popup"&&strCurrentMasterMenuItemPosAt!="L"?"right":"left");var intHideLength=objParentMenuItemContainer.offsetHeight;var intHideStartAt=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemContainer)+(blnCurrentMenuItemHasSeperator?1:0);HXWebJS.Controls.PopupMenu.hide_border_partly(strWebPopupMenuControlCode,strHidePosition,intHideStartAt,intHideLength)}};HXWebJS.MenuHelper._Internal._get_master_menu_item_div_object=function(strMenuWebPartHtmlId,strCurrentMasterMenuItemCode){var objDivMasterMenuItemsArea=document.getElementById(strMenuWebPartHtmlId);if(objDivMasterMenuItemsArea==null){return}var objHtmlItemList=HXWebJS.DOM.FindElementsById("hxmastermenuitem_container",objDivMasterMenuItemsArea);var arrTemp=HXWebJS.DOM.FindElementsByAttribute("hx_mastermenuitem_code",strCurrentMasterMenuItemCode,null,objHtmlItemList);if(arrTemp!=null&&arrTemp.length>0){return arrTemp[0]}return null};HXWebJS.MenuHelper._Internal._hxsysmenu__body_onclicked=function(eventObject){HXWebJS.MenuHelper._Internal._hide_child_popupmenus();for(key in HXWebJS.MenuHelper._Internal._registed_elements_info){var objActiveElementInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[key];if(objActiveElementInfo.current_chosn_master_menu_item_code!=""){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper._Internal._get_master_menu_item_div_object(objActiveElementInfo.control_id,objActiveElementInfo.current_chosn_master_menu_item_code);objActiveElementInfo.current_chosn_master_menu_item_code="";objActiveElementInfo.is_popup_child_menu_shown=false;if(objPreviousChoosedMasterItem==null){continue}HXWebJS.DOM.CSSClass.RemoveClass(objPreviousChoosedMasterItem,"hxmastermenuitem_hover")}}};HXWebJS.MenuHelper._Internal._hide_child_popupmenus=function(intChildMenuLevel){if(intChildMenuLevel==null){intChildMenuLevel=0}if(intChildMenuLevel<=1){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_1")}if(intChildMenuLevel<=2){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_2")}if(intChildMenuLevel<=3){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_3")}};HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_mouseover=function(strPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText,objMenuItemDiv){var objActivePopuMenuControlInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._get_popupmenu_control_info(strPopupMenuControlId);if(objActivePopuMenuControlInfo==null){return}var strMenuWebPartHtmlId=objActivePopuMenuControlInfo.ref_id;var objActiveMenuWebPartInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[strMenuWebPartHtmlId];if(objActiveMenuWebPartInfo==null){return}var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveMenuWebPartInfo.menuitem_xml_data_island_id);strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();var objXmlNode_ChildMenuItem=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objXmlNode_ChildMenuItem==null){return}var strCurrentMenuItemHasSperator=objXmlNode_ChildMenuItem.SelectSingleNode("@HAS_SEPERATOR").GetText();var blnCurrentMenuItemHasSeperator=(strCurrentMenuItemHasSperator!=""&&strCurrentMenuItemHasSperator!="0");var strHasChildMenu=objXmlNode_ChildMenuItem.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(strHasChildMenu==""||strHasChildMenu=="0"){return}var intCurrentMenuItemLevel=parseInt(strPopupMenuControlId.substr(34));var objTempXmlNode=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objTempXmlNode==null){return}var strTempMenuItemCode;for(var i=intCurrentMenuItemLevel;i>0;i--){strTempMenuItemCode=objTempXmlNode.SelectSingleNode("@PARENT_MENU_ITEM_CODE").GetText();objTempXmlNode=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strTempMenuItemCode)+"']")}if(objTempXmlNode==null){return}var strCurrentMasterMenuItemPosAt=objTempXmlNode.SelectSingleNode("@POS_AT").GetText();var intWidth=parseInt(objXmlNode_ChildMenuItem.SelectSingleNode("@MAX_CHILD_MENU_TEXT_WIDTH").GetText());var intChildMenuItemLevel=intCurrentMenuItemLevel+1;HXWebJS.MenuHelper._Internal._init_and_show_popup_child_menu_area(objActiveMenuWebPartInfo,intChildMenuItemLevel,objMenuItemDiv,strChoosedMenuItemKey,intWidth,strCurrentMasterMenuItemPosAt,blnCurrentMenuItemHasSeperator)};HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_mouseout=function(strCurrentPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText,objMenuItemDiv,objEventData){var objActivePopuMenuControlInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._get_popupmenu_control_info(strCurrentPopupMenuControlId);if(objActivePopuMenuControlInfo==null){return}var strMenuWebPartHtmlId=objActivePopuMenuControlInfo.ref_id;var objActiveMenuWebPartInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[strMenuWebPartHtmlId];if(objActiveMenuWebPartInfo==null){return}var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveMenuWebPartInfo.menuitem_xml_data_island_id);strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();if(strCurrentPopupMenuControlId.indexOf("hxmastermenu_popupchildmenu_level_")==-1){return}if(objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"' and @HAS_CHILD_MENU != '0']")!=null){var objToElement=objEventData.relatedTarget;var intChildMenuItemLevel=parseInt(strCurrentPopupMenuControlId.substr(34))+1;var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_"+intChildMenuItemLevel.toString();var blnMoveToNextLevelMenuArea=HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement);if(blnMoveToNextLevelMenuArea){return true}HXWebJS.MenuHelper._Internal._hide_child_popupmenus(intChildMenuItemLevel)}};HXWebJS.MenuHelper._Internal._fnhxchildmenuarea_mouseout=function(strCurrentPopupMenuControlId,objPopupMenuContainerDiv,objEventData){var objActivePopuMenuControlInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._get_popupmenu_control_info(strCurrentPopupMenuControlId);if(objActivePopuMenuControlInfo==null){return}var strMenuWebPartHtmlId=objActivePopuMenuControlInfo.ref_id;var objActiveMenuWebPartInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[strMenuWebPartHtmlId];if(objActiveMenuWebPartInfo==null){return}var objToElement=objEventData.relatedTarget;var intCurrentPopupMenuControlLevel=parseInt(strCurrentPopupMenuControlId.substr(34));var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_"+(intCurrentPopupMenuControlLevel+1).toString();var blnHideCurrentPopupMenu=true;if(intCurrentPopupMenuControlLevel==1&&(objToElement.id=="hxmastermenuitem_container"||objToElement.id=="img_mastermenuitem_icon"||objToElement.id=="spn_mastermenuitem_text")){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu&&HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement)){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu&&intCurrentPopupMenuControlLevel>1&&HXWebPopupMenuControl.is_element_in_popupmencontrol("hxmastermenu_popupchildmenu_level_"+(intCurrentPopupMenuControlLevel-1).toString(),objToElement)){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu){HXWebJS.MenuHelper._Internal._hide_child_popupmenus();if(objActiveMenuWebPartInfo.current_chosn_master_menu_item_code!=""){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper._Internal._get_master_menu_item_div_object(objActiveMenuWebPartInfo.control_id,objActiveMenuWebPartInfo.current_chosn_master_menu_item_code);if(objPreviousChoosedMasterItem!=null){HXWebJS.DOM.CSSClass.RemoveClass(objPreviousChoosedMasterItem,"hxmastermenuitem_hover");objActiveMenuWebPartInfo.current_chosn_master_menu_item_code=""}}}};HXWebJS.MenuHelper._Internal._fnhxchildmenuitem_onclicked=function(strPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText){HXWebJS.MenuHelper._Internal._hide_child_popupmenus();var objActivePopuMenuControlInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._get_popupmenu_control_info(strPopupMenuControlId);if(objActivePopuMenuControlInfo==null){return}var strMenuWebPartHtmlId=objActivePopuMenuControlInfo.ref_id;var objActiveMenuWebPartInfo=HXWebJS.MenuHelper._Internal._registed_elements_info[strMenuWebPartHtmlId];if(objActiveMenuWebPartInfo==null){return}var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveMenuWebPartInfo.menuitem_xml_data_island_id);strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();var objXmlNode_ChildMenuItem=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objXmlNode_ChildMenuItem==null){return}var strMenuCmdTagName=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_ITEM_NAME").GetText();var strHasChildMenu=objXmlNode_ChildMenuItem.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(strHasChildMenu!=""&&strHasChildMenu!="0"){return}var strCurrentChildMenuItemHref=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_COMMAND_HREF").GetText();if(strCurrentChildMenuItemHref!=""){var strShowIn=objXmlNode_ChildMenuItem.SelectSingleNode("@SHOW_IN_STYLE").GetText();if(strShowIn==""){strShowIn=objActiveMenuWebPartInfo.dft_show_page_in}var strCurrentMenuCommandCode=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_COMMAND_CODE").GetText();HXWebJS.MenuHelper.ExecuteMenuCommand(strCurrentMenuCommandCode,strCurrentChildMenuItemHref,strShowIn,false,strMenuCmdTagName)}};HXWebJS.MenuHelper.ExecuteMenuCommand=function(strMenuCommandCode,strMenuCmdHref,strShowIn,blnIsMasterMenuItem,strMenuCmdTagName,blnIsRecordLastAccessedCmd){if(strMenuCmdHref==null||strMenuCmdHref==""){return}if(blnIsRecordLastAccessedCmd==null){blnIsRecordLastAccessedCmd=true}if(blnIsRecordLastAccessedCmd&&strMenuCommandCode!=""&&!blnIsMasterMenuItem){if(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6"){}else{HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBMENUHELPER_RECORD_RECENTLY_ACCESS_MENU_CMD",strMenuCommandCode,null,"TrustHX.HXWWW501","TrustHX.HXWWW501.HXWebMenuHelper")}}if(strMenuCmdHref.indexOf("javascript:")==0){eval(strMenuCmdHref.substr(11));return}if(strShowIn==null||strShowIn==""){strShowIn="new_page"}var strWebPageName=strMenuCmdHref;if(strShowIn=="content_zone"){if(!HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined("hxmainpage_navigate_to_page")){var objIframeContentPage=HXWebJS.DOM.FindFirstElementById("HXContentPage");if(objIframeContentPage!=null&&objIframeContentPage.style.display=="none"){objIframeContentPage.style.display="";var objHXWebSmallPageContainer=HXWebJS.DOM.FindFirstElementById("HXWebSmallPageContainerTable");if(objHXWebSmallPageContainer!=null&&objHXWebSmallPageContainer.style.display==""){objHXWebSmallPageContainer.style.display="none"}}}}var objWindowSetting;if(strShowIn=="content_zone"){objWindowSetting={show_style:10,window_name:"HXContentPage",web_page_menu_cmd_code:strMenuCommandCode,web_page_tag_name:strMenuCmdTagName}}else{if(strShowIn=="self"){objWindowSetting={show_style:0,window_name:"_top"}}else{objWindowSetting={show_style:0,window_name:"_blank"}}}if(strMenuCmdHref.indexOf("hxdynamiceditpage:")==0){strWebPageName=strMenuCmdHref.substr(18);HXWebJS.AppUtility.OpenCommonDataEditPageViaScreenLayoutFile(strWebPageName,null,null,objWindowSetting);return}else{if(strMenuCmdHref.indexOf("hxdynamiclistpage:")==0){strWebPageName=strMenuCmdHref.substr(18);HXWebJS.AppUtility.OpenCommonDataListPageViaScreenLayoutFile(strWebPageName,objWindowSetting);return}}var re=new RegExp("^(hxdynamic)(\\w)+(:)(\\w)+");if(re.test(strMenuCmdHref)){var strUrl=HXWebJS.Navigation._InternalFunctions._BuildDynamicPageFullUrl(strMenuCmdHref);if(strUrl==null){return}HXWebJS.Navigation._InternalFunctions._open_web_page_via_setting(strUrl,objWindowSetting);return}HXWebJS.Navigation._InternalFunctions._open_web_page_via_setting(gstrWebRootPath+strWebPageName,objWindowSetting)};HXWebJS.MenuHelper.PopupStyleMenu={};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions={};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode="";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._IsPopupMenuShownStatus=false;HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._MasterMenuItemsDIVContainerArea=null;HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._ShowChildMenuOnHover=true;HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData="hxxml_menuhelper__menu_item_data";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._onloadprocess=function(){var objTemp=HXWebJS.DOM.FindElementsByAttribute("hx_menuhelper__master_menu_items_area","1","div");if(objTemp==null||objTemp.length==null||objTemp.length==0){return}var objDivContainerArea=objTemp[0];var strShowChildMenuOnHover=HXWebJS.DOM.ElementAttributeGetValue(objDivContainerArea,"hx_menuhelper__show_child_menu_onhover");if(strShowChildMenuOnHover=="0"){HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._ShowChildMenuOnHover=false}HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData=HXWebJS.DOM.ElementAttributeGetValue(objDivContainerArea,"hx_menuhelper__menu_items_data_xml_island_name");HXWebJS.EventManager.AddListener(objDivContainerArea,"mouseover",HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu_mastermenuitem_onmouseover_or_clicked);HXWebJS.EventManager.AddListener(objDivContainerArea,"mouseout",HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu_mastermenuitem_onmouseout);HXWebJS.EventManager.AddListener(objDivContainerArea,"click",HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu_mastermenuitem_onmouseover_or_clicked);HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._MasterMenuItemsDIVContainerArea=objDivContainerArea;HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__body_onclicked)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._onloadprocess);HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus=function(intChildMenuLevel){if(intChildMenuLevel==null){intChildMenuLevel=0}if(intChildMenuLevel<=1){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_1")}if(intChildMenuLevel<=2){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_2")}if(intChildMenuLevel<=3){HXWebPopupMenuControl.hide("hxmastermenu_popupchildmenu_level_3")}};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__get_master_menu_item_div_object=function(str_master_menu_item_code){var objDivMasterMenuItemsArea=HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._MasterMenuItemsDIVContainerArea;if(objDivMasterMenuItemsArea==null){return}var objDivItemList=HXWebJS.DOM.FindElementsById("div_hxmastermenuitem",objDivMasterMenuItemsArea);if(objDivItemList!=null){for(var i=0;i<objDivItemList.length;i++){if(objDivItemList[i].getAttribute("hx_mastermenuitem_code")==str_master_menu_item_code){return objDivItemList[i]}}}else{return null}};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__body_onclicked=function(){if(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode!=""){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__get_master_menu_item_div_object(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode);if(objPreviousChoosedMasterItem==null){return}objPreviousChoosedMasterItem.className="hxmastermenuitem";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode="";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._IsPopupMenuShownStatus=false}HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus()};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu_mastermenuitem_onmouseover_or_clicked=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);objEventData.stopPropagation();var objThis=objEventData.target;if(objThis.id!="div_hxmastermenuitem"){return}var blnHoverOnMenuItem=(objEventData.type=="mouseover"?true:false);var objHXXmlDocForMasterMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData);var strCurrentMasterMenuItemCode=objThis.getAttribute("hx_mastermenuitem_code");var objXmlNode=objHXXmlDocForMasterMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+strCurrentMasterMenuItemCode+"']");var strMenuCmdTagName=objXmlNode.SelectSingleNode("@MENU_ITEM_NAME").GetText();var strCurrentMasterMenuItemHasSubMenu=objXmlNode.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(blnHoverOnMenuItem){objThis.className="hxmastermenuitem_hover"}if(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode!=""&&HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode!=strCurrentMasterMenuItemCode){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__get_master_menu_item_div_object(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode);if(objPreviousChoosedMasterItem!=null){objPreviousChoosedMasterItem.className="hxmastermenuitem";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode="";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus()}}if(strCurrentMasterMenuItemHasSubMenu=="0"&&blnHoverOnMenuItem==true){return}if(blnHoverOnMenuItem==false){var strCurrentMasterMenuItemHref=objXmlNode.SelectSingleNode("@MENU_COMMAND_HREF").GetText();if(strCurrentMasterMenuItemHref==""){return}var strShowIn=objXmlNode.SelectSingleNode("@SHOW_IN_STYLE").GetText();var strCurrentMenuCommandCode=objXmlNode.SelectSingleNode("@MENU_COMMAND_CODE").GetText();HXWebJS.MenuHelper.ExecuteMenuCommand(strCurrentMenuCommandCode,strCurrentMasterMenuItemHref,strShowIn,true,strMenuCmdTagName);HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._IsPopupMenuShownStatus=false;return}var blnShowChildMenuOnHover=HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._ShowChildMenuOnHover;if(blnHoverOnMenuItem&&blnShowChildMenuOnHover==false){return}var intWidth=parseInt(objXmlNode.SelectSingleNode("@MAX_CHILD_MENU_TEXT_WIDTH").GetText());var strCurrentMasterMenuItemPosAt=objXmlNode.SelectSingleNode("@POS_AT").GetText();HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._init_and_show_popup_child_menu_area(1,objThis,strCurrentMasterMenuItemCode,intWidth,strCurrentMasterMenuItemPosAt);HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode=strCurrentMasterMenuItemCode;HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._IsPopupMenuShownStatus=true;objThis.className="hxmastermenuitem_choosed"};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu_mastermenuitem_onmouseout=function(e){var objEventData=HXWebJS.EventManager.GetCurrentEventData(e);objEventData.stopPropagation();var objThis=objEventData.target;if(objThis.id!="div_hxmastermenuitem"){return}var objToElement=objEventData.relatedTarget;var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_1";if(HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement)){return}HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus();objThis.className="hxmastermenuitem"};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._init_and_show_popup_child_menu_area=function(intChildMenuItemLevel,objParentMenuItemDIV,strParentMenuItemCode,intChildPopupMenuAreaWidth,strCurrentMasterMenuItemPosAt){var strWebPopupMenuControlCode="hxmastermenu_popupchildmenu_level_"+intChildMenuItemLevel;if(!HXWebPopupMenuControl.is_registered(strWebPopupMenuControlCode)){HXWebPopupMenuControl.register(strWebPopupMenuControlCode,100,false,HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_onclicked,HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_mouseover,HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_mouseout,HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuarea_mouseout);HXWebJS.Controls.PopupMenu.set_zIndex_offset(strWebPopupMenuControlCode,intChildMenuItemLevel)}var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData);HXWebPopupMenuControl.clear_items(strWebPopupMenuControlCode);HXWebPopupMenuControl.fill_items(strWebPopupMenuControlCode,objHXXmlDocForMenuItemData.GetRootXmlNode(),"RS_ROW[@MENU_ITEM_LEVEL="+(intChildMenuItemLevel+1).toString()+" and @PARENT_MENU_ITEM_CODE='"+strParentMenuItemCode+"']","@MENU_ITEM_CODE","@MENU_ITEM_NAME","@HAS_SEPERATOR","@HAS_CHILD_MENU","@IMG_CLASS_NAME");var intLeft,intTop;if(intChildMenuItemLevel==1){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemDIV)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemDIV)+objParentMenuItemDIV.offsetHeight-1;if(strCurrentMasterMenuItemPosAt!="L"){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemDIV)+1+objParentMenuItemDIV.offsetWidth-intChildPopupMenuAreaWidth}}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemDIV)+objParentMenuItemDIV.offsetWidth;intTop=HXWebJS.DOM.GetElementTopPosition(objParentMenuItemDIV);if(strCurrentMasterMenuItemPosAt!="L"){intLeft=HXWebJS.DOM.GetElementLeftPosition(objParentMenuItemDIV)-intChildPopupMenuAreaWidth}}HXWebPopupMenuControl.show(strWebPopupMenuControlCode,strCurrentMasterMenuItemPosAt,intLeft,intTop,intChildPopupMenuAreaWidth);if(intChildMenuItemLevel==1){if(strCurrentMasterMenuItemPosAt=="L"){HXWebPopupMenuControl.hide_top_border_partly(strWebPopupMenuControlCode,1,objParentMenuItemDIV.offsetWidth-2)}else{HXWebPopupMenuControl.hide_top_border_partly(strWebPopupMenuControlCode,intChildPopupMenuAreaWidth-objParentMenuItemDIV.offsetWidth+1,objParentMenuItemDIV.offsetWidth-2)}}};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_mouseover=function(strPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText,objMenuItemDiv){strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData);var objXmlNode_ChildMenuItem=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objXmlNode_ChildMenuItem==null){return}var strHasChildMenu=objXmlNode_ChildMenuItem.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(strHasChildMenu==""||strHasChildMenu=="0"){return}var intCurrentMenuItemLevel=parseInt(strPopupMenuControlId.substr(34));var objTempXmlNode=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objTempXmlNode==null){return}var strTempMenuItemCode;for(var i=intCurrentMenuItemLevel;i>0;i--){strTempMenuItemCode=objTempXmlNode.SelectSingleNode("@PARENT_MENU_ITEM_CODE").GetText();objTempXmlNode=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strTempMenuItemCode)+"']")}if(objTempXmlNode==null){return}var strCurrentMasterMenuItemPosAt=objTempXmlNode.SelectSingleNode("@POS_AT").GetText();var intWidth=parseInt(objXmlNode_ChildMenuItem.SelectSingleNode("@MAX_CHILD_MENU_TEXT_WIDTH").GetText());var intChildMenuItemLevel=intCurrentMenuItemLevel+1;HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._init_and_show_popup_child_menu_area(intChildMenuItemLevel,objMenuItemDiv,strChoosedMenuItemKey,intWidth,strCurrentMasterMenuItemPosAt)};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_mouseout=function(strCurrentPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText,objMenuItemDiv,objEventData){strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData);if(strCurrentPopupMenuControlId.indexOf("hxmastermenu_popupchildmenu_level_")==-1){return}if(objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"' and @HAS_CHILD_MENU != '0']")!=null){var objToElement=objEventData.relatedTarget;var intChildMenuItemLevel=parseInt(strCurrentPopupMenuControlId.substr(34))+1;var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_"+intChildMenuItemLevel.toString();if(objToElement.id=="hr_hxpopupmenucontrol_partlyline"){var objActiveElementInfo=HXWebJS.Controls.PopupMenu._InternalFunctions._registed_elements_info[strCurrentPopupMenuControlId];if(objActiveElementInfo.obj_for_hide_top_border_partly===objToElement){return}}if(HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement)){return}HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus(intChildMenuItemLevel)}};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuarea_mouseout=function(strCurrentPopupMenuControlId,objPopupMenuContainerDiv,objEventData){var objToElement=objEventData.relatedTarget;var intCurrentPopupMenuControlLevel=parseInt(strCurrentPopupMenuControlId.substr(34));var strChildLevelPopupMenuControlId="hxmastermenu_popupchildmenu_level_"+(intCurrentPopupMenuControlLevel+1).toString();var blnHideCurrentPopupMenu=true;if(intCurrentPopupMenuControlLevel==1&&objToElement.id=="div_hxmastermenuitem"){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu&&HXWebPopupMenuControl.is_element_in_popupmencontrol(strChildLevelPopupMenuControlId,objToElement)){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu&&intCurrentPopupMenuControlLevel>1&&HXWebPopupMenuControl.is_element_in_popupmencontrol("hxmastermenu_popupchildmenu_level_"+(intCurrentPopupMenuControlLevel-1).toString(),objToElement)){blnHideCurrentPopupMenu=false}if(blnHideCurrentPopupMenu){HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus();if(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode!=""){var objPreviousChoosedMasterItem=HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hxsysmenu__get_master_menu_item_div_object(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode);if(objPreviousChoosedMasterItem!=null){objPreviousChoosedMasterItem.className="hxmastermenuitem";HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._CurrentChoosedMasterMenuItemCode=""}}}};HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._fnhxchildmenuitem_onclicked=function(strPopupMenuControlId,objPopupMenuShowEventSrcObject,strChoosedMenuItemKey,strChoosedMenuItemText){HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._hide_child_popupmenus();strChoosedMenuItemKey=strChoosedMenuItemKey.toLowerCase();var objHXXmlDocForMenuItemData=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(HXWebJS.MenuHelper.PopupStyleMenu._InternalFunctions._XmlIslandNameOfMenuItemsData);var objXmlNode_ChildMenuItem=objHXXmlDocForMenuItemData.SelectSingleNode("//RS_ROW[@MENU_ITEM_CODE='"+HXWebJS.Xml.MarkXMLSpecialChars(strChoosedMenuItemKey)+"']");if(objXmlNode_ChildMenuItem==null){return}var strMenuCmdTagName=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_ITEM_NAME").GetText();var strHasChildMenu=objXmlNode_ChildMenuItem.SelectSingleNode("@HAS_CHILD_MENU").GetText();if(strHasChildMenu!=""&&strHasChildMenu!="0"){return}var strCurrentChildMenuItemHref=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_COMMAND_HREF").GetText();if(strCurrentChildMenuItemHref!=""){var strShowIn=objXmlNode_ChildMenuItem.SelectSingleNode("@SHOW_IN_STYLE").GetText();var strCurrentMenuCommandCode=objXmlNode_ChildMenuItem.SelectSingleNode("@MENU_COMMAND_CODE").GetText();HXWebJS.MenuHelper.ExecuteMenuCommand(strCurrentMenuCommandCode,strCurrentChildMenuItemHref,strShowIn,false,strMenuCmdTagName)}};HXWebJS.Controls.SmallPage={};HXWebJS.Controls.SmallPage._InternalFunctions={};HXWebSmallPageControl=HXWebJS.Controls.SmallPage;HXWebSmallPageControl.register=function(str_webcontrol_id,jsonSmallPageControlSetting){if(!HXWebSmallPageControl._InternalFunctions._registed_elements_info){HXWebSmallPageControl._InternalFunctions._registed_elements_info={}}if(jsonSmallPageControlSetting==null){return}var c=HXWebSmallPageControl._InternalFunctions._registed_elements_info[str_webcontrol_id];if(!c){var objRootContainer=HXWebJS.DOM.GetElementById(str_webcontrol_id);if(objRootContainer==null){return}var c=new Object();c={webcontrol_id:str_webcontrol_id,container_object:objRootContainer,show_caption:(jsonSmallPageControlSetting.show_caption==null?true:jsonSmallPageControlSetting.show_caption),show_tag:!!jsonSmallPageControlSetting.show_tag,auto_refresh_seconds:(jsonSmallPageControlSetting.auto_refresh_seconds==null?0:jsonSmallPageControlSetting.auto_refresh_seconds),auto_resize_container_width:!!jsonSmallPageControlSetting.auto_resize_container_width,auto_resize_container_height:!!jsonSmallPageControlSetting.auto_resize_container_height,smallpage_caption:(jsonSmallPageControlSetting.smallpage_caption==null?"":jsonSmallPageControlSetting.smallpage_caption),smallpage_url:(jsonSmallPageControlSetting.smallpage_url==null?"":jsonSmallPageControlSetting.smallpage_url),smallpage_tag_text:(jsonSmallPageControlSetting.smallpage_tag_text==null?"":jsonSmallPageControlSetting.smallpage_tag_text),smallpage_tag_href:(jsonSmallPageControlSetting.smallpage_tag_href==null?"":jsonSmallPageControlSetting.smallpage_tag_href)};HXWebSmallPageControl._InternalFunctions._registed_elements_info[str_webcontrol_id]=c}};HXWebSmallPageControl.demo_json_smallpagecontrolsetting_object={show_caption:true,show_tag:false,smallpage_caption:null,smallpage_url:null,smallpage_tag_text:null,smallpage_tag_href:null,auto_refresh_seconds:0,auto_resize_container_width:false,auto_resize_container_height:false};HXWebSmallPageControl.show=function(str_webcontrol_id){if(!HXWebSmallPageControl._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebSmallPageControl._InternalFunctions._registed_elements_info[str_webcontrol_id];if(objActiveElementInfo==null){return}if(objActiveElementInfo.smallpage_url==""){return}var objRootContainer=objActiveElementInfo.container_object;if(HXWebJS.DOM.FindFirstElementById("ifrm_hxwebsmallpage_window",objRootContainer)==null){HXWebSmallPageControl._InternalFunctions._init_smallpage_container(objActiveElementInfo)}var objFrameControl=HXWebJS.DOM.FindFirstElementById("ifrm_hxwebsmallpage_window",objRootContainer);HXWebJS.Core.SetFrameWindowHref(objFrameControl,HXWebPageGlobalVariables.WebRootPath+objActiveElementInfo.smallpage_url);if(objActiveElementInfo.auto_refresh_seconds>0){var objFrameWindow=HXWebJS.Core.GetFrameWindow(objFrameControl);HXWebSmallPageControl._InternalFunctions._refresh_smallpage_content(objFrameWindow,objActiveElementInfo.auto_refresh_seconds*1000,false)}};HXWebSmallPageControl._InternalFunctions._init_smallpage_container=function(objActiveElementInfo){var sb_html=new HXWebStringBuilder();sb_html.append('<div id="div_hxwebsmallpage_area" hxwebsmallpagecontrol_id="'+objActiveElementInfo.webcontrol_id+'" style="position:relative;left:0px;top:0px;width:100%;height:100%;">');var blnIsShowCaption=objActiveElementInfo.show_caption;var strFrameWinHeight="100%";if(blnIsShowCaption){sb_html.append('<span id="spn_hxwebsmallpage_caption" class="hxlbl_normal" style="position:absolute;left:0px;top:0px;margin-top:5px;margin-left:4px;">');sb_html.append(HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.smallpage_caption));sb_html.append("</span>");if(objActiveElementInfo.show_tag){sb_html.append('<img  id="img_hxwebsmallpage_tag" src="../images/hxpub_startpage_tag.png" style="position:absolute;right:0px;top:0px;margin-top:3px;" onclick="HXWebSmallPageControl._InternalFunctions._tag_text_onclicked(event);" />');sb_html.append('<span id="spn_hxwebsmallpage_tagtext" class="hxlbl_hyperlink" style="position:absolute;right:0px;top:0px;width:70px;margin-top:5px;text-align:center;cursor:pointer;" onclick="HXWebSmallPageControl._InternalFunctions._tag_text_onclicked(event);">');sb_html.append(HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.smallpage_tag_text));sb_html.append("</span>")}strFrameWinHeight=(objActiveElementInfo.container_object.offsetHeight-24-2)+"px"}sb_html.append('<iframe id="ifrm_hxwebsmallpage_window" src="" marginheight="0" marginwidth="0" border="0" allowtransparency="true" frameBorder="0" scrolling="no"');sb_html.append(" onload=\"HXWebSmallPageControl.auto_resize_framewin('"+objActiveElementInfo.webcontrol_id+"')\"");sb_html.append(' style="z-index:101;position:absolute;left:0px;top:24px;width:100%;background-color:Transparent;height:'+strFrameWinHeight+'">');sb_html.append("</iframe></div>");var objTemp=HXWebJS.DOM.CreateElement(sb_html.toString());objActiveElementInfo.container_object.appendChild(objTemp)};HXWebSmallPageControl._InternalFunctions._refresh_smallpage_content=function(objFrameWindow,intDelayMillSeconds,blnRefreshWindow){if(blnRefreshWindow==null){blnRefreshWindow=false}if(blnRefreshWindow){objFrameWindow.location.reload(true)}window.setTimeout(HXWebJS.Core.CreateDelegateFunction(this,HXWebSmallPageControl._InternalFunctions._refresh_smallpage_content,objFrameWindow,intDelayMillSeconds,true),intDelayMillSeconds)};HXWebSmallPageControl._InternalFunctions._tag_text_onclicked=function(e){var objHXEventData=HXWebJS.EventManager.GetCurrentEventData(e);var objSrcElement=objHXEventData.target;if(objSrcElement.id==null||(objSrcElement.id!="spn_hxwebsmallpage_tagtext"&&objSrcElement.id!="img_hxwebsmallpage_tag")){return}var strWebSmallPageControlId=objSrcElement.parentNode.getAttribute("hxwebsmallpagecontrol_id");var objActiveElementInfo=HXWebSmallPageControl._InternalFunctions._registed_elements_info[strWebSmallPageControlId];if(objActiveElementInfo==null){return}if(!objActiveElementInfo.show_tag){return}var strHref=objActiveElementInfo.smallpage_tag_href;if(strHref==null||strHref==""){return}if(strHref.indexOf("javascript:")==0){eval(strHref.substr(11))}else{HXWebNavigation.OpenWebPage(HXWebPageGlobalVariables.WebRootPath+strHref,"_blank")}};HXWebSmallPageControl.set_caption_tag_text=function(str_webcontrol_id,strCaptionText,strTagText){if(!HXWebSmallPageControl._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebSmallPageControl._InternalFunctions._registed_elements_info[str_webcontrol_id];if(objActiveElementInfo==null){return}if(!objActiveElementInfo.show_caption){return}if(objActiveElementInfo.container_object==null){return}var objTempSpan=HXWebJS.DOM.FindFirstElementById("spn_hxwebsmallpage_caption",objActiveElementInfo.container_object);if(objTempSpan!=null){HXWebJS.DOM.ElementSetInnerText(objTempSpan,strCaptionText)}objTempSpan=HXWebJS.DOM.FindFirstElementById("spn_hxwebsmallpage_tagtext",objActiveElementInfo.container_object);if(objTempSpan!=null){HXWebJS.DOM.ElementSetInnerText(objTempSpan,strTagText)}};HXWebSmallPageControl.auto_resize_framewin=function(str_webcontrol_id){if(!HXWebSmallPageControl._InternalFunctions._registed_elements_info){return}var objActiveElementInfo=HXWebSmallPageControl._InternalFunctions._registed_elements_info[str_webcontrol_id];if(objActiveElementInfo==null){return}if(objActiveElementInfo.container_object==null){return}var objTempIFrameHtmlControl=HXWebJS.DOM.FindFirstElementById("ifrm_hxwebsmallpage_window",objActiveElementInfo.container_object);if(objTempIFrameHtmlControl==null){return}var blnAutoAdjustWidth=objActiveElementInfo.auto_resize_container_width;var blnAutoAdjustHeight=objActiveElementInfo.auto_resize_container_height;HXWebCommonPageHelper.auto_adjust_frame_win_width_and_height(objTempIFrameHtmlControl,blnAutoAdjustWidth,blnAutoAdjustHeight)};HXWebJS.Controls.Chart={};HXWebJS.Controls.Chart._Internal={};HXWebChartControl=HXWebJS.Controls.Chart;HXWebChartControl.register=function(str_chart_control_id,options){var obj_chart_container=document.getElementById(str_chart_control_id);if(obj_chart_container==null){return}if(options==null){return}if(typeof(echarts)=="undefined"){return}if(echarts==null){return}var strChartType=options.chart_type;if(strChartType==null||strChartType==""){strChartType="bar"}else{strChartType=strChartType.toLowerCase()}if(!HXWebChartControl._Internal._registed_elements_info){HXWebChartControl._Internal._registed_elements_info={}}var ecObject=echarts.init(obj_chart_container);var fnCallback=function(param){HXWebChartControl._Internal._chart_data_point_clicked_callback(str_chart_control_id,param)};ecObject.on(echarts.config.EVENT.CLICK,fnCallback);var c=HXWebChartControl._Internal._registed_elements_info[str_chart_control_id];if(!c){var c=new Object();c={chart_control_id:str_chart_control_id,chart_type:strChartType,chart_control_container:obj_chart_container,echart_object:ecObject,extend_webpart_type:options.extend_webpart_type,chart_xml_data_island_id:options.chart_xml_data_island_id,field_code_of_category:options.field_code_of_category,field_code_of_series:options.field_code_of_series,field_code_of_value:options.field_code_of_value,field_code_of_value_2:options.field_code_of_value_2,is_show_legend:(options.is_show_legend!=null&&options.is_show_legend==false?false:true),legend_layout_setting:options.legend_layout_setting,is_show_minmax_mark_point:options.is_show_minmax_mark_point,is_show_average_mark_line:options.is_show_average_mark_line,chart_background_color:options.chart_background_color,axis_xy_exchange:options.axis_xy_exchange,is_fill_area_mode:options.is_fill_area_mode,is_show_toolbox:options.is_show_toolbox,ui_text_cnt_of_value:options.ui_text_cnt_of_value,ui_text_cnt_of_value_2:options.ui_text_cnt_of_value_2,map_type:options.map_type,title_object_or_view_code:options.title_object_or_view_code,title_ui_text_code:options.title_ui_text_code,title_ui_text_cnt:options.title_ui_text_cnt,loading_option:options.loading_option,grid_padding:options.grid_padding,fn_callback_before_chart_show:options.fn_callback_before_chart_show,fn_callback_data_point_clicked:options.fn_callback_data_point_clicked};HXWebChartControl._Internal._registed_elements_info[str_chart_control_id]=c}};HXWebChartControl.register_options_demo={chart_type:"line",is_show_legend:true,extend_webpart_type:"",chart_xml_data_island_id:"",field_code_of_category:"",field_code_of_series:"",field_code_of_value:"",field_code_of_value_2:"",is_show_minmax_mark_point:false,is_show_average_mark_line:false,chart_background_color:"white",axis_xy_exchange:false,is_fill_area_mode:false,map_type:"",title_object_or_view_code:"",title_ui_text_code:"",title_ui_text_cnt:"",ui_text_cnt_of_value:"",ui_text_cnt_of_value_2:"",fn_callback_before_chart_show:null,fn_callback_data_point_clicked:null};HXWebChartControl.update_chart_xml_data=function(str_chart_control_id,strNewChartXmlData){if(!HXWebChartControl._Internal._registed_elements_info){return}var objActiveElementInfo=HXWebChartControl._Internal._registed_elements_info[str_chart_control_id];if(!objActiveElementInfo){return}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.chart_xml_data_island_id);objHXXmlDoc.ReloadXML(strNewChartXmlData)};HXWebChartControl.show_or_refresh_chart=function(str_chart_control_id){if(!HXWebChartControl._Internal._registed_elements_info){return}var objActiveElementInfo=HXWebChartControl._Internal._registed_elements_info[str_chart_control_id];if(!objActiveElementInfo){return}var strChartType=objActiveElementInfo.chart_type;var ecObject=objActiveElementInfo.echart_object;ecObject.clear();ecObject.showLoading(objActiveElementInfo.loading_option?objActiveElementInfo.loading_option:{effect:"bubble"});var ecOption={};if(objActiveElementInfo.grid_padding!=null&&strChartType!="pie"){var arrTemp=objActiveElementInfo.grid_padding.split(/,/g);if(arrTemp.length==1){ecOption.grid={x:arrTemp[0],y:arrTemp[0],x2:arrTemp[0],y2:arrTemp[0]}}else{ecOption.grid={x:arrTemp[0],y:arrTemp[1],x2:arrTemp[2],y2:arrTemp[3]}}}var strChartTitle=HXWebChartControl._Internal._get_chart_title_text(objActiveElementInfo);if(strChartTitle!=null&&strChartTitle!=""){ecOption.title={text:strChartTitle,x:(strChartType=="radar"?"left":"center")}}ecOption.tooltip={trigger:(strChartType=="scatter"||strChartType=="funnel"||strChartType=="map"||strChartType=="pie"?"item":"axis")};ecOption.backgroundColor=objActiveElementInfo.chart_background_color;if(ecOption.backgroundColor==null){ecOption.backgroundColor="rgba(255,255,255,1)"}var blnShowToolbox=objActiveElementInfo.is_show_toolbox;if(blnShowToolbox==null){blnShowToolbox=true}ecOption.toolbox={show:blnShowToolbox,feature:{saveAsImage:{show:true}}};var chartData=HXWebChartControl._Internal._BuildChartData_Main(objActiveElementInfo);if(strChartType=="line"||strChartType=="bar"){if(objActiveElementInfo.axis_xy_exchange){ecOption.yAxis=[{type:"category",data:chartData.category_data}];ecOption.xAxis=[{type:"value"}]}else{ecOption.xAxis=[{type:"category",data:chartData.category_data}];ecOption.yAxis=[{type:"value"}]}}else{if(strChartType=="pie"){ecOption.tooltip.formatter="{b} : {c} ({d}%)"}else{if(strChartType=="gauge"){}else{if(strChartType=="scatter"){ecOption.xAxis=[{type:"value",scale:true}];ecOption.yAxis=[{type:"value",scale:true}]}else{if(strChartType=="radar"){ecOption.polar=[{indicator:chartData.indicator_data}]}else{if(strChartType=="funnel"){ecOption.tooltip.formatter="{b} : {c}"}else{if(strChartType=="map"){ecOption.dataRange={min:0,max:2500,x:"left",y:"bottom",text:["高","低"],calculable:true};var blnIsCurrentLanguageChinese=(typeof(mstrCurrentWebLanguageCulture)!="undefined"&&mstrCurrentWebLanguageCulture.toLowerCase()=="zh-cn");if(!blnIsCurrentLanguageChinese){ecOption.dataRange.text=["High","Low"]}}}}}}}}if(objActiveElementInfo.is_show_legend&&strChartType!="gauge"){if(objActiveElementInfo.legend_layout_setting!=null){var arrTemp=objActiveElementInfo.legend_layout_setting.split(/,/g);var strOrient=(arrTemp.length>2?arrTemp[2]:arrTemp[0]=="center"?"horizontal":"vertucak");ecOption.legend={x:arrTemp[0],y:arrTemp[1],orient:strOrient,data:chartData.legend_data}}else{if(strChartType=="map"){ecOption.legend={x:"left",y:"top",orient:"vertical",data:chartData.legend_data}}else{if(strChartType=="radar"){ecOption.legend={x:"right",y:"bottom",data:chartData.legend_data}}else{ecOption.legend={x:"center",y:"bottom",data:chartData.legend_data}}}}}ecOption.series=chartData.series_data;if(objActiveElementInfo.fn_callback_before_chart_show!=null){objActiveElementInfo.fn_callback_before_chart_show(str_chart_control_id,ecOption,objActiveElementInfo.extend_webpart_type)}ecObject.hideLoading();ecObject.setOption(ecOption)};HXWebChartControl.get_echart_object=function(str_chart_control_id){if(!HXWebChartControl._Internal._registed_elements_info){return}var objActiveElementInfo=HXWebChartControl._Internal._registed_elements_info[str_chart_control_id];if(!objActiveElementInfo){return}return objActiveElementInfo.echart_object};HXWebChartControl._Internal._chart_data_point_clicked_callback=function(str_chart_control_id,param){if(!HXWebChartControl._Internal._registed_elements_info){return}var objActiveElementInfo=HXWebChartControl._Internal._registed_elements_info[str_chart_control_id];if(objActiveElementInfo==null){return}var fnCallbackDataPointClicked=objActiveElementInfo.fn_callback_data_point_clicked;if(fnCallbackDataPointClicked==null){return}var strCategory=param.name;var strSeries=param.seriesName;var strValue=param.value;fnCallbackDataPointClicked(objActiveElementInfo.chart_control_id,strCategory,strSeries,strValue,param,objActiveElementInfo.extend_webpart_type)};HXWebChartControl._Internal._BuildChartData_Main=function(objActiveElementInfo){var strChartType=objActiveElementInfo.chart_type;var strFieldCodeOfCategory=objActiveElementInfo.field_code_of_category==null?"":objActiveElementInfo.field_code_of_category.toUpperCase();var strFieldCodeOfSeries=objActiveElementInfo.field_code_of_series==null?"":objActiveElementInfo.field_code_of_series.toUpperCase();var strFieldCodeOfValue=objActiveElementInfo.field_code_of_value==null?"":objActiveElementInfo.field_code_of_value.toUpperCase();var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(objActiveElementInfo.chart_xml_data_island_id);var objHXXmlNodeList=(objHXXmlDoc==null?[]:objHXXmlDoc.SelectNodes("//RS_ROW"));var chartData;if(strChartType=="bar"||strChartType=="line"){chartData=HXWebChartControl._Internal._BuildChartData_BarOrLine(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue)}else{if(strChartType=="pie"){chartData=HXWebChartControl._Internal._BuildChartData_Pie(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue)}else{if(strChartType=="scatter"){chartData=HXWebChartControl._Internal._BuildChartData_Scatter(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfSeries,strFieldCodeOfCategory,strFieldCodeOfValue)}else{if(strChartType=="radar"){chartData=HXWebChartControl._Internal._BuildChartData_Radar(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfValue)}else{if(strChartType=="gauge"){chartData=HXWebChartControl._Internal._BuildChartData_Gauge(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfValue)}else{if(strChartType=="funnel"){chartData=HXWebChartControl._Internal._BuildChartData_Funnel(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue)}else{if(strChartType=="map"){chartData=HXWebChartControl._Internal._BuildChartData_Map(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue)}}}}}}}return chartData};HXWebChartControl._Internal._BuildChartData_BarOrLine=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue){var chartData={category_data:[],legend_data:[],series_data:[]};if(strFieldCodeOfCategory==""||strFieldCodeOfValue==""){return chartData}var blnIsCurrentLanguageChinese=(typeof(mstrCurrentWebLanguageCulture)!="undefined"&&mstrCurrentWebLanguageCulture.toLowerCase()=="zh-cn");var strTitleOfMaxValue=(blnIsCurrentLanguageChinese?"最大值":"Max");var strTitleOfMinValue=(blnIsCurrentLanguageChinese?"最小值":"Min");var strTitleOfAverageValue=(blnIsCurrentLanguageChinese?"平均值":"Average");var objHXXmlNode;var strCategory,strSeries,strValue;var intCategoryIndex,intSeriesIndex;if(strFieldCodeOfSeries==""){strSeries="Series1";chartData.legend_data.push(strSeries);var objSeriesData={name:strSeries,type:objActiveElementInfo.chart_type,data:[],markPoint:null,markLine:null};if(objActiveElementInfo.is_show_minmax_mark_point){objSeriesData.markPoint={data:[{type:"max",name:strTitleOfMaxValue},{type:"min",name:strTitleOfMinValue}]}}if(objActiveElementInfo.is_show_average_mark_line){objSeriesData.markLine={data:[{type:"average",name:strTitleOfAverageValue}]}}chartData.series_data.push(objSeriesData)}else{for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries);if(strSeries==null||strSeries==""){strSeries="Series1"}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strSeries);if(intSeriesIndex==-1){chartData.legend_data.push(strSeries);var objSeriesData={name:strSeries,type:objActiveElementInfo.chart_type,data:[],markPoint:null,markLine:null};if(objActiveElementInfo.is_show_minmax_mark_point){objSeriesData.markPoint={data:[{type:"max",name:strTitleOfMaxValue},{type:"min",name:strTitleOfMinValue}]}}if(objActiveElementInfo.is_show_average_mark_line){objSeriesData.markLine={data:[{type:"average",name:strTitleOfAverageValue}]}}chartData.series_data.push(objSeriesData)}}}for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strCategory=objHXXmlNode.GetAttributeValue(strFieldCodeOfCategory);if(strCategory==null||strCategory==""){continue}if(strFieldCodeOfSeries==""){strSeries="Series1"}else{strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries);if(strSeries==null||strSeries==""){strSeries="Series1"}}strValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue);if(strValue==null||strValue==""){strValue="'-'"}intCategoryIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.category_data,strCategory);if(intCategoryIndex==-1){chartData.category_data.push(strCategory);intCategoryIndex=chartData.category_data.length-1;for(var i=0;i<chartData.series_data.length;i++){for(var j=chartData.series_data[i].data.length;j<chartData.category_data.length;j++){chartData.series_data[i].data.push("'-'")}}}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strSeries);chartData.series_data[intSeriesIndex].data[intCategoryIndex]=HXWebJS.Utility.ConvertToNumber(strValue)}return chartData};HXWebChartControl._Internal._BuildChartData_Pie=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue){var chartData={legend_data:[],series_data:[]};if(strFieldCodeOfCategory==""||strFieldCodeOfValue==""){return chartData}var blnHasSeriesField=(strFieldCodeOfSeries!="");var arrSeriesName=[];var objHXXmlNode;var strCategory,strSeries,strValue;var intCategoryIndex,intSeriesIndex;var objSingleSeriesData;for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strCategory=objHXXmlNode.GetAttributeValue(strFieldCodeOfCategory);if(strCategory==null||strCategory==""){continue}if(blnHasSeriesField){strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries)}else{strSeries="'-'"}strValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue);if(strValue==null||strValue==""){strValue="'-'"}intCategoryIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strCategory);if(intCategoryIndex==-1){chartData.legend_data.push(strCategory);intCategoryIndex=chartData.legend_data.length-1}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(arrSeriesName,strSeries);if(intSeriesIndex==-1){arrSeriesName.push(strSeries);intSeriesIndex=arrSeriesName.length-1;objSingleSeriesData={name:strSeries,type:"pie",data:[]};chartData.series_data.push(objSingleSeriesData)}chartData.series_data[intSeriesIndex].data.push({value:strValue,name:strCategory})}return chartData};HXWebChartControl._Internal._BuildChartData_Scatter=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfSeries,strFieldCodeOfXValue,strFieldCodeOfYValue){var chartData={legend_data:[],series_data:[]};if(strFieldCodeOfXValue==""||strFieldCodeOfYValue==""){return chartData}var blnIsCurrentLanguageChinese=(typeof(mstrCurrentWebLanguageCulture)!="undefined"&&mstrCurrentWebLanguageCulture.toLowerCase()=="zh-cn");var strTitleOfMaxValue=(blnIsCurrentLanguageChinese?"最大值":"Max");var strTitleOfMinValue=(blnIsCurrentLanguageChinese?"最小值":"Min");var strTitleOfAverageValue=(blnIsCurrentLanguageChinese?"平均值":"Average");var strFieldCodeOfPointSize=objActiveElementInfo.field_code_of_value_2;strFieldCodeOfPointSize=(strFieldCodeOfPointSize==null?"":strFieldCodeOfPointSize.toUpperCase());var blnHasSeriesField=(strFieldCodeOfSeries!="");var objHXXmlNode;var strSeries,strXValue,strYValue,strPointSize;var intSeriesIndex;var objSingleSeriesData;for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strYValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfYValue);if(strYValue==null||strYValue==""){strYValue="'-'"}if(blnHasSeriesField){strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries)}else{strSeries="'-'"}strXValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfXValue);if(strXValue==null||strXValue==""){strValue="'-'"}if(strFieldCodeOfPointSize==""){strPointSize="1"}else{strPointSize=objHXXmlNode.GetAttributeValue(strFieldCodeOfPointSize);if(strPointSize==null||strPointSize==""){strPointSize="1"}}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strSeries);if(intSeriesIndex==-1){chartData.legend_data.push(strSeries);intSeriesIndex=chartData.legend_data.length-1;objSingleSeriesData={name:strSeries,type:"scatter",data:[]};if(objActiveElementInfo.is_show_minmax_mark_point){objSingleSeriesData.markPoint={data:[{type:"max",name:strTitleOfMaxValue},{type:"min",name:strTitleOfMinValue}]}}if(objActiveElementInfo.is_show_average_mark_line){objSingleSeriesData.markLine={data:[{type:"average",name:strTitleOfAverageValue}]}}chartData.series_data.push(objSingleSeriesData)}chartData.series_data[intSeriesIndex].data.push([parseFloat(strXValue),parseFloat(strYValue),parseFloat(strPointSize)])}return chartData};HXWebChartControl._Internal._BuildChartData_Radar=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfValue){var strCaptionOfValue,strCaptionOfValue2;strCaptionOfValue=objActiveElementInfo.ui_text_cnt_of_value;if(strCaptionOfValue==null||strCaptionOfValue==""){strCaptionOfValue="Value"}strCaptionOfValue2=objActiveElementInfo.ui_text_cnt_of_value_2;if(strCaptionOfValue2==null||strCaptionOfValue2==""){strCaptionOfValue2="Value2"}var strFieldCodeOfValue2=objActiveElementInfo.field_code_of_value_2;strFieldCodeOfValue2=(strFieldCodeOfValue2==null?"":strFieldCodeOfValue2.toUpperCase());var blnHasCompareValue2=(strFieldCodeOfValue2!="");var data_of_compare_value={name:strCaptionOfValue,value:[]};var data_of_compare_value_2={name:strCaptionOfValue2,value:[]};var chartData={legend_data:(blnHasCompareValue2?[strCaptionOfValue,strCaptionOfValue2]:[strCaptionOfValue]),indicator_data:[],series_data:[{type:"radar",data:(blnHasCompareValue2?[data_of_compare_value,data_of_compare_value_2]:[data_of_compare_value])}]};if(strFieldCodeOfCategory==""||strFieldCodeOfValue==""){return chartData}var blnIsFillAreaMode=objActiveElementInfo.is_fill_area_mode;if(blnIsFillAreaMode){chartData.series_data[0].itemStyle={normal:{areaStyle:{type:"default"}}}}var arrIndicatorName=[];var objHXXmlNode;var strIndicatorName,strValue,strValue2;var intCategoryIndex;var objSingleSeriesData;for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strCategory=objHXXmlNode.GetAttributeValue(strFieldCodeOfCategory);if(strCategory==null||strCategory==""){continue}strValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue);if(strValue==null||strValue==""){strValue="'-'"}if(blnHasCompareValue2){strValue2=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue2);if(strValue2==null||strValue2==""){strValue2="'-'"}}else{strValue2="'-'"}intCategoryIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strCategory);if(intCategoryIndex==-1){arrIndicatorName.push(strCategory);intCategoryIndex=arrIndicatorName.length-1;chartData.indicator_data.push({text:strCategory});for(var j=data_of_compare_value.value.length;j<chartData.indicator_data.length;j++){data_of_compare_value.value.push("'-'")}if(blnHasCompareValue2){for(var j=data_of_compare_value_2.value.length;j<chartData.indicator_data.length;j++){data_of_compare_value_2.value.push("'-'")}}}chartData.series_data[0].data[0].value[intCategoryIndex]=parseFloat(strValue);if(blnHasCompareValue2){chartData.series_data[0].data[1].value[intCategoryIndex]=parseFloat(strValue2)}}return chartData};HXWebChartControl._Internal._BuildChartData_Gauge=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfValue){var strCaptionOfValue=objActiveElementInfo.ui_text_cnt_of_value;if(strCaptionOfValue==null||strCaptionOfValue==""){strCaptionOfValue=""}var gaugeValue=0;if(objHXXmlNodeList!=null&&objHXXmlNodeList.length>0&&strFieldCodeOfValue!=""){var strValue=objHXXmlNodeList[0].GetAttributeValue(strFieldCodeOfValue);if(strValue!=null&&strValue!=""){gaugeValue=parseFloat(strValue)}}var chartData={series_data:[{type:"gauge",data:[{name:strCaptionOfValue,value:gaugeValue}]}]};return chartData};HXWebChartControl._Internal._BuildChartData_Funnel=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue){var chartData={legend_data:[],series_data:[]};if(strFieldCodeOfCategory==""||strFieldCodeOfValue==""){return chartData}var blnHasSeriesField=(strFieldCodeOfSeries!="");var arrSeriesName=[];var objHXXmlNode;var strCategory,strSeries,strValue;var intCategoryIndex,intSeriesIndex;var objSingleSeriesData;for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strCategory=objHXXmlNode.GetAttributeValue(strFieldCodeOfCategory);if(strCategory==null||strCategory==""){continue}if(blnHasSeriesField){strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries)}else{strSeries="'-'"}strValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue);if(strValue==null||strValue==""){strValue="'-'"}intCategoryIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strCategory);if(intCategoryIndex==-1){chartData.legend_data.push(strCategory);intCategoryIndex=chartData.legend_data.length-1}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(arrSeriesName,strSeries);if(intSeriesIndex==-1){arrSeriesName.push(strSeries);intSeriesIndex=arrSeriesName.length-1;objSingleSeriesData={name:strSeries,type:"funnel",data:[]};chartData.series_data.push(objSingleSeriesData)}chartData.series_data[intSeriesIndex].data.push({value:strValue,name:strCategory})}return chartData};HXWebChartControl._Internal._BuildChartData_Map=function(objActiveElementInfo,objHXXmlNodeList,strFieldCodeOfCategory,strFieldCodeOfSeries,strFieldCodeOfValue){var chartData={legend_data:[],series_data:[]};if(strFieldCodeOfCategory==""||strFieldCodeOfValue==""){return chartData}var strMapType=objActiveElementInfo.map_type;if(strMapType==null||strMapType==""){strMapType="china"}var blnHasSeriesField=(strFieldCodeOfSeries!="");var objHXXmlNode;var strSeries,strCategory,strValue;var intSeriesIndex;var objSingleSeriesData;for(var intDataItemIndex=0;intDataItemIndex<objHXXmlNodeList.length;intDataItemIndex++){objHXXmlNode=objHXXmlNodeList[intDataItemIndex];strCategory=objHXXmlNode.GetAttributeValue(strFieldCodeOfCategory);if(strCategory==null||strCategory==""){continue}strValue=objHXXmlNode.GetAttributeValue(strFieldCodeOfValue);if(strValue==null||strValue==""){strYValue="'-'"}if(blnHasSeriesField){strSeries=objHXXmlNode.GetAttributeValue(strFieldCodeOfSeries)}else{strSeries="'-'"}intSeriesIndex=HXWebChartControl._Internal._FindValuePositionInArray(chartData.legend_data,strSeries);if(intSeriesIndex==-1){chartData.legend_data.push(strSeries);intSeriesIndex=chartData.legend_data.length-1;objSingleSeriesData={name:strSeries,type:"map",mapType:strMapType,itemStyle:{normal:{label:{show:true}},emphasis:{label:{show:true}}},data:[]};chartData.series_data.push(objSingleSeriesData)}chartData.series_data[intSeriesIndex].data.push({name:strCategory,value:parseFloat(strValue)})}return chartData};HXWebChartControl._Internal._FindValuePositionInArray=function(arrData,strValue){for(var i=0;i<arrData.length;i++){if(arrData[i]==strValue){return i}}return -1};HXWebChartControl._Internal._get_chart_title_text=function(objActiveElementInfo){var strTitleOfUITextContent=objActiveElementInfo.title_ui_text_cnt;if(strTitleOfUITextContent!=null&&strTitleOfUITextContent!=""){return strTitleOfUITextContent}var strTitleOfObjectOrViewCode=objActiveElementInfo.title_object_or_view_code;var strTitleOfUITextCode=objActiveElementInfo.title_ui_text_code;if(strTitleOfObjectOrViewCode==null||strTitleOfObjectOrViewCode==""){return""}if(strTitleOfUITextCode==null||strTitleOfUITextCode==""){return""}var objHXXmlDocOfUIText=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text__"+strTitleOfObjectOrViewCode.toLowerCase());if(objHXXmlDocOfUIText==null){return""}var objHXXmlNode=objHXXmlDocOfUIText.SelectSingleNode("//RS_ROW/@"+strTitleOfUITextCode.toUpperCase());if(objHXXmlNode==null){return""}return objHXXmlNode.GetText()};HXWebJS.Controls.PopupFlexible={};HXWebJS.Controls.PopupFlexible._Internal={};HXWebPopupFlexibleControl=HXWebJS.Controls.PopupFlexible;HXWebPopupFlexibleControl.OnControlUniqueNameGet=null;HXWebPopupFlexibleControl.OnControlUniqueNameGet__Demo=function(str_webdatacontrol_id,intLineNo,objInputTextBoxOrChooseBtn){};HXWebPopupFlexibleControl._Internal._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebPopupFlexibleControl._Internal._onfocusinprocess);HXWebJS.EventManager.AddListener(document.body,"click",HXWebPopupFlexibleControl._Internal._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebPopupFlexibleControl._Internal._onclickprocess);HXWebJS.EventManager.AddListener(document.body,"keyup",HXWebPopupFlexibleControl._Internal._onkeyup_process);HXWebJS.EventManager.AddListener(document.body,"focusout",HXWebPopupFlexibleControl._Internal._onfocusoutprocess)};HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebPopupFlexibleControl._Internal._onloadprocess);HXWebPopupFlexibleControl.register=function(str_webdatacontrol_id,str_dropdown_btn_id,dftControlOptions,fnCallbackUniqueNameGet){if(str_webdatacontrol_id==str_dropdown_btn_id){HXWebJS.Utility.ThrowErrorAndLogToConsole("弹出选择框输入html元素和下拉选择框触发按钮html元素的Id号不能相同！")}if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){HXWebPopupFlexibleControl._Internal._registed_elements_info={}}var c=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(!c){var c={webdatacontrol_id:str_webdatacontrol_id,choose_button_id:str_dropdown_btn_id,unique_name_get_callback_func:(fnCallbackUniqueNameGet==null?HXWebPopupFlexibleControl.OnControlUniqueNameGet:fnCallbackUniqueNameGet),dft_control_options:(dftControlOptions==null?{}:dftControlOptions),named_control_options:{}};HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id]=c}};HXWebPopupFlexibleControl.register_named_control=function(str_webdatacontrol_id,options,str_unique_name){if(str_unique_name==null||str_unique_name==""){return}if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return}objCurrentFlexibleControl.named_control_options[str_unique_name]=(options==null?{}:options)};HXWebPopupFlexibleControl.has_control_registed=function(str_webdatacontrol_id,str_unique_name){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return false}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return false}if(str_unique_name==null||str_unique_name==""){return true}var objActiveElementInfo=objCurrentFlexibleControl.named_control_options[str_unique_name];if(objActiveElementInfo==null){return false}return true};HXWebPopupFlexibleControl.set_options=function(str_webdatacontrol_id,options,str_unique_name){if(options==null){return}if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return}var blnIsDefaultControl=(str_unique_name==null||str_unique_name=="");var objActiveElementInfo=(blnIsDefaultControl?objCurrentFlexibleControl.dft_control_options:objCurrentFlexibleControl.named_control_options[str_unique_name]);if(objActiveElementInfo==null){objActiveElementInfo=(options==null?{}:options);if(blnIsDefaultControl){objCurrentFlexibleControl.dft_control_options=objActiveElementInfo}else{objCurrentFlexibleControl.named_control_options[str_unique_name]=objActiveElementInfo}}else{var objProcessClass=HXWebPopupFlexibleControl._Internal._GetProcessClassOfControlType(objActiveElementInfo.control_type);if(objProcessClass!=null){objProcessClass._set_options(objActiveElementInfo,options)}if(options.datainvalid_callback_func!=null){objActiveElementInfo.datainvalid_callback_func=options.datainvalid_callback_func}if(options.auto_show_when_focusin!=null){objActiveElementInfo.auto_show_when_focusin=options.auto_show_when_focusin}}};HXWebPopupFlexibleControl.get_options=function(str_webdatacontrol_id,str_unique_name){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return null}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return null}if(str_unique_name==null||str_unique_name==""){return objCurrentFlexibleControl.dft_control_options}return objCurrentFlexibleControl.named_control_options[str_unique_name]};HXWebPopupFlexibleControl._Internal._onfocusinprocess=function(objHXEventData){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}var objEventSrcElement=objHXEventData.target;var str_webdatacontrol_id=objEventSrcElement.id;if(str_webdatacontrol_id==null||str_webdatacontrol_id==""){return}if(HXWebPopupFlexibleControl._Internal._current_active_control_info!=null){if(HXWebPopupFlexibleControl._Internal._is_element_in_active_control(objEventSrcElement)){return}HXWebPopupFlexibleControl._Internal._current_active_control_info._process_class._hide();HXWebPopupFlexibleControl._Internal._current_active_control_info=null}if(objEventSrcElement.tagName.toUpperCase()!="INPUT"){return}if(objEventSrcElement.type!="text"){return}var objInputTextBox=objEventSrcElement;if(objInputTextBox.disabled){return}if(objInputTextBox.readOnly==true){if(HXWebJS.DOM.ElementAttributeGetValue(objInputTextBox,"hx_allow_popup_pick")!="1"){return}}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return}var intRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objInputTextBox);var intLineNo=intRecordNumber-1;var strUniqueName=null;if(objCurrentFlexibleControl.unique_name_get_callback_func!=null){strUniqueName=objCurrentFlexibleControl.unique_name_get_callback_func(str_webdatacontrol_id,intLineNo,objInputTextBox)}var blnIsDefaultControl=(strUniqueName==null||strUniqueName=="");var objActiveElementInfo=(blnIsDefaultControl?objCurrentFlexibleControl.dft_control_options:objCurrentFlexibleControl.named_control_options[strUniqueName]);if(objActiveElementInfo==null){return}if(objActiveElementInfo.auto_show_when_focusin==false){return}var objProcessClass=HXWebPopupFlexibleControl._Internal._GetProcessClassOfControlType(objActiveElementInfo.control_type);if(objProcessClass==null){return}HXWebPopupFlexibleControl._Internal._current_active_control_info={_webdatacontrol_id:str_webdatacontrol_id,_unique_name:strUniqueName,_process_class:objProcessClass,_options:objActiveElementInfo,_input_textbox:null,_choose_button:null,_popup_area:null};var objButtonElement=HXWebJS.DOM.FindFirstElementById(objCurrentFlexibleControl.choose_button_id,objInputTextBox.parentNode.parentNode);HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox=objInputTextBox;HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button=objButtonElement;var objPopupArea=objProcessClass._show(str_webdatacontrol_id,objInputTextBox,objButtonElement,intLineNo,strUniqueName,objActiveElementInfo,objHXEventData,"focusin");HXWebPopupFlexibleControl._Internal._current_active_control_info._popup_area=objPopupArea};HXWebPopupFlexibleControl._Internal._onclickprocess=function(objHXEventData){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}var objEventSrcElement=objHXEventData.target;if(HXWebPopupFlexibleControl._Internal._current_active_control_info!=null){var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(HXWebPopupFlexibleControl._Internal._is_element_in_active_control(objEventSrcElement)){if((objEventSrcElement===objActiveControlInfo._input_textbox||objEventSrcElement===objActiveControlInfo._choose_button)&&(objActiveControlInfo._popup_area!=null&&objActiveControlInfo._popup_area.style.display=="none")){var intLineNo=HXWebJS.DOM.ElementGetBindingRecordNumber(objEventSrcElement);objActiveControlInfo._process_class._show(objActiveControlInfo._webdatacontrol_id,objActiveControlInfo._input_textbox,objActiveControlInfo._choose_button,intLineNo,objActiveControlInfo._unique_name,objActiveControlInfo._options,objHXEventData,"click_on_active_input_textbox")}return}var blnIsHideOK=objActiveControlInfo._process_class._hide(true,objActiveControlInfo);if(blnIsHideOK){HXWebPopupFlexibleControl._Internal._current_active_control_info=null}else{objHXEventData.stopPropagation();if(objActiveControlInfo._input_textbox!=null){objActiveControlInfo._input_textbox.value="";if(objActiveControlInfo._options.datainvalid_callback_func!=null){objActiveControlInfo._options.datainvalid_callback_func(objActiveControlInfo._webdatacontrol_id,objActiveControlInfo._input_textbox,objActiveControlInfo._choose_button)}}return}}var strEventSrcElementId=objEventSrcElement.id;if(strEventSrcElementId==null||strEventSrcElementId==""){return}var str_webdatacontrol_id=null;for(key in HXWebPopupFlexibleControl._Internal._registed_elements_info){if(HXWebPopupFlexibleControl._Internal._registed_elements_info[key]==null){continue}if(HXWebPopupFlexibleControl._Internal._registed_elements_info[key].choose_button_id==strEventSrcElementId){str_webdatacontrol_id=key;break}}if(str_webdatacontrol_id==null){return}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return}var intRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objEventSrcElement);var intLineNo=intRecordNumber-1;var strUniqueName=null;if(objCurrentFlexibleControl.unique_name_get_callback_func!=null){strUniqueName=objCurrentFlexibleControl.unique_name_get_callback_func(str_webdatacontrol_id,intLineNo,objEventSrcElement)}var blnIsDefaultControl=(strUniqueName==null||strUniqueName=="");var objActiveElementInfo=(blnIsDefaultControl?objCurrentFlexibleControl.dft_control_options:objCurrentFlexibleControl.named_control_options[strUniqueName]);if(objActiveElementInfo==null){return}var objProcessClass=HXWebPopupFlexibleControl._Internal._GetProcessClassOfControlType(objActiveElementInfo.control_type);if(objProcessClass==null){return}if(objHXEventData.type=="touchend"){objHXEventData.preventDefault()}HXWebPopupFlexibleControl._Internal._current_active_control_info={_webdatacontrol_id:str_webdatacontrol_id,_unique_name:strUniqueName,_process_class:objProcessClass,_options:objActiveElementInfo,_input_textbox:null,_choose_button:null,_popup_area:null};var objInputTextBox=HXWebJS.DOM.FindFirstElementById(str_webdatacontrol_id,objEventSrcElement.parentNode.parentNode);var objButtonElement=HXWebJS.DOM.FindFirstElementById(objCurrentFlexibleControl.choose_button_id,objEventSrcElement.parentNode.parentNode);HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox=objInputTextBox;HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button=objButtonElement;var objPopupArea=objProcessClass._show(str_webdatacontrol_id,objInputTextBox,objButtonElement,intLineNo,strUniqueName,objActiveElementInfo,objHXEventData,"click_on_choose_button");HXWebPopupFlexibleControl._Internal._current_active_control_info._popup_area=objPopupArea};HXWebPopupFlexibleControl._Internal._onkeyup_process=function(objHXEventData){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}var objInputTextBox=objHXEventData.target;var str_webdatacontrol_id=objInputTextBox.id;if(str_webdatacontrol_id==null||str_webdatacontrol_id==""){return}var objCurrentFlexibleControl=HXWebPopupFlexibleControl._Internal._registed_elements_info[str_webdatacontrol_id];if(objCurrentFlexibleControl==null){return}var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){if(objHXEventData.keyCode==9||objHXEventData.keyCode==27||objHXEventData.keyCode==13){return}HXWebJS.EventManager.FireEvent(objInputTextBox,"focusin");return}if(objActiveControlInfo._input_textbox!==objInputTextBox){return}if(objHXEventData.keyCode==9){return}var intRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objInputTextBox);var intLineNo=intRecordNumber-1;var strUniqueName=null;if(objCurrentFlexibleControl.unique_name_get_callback_func!=null){strUniqueName=objCurrentFlexibleControl.unique_name_get_callback_func(str_webdatacontrol_id,intLineNo,objInputTextBox)}var blnIsDefaultControl=(strUniqueName==null||strUniqueName=="");var objActiveElementInfo=(blnIsDefaultControl?objCurrentFlexibleControl.dft_control_options:objCurrentFlexibleControl.named_control_options[strUniqueName]);if(objActiveElementInfo==null){return}var objProcessClass=HXWebPopupFlexibleControl._Internal._GetProcessClassOfControlType(objActiveElementInfo.control_type);if(objProcessClass==null){return}if(objProcessClass._input_text_keyup_process==null){return}var objButtonElement=HXWebJS.DOM.FindFirstElementById(objCurrentFlexibleControl.choose_button_id,objInputTextBox.parentNode.parentNode);objProcessClass._input_text_keyup_process(str_webdatacontrol_id,objInputTextBox,objButtonElement,intLineNo,strUniqueName,objActiveElementInfo)};HXWebPopupFlexibleControl._Internal._onfocusoutprocess=function(objHXEventData){if(!HXWebPopupFlexibleControl._Internal._registed_elements_info){return}if(HXWebPopupFlexibleControl._Internal._current_active_control_info==null){return}var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;var objEventSrcElement=objHXEventData.target;var objTriggerViaElement=objHXEventData.relatedTarget;if(objTriggerViaElement==null){return}var blnIsTriggerViaActiveControl=HXWebPopupFlexibleControl._Internal._is_element_in_active_control(objTriggerViaElement);if(blnIsTriggerViaActiveControl){return}if(!HXWebPopupFlexibleControl._Internal._is_element_in_active_control(objEventSrcElement)){return}var blnIsHideOK=objActiveControlInfo._process_class._hide(true,objActiveControlInfo);if(blnIsHideOK){HXWebPopupFlexibleControl._Internal._current_active_control_info=null}else{if(objActiveControlInfo._input_textbox!=null){objActiveControlInfo._input_textbox.value="";if(objActiveControlInfo._options.datainvalid_callback_func!=null){objActiveControlInfo._options.datainvalid_callback_func(objActiveControlInfo._webdatacontrol_id,objActiveControlInfo._input_textbox,objActiveControlInfo._choose_button)}}}};HXWebPopupFlexibleControl._Internal._GetProcessClassOfControlType=function(strControlType){if(strControlType=="popupdropdownlist"){return HXWebPopupFlexibleControl._DropdownList}if(strControlType=="popupcalendar"){return HXWebPopupFlexibleControl._PopupCalendar}if(strControlType=="popuptreeview"){return HXWebPopupFlexibleControl.PopupTreeView}if(strControlType=="popupmonthpicker"){return HXWebPopupFlexibleControl.PopupMonthPicker}if(strControlType=="popuptimepicker"){return HXWebPopupFlexibleControl.PopupTimePicker}if(strControlType=="popuptextbox"){return HXWebPopupFlexibleControl.PopupTextBox}if(strControlType=="popupplaceholder"){return HXWebPopupFlexibleControl.PopupPlaceHolder}return null};HXWebPopupFlexibleControl._Internal._is_element_in_active_control=function(objElement){if(HXWebPopupFlexibleControl._Internal._current_active_control_info==null){return false}if(HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox===objElement){return true}if(HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button===objElement){return true}if(HXWebJS.DOM.IsElementInContainer(HXWebPopupFlexibleControl._Internal._current_active_control_info._popup_area,objElement)){return true}var objProcessClass=HXWebPopupFlexibleControl._Internal._current_active_control_info._process_class;if(objProcessClass._is_element_in_popup_area!=null&&objProcessClass._is_element_in_popup_area(objElement)){return true}return false};HXWebPopupFlexibleControl._PopupCalendar={};HXWebPopupFlexibleControl._PopupCalendar._set_options=function(objActiveElementInfo,options){if(options==null){return}if(options.fn_callback_date_picked!=null){objActiveElementInfo.fn_callback_date_picked=options.fn_callback_date_picked}if(options.date_format_type!=null){objActiveElementInfo.date_format_type=options.date_format_type}if(options.default_date_get_callback_func!=null){objActiveElementInfo.default_date_get_callback_func=options.default_date_get_callback_func}};HXWebPopupFlexibleControl._PopupCalendar._show=function(str_webdatacontrol_id,objInputTextBox,objButtonElement,intLineNo,strUniqueName,objActiveElementInfo,objHXEventData,strShowViaReason){if(strShowViaReason=="click_on_active_input_textbox"){return}var strOrgDateValue=(objInputTextBox==null?"":objInputTextBox.value);if(strOrgDateValue==""){if(objActiveElementInfo.default_date_get_callback_func!=null){strOrgDateValue=objActiveElementInfo.default_date_get_callback_func(str_webdatacontrol_id,objInputTextBox,objButtonElement)}}var strDateValue;var intYear,intMonth,intDay;if(strOrgDateValue.length==8&&!isNaN(strOrgDateValue)){strDateValue=strOrgDateValue;intYear=parseInt(strDateValue.substr(0,4),10);intMonth=parseInt(strDateValue.substr(4,2),10);intDay=parseInt(strDateValue.substr(6,2),10)}if(HXWebJS.Utility.IsDateTime(strOrgDateValue)){strDateValue=HXWebJS.Utility.FormatDateTime(strOrgDateValue,1).toString();intYear=parseInt(strDateValue.substr(0,4),10);intMonth=parseInt(strDateValue.substr(4,2),10);intDay=parseInt(strDateValue.substr(6,2),10)}if(!strDateValue){var dt=new Date();intYear=dt.getFullYear();intMonth=dt.getMonth()+1;intDay=dt.getDate()}HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_year=intYear;HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_month=intMonth;HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_day=intDay;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=intMonth;HXWebPopupFlexibleControl._PopupCalendar._current_active_date_format=objActiveElementInfo.date_format_type;HXWebPopupFlexibleControl._PopupCalendar._display_popup_calendar_area(objActiveElementInfo,objInputTextBox,objButtonElement,objHXEventData);return HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area};HXWebPopupFlexibleControl._PopupCalendar._hide=function(blnNeedValidation,objCurrentActiveControlInfo){if(blnNeedValidation==null){blnNeedValidation=false}if(blnNeedValidation){if(HXWebPopupFlexibleControl._PopupCalendar._input_data_validate(objCurrentActiveControlInfo._webdatacontrol_id,objCurrentActiveControlInfo._input_textbox,objCurrentActiveControlInfo._choose_button,objCurrentActiveControlInfo._unique_name,objCurrentActiveControlInfo._options)==false){return false}}if(!HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area){return true}if(HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area.style.display=="none"){return true}HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area.style.display="none";return true};HXWebPopupFlexibleControl._PopupCalendar._input_data_validate=function(str_webdatacontrol_id,objInputTextBox,objChooseButton,strUniqueName,objActiveElementInfo){if(objInputTextBox==null){return true}if(objInputTextBox.value!=""){if(!HXWebJS.Utility._InternalFunctions._CheckInputValidation_SingleElement(objInputTextBox,null,HXWebPageGlobalVariables.DateDisplayFormatString)){return false}}if(objActiveElementInfo.fn_callback_date_picked!=null){objActiveElementInfo.fn_callback_date_picked(str_webdatacontrol_id,objInputTextBox.value,objInputTextBox,objChooseButton)}return true};HXWebPopupFlexibleControl._PopupCalendar._is_element_in_popup_area=function(objElement){var objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebcontrol_popupcalendar__container");if(objPopupContainerDiv==null){return false}if(HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objElement)){return true}var objMonthPickerContainer=HXWebJS.DOM.GetElementById("hxwebpopupmonthpickercontrol_area");if(objMonthPickerContainer==null){return}if(HXWebJS.DOM.IsElementInContainer(objMonthPickerContainer,objElement)){var objActiveTextBox=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._current_active_input_textbox;if(objActiveTextBox==null){return false}if(objActiveTextBox===HXWebJS.DOM.FindFirstElementById("txtbx_popupcalendar_current_period",objPopupContainerDiv)){return true}}return false};HXWebPopupFlexibleControl._PopupCalendar._display_popup_calendar_area=function(objActiveElementInfo,objInputTextBox,objChooseButton,objHXEventData){var intCalendarCellHeight=(HXWebJS.Core.Browser.IsMobile?24:20);var intCalendarWidth=300;if(HXWebJS.Core.Browser.IsMobile){objActiveElementInfo.show_prevnextmonth_btn=0;objActiveElementInfo.show_prevnextyear_btn=0}var intPopupCalendarAreaHeight=intCalendarCellHeight*8+24;var intLeft,intTop;if(objInputTextBox!=null&&!(objInputTextBox.style.display=="none"||objInputTextBox.style.visibility=="hidden")){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1}else{if(objChooseButton!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton)+1;intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1}else{intLeft=HXWebJS.Core.WindowGeometry.GetScrollLeft()+objHXEventData.clientX+3;intTop=HXWebJS.Core.WindowGeometry.GetScrollTop()+objHXEventData.clientY+3}}HXWebPopupFlexibleControl._PopupCalendar._create_popup_calendar_area_html(objActiveElementInfo,intCalendarWidth,intCalendarCellHeight);var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intCalendarWidth>intMaxWidth){intLeft=intMaxWidth-intCalendarWidth}var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intPopupCalendarAreaHeight>intMaxHeight){intTop=intMaxHeight-intPopupCalendarAreaHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intPopupCalendarAreaHeight-1;if(intTop<intCurrentDocumentScrollTop){intTop=intMaxHeight-intPopupCalendarAreaHeight}}}HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area.style.left=intLeft+"px";HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area.style.top=intTop+"px";HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content();HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area.style.display=""};HXWebPopupFlexibleControl._PopupCalendar._create_popup_calendar_area_html=function(objActiveElementInfo,intPopupAreaWidth,intCellHeight){var objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebcontrol_popupcalendar__container");if(objPopupContainerDiv!=null){if(objPopupContainerDiv.offsetWidth!=intPopupAreaWidth){objPopupContainerDiv.style.width=intPopupAreaWidth+"px"}return}var int_show_prevnextmonth_btn=objActiveElementInfo.show_prevnextmonth_btn;var int_show_prevnextyear_btn=objActiveElementInfo.show_prevnextyear_btn;var sb_html=new HXWebStringBuilder();sb_html.append('<div id=hxwebcontrol_popupcalendar__container class=hxpopupcontrol_container style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:'+intPopupAreaWidth+'px; POSITION: absolute; overflow:hidden; padding:1px;">');sb_html.append('<table id=tbl_popupcalendar border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse;table-layout:fixed;">');sb_html.append('<tr class="hxpopupcontrol_headline" style="vertical-align:middle;height:'+intCellHeight+'px;">');sb_html.append('<td style="vertical-align:middle;width:40px">');if(int_show_prevnextmonth_btn!=0){sb_html.append('<img id=imgbtn_popupcalendar_prevmonth src="../images/hxpub_clear.gif" class=hxbtn_prevpage style="vertical-align:middle;margin-left:3px;" />')}if(int_show_prevnextyear_btn!=0){sb_html.append('<img id=imgbtn_popupcalendar_prevyear src="../images/hxpub_clear.gif" class=hxbtn_sort_asc style="vertical-align:middle;margin-left:5px;" />')}sb_html.append("</td><td colspan=5 align=center width='"+(intPopupAreaWidth-90)+"px'>");sb_html.append('<input id=txtbx_popupcalendar_current_period style="display:none;" /><span id=lbl_popupcalendar__month style="cursor:pointer;"></span>');sb_html.append("</td><td align=right width='40px'>");if(int_show_prevnextyear_btn!=0){sb_html.append('<img id=imgbtn_popupcalendar_nextyear src="../images/hxpub_clear.gif" class=hxbtn_sort_desc style="vertical-align:middle;margin-right:5px;" />')}if(int_show_prevnextmonth_btn!=0){sb_html.append('<img id=imgbtn_popupcalendar_nextmonth src="../images/hxpub_clear.gif" class=hxbtn_nextpage style="vertical-align:middle;margin-right:3px;" />')}sb_html.append("</td></tr>");sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__headline style="text-align:center;"><td style="color:red"></td><td></td><td></td><td></td><td></td><td></td><td style="color:red"></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_0 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_1 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_2 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_3 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_4 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='"+intCellHeight+'px\' id=tr_popupcalendar__dataline_5 style="text-align:center;cursor:pointer;"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>');sb_html.append("<tr height='24px' id=tr_popupcalendar__footline>");sb_html.append("<td colspan=3>");sb_html.append('<td colspan=4 style="vertical-align:middle;" align=right>');sb_html.append('<span style="vertical-align:middle;margin-left:3px;margin-right:3px;height:18px;line-height:18px;cursor:pointer;" id=lbl_popupcalendar__today></span>');sb_html.append("</td></tr></table>");sb_html.append("</div>");var objPopupContainerDiv=HXWebJS.DOM.CreateElement(sb_html.toString());document.body.appendChild(objPopupContainerDiv);HXWebJS.EventManager.AddListener(objPopupContainerDiv,"click",HXWebPopupFlexibleControl._PopupCalendar._popup_calendar_area_clicked);HXWebJS.EventManager.AddListener(objPopupContainerDiv,"touchend",HXWebPopupFlexibleControl._PopupCalendar._popup_calendar_area_clicked);HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area=objPopupContainerDiv;var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var objHeadLineRow=HXWebJS.DOM.FindFirstElementById("tr_popupcalendar__headline",objPopupContainerDiv);for(var i=0;i<7;i++){HXWebJS.DOM.ElementSetInnerText(objHeadLineRow.cells[i],ArraryForCalendarResString[i])}var strTodayTemplate=ArraryForCalendarResString[19];var dtToday=new Date();var strTodayContent=strTodayTemplate.replace(/{Y}/gi,dtToday.getFullYear());strTodayContent=strTodayContent.replace(/{M}/gi,(dtToday.getMonth()+1));strTodayContent=strTodayContent.replace(/{D}/gi,(dtToday.getDate()));HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("lbl_popupcalendar__today",objPopupContainerDiv),strTodayContent);HXWebJS.Controls.PopupMonthPicker.register("txtbx_popupcalendar_current_period","lbl_popupcalendar__month",HXWebPopupFlexibleControl._PopupCalendar._manual_period_input_changed)};HXWebPopupFlexibleControl._PopupCalendar._manual_period_input_changed=function(objInputBox,intChoosenPeriod){HXWebJS.Controls.PopupMonthPicker._InternalFunctions._hide_popup_month_picker_area();HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=parseInt(intChoosenPeriod/100);HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=intChoosenPeriod%100;HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content()};HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content=function(){var intYear=HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year;var intMonth=HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month;var objDiv=HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area;var ArraryForCalendarResString=HXWebJS.Controls._InternalFunctions._get_res_string_array__calendar__full();var strDisplayMonthTemplate=ArraryForCalendarResString[20];var strDisplayMonthContent=strDisplayMonthTemplate.replace(/{Y}/gi,intYear);var strDisplayMonthDesc=ArraryForCalendarResString[6+intMonth];strDisplayMonthContent=strDisplayMonthContent.replace(/{MM}/gi,strDisplayMonthDesc);strDisplayMonthContent=strDisplayMonthContent.replace(/{M}/gi,intMonth);HXWebJS.DOM.ElementSetInnerText(HXWebJS.DOM.FindFirstElementById("lbl_popupcalendar__month",objDiv),strDisplayMonthContent);var objTempInpubBoxForCurrentPeriod=HXWebJS.DOM.FindFirstElementById("txtbx_popupcalendar_current_period",objDiv);objTempInpubBoxForCurrentPeriod.value=intYear*100+intMonth;var dtFirstDayOfDisplayMonth=new Date(intYear,intMonth-1,1);var dtLastDayOfDisplayMonth=new Date(intYear,intMonth,0);var intWeekDay=dtFirstDayOfDisplayMonth.getDay();var dtToday=new Date();dtToday=new Date(dtToday.getFullYear(),dtToday.getMonth(),dtToday.getDate());var dtDefault=new Date(HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_year,HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_month-1,HXWebPopupFlexibleControl._PopupCalendar._current_default_date_value_day);var dtTemp,intCellIndex=0;for(var i=0;i<intWeekDay;i++){dtTemp=new Date(intYear,intMonth-1,1-intWeekDay+i);HXWebPopupFlexibleControl._PopupCalendar._set_single_cell_date_value(intCellIndex,dtTemp.getDate(),false,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()));intCellIndex++}for(var i=0;i<dtLastDayOfDisplayMonth.getDate();i++){dtTemp=new Date(intYear,intMonth-1,1+i);HXWebPopupFlexibleControl._PopupCalendar._set_single_cell_date_value(intCellIndex,dtTemp.getDate(),true,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()));intCellIndex++}for(var i=0;i<42-intCellIndex;i++){dtTemp=new Date(intYear,intMonth,1+i);HXWebPopupFlexibleControl._PopupCalendar._set_single_cell_date_value(intCellIndex+i,dtTemp.getDate(),false,(dtTemp.valueOf()==dtToday.valueOf()),(dtTemp.valueOf()==dtDefault.valueOf()))}};HXWebPopupFlexibleControl._PopupCalendar._set_single_cell_date_value=function(intCellIndex,intValue,blnIsDisplayedMonth,blnIsToday,blnIsDefaultDate){var intRow=parseInt(intCellIndex/7);var intCol=intCellIndex%7;var objCell=HXWebJS.DOM.FindFirstElementById("tr_popupcalendar__dataline_"+intRow,HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area).cells[intCol];HXWebJS.DOM.ElementSetInnerText(objCell,intValue);objCell.className=(blnIsDisplayedMonth?"hxwebcontrol_popupcalendar__currentmonth_cell":"hxwebcontrol_popupcalendar__othermonth_cell")+(blnIsToday?" hxwebcontrol_popupcalendar__today_cell":"")+(blnIsDefaultDate?" hxwebcontrol_popupcalendar__defaultdate_cell":"")};HXWebPopupFlexibleControl._PopupCalendar._popup_calendar_area_clicked=function(objHXEventData){objHXEventData.stopPropagation();if(objHXEventData.type=="touchend"){objHXEventData.preventDefault()}var objEventSrcElement=objHXEventData.target;var intYear=HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year;var intMonth=HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month;var strEventSrcElementTageName=objEventSrcElement.tagName.toLowerCase();if(strEventSrcElementTageName=="span"&&objEventSrcElement.id=="lbl_popupcalendar__month"){var objDivPopupCalendar=HXWebPopupFlexibleControl._PopupCalendar._global_popup_calendar_area;var objInputTextBox=HXWebJS.DOM.FindFirstElementById("txtbx_popupcalendar_current_period",objDivPopupCalendar);var objActiveElementInfo=HXWebJS.Controls.PopupMonthPicker._InternalFunctions._registed_elements_info[objInputTextBox.id];var intLeft=HXWebJS.DOM.GetElementLeftPosition(objDivPopupCalendar);var intTop=HXWebJS.DOM.GetElementTopPosition(objDivPopupCalendar);HXWebJS.Controls.PopupMonthPicker._InternalFunctions._choose_month(objInputTextBox,objActiveElementInfo,objHXEventData,intLeft,intTop);return}if(strEventSrcElementTageName=="img"){if(objEventSrcElement.id=="imgbtn_popupcalendar_prevmonth"){if(intMonth==1){HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear-1;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=12}else{HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=intMonth-1}HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content();return}if(objEventSrcElement.id=="imgbtn_popupcalendar_nextmonth"){if(intMonth==12){HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear+1;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=1}else{HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear;HXWebPopupFlexibleControl._PopupCalendar._current_active_display_month=intMonth+1}HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content();return}if(objEventSrcElement.id=="imgbtn_popupcalendar_prevyear"){HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear-1;HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content();return}if(objEventSrcElement.id=="imgbtn_popupcalendar_nextyear"){HXWebPopupFlexibleControl._PopupCalendar._current_active_display_year=intYear+1;HXWebPopupFlexibleControl._PopupCalendar._set_dateofmonth_content();return}}if(strEventSrcElementTageName=="span"&&objEventSrcElement.id=="lbl_popupcalendar__today"){HXWebPopupFlexibleControl._PopupCalendar._date_picked_process(new Date());return}if(strEventSrcElementTageName=="td"&&objEventSrcElement.parentNode.id.indexOf("tr_popupcalendar__dataline_")!=-1){var strIDOfRow=objEventSrcElement.parentNode.id;var intRow=parseInt(strIDOfRow.substr(strIDOfRow.length-1));var intDay=parseInt(HXWebJS.DOM.ElementGetInnerText(objEventSrcElement));var dtSelected;if(intRow==0&&intDay>20){dtSelected=new Date(intYear,intMonth-1-1,intDay)}else{if(intRow>=4&&intDay<20){dtSelected=new Date(intYear,intMonth,intDay)}else{dtSelected=new Date(intYear,intMonth-1,intDay)}}HXWebPopupFlexibleControl._PopupCalendar._date_picked_process(dtSelected)}};HXWebPopupFlexibleControl._PopupCalendar._date_picked_process=function(dtSelected){var intDateFormat=HXWebPopupFlexibleControl._PopupCalendar._current_active_date_format;if(intDateFormat==null){intDateFormat=1}var strSelectedDate=HXWebJS.Utility.FormatDateTime(dtSelected,1);if(intDateFormat==2){strSelectedDate=strSelectedDate.toString().substr(0,6)}if(intDateFormat==1){var strSelectedDate=HXWebJS.Utility.FormatDateTime(dtSelected,2,HXWebPageGlobalVariables.DateDisplayFormatString)}if(HXWebPopupFlexibleControl._Internal._current_active_control_info==null){return}var objActiveElementInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info._options;if(objActiveElementInfo==null){return}var objInputTextBox=HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox;if(objInputTextBox!=null){objInputTextBox.value=strSelectedDate;if(!HXWebJS.Core.Browser.IsIE){HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_xmldataisland_update(objInputTextBox,"change")}}if(objActiveElementInfo.fn_callback_date_picked!=null){var str_webdatacontrol_id=HXWebPopupFlexibleControl._Internal._current_active_control_info._webdatacontrol_id;var objChooseButton=HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button;objActiveElementInfo.fn_callback_date_picked(str_webdatacontrol_id,strSelectedDate,objInputTextBox,objChooseButton)}var blnNeedFocusOnInputBox=false;if(objInputTextBox!=null){if(!objInputTextBox.disabled&&!HXWebJS.Core.Browser.IsMobile){blnNeedFocusOnInputBox=true}}if(blnNeedFocusOnInputBox){objInputTextBox.focus()}else{HXWebPopupFlexibleControl._Internal._current_active_control_info=null}HXWebPopupFlexibleControl._PopupCalendar._hide()};HXWebPopupFlexibleControl._DropdownList={};HXWebPopupFlexibleControl._DropdownList._set_options=function(objActiveElementInfo,options){if(options==null){return}if(options.content_type!=null){objActiveElementInfo.content_type=options.content_type}if(options.choose_type!=null){objActiveElementInfo.choose_type=options.choose_type}if(options.is_paging!=null){objActiveElementInfo.is_paging=options.is_paging}if(options.page_size!=null){objActiveElementInfo.page_size=options.page_size}if(options.limit_in_list!=null){objActiveElementInfo.limit_in_list=options.limit_in_list}if(options.use_autocompletion_hint!=null){objActiveElementInfo.use_autocompletion_hint=options.use_autocompletion_hint}if(options.search_from_begin!=null){objActiveElementInfo.search_from_begin=options.search_from_begin}if(options.dropdownbox_width!=null){objActiveElementInfo.dropdownbox_width=options.dropdownbox_width}if(options.dropdownbox_lines_count!=null){objActiveElementInfo.dropdownbox_lines_count=options.dropdownbox_lines_count}if(options.columns_width_rate!=null){objActiveElementInfo.columns_width_rate=options.columns_width_rate}if(options.search_columns!=null){objActiveElementInfo.search_columns=options.search_columns}if(options.binding_datasrc_id!=null){objActiveElementInfo.binding_datasrc_id=options.binding_datasrc_id}if(options.binding_datafld_for_key!=null){objActiveElementInfo.binding_datafld_for_key=options.binding_datafld_for_key}if(options.binding_datafld_for_desc!=null){objActiveElementInfo.binding_datafld_for_desc=options.binding_datafld_for_desc}if(options.binding_datafld_for_attr_1!=null){objActiveElementInfo.binding_datafld_for_attr_1=options.binding_datafld_for_attr_1}if(options.binding_datafld_for_attr_2!=null){objActiveElementInfo.binding_datafld_for_attr_2=options.binding_datafld_for_attr_2}if(options.binding_datafld_for_attr_3!=null){objActiveElementInfo.binding_datafld_for_attr_3=options.binding_datafld_for_attr_3}if(options.binding_datafld_for_attr_4!=null){objActiveElementInfo.binding_datafld_for_attr_4=options.binding_datafld_for_attr_4}if(options.binding_datafld_for_attr_5!=null){objActiveElementInfo.binding_datafld_for_attr_5=options.binding_datafld_for_attr_5}if(options.filter_data_callback_func!=null){objActiveElementInfo.filter_data_callback_func=options.filter_data_callback_func}if(options.afterdataget_callback_func!=null){objActiveElementInfo.afterdataget_callback_func=options.afterdataget_callback_func}if(options.datachoosed_callback_func!=null){objActiveElementInfo.datachoosed_callback_func=options.datachoosed_callback_func}if(options.use_local_list_data!=null){objActiveElementInfo.use_local_list_data=options.use_local_list_data}if(objActiveElementInfo.use_local_list_data){objActiveElementInfo.is_paging=false}if(options.get_local_list_data_callback_func!=null){objActiveElementInfo.get_local_list_data_callback_func=options.get_local_list_data_callback_func}if(options.predefined_dropdownlist_code!=null){objActiveElementInfo.predefined_dropdownlist_code=options.predefined_dropdownlist_code}if(options.predefined_dropdownlist_show_blank_row!=null){objActiveElementInfo.predefined_dropdownlist_show_blank_row=options.predefined_dropdownlist_show_blank_row}if(options.predefined_dropdownlist_blank_row_caption!=null){objActiveElementInfo.predefined_dropdownlist_blank_row_caption=options.predefined_dropdownlist_blank_row_caption}if(options.predefined_dropdownlist_values!=null){objActiveElementInfo.predefined_dropdownlist_values=options.predefined_dropdownlist_values}if(options.extend_web_part_html_id!=null){objActiveElementInfo.extend_web_part_html_id=options.extend_web_part_html_id}};HXWebPopupFlexibleControl._DropdownList._show=function(str_webdatacontrol_id,objInputTextBox,objButtonElement,intLineNo,strUniqueName,objActiveElementInfo,objHXEventData,strShowViaReason){HXWebPopupFlexibleControl._DropdownList._options_validate(objActiveElementInfo);HXWebPopupFlexibleControl._DropdownList._global_data_item_chosen_ok=false;var strCustomizedFilterData=HXWebPopupFlexibleControl._DropdownList._get_customized_filter_data(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,objButtonElement);if(typeof(strCustomizedFilterData)=="boolean"&&strCustomizedFilterData==false){return}HXWebPopupFlexibleControl._DropdownList._create_xml_configdata_object();HXWebPopupFlexibleControl._DropdownList._create_xml_datalist_object();HXWebPopupFlexibleControl._DropdownList._create_popup_area_html();var objXmlCfgData=HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object;objXmlCfgData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_KEY_WORD","");objXmlCfgData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_FROM_BEGIN",(objActiveElementInfo.search_from_begin?"1":""));document.getElementById("txtbx_dropdownlist__controlarea_search_part_keyword").value="";HXWebPopupFlexibleControl._DropdownList._resize_popup_area(objActiveElementInfo,objInputTextBox,objButtonElement);HXWebPopupFlexibleControl._DropdownList._global_popup_area.style.display="";var tBodies=HXWebJS.DOM.FindElementsByTagName("tbody",HXWebPopupFlexibleControl._DropdownList._global_popup_area);for(var i=0;i<tBodies.length;i++){tBodies[i].style.display=""}objActiveElementInfo.new_page_size=objActiveElementInfo.page_size;HXWebPopupFlexibleControl._DropdownList._search_and_fill_data(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,objButtonElement,"",strCustomizedFilterData);return HXWebPopupFlexibleControl._DropdownList._global_popup_area};HXWebPopupFlexibleControl._DropdownList._hide=function(blnNeedValidation,objCurrentActiveControlInfo){if(blnNeedValidation==null){blnNeedValidation=false}if(blnNeedValidation){if(HXWebPopupFlexibleControl._DropdownList._input_data_validate(objCurrentActiveControlInfo._webdatacontrol_id,objCurrentActiveControlInfo._input_textbox,objCurrentActiveControlInfo._choose_button,objCurrentActiveControlInfo._unique_name,objCurrentActiveControlInfo._options)==false){return false}}if(!HXWebPopupFlexibleControl._DropdownList._global_popup_area){return true}if(HXWebPopupFlexibleControl._DropdownList._global_popup_area.style.display=="none"){return true}HXWebPopupFlexibleControl._DropdownList._global_popup_area.style.display="none";return true};HXWebPopupFlexibleControl._DropdownList._is_element_in_popup_area=function(objEventSrcElement){var objPopupContainerDiv=HXWebJS.DOM.GetElementById("hxwebcontrol_dropdownlist__container");if(objPopupContainerDiv==null){return false}if(HXWebJS.DOM.IsElementInContainer(objPopupContainerDiv,objEventSrcElement)){return true}};HXWebPopupFlexibleControl._DropdownList._is_popup_area_hidden=function(){if(HXWebPopupFlexibleControl._DropdownList._global_popup_area==null){return true}if(HXWebPopupFlexibleControl._DropdownList._global_popup_area.style.display=="none"){return true}return false};HXWebPopupFlexibleControl._DropdownList._input_data_validate=function(str_webdatacontrol_id,objInputTextBox,objButtonElement,strUniqueName,objActiveElementInfo){if(objInputTextBox==null){return true}if(HXWebPopupFlexibleControl._DropdownList._global_data_item_chosen_ok==true){return}var intBindingRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objInputTextBox);if(objInputTextBox.value==""){HXWebPopupFlexibleControl._DropdownList._set_binding_datafields_values(objActiveElementInfo,intBindingRecordNumber,"","","","","","","");HXWebPopupFlexibleControl._DropdownList._run_datachoosed_callback_function(str_webdatacontrol_id,objActiveElementInfo,objInputTextBox,null,null);return true}if(objActiveElementInfo.limit_in_list==false){return true}var strCustomizedFilterData=HXWebPopupFlexibleControl._DropdownList._get_customized_filter_data(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,null);if(typeof(strCustomizedFilterData)=="boolean"&&strCustomizedFilterData==false){return}var strReturnValue="";if(objActiveElementInfo.use_local_list_data==true){strReturnValue=HXWebPopupFlexibleControl._DropdownList._call_getdatalist_local(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,true,objInputTextBox.value,"",null)}else{var strXmlDataForSingleDataCheck=HXWebPopupFlexibleControl._DropdownList._build_pagxmlservice_xmlcontent_getdata(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,1,objInputTextBox.value,"",strCustomizedFilterData,"singledata",objActiveElementInfo.search_columns);strReturnValue=HXWebPopupFlexibleControl._DropdownList._call_getdatalist_pagxmlservice(strXmlDataForSingleDataCheck,objActiveElementInfo.extend_web_part_html_id)}var objXmlDoc=null;var objHXXmlNode=null;if(strReturnValue!=null&&strReturnValue!=""){objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strReturnValue);objHXXmlNode=objXmlDoc.SelectSingleNode("//RS_ROW")}if(objHXXmlNode==null||objHXXmlNode.SelectSingleNode("@KEY").GetText()==""){var strMsg=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBCOMBOBOX_NO_DATA_FOUND");alert(strMsg);HXWebPopupFlexibleControl._DropdownList._set_binding_datafields_values(objActiveElementInfo,intBindingRecordNumber,"","","","","","","");HXWebPopupFlexibleControl._DropdownList._run_datachoosed_callback_function(str_webdatacontrol_id,objActiveElementInfo,objInputTextBox,null,null);return false}var strKey=objHXXmlNode.GetAttributeValue("KEY");var strDesc=objHXXmlNode.GetAttributeValue("DESC");var strAttr1=objHXXmlNode.GetAttributeValue("ATTR_1");var strAttr2=objHXXmlNode.GetAttributeValue("ATTR_2");var strAttr3=objHXXmlNode.GetAttributeValue("ATTR_3");var strAttr4=objHXXmlNode.GetAttributeValue("ATTR_4");var strAttr5=objHXXmlNode.GetAttributeValue("ATTR_5");if(strAttr1==null){strAttr1=""}if(strAttr2==null){strAttr2=""}if(strAttr3==null){strAttr3=""}if(strAttr4==null){strAttr4=""}if(strAttr5==null){strAttr5=""}HXWebPopupFlexibleControl._DropdownList._set_selected_desc_to_textbox(objActiveElementInfo,objInputTextBox,strKey,strDesc);HXWebPopupFlexibleControl._DropdownList._set_binding_datafields_values(objActiveElementInfo,intBindingRecordNumber,strKey,strDesc,strAttr1,strAttr2,strAttr3,strAttr4,strAttr5);HXWebPopupFlexibleControl._DropdownList._run_datachoosed_callback_function(str_webdatacontrol_id,objActiveElementInfo,objInputTextBox,null,objXmlDoc);return true};HXWebPopupFlexibleControl._DropdownList._input_text_keyup_process=function(str_webdatacontrol_id,objInputTextBox,objButtonElement,intBindingLineNo,strUniqueName,objActiveElementInfo){if(objActiveElementInfo.use_autocompletion_hint==false){return}var strCustomizedFilterData=HXWebPopupFlexibleControl._DropdownList._get_customized_filter_data(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,null);if(typeof(strCustomizedFilterData)=="boolean"&&strCustomizedFilterData==false){return}var strSearchKeyWord=objInputTextBox.value;if(HXWebPopupFlexibleControl._DropdownList._is_popup_area_hidden()){HXWebPopupFlexibleControl._DropdownList._global_popup_area.style.display=""}HXWebPopupFlexibleControl._DropdownList._search_and_fill_data(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,objButtonElement,strSearchKeyWord,strCustomizedFilterData)};HXWebPopupFlexibleControl._DropdownList._options_validate=function(objActiveElementInfo){if(objActiveElementInfo.predefined_dropdownlist_values!=null&&objActiveElementInfo.predefined_dropdownlist_values!=""){objActiveElementInfo.use_local_list_data=true;objActiveElementInfo.is_paging=false;var blnDescColumnUsed=(objActiveElementInfo.predefined_dropdownlist_values.indexOf("=")>0);objActiveElementInfo.columns_width_rate=(blnDescColumnUsed?"50%;50%":"100%")}if(objActiveElementInfo.page_size==null){objActiveElementInfo.page_size=30}if(objActiveElementInfo.content_type==null){objActiveElementInfo.content_type="KEY"}else{objActiveElementInfo.content_type=objActiveElementInfo.content_type.toUpperCase()}if(objActiveElementInfo.search_columns==null){objActiveElementInfo.search_columns=HXWebPopupFlexibleControl._DropdownList._get_search_columns(objActiveElementInfo.columns_width_rate)}};HXWebPopupFlexibleControl._DropdownList._create_xml_configdata_object=function(){if(document.getElementById("hxxml_configdata__dropdownlist_control")==null){var strXmlHTMLContent="<xml id=hxxml_configdata__dropdownlist_control></xml>";var objXml=HXWebJS.DOM.CreateElement(strXmlHTMLContent);document.body.appendChild(objXml);var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_configdata__dropdownlist_control");objHXXmlDoc.ReloadXML('<RS_DATA><RS_ROW SEARCH_KEY_WORD="" SEARCH_FROM_BEGIN="" TOTAL_RECORDS_COUNT="" FIRST_RECORD_ON_PAGE="" LAST_RECORD_ON_PAGE="" LBL_BTN_OK="OK" LBL_BTN_CANCEL="Cancel" LBL_TEXT_OF="Of" /></RS_DATA>');var arrResStringOKCancelOf=HXWebJS.Controls._InternalFunctions._get_res_string_array__ok_cancel();objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_BTN_OK",arrResStringOKCancelOf[0]);objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_BTN_CANCEL",arrResStringOKCancelOf[1]);objHXXmlDoc.SelectSingleNode("//RS_ROW").SetAttributeValue("LBL_TEXT_OF",arrResStringOKCancelOf[2]);HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object=objHXXmlDoc}};HXWebPopupFlexibleControl._DropdownList._create_xml_datalist_object=function(){if(window.document.getElementById("hxxml_datalist__dropdownlist_control")==null){var strXmlHTMLContent="<xml id=hxxml_datalist__dropdownlist_control></xml>";var objXml=HXWebJS.DOM.CreateElement(strXmlHTMLContent);document.body.appendChild(objXml);HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_datalist__dropdownlist_control")}else{HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object.ReloadXML("")}};HXWebPopupFlexibleControl._DropdownList._create_popup_area_html=function(){var objDiv=document.getElementById("hxwebcontrol_dropdownlist__container");if(objDiv!=null){return}var strDivHTMLContent='<div id=hxwebcontrol_dropdownlist__container style="display:none;z-index:8000;left:0px;top:0px;width:200px;height:auto;position:absolute;background-color:white;"></div>';objDiv=HXWebJS.DOM.CreateElement(strDivHTMLContent);var sb_temp=new HXWebStringBuilder();sb_temp.append('<div id=div_dropdownlist__datalistarea style="width:100%;height:192px;overflow:auto;" class="hxborder_popupcontrol hxscrollbar">');sb_temp.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="tbl_dropdownlist__datalist_table" style="cursor:pointer;font-size:12px;border-collapse:collapse;" datasrc=\'#hxxml_datalist__dropdownlist_control\' tabindex="99999" hx_customized_row_rebinding_func="none">');sb_temp.append("<tbody><tr height='24px' id=tr_dropdownlist__dataline_area class=hxbgcolor_itemline_normal onmouseover=\"this.className='hxbgcolor_itemline_hover';\" onmouseout=\"this.className='hxbgcolor_itemline_normal';\" >");sb_temp.append('<td align=right id=td_dropdownlist__col_choose width=\'28px\' style="display:none"><input id=chkbx_dropdownlist__data_item_is_choosed type=checkbox datafld=is_choosed style="padding:0px;margin-left:3px" /></td>');sb_temp.append('<td id=td_dropdownlist__col_1 style="PADDING-LEFT: 3px;"><span datafld="KEY" /></td>');sb_temp.append('<td id=td_dropdownlist__col_2 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="DESC" /></td>');sb_temp.append('<td id=td_dropdownlist__col_3 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="ATTR_1" /></td>');sb_temp.append('<td id=td_dropdownlist__col_4 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="ATTR_2" /></td>');sb_temp.append('<td id=td_dropdownlist__col_5 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="ATTR_3" /></td>');sb_temp.append('<td id=td_dropdownlist__col_6 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="ATTR_4" /></td>');sb_temp.append('<td id=td_dropdownlist__col_7 style="BORDER-LEFT: lightgrey 1px solid; PADDING-LEFT: 3px;display:none"><span datafld="ATTR_5" /></td>');sb_temp.append("</tr></tbody></table></div>");sb_temp.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" id="tbl_dropdownlist__controlarea" style="cursor:pointer;font-size:12px;border-collapse:collapse;margin-top:-1px;" class="hxborder_popupcontrol hxbgcolor_cnt_block_head">');sb_temp.append("<tr height='36px'><td align=left id=td_dropdownlist__controlarea_choose_part style=\"vertical-align:middle\">");sb_temp.append('<input type=checkbox id=chkbx_dropdownlist__controlarea_selectall style="padding:0px;margin-left:3px;margin-right:6px;vertical-align:middle;" />');sb_temp.append('<input type=button id=btn_dropdownlist__controlarea_ok class=hxbtn_orange style="width:50px;" value="Ok" datasrc=#hxxml_configdata__dropdownlist_control datafld=LBL_BTN_OK />');sb_temp.append('<input type=button id=btn_dropdownlist__controlarea_cancel class=hxbtn_orange style="width:50px;margin-left:3px;" value="Cancel" datasrc=#hxxml_configdata__dropdownlist_control datafld=LBL_BTN_CANCEL />');sb_temp.append('</td><td id=td_dropdownlist__controlarea_search_part align=right style="padding-right:3px;vertical-align:middle;">');sb_temp.append('<span style="margin-left:3px;" datasrc=#hxxml_configdata__dropdownlist_control datafld=FIRST_RECORD_ON_PAGE></span>&nbsp;~&nbsp;<span datasrc=#hxxml_configdata__dropdownlist_control datafld=LAST_RECORD_ON_PAGE ></span>');sb_temp.append('<img class=hxbtn_showmore id=img_dropdownlist__controlarea_showmore style="vertical-align:middle;margin-left:3px;margin-right:3px;"src="../images/hxpub_clear.gif" />');sb_temp.append("<span datasrc=#hxxml_configdata__dropdownlist_control datafld=LBL_TEXT_OF>Of</span>&nbsp;<span datasrc=#hxxml_configdata__dropdownlist_control datafld=TOTAL_RECORDS_COUNT ></span>");sb_temp.append('<input class=hxinputbox id=txtbx_dropdownlist__controlarea_search_part_keyword style="width:50px;height:22px;margin-left:3px;padding-top:3px;" />');sb_temp.append('<img src="../images/hxpub_clear.gif" id=img_dropdownlist__controlarea_search style="margin-left:3px;margin-right:3px;vertical-align:middle;" class=hxbtn_search />');sb_temp.append("</td></tr></table>");objDiv.innerHTML=sb_temp.toString();document.body.appendChild(objDiv);HXWebJS.EventManager.AddListener(objDiv,"click",HXWebPopupFlexibleControl._DropdownList._popup_area_clicked);HXWebJS.EventManager.AddListener(objDiv,"touchend",HXWebPopupFlexibleControl._DropdownList._popup_area_clicked);var objTemp=HXWebJS.DOM.FindFirstElementById("txtbx_dropdownlist__controlarea_search_part_keyword",objDiv);HXWebJS.EventManager.AddListener(objTemp,"keyup",HXWebPopupFlexibleControl._DropdownList._searchkeyword_keypressed);HXWebPopupFlexibleControl._DropdownList._global_popup_area=objDiv};HXWebPopupFlexibleControl._DropdownList._get_org_selected_values=function(objActiveElementInfo,objInputTextBox,objDropdownClickButton){var objDataSrc=null;var strTempAttributeValue=null;var strDataSrc=objActiveElementInfo.binding_datasrc_id;if(strDataSrc!=null&&strDataSrc!=""){objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strDataSrc);if(objDataSrc!=null){var intLineNo=null;var objTempRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objDropdownClickButton);if(objTempRecordNumber!=null&&objTempRecordNumber!=""){intLineNo=parseInt(objTempRecordNumber)-1}var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;var objHXXmlNodeTemp=null;if(intLineNo!=null){objHXXmlNodeTemp=objDataSrc.SelectNodes("//RS_ROW")[intLineNo]}else{objHXXmlNodeTemp=objDataSrc.SelectSingleNode("//RS_ROW")}if(strDataFieldNameForKey!=null&&strDataFieldNameForKey!=""&&objHXXmlNodeTemp!=null){strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();strTempAttributeValue=objHXXmlNodeTemp.GetAttributeValue(strDataFieldNameForKey);if(strTempAttributeValue!=null){return strTempAttributeValue}}}}if(objActiveElementInfo.content_type=="KEY"&&objInputTextBox!=null){return objInputTextBox.value}return null};HXWebPopupFlexibleControl._DropdownList._resize_popup_area=function(objActiveElementInfo,objInputTextBox,objChooseButton){var intLeft,intTop,intWidth,intHeight;var int_choose_type=objActiveElementInfo.choose_type;var blnShowControlAreaChoosePart=(int_choose_type==1);var blnShowControlAreaSearchPart=(objActiveElementInfo.is_paging!=false);var blnShowControlArea=(blnShowControlAreaChoosePart||blnShowControlAreaSearchPart);if(objInputTextBox!=null){intLeft=HXWebJS.DOM.GetElementLeftPosition(objInputTextBox);intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)+objInputTextBox.offsetHeight+1;intWidth=objChooseButton.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(objChooseButton)-intLeft;if(objActiveElementInfo.dropdownbox_width!=null&&objActiveElementInfo.dropdownbox_width>intWidth){intWidth=objActiveElementInfo.dropdownbox_width}}else{intLeft=HXWebJS.DOM.GetElementLeftPosition(objChooseButton);intTop=HXWebJS.DOM.GetElementTopPosition(objChooseButton)+objChooseButton.offsetHeight+1;intWidth=(objActiveElementInfo.dropdownbox_width==null?objChooseButton.offsetWidth:objActiveElementInfo.dropdownbox_width)}if(blnShowControlArea){if(intWidth<240){intWidth=240}if(blnShowControlAreaChoosePart&&blnShowControlAreaSearchPart&&intWidth<300){intWidth=300}}var intDropdownBoxShowLinesCount=objActiveElementInfo.dropdownbox_lines_count;intHeight=(intDropdownBoxShowLinesCount==null?8:intDropdownBoxShowLinesCount)*24;var intMaxWidth=HXWebJS.Core.WindowGeometry.GetScrollLeft()+HXWebJS.Core.WindowGeometry.GetViewportWidth();if(intLeft+intWidth>intMaxWidth){intLeft=intMaxWidth-intWidth}if(!HXWebJS.Core.Browser.IsMobile){var intCurrentDocumentScrollTop=HXWebJS.Core.WindowGeometry.GetScrollTop();var intMaxHeight=intCurrentDocumentScrollTop+HXWebJS.Core.WindowGeometry.GetViewportHeight();if(intTop+intHeight>intMaxHeight){intTop=intMaxHeight-intHeight;if(objInputTextBox!=null){intTop=HXWebJS.DOM.GetElementTopPosition(objInputTextBox)-intHeight-1;if(intTop<intCurrentDocumentScrollTop){intTop=intMaxHeight-intHeight}}}}HXWebPopupFlexibleControl._DropdownList._format_display_columns(objActiveElementInfo);var objContainerDiv=HXWebPopupFlexibleControl._DropdownList._global_popup_area;objContainerDiv.style.left=intLeft+"px";objContainerDiv.style.top=intTop+"px";objContainerDiv.style.width=intWidth+"px";var objDataListAreaDiv=HXWebJS.DOM.FindFirstElementById("div_dropdownlist__datalistarea",objContainerDiv,"div");objDataListAreaDiv.style.height=intHeight+"px";var objControlAreaTable=HXWebJS.DOM.FindFirstElementById("tbl_dropdownlist__controlarea",objContainerDiv,"table");if(blnShowControlArea){objControlAreaTable.style.display="";HXWebJS.DOM.FindFirstElementById("td_dropdownlist__controlarea_choose_part",objControlAreaTable).style.display=(blnShowControlAreaChoosePart?"":"none");HXWebJS.DOM.FindFirstElementById("td_dropdownlist__controlarea_search_part",objControlAreaTable).style.display=(blnShowControlAreaSearchPart?"":"none")}else{objControlAreaTable.style.display="none"}};HXWebPopupFlexibleControl._DropdownList._format_display_columns=function(objActiveElementInfo){var objTable=HXWebJS.DOM.FindFirstElementById("tbl_dropdownlist__datalist_table",HXWebPopupFlexibleControl._DropdownList._global_popup_area,"table");var objContainer;if(HXWebJS.Core.Browser.IsIE==true){objTable.dataSrc="";objTable.refresh();objContainer=objTable}else{objContainer=HXWebJS.Xml._XmlDataIsland._binding_table_template_cache_process(objTable)}var objTempTDColChoose=HXWebJS.DOM.FindFirstElementById("td_dropdownlist__col_choose",objContainer);if(objTempTDColChoose!=null){if(objActiveElementInfo.choose_type!=1){objTempTDColChoose.style.display="none"}else{objTempTDColChoose.style.display=""}}var strColumnWidths=objActiveElementInfo.columns_width_rate;if(strColumnWidths==null||strColumnWidths==""){strColumnWidths="100%"}var strArrary=strColumnWidths.split(";");var blnHideLeftColumnBorder;for(var i=0;i<strArrary.length;i++){blnHideLeftColumnBorder=(i==0||(i==1&&(strArrary[0]=="0"||strArrary[0]=="0%")));HXWebPopupFlexibleControl._DropdownList._set_column_width(objContainer,i+1,strArrary[i],blnHideLeftColumnBorder)}for(var i=strArrary.length;i<7;i++){HXWebPopupFlexibleControl._DropdownList._set_column_width(objContainer,i+1,0,false)}if(HXWebJS.Core.Browser.IsIE==true){objTable.dataSrc="#hxxml_datalist__dropdownlist_control";objTable.refresh()}};HXWebPopupFlexibleControl._DropdownList._set_column_width=function(objContainer,ColumnId,strWidthRate,blnHideLeftColumnBorder){var objTDs=HXWebJS.DOM.FindFirstElementById("td_dropdownlist__col_"+ColumnId,objContainer);if(objTDs==null){return}if(objTDs.length==null){if(strWidthRate=="0"||strWidthRate=="0%"){objTDs.style.display="none"}else{objTDs.width=strWidthRate;objTDs.style.display="";objTDs.style.borderLeftStyle=(blnHideLeftColumnBorder?"none":"solid")}}else{for(var i=0;i<objTDs.length;i++){var objTD=objTDs[i];if(strWidthRate=="0"||strWidthRate=="0%"){objTD.style.display="none"}else{objTD.width=strWidthRate;objTD.style.display="";objTDs.style.borderLeftStyle=(blnHideLeftColumnBorder?"none":"solid")}}}};HXWebPopupFlexibleControl._DropdownList._search_and_fill_data=function(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputTextBox,objChooseButton,strSearchKeyWord,strCustomizedFilterData){var strOrgSelectedValues="";if(objActiveElementInfo.choose_type!=null&&objActiveElementInfo.choose_type!=0){strOrgSelectedValues=HXWebPopupFlexibleControl._DropdownList._get_org_selected_values(objActiveElementInfo,objInputTextBox,objChooseButton)}var intNewPageSize=(objActiveElementInfo.is_paging!=false?objActiveElementInfo.new_page_size:0);var fnResponseForDataList=function(strReturnValue){if(strReturnValue==null){return}if(HXWebPopupFlexibleControl._Internal._current_active_control_info==null){return}if(objInputTextBox!=HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox&&objChooseButton!=HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button){return}HXWebPopupFlexibleControl._DropdownList._fill_datalist_content(objActiveElementInfo,objInputTextBox,objChooseButton,strReturnValue,strOrgSelectedValues,null);if(objActiveElementInfo.is_paging!=false){var fnResponseForRecordCount=function(strReturnValue){if(strReturnValue==null){return}if(HXWebPopupFlexibleControl._Internal._current_active_control_info==null){return}if(objInputTextBox!=HXWebPopupFlexibleControl._Internal._current_active_control_info._input_textbox&&objChooseButton!=HXWebPopupFlexibleControl._Internal._current_active_control_info._choose_button){return}if(HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object==null){return}var intTotalRecordsCount=strReturnValue;HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object.SelectSingleNode("//RS_ROW").SetAttributeValue("TOTAL_RECORDS_COUNT",intTotalRecordsCount)};var strXmlDataForRecordCount=HXWebPopupFlexibleControl._DropdownList._build_pagxmlservice_xmlcontent_getdata(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,0,strSearchKeyWord,strOrgSelectedValues,strCustomizedFilterData,"recordcount",objActiveElementInfo.search_columns);HXWebJS.Controls.ComboBox._InternalFunctions._call_getdatalist_pagxmlservice_async(strXmlDataForRecordCount,fnResponseForRecordCount,objActiveElementInfo.extend_web_part_html_id)}};if(objActiveElementInfo.use_local_list_data){HXWebPopupFlexibleControl._DropdownList._call_getdatalist_local(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,false,strSearchKeyWord,strOrgSelectedValues,fnResponseForDataList)}else{var strXmlDataForDataList=HXWebPopupFlexibleControl._DropdownList._build_pagxmlservice_xmlcontent_getdata(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,intNewPageSize,strSearchKeyWord,strOrgSelectedValues,strCustomizedFilterData,"datalist",objActiveElementInfo.search_columns);HXWebPopupFlexibleControl._DropdownList._call_getdatalist_pagxmlservice_async(strXmlDataForDataList,fnResponseForDataList,objActiveElementInfo.extend_web_part_html_id)}};HXWebPopupFlexibleControl._DropdownList._call_getdatalist_local=function(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,blnFindMatchedSingleRecord,strSearchKeyWord,strCurrentSelectedValue,fnResponseForDataList){var strLocalDropDownXmlListData="";var strContentType=objActiveElementInfo.content_type;if(strContentType!="DESC"){strContentType="KEY"}if(objActiveElementInfo.predefined_dropdownlist_values!=null&&objActiveElementInfo.predefined_dropdownlist_values!=""){strLocalDropDownXmlListData=HXWebPopupFlexibleControl._DropdownList._build_dropdown_xml_list_data_via_values(objActiveElementInfo,blnFindMatchedSingleRecord,strSearchKeyWord);if(fnResponseForDataList!=null){fnResponseForDataList(strLocalDropDownXmlListData)}return strLocalDropDownXmlListData}if(!HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.get_local_list_data_callback_func)){alert("Application Error:get_local_list_data_callback_func do not registered!");return}var objLocalDropDownXmlListData=objActiveElementInfo.get_local_list_data_callback_func(str_webdatacontrol_id,strUniqueName);if(objLocalDropDownXmlListData==null||typeof(objLocalDropDownXmlListData)!="object"){alert("Application Error: get_local_list_data_callback_func() must return valid XML object type!");return}if(objLocalDropDownXmlListData==null||(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW")!=null&&(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW/@IS_CHOOSED")==null||objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW/@KEY")==null))){alert('Application Error: get_local_list_data_callback_func() must return a xml object with the format:<RS_DATA><RS_ROW IS_CHOOSED="0" KEY="" DESC="" ... />...</RS_DATA>!');return}if(blnFindMatchedSingleRecord){if(strSearchKeyWord!=null&&strSearchKeyWord!=""){if(objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW[@KEY='"+HXWebJS.Xml.MarkXMLSpecialChars(strCurrentSelectedValue)+"']")!=null){var strTemp=objLocalDropDownXmlListData.SelectSingleNode("//RS_ROW[@KEY='"+HXWebJS.Xml.MarkXMLSpecialChars(strCurrentSelectedValue)+"']").GetXml();strLocalDropDownXmlListData="<RS_DATA>"+strTemp+"</RS_DATA>"}}if(fnResponseForDataList!=null){fnResponseForDataList(strLocalDropDownXmlListData)}return strLocalDropDownXmlListData}else{strLocalDropDownXmlListData=objLocalDropDownXmlListData.GetXml();var strAllXmlData='<ALL_DATA><CONFIG_DATA><RS_DATA><RS_ROW FIRST_RECORD_ON_PAGE="0" LAST_RECORD_ON_PAGE="1" ></RS_ROW></RS_DATA></CONFIG_DATA><RESULT_DATA>'+strLocalDropDownXmlListData+"</RESULT_DATA></ALL_DATA>";if(fnResponseForDataList!=null){fnResponseForDataList(strAllXmlData)}return strAllXmlData}};HXWebPopupFlexibleControl._DropdownList._build_dropdown_xml_list_data_via_values=function(objActiveElementInfo,blnFindMatchedSingleRecord,strSearchKeyWord){var strDropDownListValues=objActiveElementInfo.predefined_dropdownlist_values;var sb_xml=new HXWebStringBuilder();if(blnFindMatchedSingleRecord){sb_xml.append("<RS_DATA>")}else{sb_xml.append('<ALL_DATA><CONFIG_DATA><RS_DATA><RS_ROW FIRST_RECORD_ON_PAGE="0" LAST_RECORD_ON_PAGE="1" ></RS_ROW></RS_DATA></CONFIG_DATA>');sb_xml.append("<RESULT_DATA><RS_DATA>")}var arrKeyValueList=strDropDownListValues.split(/;/);var strKeyValue,strKey,strValue;var arrTemp;for(var i=0;i<arrKeyValueList.length;i++){strKeyValue=arrKeyValueList[i];arrTemp=HXWebJS.Utility.Trim(strKeyValue).split(/=/);strKey=arrTemp[0];strValue=(arrTemp.length>1?arrTemp[1]:strKey);if(blnFindMatchedSingleRecord&&strSearchKeyWord!=null&&strSearchKeyWord!=""){if((objActiveElementInfo.content_type=="KEY"&&strKey==strSearchKeyWord)||(objActiveElementInfo.content_type=="DESC"&&strDesc==strSearchKeyWord)){sb_xml.append(HXWebJS.Utility.StringFormat('<RS_ROW KEY="{0}" DESC="{1}"></RS_ROW>',strKey,strValue));break}else{continue}}sb_xml.append(HXWebJS.Utility.StringFormat('<RS_ROW KEY="{0}" DESC="{1}"></RS_ROW>',strKey,strValue))}if(blnFindMatchedSingleRecord){sb_xml.append("</RS_DATA>")}else{sb_xml.append("</RS_DATA></RESULT_DATA>");sb_xml.append("</ALL_DATA>")}return sb_xml.toString()};HXWebPopupFlexibleControl._DropdownList._get_customized_filter_data=function(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,objInputBox,objDropDownButton){var strCustomizedFilterData="";if(HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.filter_data_callback_func)){try{strCustomizedFilterData=objActiveElementInfo.filter_data_callback_func(str_webdatacontrol_id,objInputBox,objDropDownButton,strUniqueName);if(typeof(strCustomizedFilterData)=="boolean"&&strCustomizedFilterData==false){return false}}catch(e){alert("hxcombobox filter_data_callback_func call failed. "+e.description);return false}}if(objActiveElementInfo.predefined_dropdownlist_code!=null&&objActiveElementInfo.predefined_dropdownlist_code!=""){var sb_XmlDropdownListPart=new HXWebStringBuilder();sb_XmlDropdownListPart.append('<RS_ROW DROPDOWNLIST_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_dropdownlist_code)+'"');sb_XmlDropdownListPart.append(' CURRENT_PAGE_ASSEMBLY_CLASS="'+HXWebJS.Xml.MarkXMLSpecialChars(mstrPageXmlServiceClassName)+'"');sb_XmlDropdownListPart.append(' SHOW_BLANK_ROW="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_dropdownlist_show_blank_row==null?"":objActiveElementInfo.objActiveElementInfo.predefined_dropdownlist_show_blank_row)+'"');sb_XmlDropdownListPart.append(' BLANK_ROW_CAPTION="'+HXWebJS.Xml.MarkXMLSpecialChars(objActiveElementInfo.predefined_dropdownlist_blank_row_caption==null?"":objActiveElementInfo.predefined_dropdownlist_blank_row_caption)+'"');sb_XmlDropdownListPart.append(" />");var strAllXmlData=HXWebJS.Xml.BuildAllXmlDatas("dropdownlist",sb_XmlDropdownListPart.toString(),"customized_filter_data",strCustomizedFilterData);return strAllXmlData}return strCustomizedFilterData};HXWebPopupFlexibleControl._DropdownList._build_pagxmlservice_xmlcontent_getdata=function(str_webdatacontrol_id,strUniqueName,objActiveElementInfo,intNewPageSize,strSearchKeyWord,strOrgSelectedValues,strCustomizedFilterData,strReturnDataType,strSearchColumnsList){var strWebDataListPageAssemblyName=(objActiveElementInfo.webdatalist_pagexmlsvc_assemblyname?objActiveElementInfo.webdatalist_pagexmlsvc_assemblyname:mstrPageXmlServiceAssemblyName);var strWebDataListPageClassName=(objActiveElementInfo.webdatalist_pagexmlsvc_classname?objActiveElementInfo.webdatalist_pagexmlsvc_classname:mstrPageXmlServiceClassName);if(objActiveElementInfo.predefined_dropdownlist_code!=null&&objActiveElementInfo.predefined_dropdownlist_code!=""){strWebDataListPageAssemblyName="TrustHX.HXWWW501";strWebDataListPageClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper_PredefinedDropdownList"}if(strOrgSelectedValues==null){strOrgSelectedValues=""}if(strSearchColumnsList==null){strSearchColumnsList=""}if(strCustomizedFilterData==null){strCustomizedFilterData=""}var objSB=new HXWebStringBuilder();objSB.append('<ALL_DATA RETURN_DATA_TYPE="'+strReturnDataType+'"');objSB.append(' ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebDataListPageAssemblyName)+'"');objSB.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strWebDataListPageClassName)+'"');objSB.append(' HX_WEB_DATA_LIST_TYPE="hxwebcomboboxcontrol"');objSB.append(' CHOOSE_TYPE="'+(objActiveElementInfo.choose_type==1?"1":"0")+'"');objSB.append(' HX_WEB_DATA_LIST_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(str_webdatacontrol_id)+'">');objSB.append("<CONFIG_DATA><RS_ROW");objSB.append(' NEW_PAGE_SIZE="'+intNewPageSize+'"');objSB.append(' SEARCH_KEY_WORD="'+HXWebJS.Xml.MarkXMLSpecialChars(strSearchKeyWord)+'"');objSB.append(' SEARCH_FROM_BEGIN="'+(!objActiveElementInfo.search_from_begin?0:1)+'"');objSB.append(' ORG_SELECTED_VALUES="'+HXWebJS.Xml.MarkXMLSpecialChars(strOrgSelectedValues)+'"');objSB.append(' CUSTOMIZED_FILTER_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(strCustomizedFilterData)+'"');objSB.append(' CONTENT_TYPE="'+objActiveElementInfo.content_type.toUpperCase()+'"');objSB.append(' SEARCH_CONTENT_TYPE="'+strSearchColumnsList+'" /></CONFIG_DATA>');objSB.append("</ALL_DATA>");return objSB.toString()};HXWebPopupFlexibleControl._DropdownList._call_getdatalist_pagxmlservice_async=function(strXmlContent,fnResponse,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper";HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",strXmlContent,fnResponse,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebPopupFlexibleControl._DropdownList._call_getdatalist_pagxmlservice=function(strXmlContent,strExtendWebPartHtmlId){var strAssemblyName="TrustHX.HXWWW501";var strClassName="TrustHX.HXWWW501.HXWebComboboxControlHelper";return HXWebJS.Xml.XmlService.CallPageXmlService("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",strXmlContent,strAssemblyName,strClassName,null,null,null,strExtendWebPartHtmlId)};HXWebPopupFlexibleControl._DropdownList._fill_datalist_content=function(objActiveElementInfo,objInputTextBox,objChooseButton,strReturnValue,strOrgSelectedValues,strTriggeredVia){var strXmlDataList,intFirstRecordOnPage,intLastRecordOnPage,strOrgSearchKeyWord="";var objXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strReturnValue);var objxmlnode_updated_config_cnt=objXmlDoc.SelectSingleNode("/ALL_DATA/CONFIG_DATA//RS_ROW");if(objxmlnode_updated_config_cnt.GetAttributeValue("ORG_SEARCH_KEY_WORD")!=null){strOrgSearchKeyWord=objxmlnode_updated_config_cnt.GetAttributeValue("ORG_SEARCH_KEY_WORD")}intFirstRecordOnPage=objxmlnode_updated_config_cnt.GetAttributeValue("FIRST_RECORD_ON_PAGE");intLastRecordOnPage=objxmlnode_updated_config_cnt.GetAttributeValue("LAST_RECORD_ON_PAGE");var strCurrentSearchKeyWord=(objInputTextBox==null?"":objInputTextBox.value);if(strTriggeredVia!=null&&strTriggeredVia=="via_keyin"){if(strOrgSearchKeyWord!=strCurrentSearchKeyWord){return}}if(objXmlDoc.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA")==null){strXmlDataList=""}else{if(objActiveElementInfo.afterdataget_callback_func!=null){objActiveElementInfo.afterdataget_callback_func(objInputTextBox.id,objXmlDoc)}strXmlDataList=objXmlDoc.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA").GetXml()}var objXmlDataIsland=HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object;objXmlDataIsland.ReloadXML(strXmlDataList);if(objActiveElementInfo.choose_type==1&&strOrgSelectedValues!=null&&strOrgSelectedValues!=""){var ss=strOrgSelectedValues.split(/[,|;]/);for(key in ss){var objXmlNode=objXmlDataIsland.SelectSingleNode("//RS_ROW[@KEY='"+ss[key]+"']");if(objXmlNode!=null){objXmlNode.SetAttributeValue("IS_CHOOSED","-1")}}}var objHXXmlDoc_ConfigData=HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object;objHXXmlDoc_ConfigData.SelectSingleNode("//RS_ROW").SetAttributeValue("FIRST_RECORD_ON_PAGE",intFirstRecordOnPage);objHXXmlDoc_ConfigData.SelectSingleNode("//RS_ROW").SetAttributeValue("LAST_RECORD_ON_PAGE",intLastRecordOnPage)};HXWebPopupFlexibleControl._DropdownList._set_binding_datafields_values=function(objActiveElementInfo,intBindingRecordNumber,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5){var strTempAttributeValue;var str_binding_datasrc_id=objActiveElementInfo.binding_datasrc_id;if(!str_binding_datasrc_id){return}var objDataSrc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(str_binding_datasrc_id);if(objDataSrc==null){return}var strDataFieldNameForKey=objActiveElementInfo.binding_datafld_for_key;var strDataFieldNameForDesc=objActiveElementInfo.binding_datafld_for_desc;var strDataFieldNameForAttr1=objActiveElementInfo.binding_datafld_for_attr_1;var strDataFieldNameForAttr2=objActiveElementInfo.binding_datafld_for_attr_2;var strDataFieldNameForAttr3=objActiveElementInfo.binding_datafld_for_attr_3;var strDataFieldNameForAttr4=objActiveElementInfo.binding_datafld_for_attr_4;var strDataFieldNameForAttr5=objActiveElementInfo.binding_datafld_for_attr_5;var objHXXmlNode_Binding=null;if(intBindingRecordNumber!=null){objHXXmlNode_Binding=objDataSrc.SelectNodes("//RS_ROW")[intBindingRecordNumber-1]}else{objHXXmlNode_Binding=objDataSrc.SelectSingleNode("//RS_ROW")}if(objHXXmlNode_Binding==null){return}if(strDataFieldNameForKey!=null&&strDataFieldNameForKey!=""){strDataFieldNameForKey=strDataFieldNameForKey.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForKey);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForKey,strSelectedKey)}}if(strDataFieldNameForDesc!=null&&strDataFieldNameForDesc!=""){strDataFieldNameForDesc=strDataFieldNameForDesc.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForDesc);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForDesc,strSelectedDesc)}}if(strDataFieldNameForAttr1!=null&&strDataFieldNameForAttr1!=""){strDataFieldNameForAttr1=strDataFieldNameForAttr1.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr1);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr1,strSelectedAttr1)}}if(strDataFieldNameForAttr2!=null&&strDataFieldNameForAttr2!=""){strDataFieldNameForAttr2=strDataFieldNameForAttr2.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr2);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr2,strSelectedAttr2)}}if(strDataFieldNameForAttr3!=null&&strDataFieldNameForAttr3!=""){strDataFieldNameForAttr3=strDataFieldNameForAttr3.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr3);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr3,strSelectedAttr3)}}if(strDataFieldNameForAttr4!=null&&strDataFieldNameForAttr4!=""){strDataFieldNameForAttr4=strDataFieldNameForAttr4.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr4);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr4,strSelectedAttr4)}}if(strDataFieldNameForAttr5!=null&&strDataFieldNameForAttr5!=""){strDataFieldNameForAttr5=strDataFieldNameForAttr5.toUpperCase();strTempAttributeValue=objHXXmlNode_Binding.GetAttributeValue(strDataFieldNameForAttr5);if(strTempAttributeValue!=null){objHXXmlNode_Binding.SetAttributeValue(strDataFieldNameForAttr5,strSelectedAttr5)}}};HXWebPopupFlexibleControl._DropdownList._run_datachoosed_callback_function=function(str_webdatacontrol_id,objActiveElementInfo,objInputTextBox,objDropdownButton,objXmlChoosedData){if(HXWebJS.Core._InternalFunctions.IsJavascriptFunctionDefined(objActiveElementInfo.datachoosed_callback_func)){try{objActiveElementInfo.datachoosed_callback_func(str_webdatacontrol_id,objInputTextBox,objDropdownButton,objXmlChoosedData)}catch(e){alert("hxcombobox datachoosed_callback_func call failed. "+e.description);return}}};HXWebPopupFlexibleControl._DropdownList._set_selected_desc_to_textbox=function(objActiveElementInfo,objInputTextBox,strSelectedKey,strSelectedDesc){if(objInputTextBox==null){return}if(objActiveElementInfo.content_type=="KEY"&&(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datafld_for_key==null||objActiveElementInfo.binding_datafld_for_key=="")){objInputTextBox.value=strSelectedKey;return}if(objActiveElementInfo.content_type=="DESC"&&(objActiveElementInfo.binding_datasrc_id==null||objActiveElementInfo.binding_datafld_for_desc==null||objActiveElementInfo.binding_datafld_for_desc=="")){objInputTextBox.value=strSelectedDesc}};HXWebPopupFlexibleControl._DropdownList._get_search_columns=function(strColumnWidths){if(strColumnWidths==null||strColumnWidths==""){strColumnWidths="100%"}if(strColumnWidths.charAt(strColumnWidths.length-1)==";"){strColumnWidths=strColumnWidths.substring(0,strColumnWidths.length-1)}var sb_temp=new HXWebStringBuilder();var strArrary=strColumnWidths.split(";");var blnHasColumnExist=false;if(!(strArrary[0]=="0"||strArrary[0]=="0%")){sb_temp.append("KEY");blnHasColumnExist=true}if(strArrary.length>1&&!(strArrary[1]=="0"||strArrary[1]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("DESC");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>2&&!(strArrary[2]=="0"||strArrary[2]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_1");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>3&&!(strArrary[3]=="0"||strArrary[3]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_2");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>4&&!(strArrary[4]=="0"||strArrary[4]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_3");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>5&&!(strArrary[5]=="0"||strArrary[5]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_4");if(!blnHasColumnExist){blnHasColumnExist=true}}if(strArrary.length>6&&!(strArrary[6]=="0"||strArrary[6]=="0%")){if(blnHasColumnExist){sb_temp.append(";")}sb_temp.append("ATTR_5");if(!blnHasColumnExist){blnHasColumnExist=true}}return sb_temp.toString()};HXWebPopupFlexibleControl._DropdownList._popup_area_clicked=function(objHXEventData){var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){return}var objEventSrcElement=objHXEventData.target;var strElementId=objEventSrcElement.id;if(strElementId=="chkbx_dropdownlist__controlarea_selectall"){objHXEventData.stopPropagation();HXWebPopupFlexibleControl._DropdownList._select_all(objEventSrcElement);return}if(strElementId=="btn_dropdownlist__controlarea_ok"){objHXEventData.stopPropagation();var objHXXmlDoc=HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object;var objHXXmlDataList=objHXXmlDoc.SelectNodes("//RS_ROW[@IS_CHOOSED !='0']");HXWebPopupFlexibleControl._DropdownList._data_item_choosed_process(objHXXmlDataList);return}if(strElementId=="btn_dropdownlist__controlarea_cancel"){objHXEventData.stopPropagation();HXWebPopupFlexibleControl._DropdownList._hide();if(objActiveControlInfo._input_textbox!=null&&!objActiveControlInfo._input_textbox.disabled){HXWebJS.EventManager.FireEvent(objActiveControlInfo._input_textbox,"focusout")}return}if(strElementId=="img_dropdownlist__controlarea_showmore"){objHXEventData.stopPropagation();var objActiveElementInfo=objActiveControlInfo._options;objActiveElementInfo.new_page_size=objActiveElementInfo.new_page_size*2;HXWebPopupFlexibleControl._DropdownList._search_again();return}if(strElementId=="img_dropdownlist__controlarea_search"){objHXEventData.stopPropagation();HXWebPopupFlexibleControl._DropdownList._search_again();return}if(strElementId=="chkbx_dropdownlist__data_item_is_choosed"){return}var objChoosedTR=null;if(objEventSrcElement.id=="tr_dropdownlist__dataline_area"){objChoosedTR=objEventSrcElement}if(objEventSrcElement.parentNode.id=="tr_dropdownlist__dataline_area"){objChoosedTR=objEventSrcElement.parentNode}if(objEventSrcElement.parentNode.parentNode.id=="tr_dropdownlist__dataline_area"){objChoosedTR=objEventSrcElement.parentNode.parentNode}if(objChoosedTR!=null){objHXEventData.stopPropagation();HXWebPopupFlexibleControl._DropdownList._datarow_clicked(objChoosedTR);return}};HXWebPopupFlexibleControl._DropdownList._select_all=function(objCheckBox){var objXmlDataIsland=HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object;var objXmlNodeList=objXmlDataIsland.SelectNodes("//RS_ROW");var strTemp=(objCheckBox.checked?"-1":"0");for(var i=0;i<objXmlNodeList.length;i++){objXmlNodeList[i].SetAttributeValue("IS_CHOOSED",strTemp)}};HXWebPopupFlexibleControl._DropdownList._searchkeyword_keypressed=function(objHXEventData){objHXEventData.stopPropagation();var strSearchKeyWord=objHXEventData.target.value;var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){return}var blnNeedSearch=false;if(objHXEventData.keyCode==13){blnNeedSearch=true}else{var objXmlConfigData=HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object;if(objXmlConfigData.SelectSingleNode("//RS_ROW").GetAttributeValue("SEARCH_KEY_WORD")!=strSearchKeyWord){objXmlConfigData.SelectSingleNode("//RS_ROW").SetAttributeValue("SEARCH_KEY_WORD",strSearchKeyWord)}}if(!blnNeedSearch){return}HXWebPopupFlexibleControl._DropdownList._search_again()};HXWebPopupFlexibleControl._DropdownList._search_again=function(){var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){return}if(objActiveControlInfo._process_class!==HXWebPopupFlexibleControl._DropdownList){return}var strCustomizedFilterData=HXWebPopupFlexibleControl._DropdownList._get_customized_filter_data(objActiveControlInfo._webdatacontrol_id,objActiveControlInfo._unique_name,objActiveControlInfo._options,objActiveControlInfo._input_textbox,objActiveControlInfo._choose_button);if(typeof(strCustomizedFilterData)=="boolean"&&strCustomizedFilterData==false){return}var objXmlConfigData=HXWebPopupFlexibleControl._DropdownList._global_xml_configdata_object;var strSearchKeyWord=objXmlConfigData.SelectSingleNode("//RS_ROW").GetAttributeValue("SEARCH_KEY_WORD");HXWebPopupFlexibleControl._DropdownList._search_and_fill_data(objActiveControlInfo._webdatacontrol_id,objActiveControlInfo._unique_name,objActiveControlInfo._options,objActiveControlInfo._input_textbox,objActiveControlInfo._choose_button,strSearchKeyWord,strCustomizedFilterData)};HXWebPopupFlexibleControl._DropdownList._data_item_choosed_process=function(objXmlNodeList){var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){return}if(objActiveControlInfo._process_class!==HXWebPopupFlexibleControl._DropdownList){return}var strSelectedKey="",strSelectedDesc="",strSelectedAttr1="",strSelectedAttr2="",strSelectedAttr3="",strSelectedAttr4="",strSelectedAttr5="";for(var i=0;i<objXmlNodeList.length;i++){strSelectedKey+=(strSelectedKey!=""?",":"")+objXmlNodeList[i].GetAttributeValue("KEY");strSelectedDesc+=(strSelectedDesc!=""?",":"")+objXmlNodeList[i].GetAttributeValue("DESC");strSelectedAttr1+=(strSelectedAttr1!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_1")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_1"):"");strSelectedAttr2+=(strSelectedAttr2!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_2")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_2"):"");strSelectedAttr3+=(strSelectedAttr3!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_3")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_3"):"");strSelectedAttr4+=(strSelectedAttr4!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_4")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_4"):"");strSelectedAttr5+=(strSelectedAttr5!=""?",":"")+(objXmlNodeList[i].GetAttributeValue("ATTR_5")!=null?objXmlNodeList[i].GetAttributeValue("ATTR_5"):"")}var objActiveElementInfo=objActiveControlInfo._options;var objInputTextBox=objActiveControlInfo._input_textbox;var objChooseButton=objActiveControlInfo._choose_button;HXWebPopupFlexibleControl._DropdownList._set_selected_desc_to_textbox(objActiveElementInfo,objInputTextBox,strSelectedKey,strSelectedDesc);var intBindingRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objInputTextBox!=null?objInputTextBox:objChooseButton);HXWebPopupFlexibleControl._DropdownList._set_binding_datafields_values(objActiveElementInfo,intBindingRecordNumber,strSelectedKey,strSelectedDesc,strSelectedAttr1,strSelectedAttr2,strSelectedAttr3,strSelectedAttr4,strSelectedAttr5);var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA></RS_DATA>");var objHXXmlRootNode=objHXXmlDoc.GetRootXmlNode();for(var i=0;i<objXmlNodeList.length;i++){objHXXmlRootNode.AppendChild(objXmlNodeList[i].CloneNode())}HXWebPopupFlexibleControl._DropdownList._run_datachoosed_callback_function(objActiveControlInfo._webdatacontrol_id,objActiveElementInfo,objInputTextBox,objChooseButton,objHXXmlDoc);var blnNeedFocusOnInputBox=false;if(objInputTextBox!=null){HXWebPopupFlexibleControl._DropdownList._global_data_item_chosen_ok=true;if(!objInputTextBox.disabled&&!HXWebJS.Core.Browser.IsMobile){blnNeedFocusOnInputBox=true}}if(blnNeedFocusOnInputBox){objInputTextBox.focus()}else{HXWebPopupFlexibleControl._Internal._current_active_control_info=null}HXWebPopupFlexibleControl._DropdownList._hide()};HXWebPopupFlexibleControl._DropdownList._datarow_clicked=function(objTR){var objActiveControlInfo=HXWebPopupFlexibleControl._Internal._current_active_control_info;if(objActiveControlInfo==null){return}if(objActiveControlInfo._process_class!==HXWebPopupFlexibleControl._DropdownList){return}var objXmlDataIsland=HXWebPopupFlexibleControl._DropdownList._global_xml_datalist_object;var intBindingRecordNumber=HXWebJS.DOM.ElementGetBindingRecordNumber(objTR);if(intBindingRecordNumber==null||intBindingRecordNumber<=0){return}var objHXXmlNodeList=objXmlDataIsland.SelectNodes("//RS_ROW");if(intBindingRecordNumber>objHXXmlNodeList.length){return}var objXmlRow=objXmlDataIsland.SelectNodes("//RS_ROW")[intBindingRecordNumber-1];if(objActiveControlInfo._options.choose_type!=1){HXWebPopupFlexibleControl._DropdownList._data_item_choosed_process([objXmlRow])}else{if(objXmlRow.GetAttributeValue("IS_CHOOSED")=="-1"){objXmlRow.SetAttributeValue("IS_CHOOSED","0")}else{objXmlRow.SetAttributeValue("IS_CHOOSED","-1")}}};