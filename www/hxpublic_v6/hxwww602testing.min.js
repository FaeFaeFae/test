HXWebJS.UnitTesting={},HXWebJS.UnitTesting.CommentForTestPreparing="",HXWebJS.UnitTesting.HideAlertDialg=function(){HXWebJS.UnitTesting._FrameworkTools._hide_alert_dialog()},HXWebJS.UnitTesting.RestoreAlertDialg=function(){HXWebJS.UnitTesting._FrameworkTools._restore_alert_dialog()},HXWebJS.UnitTesting.RunAllWebTestMethods=function(e){var t=HXWebJS.UnitTesting._FrameworkTools._get_web_test_methods_list_of_test_page(e);if(null!=t)for(var n in t)HXWebJS.UnitTesting.RunOneWebTestMethod(n,e)},HXWebJS.UnitTesting.RunOneWebTestMethod=function(e,t){null==t&&(t=window);var n=t.HXWebJS.UnitTesting.WebTestMethods;if(null!=n&&null!=n[e]&&"function"==typeof n[e]){var s=n[e],o=HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window();null==o&&(o=window);var r=HXWebPageGlobalVariables.CurrentPageName;try{s(),o.HXWebJS.UnitTesting._FrameworkTools._set_test_result(r,e,"end_ok_suspend")}catch(t){var i=new String("string"==typeof t?t:t.description);if(-1!=i.indexOf("HXWebTestFramework_AssertFailException")){var _=i.indexOf(":"),a=i.substr(_+1);o.HXWebJS.UnitTesting._FrameworkTools._set_test_result(r,e,"end_fail",a)}else if(-1!=i.indexOf("HXWebTestFramework_AssertOKException")){var _=i.indexOf(":"),a=i.substr(_+1);o.HXWebJS.UnitTesting._FrameworkTools._set_test_result(r,e,"end_ok_suspend",a)}else a=i,o.HXWebJS.UnitTesting._FrameworkTools._set_test_result(r,e,"end_fail",a)}}},HXWebJS.UnitTesting.Assert={},HXWebJS.UnitTesting.Assert.AreEqual=function(e,t,n){if(e!=t)throw null==e&&(e=""),null==t&&(t=""),"HXWebTestFramework_AssertFailException_AreEqual:Assert.AreEqual Failed. Expect Value="+e+", Actual Value="+t;if(null!=n)throw"HXWebTestFramework_AssertOKException_AreEqual:"+n},HXWebJS.UnitTesting.Assert.IsTrue=function(e,t,n){if(!e)throw null==t&&(t=""),"HXWebTestFramework_AssertFailException_IsTrue:Assert.IsTrue Failed. "+t;if(null!=n)throw"HXWebTestFramework_AssertOKException_AreEqual:"+n},HXWebJS.UnitTesting.Assert.SetAsManualTest=function(e,t){var n=HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window();null==n&&(n=window);var s=HXWebPageGlobalVariables.CurrentPageName;n.HXWebJS.UnitTesting._FrameworkTools._set_test_result(s,e,"manual",t)},HXWebJS.UnitTesting.Assert.Pending=function(e,t){var n=HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window();null==n&&(n=window);var s=HXWebPageGlobalVariables.CurrentPageName;n.HXWebJS.UnitTesting._FrameworkTools._set_test_result(s,e,"pending",t)},HXWebJS.UnitTesting.Assert.ResumeOK=function(e,t){var n=HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window();null==n&&(n=window);var s=HXWebPageGlobalVariables.CurrentPageName;n.HXWebJS.UnitTesting._FrameworkTools._set_test_result(s,e,"end_ok_final",t)},HXWebJS.UnitTesting.Assert.ResumeFail=function(e,t){if(-1!=t.indexOf("HXWebTestFramework_AssertFailException"))var n=t.indexOf(":"),s=t.substr(n+1);else s=t;var o=HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window();null==o&&(o=window);var r=HXWebPageGlobalVariables.CurrentPageName;o.HXWebJS.UnitTesting._FrameworkTools._set_test_result(r,e,"end_fail",s)},HXWebJS.UnitTesting.Assert.WebPageServerSideTestIsOK=function(e,t){null==t&&(t="");var n,s=window.alert;window.alert=function(){n=arguments[0]};var o=HXWebJS.Xml.XmlService.CallPageXmlService(e,t);if(window.alert=s,null==o)throw"HXWebJS单元测试框架WebPageServerSideTestIsOK Failed. "+n},HXWebJS.UnitTesting.WebTestMethods={},HXWebJS.UnitTesting._FrameworkTools={},HXWebJS.UnitTesting._FrameworkTools._is_hide_alert_dialog=!1,HXWebJS.UnitTesting._FrameworkTools._org_window_alert=null,HXWebJS.UnitTesting._FrameworkTools._hide_alert_dialog=function(){null==HXWebJS.UnitTesting._FrameworkTools._org_window_alert&&(HXWebJS.UnitTesting._FrameworkTools._org_window_alert=window.alert),HXWebJS.UnitTesting._FrameworkTools._is_hide_alert_dialog=!0;window.alert=function(){}},HXWebJS.UnitTesting._FrameworkTools._restore_alert_dialog=function(){window.alert=HXWebJS.UnitTesting._FrameworkTools._org_window_alert},HXWebJS.UnitTesting._FrameworkTools._run_selected_tests=function(e){var t=$(e).find("input#chkbx_test_method_choose_status:checked");if(0!=t.length)for(var n=e.getAttribute("hx_test_page_name"),s=e.getAttribute("hx_is_test_hosting_page"),o=function(e){var t=$(e).parents("tr").find("#spn_test_method_name").attr("hx_test_method_name");0==s&&HXWebJS.UnitTesting._FrameworkTools._set_test_result(n,t,"not_start",""),e.checked&&HXWebJS.UnitTesting._FrameworkTools._run_single_test_method(n,s,t)},r=0;r<t.length;r++)o(t[r])},HXWebJS.UnitTesting._FrameworkTools._run_single_test_method=function(e,t,n){0==t&&HXWebJS.UnitTesting.RunOneWebTestMethod(n)},HXWebJS.UnitTesting._FrameworkTools._set_test_result=function(e,t,n,s){null==s&&(s="");var o=window.document.getElementById("hxwebjs_unittestingframework__test_content_display_area"),r=HXWebJS.UnitTesting._FrameworkTools._get_test_content_page_display_area(o,e);if(null!=r){var i=HXWebJS.UnitTesting._FrameworkTools._get_test_method_html_tr_line(o,r,t);if(null!=i){var _=$(i).find("#spn_test_method_status")[0],a=_.getAttribute("hx_status");if(n!=a){var l=$(i).find("#spn_test_result_description")[0];switch(n){case"not_start":$(_).text(""),_.style.color="white";break;case"pending":$(_).text("?"),_.style.color="darkgray";break;case"end_ok_suspend":if("pending"==a||"manual"==a)return;$(_).text("V"),_.style.color="green";break;case"end_ok_final":$(_).text("V"),_.style.color="green";break;case"end_fail":$(_).text("X"),_.style.color="red";break;case"manual":$(_).text("M"),_.style.color="orange"}$(l).text(s),_.setAttribute("hx_status",n)}}}},HXWebJS.UnitTesting._FrameworkTools._get_test_content_page_display_area=function(e,t){var n=$("table",e);if(null!=n)for(var s=0;s<n.length;s++)if("hxwebunittestingframework__single_test_object_table_area"==n[s].id&&n[s].getAttribute("hx_test_page_name")==t)return n[s];return null},HXWebJS.UnitTesting._FrameworkTools._get_test_method_html_tr_line=function(e,t,n){var s=$(t).find("span#spn_test_method_name");if(0==s.length)return null;for(var o=0;o<s.length;o++)if(s[o].getAttribute("hx_test_method_name")==n)return s[o].parentNode.parentNode;return null},HXWebJS.UnitTesting._FrameworkTools._create_single_page_test_display_area=function(e,t,n){var s=HXWebJS.UnitTesting._FrameworkTools._get_test_content_page_display_area(e);if(null==s){var o=new HXWebStringBuilder;o.append('<table id="hxwebunittestingframework__single_test_object_table_area" style="width:100%;BORDER-COLLAPSE:collapse;layout-grid-type:fixed;" border=1'),o.append(' hx_test_page_name="'+t+'"'),o.append(' hx_is_test_hosting_page="'+(n?1:0)+'"'),o.append("><thead>"),o.append('<tr style="background-color:lightblue"><td colspan=4 style="font-weight:bold;"><span id=spn_test_page_name></span>&nbsp;</td></tr>'),o.append('<tr style="background-color:lightgreen"><td colspan=4><span id=spn_test_page_prepare_comment></span>&nbsp;</td></tr>'),o.append('<tr style="background-color:lightgray">'),o.append("<td width='20px' align=center>"),o.append('<input type="checkbox" onclick="$(document.body).trigger(\'click\');HXWebJS.UnitTesting._FrameworkTools._choose_all_test_mothods_of_page(this.parentNode.parentNode.parentNode.parentNode, this.checked)" />'),o.append('</td><td width=\'200px\'><input type=button value="Run Selected Tests" onclick="HXWebJS.UnitTesting._FrameworkTools._run_selected_tests(this.parentNode.parentNode.parentNode.parentNode)" /></td>'),o.append("<td width='20px'></td><td width='700px'></td></tr>"),o.append("</thead>"),o.append("</table>"),s=$(o.toString())[0],$(s).appendTo(e)}return s},HXWebJS.UnitTesting._FrameworkTools._fill_test_methods_of_test_page=function(e,t,n,s){var o=$("#spn_test_page_name",e)[0];$(o).text(t);var r=$("#spn_test_page_prepare_comment",e)[0];if($(r).text(n),null!=s){var i,_,a;for(i in s){var l;(_=(l=e.insertRow(-1)).insertCell(-1)).align="center",_.innerHTML="<input type=checkbox id=chkbx_test_method_choose_status />",l.insertCell(-1).innerHTML='<span id=spn_test_method_name hx_test_method_name="{0}">{0}</span>'.replace(/\{0\}/g,s[i]),(a=l.insertCell(-1)).align="center",a.innerHTML='<span id=spn_test_method_status style="font-weight:bold"  hx_status="not_start"></span>',l.insertCell(-1).innerHTML="<span id=spn_test_result_description />"}$("input#chkbx_test_method_choose_status").click(function(e){e.stopPropagation(),$(document.body).trigger("click")})}},HXWebJS.UnitTesting._FrameworkTools._choose_all_test_mothods_of_page=function(e,t){var n=$(e).find("input#chkbx_test_method_choose_status");if(null!=n)for(var s=0;s<n.length;s++)n[s].checked=t},HXWebJS.UnitTesting._FrameworkTools._get_hosting_test_window=function(){return null},HXWebJS.UnitTesting._FrameworkTools._get_web_test_methods_list_of_test_page=function(e){null==e&&(e=window);var t=e.HXWebJS.UnitTesting.WebTestMethods;if(null==t)return null;var n,s=[],o=0;for(n in t)s[o]=n,o++;return s},HXWebJS.UnitTesting._FrameworkTools._get_test_preparing_comment_of_test_page=function(e){return null==e&&(e=window),e.HXWebJS.UnitTesting.CommentForTestPreparing},HXWebJS.UnitTesting._FrameworkTools._onloadprocess=function(){if(0==$("#hxwebjs_unittestingframework__test_content_display_area").length){$('<div id=hxwebjs_unittestingframework__test_content_display_area style="LEFT:0px; TOP:0px;WIDTH:100%; position:absolute; padding:10px 10px 10px 10px;z-index:100;"></div>').appendTo(document.body)}var e=$("#hxwebjs_unittestingframework__test_content_display_area")[0],t=HXWebPageGlobalVariables.CurrentPageName,n=HXWebJS.UnitTesting._FrameworkTools._create_single_page_test_display_area(e,t,!1),s=HXWebJS.UnitTesting._FrameworkTools._get_test_preparing_comment_of_test_page(),o=HXWebJS.UnitTesting._FrameworkTools._get_web_test_methods_list_of_test_page();HXWebJS.UnitTesting._FrameworkTools._fill_test_methods_of_test_page(n,t,s,o)},HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.UnitTesting._FrameworkTools._onloadprocess);