HXWebJS.Controls={},HXWebJS.Controls._Internal={},HXWebJS.Controls._Internal._CachedCalendarTextObject=null,HXWebJS.Controls._Internal._GetCalendarTextContent=function(){if(null!=HXWebJS.Controls._Internal._CachedCalendarTextObject)return HXWebJS.Controls._Internal._CachedCalendarTextObject;var e=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text"),t="";if(null!=e){var n=e.SelectSingleNode("//@TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING");null!=n&&(t=n.GetText())}HXWebJS.Core.IsStringNullOrEmpty(t)&&(t=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING",!0)),null!=t&&""!=t&&"TEXT__HXWWW_HXWEBCALENDAR_RESOURCE_STRING"!=t||(t="SUN;MON;TUE;WED;THU;FRI;SAT;January;February;March;April;May;June;July;August;September;October;November;December;Today: {Y}/{M}/{D};{MM},{Y};Year;Month;Jan;Feb;Mar;Apr;May;Jun;Jul;Aug;Sep;Oct;Nov:Dec");var o=t.split(";");return HXWebJS.Controls._Internal._CachedCalendarTextObject={text_of_weekday:o.slice(0,7),text_of_month:o.slice(7,19),text_of_today_template:o[19],text_of_period_template:o[20],text_of_year_title:o[21],text_of_month_title:o[22],text_of_month_abbr:o.slice(23,35),text_of_today:o[35],text_of_time:o[36]},HXWebJS.Controls._Internal._CachedCalendarTextObject},HXWebJS.Controls._Internal._CachedComboboxResourceString=null,HXWebJS.Controls._Internal._GetComboboxTextResourceString=function(){if(null!=HXWebJS.Controls._Internal._CachedComboboxResourceString)return HXWebJS.Controls._Internal._CachedComboboxResourceString;var e="",t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text");if(null!=t){var n=t.SelectSingleNode("//@TEXT__HXWWW_HXWEBCOMBOBOX_RESOURCE_STRING");null!=n&&(e=n.GetText())}return HXWebJS.Core.IsStringNullOrEmpty(e)&&(e=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBCOMBOBOX_RESOURCE_STRING",!0)),(HXWebJS.Core.IsStringNullOrEmpty(e)||"TEXT__HXWWW_HXWEBCOMBOBOX_RESOURCE_STRING"==e)&&(e="OK;Cancel;Of;Clear"),HXWebJS.Controls._Internal._CachedComboboxResourceString=e,HXWebJS.Controls._Internal._CachedComboboxResourceString},HXWebJS.Controls._Picker={},HXWebJS.Controls._Picker={},HXWebJS.Controls._Picker=HXWebJS.Controls._Picker,HXWebJS.Controls._Picker._onloadprocess=function(){HXWebJS.EventManager.AddListener(document.body,"focusin",HXWebJS.Controls._Picker._onfocusinprocess),HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Controls._Picker._onclickprocess),HXWebJS.EventManager.AddListener(document.body,"touchend",HXWebJS.Controls._Picker._onclickprocess),HXWebJS.EventManager.AddListener(document.body,"keyup",HXWebJS.Controls._Picker._onkeyup_process),HXWebJS.EventManager.AddListener(document.body,"focusout",HXWebJS.Controls._Picker._onfocusoutprocess)},HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebJS.Controls._Picker._onloadprocess),HXWebJS.Controls._Picker._register=function(e,t,n,o){if(e!=t){HXWebJS.Controls._Picker._registed_elements_info||(HXWebJS.Controls._Picker._registed_elements_info={}),null==o?o={webdatacontrol_id:e}:o.webdatacontrol_id=e;_=HXWebJS.Controls._Picker._registed_elements_info[e];if(_)null!=o.control_type_get_callback&&(_.control_type_get_callback=o.control_type_get_callback),_.named_control_options[n]||(_.named_control_options[n]=o);else{var _;(_={webdatacontrol_id:e,choose_button_id:t,default_control_type:n,control_type_get_callback:o.control_type_get_callback,named_control_options:{}}).named_control_options[n]=o,HXWebJS.Controls._Picker._registed_elements_info[e]=_}}else HXWebJS.Core.LogErrorToConsole("弹出选择框输入html元素和下拉选择框触发按钮html元素的Id号不能相同！")},HXWebJS.Controls._Picker._get_options=function(e,t){if(!HXWebJS.Controls._Picker._registed_elements_info)return null;var n=HXWebJS.Controls._Picker._registed_elements_info[e];return null==n?null:n.named_control_options[t]},HXWebJS.Controls._Picker._onfocusinprocess=function(e){if(HXWebJS.Controls._Picker._registed_elements_info){var t=e.target,n=t.id;if(null!=n&&""!=n){if(null!=HXWebJS.Controls._Picker._current_active_control_info){if(HXWebJS.Controls._Picker._is_element_in_active_control(t))return;var o=HXWebJS.Controls._Picker._current_active_control_info._process_class;HXWebJS.Controls._Picker._current_active_control_info=null,o._hide()}var _=t.tagName.toUpperCase();if(!("INPUT"!=_&&"TEXTAREA"!=_||"INPUT"==_&&"text"!=t.type)){var l=t;l.disabled||1==l.readOnly&&"1"!=HXWebJS.DOM.GetElementAttributeValue(l,"hx_allow_readonly_pick")||HXWebJS.Controls._Picker._OnControlActiveProcess(n,e,l,null,"focusin")}}}},HXWebJS.Controls._Picker._onclickprocess=function(e){if(HXWebJS.Controls._Picker._registed_elements_info){var t=e.target;if(null!=HXWebJS.Controls._Picker._current_active_control_info){var n=HXWebJS.Controls._Picker._current_active_control_info;if(HXWebJS.Controls._Picker._is_element_in_active_control(t))return void((t===n._input_textbox&&null!=n._popup_area&&"none"==n._popup_area.style.display||t===n._choose_button)&&n._process_class._show(n._webdatacontrol_id,n._input_textbox,n._choose_button,n._options,e,"click_on_active_input_textbox"));if(document.activeElement===n._input_textbox)return;if(!HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess(n,"onclick_outside"))return void e.stopPropagation()}var o=t.id;if(null!=o&&""!=o){var _=null;for(key in HXWebJS.Controls._Picker._registed_elements_info)if(null!=HXWebJS.Controls._Picker._registed_elements_info[key]&&HXWebJS.Controls._Picker._registed_elements_info[key].choose_button_id==o){_=key;break}if(null!=_){"touchend"==e.type&&e.preventDefault();var l=HXWebJS.DOM.FindFirstElementById(_,t.parentNode.parentNode);HXWebJS.Controls._Picker._OnControlActiveProcess(_,e,l,t,"click_on_choose_button")}}}},HXWebJS.Controls._Picker._onkeyup_process=function(e){if(HXWebJS.Controls._Picker._registed_elements_info){var t=e.target,n=t.id;if(null!=n&&""!=n){var o=HXWebJS.Controls._Picker._registed_elements_info[n];if(null!=o&&!t.disabled&&!t.readOnly){var _=HXWebJS.Controls._Picker._current_active_control_info;if(null!=_){if(_._input_textbox===t&&9!=e.keyCode)if(27!=e.keyCode){var l=o.default_control_type;null!=o.control_type_get_callback&&(l=o.control_type_get_callback(n,t));var a=o.named_control_options[l];if(null!=a){var r=HXWebJS.Controls._Picker._GetProcessClassOfControlType(l);if(null!=r&&null!=r._input_text_keyup_process){var i=HXWebJS.DOM.FindFirstElementById(o.choose_button_id,t.parentNode.parentNode);r._input_text_keyup_process(n,t,i,a)}}}else _._process_class._hide()}else{if(9==e.keyCode||27==e.keyCode||13==e.keyCode)return;HXWebJS.EventManager.FireEvent(t,"focusin")}}}}},HXWebJS.Controls._Picker._onfocusoutprocess=function(e){if(HXWebJS.Controls._Picker._registed_elements_info&&null!=HXWebJS.Controls._Picker._current_active_control_info){var t=HXWebJS.Controls._Picker._current_active_control_info,n=e.target;if(n===t._input_textbox){var o=e.relatedTarget;if(null!=o){if(!HXWebJS.Controls._Picker._is_element_in_active_control(o)&&HXWebJS.Controls._Picker._is_element_in_active_control(n)){HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess(t,"onfocusout_other_related_tgt")||e.stopPropagation()}}}}},HXWebJS.Controls._Picker._OnControlActiveProcess=function(e,t,n,o,_){console.log("HXWebJS.Controls._Picker._OnControlActiveProcess() begin. reasonCode="+_);var l=HXWebJS.Controls._Picker._registed_elements_info[e];if(null!=l){var a=l.default_control_type;null!=l.control_type_get_callback&&(a=l.control_type_get_callback(e,null==n?o:n));var r=l.named_control_options[a];if(null!=r){var i=HXWebJS.Controls._Picker._GetProcessClassOfControlType(a);if(null!=i&&("focusin"!=_||0!=r.auto_show_when_focusin)){null==o&&null!=n&&(o=HXWebJS.DOM.FindFirstElementById(l.choose_button_id,n.parentNode.parentNode)),HXWebJS.Controls._Picker._current_active_control_info={_webdatacontrol_id:e,_process_class:i,_options:r,_input_textbox:null,_choose_button:null,_popup_area:null},HXWebJS.Controls._Picker._current_active_control_info._input_textbox=n,HXWebJS.Controls._Picker._current_active_control_info._choose_button=o;var d=i._show(e,n,o,r,t,_);HXWebJS.Controls._Picker._current_active_control_info._popup_area=d}}}},HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess=function(e,t){if(console.log("HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess() begin. reasonCode="+t),e._process_class._input_data_validate){var n=e._process_class._input_data_validate(e._webdatacontrol_id,e._input_textbox,e._choose_button,e._options);return n?(e._process_class._hide(),HXWebJS.Controls._Picker._current_active_control_info=null):null!=e._input_textbox&&(e._input_textbox.value=""),console.log("HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess() end with _input_data_validate()="+n),n}return e._process_class._hide(),HXWebJS.Controls._Picker._current_active_control_info=null,console.log("HXWebJS.Controls._Picker._OnActiveControlDeactiveProcess() end (without validate check)"),!0},HXWebJS.Controls._Picker._GetProcessClassOfControlType=function(e){return"popupdropdownlist"==e?HXWebComboBoxControl:"popupdatepicker"==e?HXWebDatePickerControl:"popupmonthpicker"==e?HXWebMonthPickerControl:"popuptimepicker"==e?HXWebTimePickerControl:"popuptreeview"==e?HXWebPopupTreeViewControl:"popuptextarea"==e?HXWebPopupTextAreaControl:null},HXWebJS.Controls._Picker._is_element_in_active_control=function(e){if(null==HXWebJS.Controls._Picker._current_active_control_info)return!1;if(HXWebJS.Controls._Picker._current_active_control_info._input_textbox===e)return!0;if(HXWebJS.Controls._Picker._current_active_control_info._choose_button===e)return!0;if("BODY"==e.tagName.toUpperCase())return!1;if(HXWebJS.DOM.IsElementInContainer(HXWebJS.Controls._Picker._current_active_control_info._popup_area,e,!0))return!0;var t=HXWebJS.Controls._Picker._current_active_control_info._process_class;return!(null==t._is_element_in_popup_area||!t._is_element_in_popup_area(e))},HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border=function(e,t,n,o,_,l,a){var r=HXWebJS.DOM.GetScrollLeft()+HXWebJS.DOM.GetWindowWidth();n+_>r&&(n=r-_-1);b=HXWebJS.DOM.GetWindowHeight();HXWebJS.Core.Browser.IsMicroMessenger?b-=60:HXWebJS.Core.Browser.IsMobile&&(b-=40);var i=HXWebJS.DOM.GetScrollTop(),d=i+b;if(o+l>d&&!a)if(null!=e){var s=HXWebJS.DOM.GetElementTopPosition(e);s-l-1>i&&(o=s-l-1)}else o=d-l;var c=-1,b=HXWebJS.DOM.GetWindowHeight();HXWebJS.Core.Browser.IsMicroMessenger?b-=60:HXWebJS.Core.Browser.IsMobile&&(b-=40);if(o+l>(d=(i=HXWebJS.DOM.GetScrollTop())+b)){var p,u=o+l-d+2,m=o-(p=null!=e&&"none"!=e.style.display&&"hidden"!=e.style.visibility?e.offsetHeight:t.offsetHeight)-i;u>m&&(u=m),c=i+u}return{left:n,top:o,new_scroll_top:c}},HXWebComboBoxControl={},HXWebComboBoxControl._Internal={},HXWebComboBoxControl._Internal.control_type="popupdropdownlist",HXWebComboBoxControl.register=function(e,t,n){null==n&&(n={}),HXWebComboBoxControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebComboBoxControl._Internal.control_type,n)},HXWebComboBoxControl.option={content_type:void 0,choose_type:void 0,is_paging:void 0,page_size:void 0,limit_in_list:void 0,use_icon:void 0,dropdownbox_width:void 0,dropdownbox_lines_count:void 0,columns_width_rate:void 0,binding_datasrc_id:void 0,binding_datafld_for_key:void 0,binding_datafld_for_desc:void 0,binding_datafld_for_attr_1:void 0,binding_datafld_for_attr_2:void 0,binding_datafld_for_attr_3:void 0,binding_datafld_for_attr_4:void 0,binding_datafld_for_attr_5:void 0,dropdownlist_code:void 0,dropdownlist_values:void 0,dropdownlist_object_view_field:void 0,search_from_begin:void 0,use_autocompletion_hint:void 0,search_columns:void 0,auto_show_when_focusin:void 0,show_clear_btn:void 0,use_mobile_mode:void 0,list_only_effective_items:void 0,extend_web_part_html_id:void 0,pagexmlsvc_class_name:void 0,oninit_callback:void 0,ongetfilterdata_callback:void 0,ondataget_callback:void 0,ondatabind_callback:void 0,ondatachoosed_callback:void 0},HXWebComboBoxControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebComboBoxControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.show_clear_btn&&(n.show_clear_btn=t.show_clear_btn),null!=t.content_type&&(n.content_type=t.content_type),null!=t.choose_type&&(n.choose_type=t.choose_type),null!=t.is_paging&&(n.is_paging=t.is_paging),null!=t.page_size&&(n.page_size=t.page_size),null!=t.limit_in_list&&(n.limit_in_list=t.limit_in_list),null!=t.use_icon&&(n.use_icon=t.use_icon),null!=t.dropdownbox_width&&(n.dropdownbox_width=t.dropdownbox_width),null!=t.dropdownbox_lines_count&&(n.dropdownbox_lines_count=t.dropdownbox_lines_count),null!=t.columns_width_rate&&(n.columns_width_rate=t.columns_width_rate),null!=t.binding_datasrc_id&&(n.binding_datasrc_id=t.binding_datasrc_id),null!=t.binding_datafld_for_key&&(n.binding_datafld_for_key=t.binding_datafld_for_key),null!=t.binding_datafld_for_desc&&(n.binding_datafld_for_desc=t.binding_datafld_for_desc),null!=t.binding_datafld_for_attr_1&&(n.binding_datafld_for_attr_1=t.binding_datafld_for_attr_1),null!=t.binding_datafld_for_attr_2&&(n.binding_datafld_for_attr_2=t.binding_datafld_for_attr_2),null!=t.binding_datafld_for_attr_3&&(n.binding_datafld_for_attr_3=t.binding_datafld_for_attr_3),null!=t.binding_datafld_for_attr_4&&(n.binding_datafld_for_attr_4=t.binding_datafld_for_attr_4),null!=t.binding_datafld_for_attr_5&&(n.binding_datafld_for_attr_5=t.binding_datafld_for_attr_5),null!=t.dropdownlist_code&&(n.dropdownlist_code=t.dropdownlist_code),null!=t.dropdownlist_values&&(n.dropdownlist_values=t.dropdownlist_values),null!=t.dropdownlist_object_view_field&&(n.dropdownlist_object_view_field=t.dropdownlist_object_view_field),null!=t.use_autocompletion_hint&&(n.use_autocompletion_hint=t.use_autocompletion_hint),null!=t.search_from_begin&&(n.search_from_begin=t.search_from_begin),null!=t.search_columns&&(n.search_columns=t.search_columns),null!=t.list_only_effective_items&&(n.list_only_effective_items=t.list_only_effective_items),null!=t.object_view_code_for_field_list_get&&(n.object_view_code_for_field_list_get=t.object_view_code_for_field_list_get),null!=t.oninit_callback&&(n.oninit_callback=t.oninit_callback),null!=t.ongetfilterdata_callback&&(n.ongetfilterdata_callback=t.ongetfilterdata_callback),null!=t.ondataget_callback&&(n.ondataget_callback=t.ondataget_callback),null!=t.ondatabind_callback&&(n.ondatabind_callback=t.ondatabind_callback),null!=t.ondatachoosed_callback&&(n.ondatachoosed_callback=t.ondatachoosed_callback),null!=t.extend_web_part_html_id&&(n.extend_web_part_html_id=t.extend_web_part_html_id),null!=t.use_mobile_mode&&(n.use_mobile_mode=t.use_mobile_mode),HXWebComboBoxControl._options_check(n))}},HXWebComboBoxControl._options_check=function(e){if(null!=e.dropdownlist_values&&""!=e.dropdownlist_values){e.is_paging=!1;var t=e.dropdownlist_values.indexOf("=")>0;e.columns_width_rate=t?"50%;50%":"100%"}null==e.page_size&&(e.page_size=30),null==e.content_type?e.content_type="KEY":e.content_type=e.content_type.toUpperCase(),null==e.search_columns&&(e.search_columns=HXWebComboBoxControl._get_search_columns(e.columns_width_rate)),null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile)},HXWebComboBoxControl._keyup_input_text_inquiry_info={is_current_inquiring:!1,current_inquiring_text:"",need_next_inquiring:!1,next_keyup_input_text:""},HXWebComboBoxControl._show=function(e,t,n,o,_,l){null!=t&&$(t).attr("_hx_combobox_last_chosen_value",t.value),HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=!1,HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text="",HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=!1,HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text="",o._new_page_size=o.page_size;var a=HXWebComboBoxControl._initcallback_and_get_customized_filter_data(e,o,t,n);if("boolean"!=typeof a||0!=a)return HXWebComboBoxControl._create_xml_configdata_object(),HXWebComboBoxControl._create_xml_datalist_object(),HXWebComboBoxControl._create_popup_area_html(),HXWebComboBoxControl._adjust_popup_area_datalistrow_template(o),HXWebComboBoxControl._format_popup_area(o,t,n),HXWebComboBoxControl._global_popup_area.style.display="",HXWebComboBoxControl._search_and_fill_data(e,o,t,n,a,"",!1),HXWebComboBoxControl._global_popup_area},HXWebComboBoxControl._hide=function(){HXWebComboBoxControl._global_popup_area&&"none"!=HXWebComboBoxControl._global_popup_area.style.display&&(HXWebComboBoxControl._global_popup_area.style.display="none")},HXWebComboBoxControl._is_element_in_popup_area=function(e){var t=HXWebJS.DOM.GetElementById("hxwebjs_combobox__container_div");return null!=t&&(!!HXWebJS.DOM.IsElementInContainer(t,e)||void 0)},HXWebComboBoxControl._input_data_validate=function(e,t,n,o){if(null==t)return!0;console.log("HXWebComboBoxControl._input_data_validate() begin. objInputTextBox.value="+t.value);if($(t).attr("_hx_combobox_last_chosen_value")==t.value)return!0;var _=HXWebJS.DOM.GetElementBindingLineInfo(t);if(""==t.value)return HXWebComboBoxControl._set_binding_datafields_values(o,_,"","","","","","",""),HXWebComboBoxControl._run_datachoosed_callback_function(e,o,t,null,null,"input_data_validated"),!0;if(0==o.limit_in_list)return!0;var l=HXWebComboBoxControl._initcallback_and_get_customized_filter_data(e,o,t,null);if("boolean"!=typeof l||0!=l){var a="";if(null!=o.dropdownlist_values&&""!=o.dropdownlist_values)a=HXWebComboBoxControl._getdatalist_via_dropdownlist_values(e,o,!0,t.value,null);else{var r=HXWebComboBoxControl._get_org_selected_values(o,t,n),i=HXWebComboBoxControl._build_pagxmlservice_xmlcontent_getdata(e,o,1,t.value,r,l,"singledata",o.search_columns);a=HXWebComboBoxControl._call_getdatalist_pagxmlservice(i,o.extend_web_part_html_id)}var d=null,s=null;if(null!=a&&""!=a&&(s=(d=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(a)).SelectSingleNode("//RS_ROW")),null==s||""==s.SelectSingleNode("@KEY").GetText()){var c=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBCOMBOBOX_NO_DATA_FOUND");return alert(c),HXWebComboBoxControl._set_binding_datafields_values(o,_,"","","","","","",""),HXWebComboBoxControl._run_datachoosed_callback_function(e,o,t,null,null,"input_data_validated"),!1}var b=s.GetAttributeValue("KEY"),p=s.GetAttributeValue("DESC"),u=s.GetAttributeValue("ATTR_1"),m=s.GetAttributeValue("ATTR_2"),h=s.GetAttributeValue("ATTR_3"),f=s.GetAttributeValue("ATTR_4"),C=s.GetAttributeValue("ATTR_5");return null==u&&(u=""),null==m&&(m=""),null==h&&(h=""),null==f&&(f=""),null==C&&(C=""),HXWebComboBoxControl._set_selected_value_to_textbox(o,t,b,p),HXWebComboBoxControl._set_binding_datafields_values(o,_,b,p,u,m,h,f,C),HXWebComboBoxControl._run_datachoosed_callback_function(e,o,t,null,d,"input_data_validated"),!0}},HXWebComboBoxControl._input_text_keyup_process=function(e,t,n,o){if(0!=o.use_autocompletion_hint){var _=HXWebComboBoxControl._initcallback_and_get_customized_filter_data(e,o,t,null);if("boolean"!=typeof _||0!=_){var l=t.value;HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__search_keyword",HXWebComboBoxControl._global_popup_area);HXWebComboBoxControl._is_popup_area_hidden()&&(HXWebComboBoxControl._global_popup_area.style.display=""),HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring?(HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=!0,HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text=l):(HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=!0,HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text=l,HXWebComboBoxControl._search_and_fill_data(e,o,t,n,_,l,!1,"via_keyin"))}}},HXWebComboBoxControl._is_popup_area_hidden=function(){return null==HXWebComboBoxControl._global_popup_area||"none"==HXWebComboBoxControl._global_popup_area.style.display},HXWebComboBoxControl._create_xml_configdata_object=function(){if(null==document.getElementById("hxxml_configdata__dropdownlist_control_v6")){var e=HXWebJS.DOM.CreateElement('<hxxmldataisland id="hxxml_configdata__dropdownlist_control_v6" content=""></hxxmldataisland>');document.body.appendChild(e);(t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_configdata__dropdownlist_control_v6")).ReloadXML('<RS_DATA><RS_ROW TOTAL_RECORDS_COUNT="" FIRST_RECORD_ON_PAGE="" LAST_RECORD_ON_PAGE="" /></RS_DATA>'),HXWebComboBoxControl._global_xml_configdata_object=t}else{var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_configdata__dropdownlist_control_v6");t.SelectSingleNode("//@TOTAL_RECORDS_COUNT").SetText(""),t.SelectSingleNode("//@FIRST_RECORD_ON_PAGE").SetText(""),t.SelectSingleNode("//@LAST_RECORD_ON_PAGE").SetText("")}},HXWebComboBoxControl._create_xml_datalist_object=function(){if(null==window.document.getElementById("hxxml_datalist__dropdownlist_control_v6")){var e=HXWebJS.DOM.CreateElement('<hxxmldataisland id="hxxml_datalist__dropdownlist_control_v6" content=""></hxxmldataisland>');document.body.appendChild(e),HXWebComboBoxControl._global_xml_datalist_object=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_datalist__dropdownlist_control_v6")}else HXWebComboBoxControl._global_xml_datalist_object.ReloadXML("")},HXWebComboBoxControl._create_popup_area_html=function(){var e=document.getElementById("hxwebjs_combobox__container_div");if(null==e){e=HXWebJS.DOM.CreateElement('<div id="hxwebjs_combobox__container_div" style="display:none;z-index:8000;left:0px;top:0px;min-width:200px;width:200px;height:auto;position:absolute;background-color:white;"></div>');var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_combobox__datalistarea_div" style="width:100%;height:300px;overflow:auto;" class="hxscrollbar"'),t.append(' hx_binding_list_container="1" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_row_callback="">'),t.append('<div id="hxwebjs_combobox_datarow__div" hx_binding_row_container="1" style="cursor:pointer;width:100%;">'),t.append('<span id="hxwebjs_combobox_datarow__choose_column" class="fa fa-square-o"></span>'),t.append('<span id="hxwebjs_combobox_datarow__icon_column"></span>'),t.append('<img id="hxwebjs_combobox_datarow__image_column" src="../hximages_v6/hxpub_clear.gif" />'),t.append('<span id="hxwebjs_combobox_datarow__key_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="key"></span>'),t.append('<span id="hxwebjs_combobox_datarow__desc_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="desc"></span>'),t.append('<span id="hxwebjs_combobox_datarow__attr1_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="attr_1"></span>'),t.append('<span id="hxwebjs_combobox_datarow__attr2_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="attr_2"></span>'),t.append('<span id="hxwebjs_combobox_datarow__attr3_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="attr_3"></span>'),t.append('<span id="hxwebjs_combobox_datarow__attr4_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="attr_4"></span>'),t.append('<span id="hxwebjs_combobox_datarow__attr5_col" class="hxtxt_wrap hxwebjs_combobox_datarow__data_column" hx_binding_datasrc="hxxml_datalist__dropdownlist_control_v6" hx_binding_datafld="attr_5"></span>'),t.append("</div></div>"),t.append('<table id="hxwebjs_combobox__controlarea_table" cellpadding="0" cellspacing="0" style="width:100%;border:1px solid #ddd;margin-top:-1px;">'),t.append('<tr><td style="width:50%;vertical-align:top;text-align:left;">'),t.append('<span id="hxwebjs_combobox__selectall_checkbox" class="fa fa-square-o" style="margin-right:10px;width:12px;"></span>'),t.append('<span id="hxwebjs_combobox__page_nav_part">'),t.append('<span hx_binding_datasrc="hxxml_configdata__dropdownlist_control_v6" hx_binding_datafld="first_record_on_page"></span>'),t.append('<span style="margin-left:4px;margin-right:4px;">-</span><span hx_binding_datasrc="hxxml_configdata__dropdownlist_control_v6" hx_binding_datafld="last_record_on_page"></span>'),t.append('<span style="margin-left:4px;margin-right:4px;" id="hxwebjs_combobox_controlarea__text_of">Of</span>'),t.append('<span hx_binding_datasrc="hxxml_configdata__dropdownlist_control_v6" hx_binding_datafld="total_records_count"></span>'),t.append('<span id="hxwebjs_combobox__showmore_btn" class="fa fa-angle-double-down" style="margin-left:4px;"></span>'),t.append("</span></td>"),t.append('<td id="hxwebjs_combobox__search_part" style="width:50%;">'),t.append('<span style="width:100%;" class="hxinput_group">'),t.append('<input type="text" class="hxinputbox" id="hxwebjs_combobox_controlarea__search_keyword" />'),t.append('<span class="hxinput_group_addon fa fa-search" style="width:24px;cursor:pointer" id="hxwebjs_combobox_controlarea__search_btn"></span>'),t.append("</span></td></tr>"),t.append('<tr id="hxwebjs_combobox_controlarea__cmdarea"><td style="text-align:left;" colspan="2">'),t.append('<button id="hxwebjs_combobox_controlarea__ok_btn" class="hxbtn small primary"><span class="fa fa-check" style="margin-right:3px;color:lightgreen;"></span><span id="spnOKButtonText">OK</span></button>'),t.append('<button id="hxwebjs_combobox_controlarea__clear_btn" class="hxbtn small info"><span class="fa fa-rotate-left" style="margin-right:3px;color:white;"></span><span id="spnClearButtonText">Clear</span></button>'),t.append('<button id="hxwebjs_combobox_controlarea__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button>'),t.append("</td></tr></table>"),e.innerHTML=t.toString(),document.body.appendChild(e);var n=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnOKButtonText",e).text(n[0]),$("#spnCancelButtonText",e).text(n[1]),$("#hxwebjs_combobox_controlarea__text_of",e).text(n[2]),$("#spnClearButtonText",e).text(n[3]),HXWebJS.EventManager.AddListener(e,"click",HXWebComboBoxControl._popup_area_clicked);var o=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__search_keyword",e);HXWebJS.EventManager.AddListener(o,"keyup",HXWebComboBoxControl._searchkeyword_keypressed),HXWebComboBoxControl._global_popup_area=e}},HXWebComboBoxControl._adjust_popup_area_datalistrow_template=function(e){var t=HXWebJS.Xml._XmlDataIsland._GetBindingRowTemplateElement("hxwebjs_combobox__datalistarea_div"),n=1==e.choose_type,o="use_css_icon"==e.use_icon,_="use_img_icon"==e.use_icon;t.style.paddingLeft=n?o||_?"48px":"24px":o||_?"24px":"0",$("#hxwebjs_combobox_datarow__choose_column",t)[0].style.display=n?"":"none";var l=$("#hxwebjs_combobox_datarow__icon_column",t)[0];l.style.display=o?"":"none",l.style.left=n?"24px":"4px";var a=$("#hxwebjs_combobox_datarow__image_column",t)[0];a.style.display=_?"":"none",a.style.left=n?"24px":"4px";var r=e.columns_width_rate;null!=r&&""!=r||(r="100%");for(var i,d,s,c=r.split(";"),b=0;b<c.length;b++)d=0==b?"key":1==b?"desc":"attr"+(b-1).toString(),d=HXWebJS.Core.StringFormat("#hxwebjs_combobox_datarow__{0}_col",d),"0"==(i=HXWebJS.Core.Trim(c[b]))||"0%"==i||""==i?$(d,t).hide():((s=$(d,t)[0]).style.width="%"==i.substr(i.length-1)?i:i+"%",s.style.display="");for(b=c.length;b<7;b++)d=0==b?"key":1==b?"desc":"attr"+(b-1).toString(),d=HXWebJS.Core.StringFormat("#hxwebjs_combobox_datarow__{0}_col",d),$(d,t).hide()},HXWebComboBoxControl._get_org_selected_values=function(e,t,n){var o=null,_=null,l=e.binding_datasrc_id;if(null!=l&&""!=l&&null!=(o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(l))){var a=HXWebJS.DOM.GetElementBindingLineInfo(n),r=e.binding_datafld_for_key,i=null;if(i=null==a?o.SelectSingleNode("//RS_ROW"):a.binding_row_data,null!=r&&""!=r&&null!=i&&(r=r.toUpperCase(),null!=(_=i.GetAttributeValue(r))))return _}return"KEY"==e.content_type&&null!=t?t.value:null},HXWebComboBoxControl._get_selected_values_from_pick_list=function(e){for(var t=HXWebComboBoxControl._global_xml_datalist_object.SelectNodes("//RS_ROW[@IS_CHOOSED !='0']"),n=new HXWebStringBuilder,o=0;o<t.length;o++)o>0&&n.append(","),n.append(t[o].SelectSingleNode("@KEY").GetText());return n.toString()},HXWebComboBoxControl._format_popup_area=function(e,t,n){var o,_,l,a,r=1==e.choose_type,i=0!=e.is_paging,d=r||i;if(null!=t&&"none"!=t.style.display&&"hidden"!=t.style.visibility?(_=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1,e.use_mobile_mode?(o=HXWebJS.DOM.GetScrollLeft()+2,l=HXWebJS.DOM.GetWindowWidth()-4):(o=HXWebJS.DOM.GetElementLeftPosition(t),l=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-o,null!=e.dropdownbox_width&&e.dropdownbox_width>l&&(l=e.dropdownbox_width))):(_=HXWebJS.DOM.GetElementTopPosition(n)+n.offsetHeight+1,e.use_mobile_mode?(o=HXWebJS.DOM.GetScrollLeft()+2,l=HXWebJS.DOM.GetWindowWidth()-4):(o=HXWebJS.DOM.GetElementLeftPosition(n),l=null==e.dropdownbox_width?n.offsetWidth:e.dropdownbox_width)),d){var s=r?300:200;l<s&&(l=s)}var c=e.dropdownbox_lines_count;null==c&&(c=8);var b=(a=e.use_mobile_mode?36*c:31*c)+(d?r||1==e.show_clear_btn?74:38:0),p=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,o,_,l,b,e.use_mobile_mode);o=p.left,_=p.top;var u=p.new_scroll_top,m=HXWebComboBoxControl._global_popup_area;m.style.left=o+"px",m.style.top=_+"px",m.style.width=l+"px";HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__datalistarea_div",m,"div").style.height=a+"px";var h=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__controlarea_table",m,"table");d?(h.style.display="",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__selectall_checkbox",h).style.display=r?"inline-block":"none",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__page_nav_part",h).style.display=i?"":"none",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__search_part",h).style.display=i?"":"none",r?(HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__cmdarea",h).style.display="",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__ok_btn",h).style.display="",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__clear_btn",h).style.display=0==e.show_clear_btn?"none":""):(HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__cmdarea",h).style.display=1==e.show_clear_btn?"":"none",HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__clear_btn",h).style.display=1==e.show_clear_btn?"":"none")):h.style.display="none";var f=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__selectall_checkbox",HXWebComboBoxControl._global_popup_area);HXWebJS.DOM.CSSClass.AddClass(f,"fa-square-o"),HXWebJS.DOM.CSSClass.RemoveClass(f,"fa-check-square-o");HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__search_keyword",HXWebComboBoxControl._global_popup_area).value="",u>0&&$(document).scrollTop(u)},HXWebComboBoxControl._search_and_fill_data=function(e,t,n,o,_,l,a,r,i){var d="";null!=t.choose_type&&0!=t.choose_type&&(d=i?HXWebComboBoxControl._get_selected_values_from_pick_list(t):HXWebComboBoxControl._get_org_selected_values(t,n,o)),null==t._new_page_size&&(t._new_page_size=t.page_size),a&&(t._new_page_size=2*t._new_page_size);var s=0!=t.is_paging?t._new_page_size:0,c=function(a){if(null!=a&&null!=HXWebJS.Controls._Picker._current_active_control_info&&(n==HXWebJS.Controls._Picker._current_active_control_info._input_textbox||o==HXWebJS.Controls._Picker._current_active_control_info._choose_button))if(HXWebComboBoxControl._fill_datalist_content(e,t,n,o,a,d,r,l),0!=t.is_paging){var i=HXWebComboBoxControl._build_pagxmlservice_xmlcontent_getdata(e,t,0,l,d,_,"recordcount",t.search_columns);HXWebComboBoxControl._call_getdatalist_pagxmlservice_async(i,function(l){if(null!=l&&null!=HXWebJS.Controls._Picker._current_active_control_info&&(n==HXWebJS.Controls._Picker._current_active_control_info._input_textbox||o==HXWebJS.Controls._Picker._current_active_control_info._choose_button)&&null!=HXWebComboBoxControl._global_xml_configdata_object){var a=l;HXWebComboBoxControl._global_xml_configdata_object.SelectSingleNode("//RS_ROW").SetAttributeValue("TOTAL_RECORDS_COUNT",a),"via_keyin"==r&&HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process(e,t,n,o,_)}},t.extend_web_part_html_id)}else"via_keyin"==r&&HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process(e,t,n,o,_)};if(null!=t.dropdownlist_values&&""!=t.dropdownlist_values)HXWebComboBoxControl._getdatalist_via_dropdownlist_values(e,t,!1,l,c);else{var b=HXWebComboBoxControl._build_pagxmlservice_xmlcontent_getdata(e,t,s,l,d,_,"datalist",t.search_columns);HXWebComboBoxControl._call_getdatalist_pagxmlservice_async(b,c,t.extend_web_part_html_id)}},HXWebComboBoxControl._potential_next_keyin_input_text_inquiry_process=function(e,t,n,o,_){if(HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring&&HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text!=HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text){var l=HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text;HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text=l,HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=!0,HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=!1,HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text="",HXWebComboBoxControl._search_and_fill_data(e,t,n,o,_,l,!1,"via_keyin")}else HXWebComboBoxControl._keyup_input_text_inquiry_info.is_current_inquiring=!1,HXWebComboBoxControl._keyup_input_text_inquiry_info.current_inquiring_text="",HXWebComboBoxControl._keyup_input_text_inquiry_info.need_next_inquiring=!1,HXWebComboBoxControl._keyup_input_text_inquiry_info.next_keyup_input_text=""},HXWebComboBoxControl._getdatalist_via_dropdownlist_values=function(e,t,n,o,_){var l=t.content_type;"DESC"!=l&&(l="KEY");var a=t.dropdownlist_values,r=new HXWebStringBuilder;n?r.append("<RS_DATA>"):(r.append('<ALL_DATA><CONFIG_DATA><RS_DATA><RS_ROW FIRST_RECORD_ON_PAGE="0" LAST_RECORD_ON_PAGE="1" ></RS_ROW></RS_DATA></CONFIG_DATA>'),r.append("<RESULT_DATA><RS_DATA>"));for(var i,d,s,c,b=a.split(/;/g),p=0;p<b.length;p++)if(i=b[p],c=HXWebJS.Utility.Trim(i).split(/=/g),d=c[0],s=c.length>1?c[1]:d,n&&null!=o&&""!=o){if("KEY"==t.content_type&&d==o||"DESC"==t.content_type&&strDesc==o){r.append(HXWebJS.Utility.StringFormat('<RS_ROW KEY="{0}" DESC="{1}"></RS_ROW>',d,s));break}}else r.append(HXWebJS.Utility.StringFormat('<RS_ROW KEY="{0}" DESC="{1}"></RS_ROW>',d,s));n?r.append("</RS_DATA>"):(r.append("</RS_DATA></RESULT_DATA>"),r.append("</ALL_DATA>"));var u=r.toString();return null!=_&&_(u),u},HXWebComboBoxControl._initcallback_and_get_customized_filter_data=function(e,t,n,o){if(null!=t.oninit_callback){if(1!=t.oninit_callback(e,n,o,t))return!1;HXWebComboBoxControl._options_check(t)}var _="";if(null!=t.ongetfilterdata_callback)try{if("boolean"==typeof(_=t.ongetfilterdata_callback(e,n,o))&&0==_)return!1}catch(e){return HXWebJS.Core.LogErrorToConsole("hxcombobox ongetfilterdata_callback() call failed. "+e.description),!1}return _},HXWebComboBoxControl._build_pagxmlservice_xmlcontent_getdata=function(e,t,n,o,_,l,a,r){null==_&&(_=""),null==r&&(r=""),null==l&&(l="");var i=t.pagexmlsvc_class_name?t.pagexmlsvc_class_name:"",d=new HXWebStringBuilder;d.append('<ALL_DATA HXWEBJS_VERSION="6" RETURN_DATA_TYPE="'+a+'"'),d.append(' HX_WEB_DATA_LIST_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),d.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(i)+'"'),d.append(' CHOOSE_TYPE="'+(1==t.choose_type?"1":"0")+'"'),d.append(' NEW_PAGE_SIZE="'+n+'"'),d.append(' SEARCH_KEY_WORD="'+HXWebJS.Xml.MarkXMLSpecialChars(o)+'"'),d.append(' SEARCH_FROM_BEGIN="'+(t.search_from_begin?1:0)+'"'),d.append(' DROPDOWN_LIST_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(t.dropdownlist_code,!0)+'"'),d.append(' DROPDOWN_LIST_OBJECT_VIEW_FIELD="'+HXWebJS.Xml.MarkXMLSpecialChars(t.dropdownlist_object_view_field,!0)+'"'),d.append(' ORG_SELECTED_VALUES="'+HXWebJS.Xml.MarkXMLSpecialChars(_)+'"'),d.append(' CUSTOMIZED_FILTER_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'"'),d.append(' DISPLAY_CONTENT_TYPE="'+t.content_type.toUpperCase()+'"'),d.append(' LIST_ONLY_EFFECTIVE_RECORD_ITEMS="'+(t.list_only_effective_items?1:0)+'"');var s=null==t.object_view_code_for_field_list_get?"":t.object_view_code_for_field_list_get;return d.append(' OBJECT_VIEW_CODE_FOR_FIELD_LIST_GET="'+HXWebJS.Xml.MarkXMLSpecialChars(s)+'"'),d.append(' SEARCH_CONTENT_TYPE="'+r+'" />'),d.toString()},HXWebComboBoxControl._call_getdatalist_pagxmlservice_async=function(e,t,n){var o={assembly_name:"TrustHX.HXWWW6",extend_web_part_html_id:n,use_parallel_mode:!0};HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",e,t,o)},HXWebComboBoxControl._call_getdatalist_pagxmlservice=function(e,t){var n={assembly_name:"TrustHX.HXWWW6",extend_web_part_html_id:t,use_parallel_mode:!0};return HXWebJS.Xml.XmlService.CallPageXmlService("HXWEBCOMBOBOXCONTROL_GET_DATA_LIST",e,n)},HXWebComboBoxControl._fill_datalist_content=function(e,t,n,o,_,l,a,r){var i,d,s,c=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(_),b=c.SelectSingleNode("/ALL_DATA/CONFIG_DATA//RS_ROW");d=b.GetAttributeValue("FIRST_RECORD_ON_PAGE"),s=b.GetAttributeValue("LAST_RECORD_ON_PAGE");var p=null==n?"":n.value;if("via_keyin"!=a||r==p){null==c.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA")?i="":(null!=t.ondataget_callback&&t.ondataget_callback(e,c),i=c.SelectSingleNode("/ALL_DATA/RESULT_DATA/RS_DATA").GetXml());var u=HXWebComboBoxControl._global_xml_datalist_object;u.ReloadXML(i);var m=HXWebComboBoxControl._global_xml_configdata_object;m.SelectSingleNode("//RS_ROW").SetAttributeValue("FIRST_RECORD_ON_PAGE",d),m.SelectSingleNode("//RS_ROW").SetAttributeValue("LAST_RECORD_ON_PAGE",s),HXWebComboBoxControl._combobox_rows_format_after_datalist_ready(e,u,t)}},HXWebComboBoxControl._combobox_rows_format_after_datalist_ready=function(e,t,n){for(var o,_,l=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox__datalistarea_div",HXWebComboBoxControl._global_popup_area,"div"),a=t.SelectNodes("//RS_ROW"),r=l.childNodes,i=0;i<r.length;i++)o=r[i],_=a[i],HXWebComboBoxControl._combobox_single_row_format(e,n,o,_)},HXWebComboBoxControl._combobox_single_row_format=function(e,t,n,o){if(1==t.choose_type){var _=o.GetAttributeValue("IS_CHOOSED"),l=null!=_&&""!=_&&"0"!=_,a=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_datarow__choose_column",n);HXWebJS.DOM.CSSClass.AddClass(a,l?"fa-check-square-o":"fa-square-o"),HXWebJS.DOM.CSSClass.RemoveClass(a,l?"fa-square-o":"fa-check-square-o")}if("use_css_icon"==t.use_icon){var r=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_datarow__icon_column",n);r.className="";s=o.GetAttributeValue("ICON_CLASS");HXWebJS.DOM.CSSClass.AddClass(r,s)}else if("use_img_icon"==t.use_icon){var i=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_datarow__image_column",n),d=o.GetAttributeValue("IMAGE_SRC");if(null!=d&&""!=d)i.src=d,i.className="";else{i.src="../hximages_v6/hxpub_clear.gif";var s=o.GetAttributeValue("ICON_CLASS");i.className=null==s?"":s}}null!=t.ondatabind_callback&&t.ondatabind_callback(e,n,o)},HXWebComboBoxControl._set_binding_datafields_values=function(e,t,n,o,_,l,a,r,i){var d=e.binding_datasrc_id;if(d){var s=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(d);if(null!=s){var c=e.binding_datafld_for_key,b=e.binding_datafld_for_desc,p=e.binding_datafld_for_attr_1,u=e.binding_datafld_for_attr_2,m=e.binding_datafld_for_attr_3,h=e.binding_datafld_for_attr_4,f=e.binding_datafld_for_attr_5,C=null;null!=(C=null!=t?t.binding_row_data:s.SelectSingleNode("//RS_ROW"))&&(null!=c&&""!=c&&(c=c.toUpperCase(),null!=C.GetAttributeValue(c)&&C.SetAttributeValue(c,n,null,!0)),null!=b&&""!=b&&(b=b.toUpperCase(),null!=C.GetAttributeValue(b)&&C.SetAttributeValue(b,o,null,!0)),null!=p&&""!=p&&(p=p.toUpperCase(),null!=C.GetAttributeValue(p)&&C.SetAttributeValue(p,_,null,!0)),null!=u&&""!=u&&(u=u.toUpperCase(),null!=C.GetAttributeValue(u)&&C.SetAttributeValue(u,l,null,!0)),null!=m&&""!=m&&(m=m.toUpperCase(),null!=C.GetAttributeValue(m)&&C.SetAttributeValue(m,a,null,!0)),null!=h&&""!=h&&(h=h.toUpperCase(),null!=C.GetAttributeValue(h)&&C.SetAttributeValue(h,r,null,!0)),null!=f&&""!=f&&(f=f.toUpperCase(),null!=C.GetAttributeValue(f)&&C.SetAttributeValue(f,i,null,!0)))}}},HXWebComboBoxControl._run_datachoosed_callback_function=function(e,t,n,o,_,l){if(HXWebJS.Core.IsJavascriptFunctionDefined(t.ondatachoosed_callback))try{t.ondatachoosed_callback(e,n,o,_,l)}catch(e){return void HXWebJS.Core.LogErrorToConsole("hxcombobox ondatachoosed_callback call failed. "+e.description)}},HXWebComboBoxControl._set_selected_value_to_textbox=function(e,t,n,o){null!=t&&("KEY"!=e.content_type||null!=e.binding_datasrc_id&&null!=e.binding_datafld_for_key&&""!=e.binding_datafld_for_key?"DESC"!=e.content_type||null!=e.binding_datasrc_id&&null!=e.binding_datafld_for_desc&&""!=e.binding_datafld_for_desc||(t.value=o):t.value=n)},HXWebComboBoxControl._get_search_columns=function(e){null!=e&&""!=e||(e="100%"),";"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1));var t=new HXWebStringBuilder,n=e.split(";"),o=!1;return"0"!=n[0]&&"0%"!=n[0]&&""!=HXWebJS.Core.Trim(n[0])&&(t.append("KEY"),o=!0),n.length>1&&"0"!=n[1]&&"0%"!=n[1]&&(o&&t.append(";"),t.append("DESC"),o||(o=!0)),n.length>2&&"0"!=n[2]&&"0%"!=n[2]&&(o&&t.append(";"),t.append("ATTR_1"),o||(o=!0)),n.length>3&&"0"!=n[3]&&"0%"!=n[3]&&(o&&t.append(";"),t.append("ATTR_2"),o||(o=!0)),n.length>4&&"0"!=n[4]&&"0%"!=n[4]&&(o&&t.append(";"),t.append("ATTR_3"),o||(o=!0)),n.length>5&&"0"!=n[5]&&"0%"!=n[5]&&(o&&t.append(";"),t.append("ATTR_4"),o||(o=!0)),n.length>6&&"0"!=n[6]&&"0%"!=n[6]&&(o&&t.append(";"),t.append("ATTR_5"),o||(o=!0)),t.toString()},HXWebComboBoxControl._popup_area_clicked=function(e){var t=HXWebJS.Controls._Picker._current_active_control_info;if(null!=t&&t._process_class===HXWebComboBoxControl){"touchend"==e.type&&e.preventDefault();var n=t._options,o=e.target,_=o.id,l=o.parentNode.id;if("hxwebjs_combobox__selectall_checkbox"==_)return e.stopPropagation(),void HXWebComboBoxControl._select_all(o);if("hxwebjs_combobox_controlarea__ok_btn"!=_&&"hxwebjs_combobox_controlarea__ok_btn"!=l){if("hxwebjs_combobox_controlarea__clear_btn"==_||"hxwebjs_combobox_controlarea__clear_btn"==l)return e.stopPropagation(),void HXWebComboBoxControl._clear_chosen_content();if("hxwebjs_combobox_controlarea__cancel_btn"==_||"hxwebjs_combobox_controlarea__cancel_btn"==l)return e.stopPropagation(),HXWebComboBoxControl._hide(),void(null==t._input_textbox||t._input_textbox.disabled||t._input_textbox.readOnly||HXWebJS.EventManager.FireEvent(t._input_textbox,"focusout"));if("hxwebjs_combobox__showmore_btn"==_)return e.stopPropagation(),void HXWebComboBoxControl._search_again(!0);if("hxwebjs_combobox_controlarea__search_btn"==_)return e.stopPropagation(),void HXWebComboBoxControl._search_again(!1);var a=null;return"hxwebjs_combobox_datarow__div"==o.id&&(a=o),"hxwebjs_combobox_datarow__div"==o.parentNode.id&&(a=o.parentNode),"hxwebjs_combobox_datarow__div"==o.parentNode.parentNode.id&&(a=o.parentNode.parentNode),null!=a?(e.stopPropagation(),void(1==n.choose_type?HXWebComboBoxControl._datarow_choose_status_toggle(n,a):HXWebComboBoxControl._datarow_choosed(n,a))):void 0}e.stopPropagation();var r=HXWebComboBoxControl._global_xml_datalist_object.SelectNodes("//RS_ROW[@IS_CHOOSED !='0']");HXWebComboBoxControl._data_item_choosed_process(r)}},HXWebComboBoxControl._datarow_choose_status_toggle=function(e,t){var n=HXWebJS.DOM.GetElementBindingLineInfo(t).binding_row_data,o=n.GetAttributeValue("IS_CHOOSED"),_=!(null!=o&&""!=o&&"0"!=o);n.SetAttributeValue("IS_CHOOSED",_?"-1":"0");var l=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_datarow__choose_column",t);HXWebJS.DOM.CSSClass.AddClass(l,_?"fa-check-square-o":"fa-square-o"),HXWebJS.DOM.CSSClass.RemoveClass(l,_?"fa-square-o":"fa-check-square-o")},HXWebComboBoxControl._select_all=function(e){for(var t=!!!HXWebJS.DOM.CSSClass.HasClass(e,"fa-check-square-o"),n=HXWebComboBoxControl._global_xml_datalist_object.SelectNodes("//RS_ROW"),o=0;o<n.length;o++)n[o].SetAttributeValue("IS_CHOOSED",t?"-1":"0");var _=t?"fa-check-square-o":"fa-square-o";HXWebJS.DOM.CSSClass.AddClass(e,_);var l=t?"fa-square-o":"fa-check-square-o";HXWebJS.DOM.CSSClass.RemoveClass(e,l);for(var a=HXWebJS.DOM.FindElementsById("hxwebjs_combobox_datarow__choose_column",HXWebComboBoxControl._global_popup_area),o=0;o<a.length;o++)HXWebJS.DOM.CSSClass.AddClass(a[o],_),HXWebJS.DOM.CSSClass.RemoveClass(a[o],l)},HXWebComboBoxControl._searchkeyword_keypressed=function(e){e.stopPropagation();if(null!=HXWebJS.Controls._Picker._current_active_control_info){e.target.value;13==e.keyCode&&HXWebComboBoxControl._search_again(!1)}},HXWebComboBoxControl._search_again=function(e){var t=HXWebJS.Controls._Picker._current_active_control_info;if(null!=t&&t._process_class===HXWebComboBoxControl){var n=HXWebComboBoxControl._initcallback_and_get_customized_filter_data(t._webdatacontrol_id,t._options,t._input_textbox,t._choose_button);if("boolean"!=typeof n||0!=n){var o=HXWebJS.DOM.FindFirstElementById("hxwebjs_combobox_controlarea__search_keyword",HXWebComboBoxControl._global_popup_area).value;HXWebComboBoxControl._search_and_fill_data(t._webdatacontrol_id,t._options,t._input_textbox,t._choose_button,n,o,e,null,!0)}}},HXWebComboBoxControl._data_item_choosed_process=function(e){var t=HXWebJS.Controls._Picker._current_active_control_info;if(null!=t&&t._process_class===HXWebComboBoxControl){for(var n="",o="",_="",l="",a="",r="",i="",d=0;d<e.length;d++)n+=(""!=n?",":"")+e[d].GetAttributeValue("KEY"),o+=(""!=o?",":"")+e[d].GetAttributeValue("DESC"),_+=(""!=_?",":"")+(null!=e[d].GetAttributeValue("ATTR_1")?e[d].GetAttributeValue("ATTR_1"):""),l+=(""!=l?",":"")+(null!=e[d].GetAttributeValue("ATTR_2")?e[d].GetAttributeValue("ATTR_2"):""),a+=(""!=a?",":"")+(null!=e[d].GetAttributeValue("ATTR_3")?e[d].GetAttributeValue("ATTR_3"):""),r+=(""!=r?",":"")+(null!=e[d].GetAttributeValue("ATTR_4")?e[d].GetAttributeValue("ATTR_4"):""),i+=(""!=i?",":"")+(null!=e[d].GetAttributeValue("ATTR_5")?e[d].GetAttributeValue("ATTR_5"):"");var s=t._options,c=t._input_textbox,b=t._choose_button;HXWebComboBoxControl._set_selected_value_to_textbox(s,c,n,o);var p=HXWebJS.DOM.GetElementBindingLineInfo(null!=c?c:b);HXWebComboBoxControl._set_binding_datafields_values(s,p,n,o,_,l,a,r,i);for(var u=HXWebJS.Xml.GetHXXmlDocumentViaXmlString("<RS_DATA></RS_DATA>"),m=u.GetRootXmlNode(),d=0;d<e.length;d++)m.AppendChild(e[d].CloneNode());HXWebComboBoxControl._run_datachoosed_callback_function(t._webdatacontrol_id,s,c,b,u,"data_item_choosed");var h=!1;null!=c&&($(c).attr("_hx_combobox_last_chosen_value",c.value),c.disabled||s.use_mobile_mode||(h=!0)),h?c.focus():HXWebJS.Controls._Picker._current_active_control_info=null,HXWebComboBoxControl._hide()}},HXWebComboBoxControl._datarow_choosed=function(e,t){HXWebComboBoxControl._global_xml_datalist_object;var n=HXWebJS.DOM.GetElementBindingLineInfo(t);HXWebComboBoxControl._data_item_choosed_process([n.binding_row_data])},HXWebComboBoxControl._clear_chosen_content=function(){var e=HXWebJS.Controls._Picker._current_active_control_info;if(null!=e&&e._process_class===HXWebComboBoxControl){var t=e._options,n=e._input_textbox;HXWebComboBoxControl._set_selected_value_to_textbox(t,n,"","");var o=HXWebJS.DOM.GetElementBindingLineInfo(n);HXWebComboBoxControl._set_binding_datafields_values(t,o,"","","","","","",""),HXWebComboBoxControl._run_datachoosed_callback_function(e._webdatacontrol_id,t,n,null,null,"clear_button_pressed"),HXWebJS.Controls._Picker._current_active_control_info=null,HXWebComboBoxControl._hide()}},HXWebDatePickerControl={},HXWebDatePickerControl._Internal={},HXWebDatePickerControl._Internal.control_type="popupdatepicker",HXWebDatePickerControl.register=function(e,t,n){null==n&&(n={}),HXWebDatePickerControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebDatePickerControl._Internal.control_type,n)},HXWebDatePickerControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebDatePickerControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.allow_time_part&&(n.allow_time_part=t.allow_time_part),null!=t.default_date&&(n.default_date=t.default_date),null!=t.first_week_day&&(n.first_week_day=t.first_week_day),null!=t.oninit_callback&&(n.oninit_callback=t.oninit_callback),null!=t.onactivemonthchanged_callback&&(n.onactivemonthchanged_callback=t.onactivemonthchanged_callback),null!=t.ondaydisplayformat_callback&&(n.ondaydisplayformat_callback=t.ondaydisplayformat_callback),null!=t.ondatachoosed_callback&&(n.ondatachoosed_callback=t.ondatachoosed_callback),null!=t.use_mobile_mode&&(n.use_mobile_mode=t.use_mobile_mode),HXWebDatePickerControl._options_check(n))}},HXWebDatePickerControl._options_check=function(e){null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile),e.first_week_day||(e.first_week_day=0),(e.first_week_day<0||e.first_week_day>6)&&(e.first_week_day=0)},HXWebDatePickerControl._show=function(e,t,n,o,_,l){if(null!=o.oninit_callback&&1!=o.oninit_callback(e,t,n,o))return null;var a=null==t?"":t.value,r=HXWebJS.Utility.IsDateTime(a)?HXWebJS.Utility.ConvertToDate(a):null;return null==r&&(r=o.default_date),null==r&&(r=new Date),HXWebDatePickerControl._current_default_date=r,HXWebDatePickerControl._current_active_year=r.getFullYear(),HXWebDatePickerControl._current_active_month=r.getMonth()+1,HXWebDatePickerControl._create_popup_area(o),HXWebDatePickerControl._format_popup_area(o,t,n,_),HXWebDatePickerControl._global_popup_calendar_area},HXWebDatePickerControl._hide=function(){HXWebDatePickerControl._global_popup_calendar_area&&"none"!=HXWebDatePickerControl._global_popup_calendar_area.style.display&&(HXWebMonthPickerControl._current_is_internal_call&&(HXWebMonthPickerControl._global_popup_area.style.display="none"),HXWebTimePickerControl._current_is_internal_call&&(HXWebTimePickerControl._global_popup_area.style.display="none"),HXWebDatePickerControl._global_popup_calendar_area.style.display="none")},HXWebDatePickerControl._create_popup_area=function(e){if(null==(o=HXWebJS.DOM.GetElementById("hxwebjs_popupcalendar__container_div"))){var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_popupcalendar__container_div" style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:200px; POSITION: absolute; overflow:hidden; padding:1px;">'),t.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse;table-layout:fixed;">'),t.append('<tr id="hxwebjs_popupcalendar__headline_tr"><td colspan=7 style="vertical-align:middle;"><div style="width:100%;text-align:center;vertical-align:middle;">'),t.append('<span id="hxwebjs_popupcalendar__prevyear_btn" class="fa fa-angle-double-left"></span>'),t.append('<span id="hxwebjs_popupcalendar__prevmonth_btn" class="fa fa-angle-left"></span>'),t.append('<span id=hxwebjs_popupcalendar__curr_period_lbl style="cursor:pointer" /><span id="hxwebjs_popupcalendar__curr_period_btn" class="fa fa-caret-down" style="cursor:pointer;margin-left:4px;"></span>'),t.append('<span id="hxwebjs_popupcalendar__nextyear_btn" class="fa fa-angle-double-right"></span>'),t.append('<span id="hxwebjs_popupcalendar__nextmonth_btn" class="fa fa-angle-right"></span>'),t.append("</div></td></tr>"),t.append("<tr id=hxwebjs_popupcalendar__weekline><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>");for(i=0;i<6;i++){t.append("<tr id=hxwebjs_popupcalendar__dataline_"+i.toString()+" class=dataline>");for(var n=0;n<7;n++)t.append("<td><span id=spnDate></span></td>");t.append("</tr>")}t.append("<tr id=hxwebjs_popupcalendar__footline>"),t.append('<td colspan=5 style="text-align:left;">'),t.append('<button id="hxwebjs_popupcalendar__today_btn" class="hxbtn small primary"><span class="fa fa-check" style="margin-right:3px;color:lightgreen;"></span><span id="spnTodayButtonText">Today</span></button>'),t.append('<button id="hxwebjs_popupcalendar__clear_btn" class="hxbtn small info"><span class="fa fa-rotate-left" style="margin-right:3px;color:white;"></span><span id="spnClearButtonText">Clear</span></button>'),t.append('<button id="hxwebjs_popupcalendar__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button>'),t.append("</td>"),t.append('<td colspan=2 style="vertical-align:middle;text-align:right;cursor:pointer;visibility:hidden;">'),t.append('<span id="spnTimeLabel" style="margin-right:4px;">Time</span><span id=hxwebjs_popupcalendar__time_lbl>00:00</span><span id="hxwebjs_popupcalendar__time_btn" class="fa fa-caret-down" style="cursor:pointer;margin-left:4px;"></span>'),t.append("</td>"),t.append("</tr></table></div>");var o=HXWebJS.DOM.CreateElement(t.toString());document.body.appendChild(o),HXWebJS.EventManager.AddListener(o,"click",HXWebDatePickerControl._popup_calendar_area_clicked),HXWebDatePickerControl._global_popup_calendar_area=o,e.use_mobile_mode&&HXWebJS.DOM.CSSClass.AddClass(o,"mobile");var _=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__weekline",o),l=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnCancelButtonText",o).text(l[1]),$("#spnClearButtonText",o).text(l[3]);for(var a,r=HXWebJS.Controls._Internal._GetCalendarTextContent(),i=0;i<7;i++)a=(7-e.first_week_day+i)%7,HXWebJS.DOM.SetElementInnerText(_.cells[a],r.text_of_weekday[i]);var d=6-e.first_week_day,s=(7-e.first_week_day)%7;$(_.cells[d]).addClass("weekend"),$(_.cells[s]).addClass("weekend");var c=r.text_of_today_template,b=new Date,p=c.replace(/{Y}/gi,b.getFullYear());if(p=p.replace(/{M}/gi,b.getMonth()+1),p=p.replace(/{D}/gi,b.getDate()),$("#spnTodayButtonText",o).text(r.text_of_today),$("#spnTimeLabel",o).text(r.text_of_time),"ontouchend"in document&&"undefined"!=typeof Hammer){new Hammer(document.getElementById("hxwebjs_popupcalendar__container_div")).on("swipe",function(e){HXWebDatePickerControl._swipe_on_control(e)})}}},HXWebDatePickerControl._format_popup_area=function(e,t,n,o){var _,l,a;null!=t&&"none"!=t.style.display&&"hidden"!=t.style.visibility?(l=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1,e.use_mobile_mode?(_=HXWebJS.DOM.GetScrollLeft()+2,a=HXWebJS.DOM.GetWindowWidth()-4):(_=HXWebJS.DOM.GetElementLeftPosition(t),(a=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-_)<360&&(a=360))):(l=HXWebJS.DOM.GetElementTopPosition(n)+n.offsetHeight+1,e.use_mobile_mode?(_=HXWebJS.DOM.GetScrollLeft()+2,a=HXWebJS.DOM.GetWindowWidth()-4):(_=HXWebJS.DOM.GetElementLeftPosition(n),a=300));var r=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,_,l,a,259,e.use_mobile_mode);_=r.left,l=r.top;var i=r.new_scroll_top,d=HXWebDatePickerControl._global_popup_calendar_area;d.style.left=_+"px",d.style.top=l+"px",d.style.width=a+"px",HXWebDatePickerControl._set_dateofmonth_content(),$("#hxwebjs_popupcalendar__prevyear_btn",d)[0].style.display=0==e.show_prevnextyear_btn?"none":"",$("#hxwebjs_popupcalendar__nextyear_btn",d)[0].style.display=0==e.show_prevnextyear_btn?"none":"",$("#hxwebjs_popupcalendar__prevmonth_btn",d)[0].style.display=0==e.show_prevnextmonth_btn?"none":"",$("#hxwebjs_popupcalendar__nextmonth_btn",d)[0].style.display=0==e.show_prevnextmonth_btn?"none":"",HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__time_lbl",d).parentNode.style.visibility=1==e.allow_time_part?"visible":"hidden",d.style.display="",i>0&&$(document).scrollTop(i)},HXWebDatePickerControl._input_data_validate=function(e,t,n,o){if(null==t)return!0;if(""!=t.value&&!HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck(t,HXWebPageGlobalVariables.DateDisplayFormatString))return!1;if(null!=o.ondatachoosed_callback){var _=HXWebJS.Utility.ConvertToDate(t.value);o.ondatachoosed_callback(e,_,t,n)}return!0},HXWebDatePickerControl._is_element_in_popup_area=function(e,t){var n=HXWebJS.DOM.GetElementById("hxwebjs_popupcalendar__container_div");if(null==n)return!1;if(HXWebJS.DOM.IsElementInContainer(n,e))return!0;var o=HXWebJS.DOM.GetElementById("hxwebjs_monthpicker__container_div");if(null==o)return!1;if(HXWebJS.DOM.IsElementInContainer(o,e))return!0;var _=HXWebJS.DOM.GetElementById("hxwebjs_timepicker__container_div");return null!=_&&!!HXWebJS.DOM.IsElementInContainer(_,e)},HXWebDatePickerControl._set_dateofmonth_content=function(){var e=HXWebDatePickerControl._current_active_year,t=HXWebDatePickerControl._current_active_month,n=HXWebDatePickerControl._global_popup_calendar_area,o=HXWebJS.Controls._Internal._GetCalendarTextContent(),_=o.text_of_period_template.replace(/{Y}/gi,e),l=o.text_of_month[t-1];_=(_=_.replace(/{MM}/gi,l)).replace(/{M}/gi,t),HXWebJS.DOM.SetElementInnerText(HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__curr_period_lbl",n),_);var a=new Date(e,t-1,1),r=(new Date(e,t,0),a.getDay()),i=new Date;i.setHours(0,0,0,0);var d=HXWebDatePickerControl._current_default_date,s=null,c=HXWebJS.Controls._Picker._current_active_control_info;null!=c&&c._process_class===HXWebDatePickerControl&&(s=c._options),null!=s.onactivemonthchanged_callback&&s.onactivemonthchanged_callback(c._webdatacontrol_id,e,t,c._input_textbox,c._choose_button);var b;(b=new Date(e,t-1,1-r+s.first_week_day))>a&&(b=HXWebJS.Utility.DateAdd(b,"d",-7));for(var p=0;p<42;p++)HXWebDatePickerControl._set_single_cell_date_value(s,p,b,b.getDate(),b.getMonth()==t-1,b.valueOf()==i.valueOf(),b.valueOf()==d.valueOf(),b),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1);if(s.allow_time_part){var u=d.getHours().toString()+":"+d.getMinutes().toString();HXWebJS.DOM.SetElementInnerText(HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__time_lbl",n),u)}},HXWebDatePickerControl._set_single_cell_date_value=function(e,t,n,o,_,l,a){var r=parseInt(t/7),i=t%7,d=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__dataline_"+r,HXWebDatePickerControl._global_popup_calendar_area).cells[i],s=n.getDay();if(0==s||6==s?HXWebJS.DOM.CSSClass.AddClass(d,"weekend"):HXWebJS.DOM.CSSClass.RemoveClass(d,"weekend"),objCell=HXWebJS.DOM.FindFirstElementById("spnDate",d),HXWebJS.DOM.SetElementInnerText(objCell,o),_?(HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebjs_popupcalendar__currentmonth_cell"),HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebjs_popupcalendar__othermonth_cell")):(HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebjs_popupcalendar__othermonth_cell"),HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebjs_popupcalendar__currentmonth_cell")),l?HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebjs_popupcalendar__today_cell"):(HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebjs_popupcalendar__today_cell"),a?HXWebJS.DOM.CSSClass.AddClass(objCell,"hxwebjs_popupcalendar__defaultdate_cell"):HXWebJS.DOM.CSSClass.RemoveClass(objCell,"hxwebjs_popupcalendar__defaultdate_cell")),null!=e.ondaydisplayformat_callback){var c=HXWebJS.Controls._Picker._current_active_control_info;e.ondaydisplayformat_callback(c._webdatacontrol_id,n,objCell,c._input_textbox,c._choose_button)}},HXWebDatePickerControl._swipe_on_control=function(e){e.deltaX<-20?HXWebDatePickerControl._nav_active_month("prev"):e.deltaX>20&&HXWebDatePickerControl._nav_active_month("next")},HXWebDatePickerControl._nav_active_month=function(e){var t=HXWebDatePickerControl._current_active_year,n=HXWebDatePickerControl._current_active_month;return"prev"==e?(1==n?(HXWebDatePickerControl._current_active_year=t-1,HXWebDatePickerControl._current_active_month=12):(HXWebDatePickerControl._current_active_year=t,HXWebDatePickerControl._current_active_month=n-1),void HXWebDatePickerControl._set_dateofmonth_content()):"next"==e?(12==n?(HXWebDatePickerControl._current_active_year=t+1,HXWebDatePickerControl._current_active_month=1):(HXWebDatePickerControl._current_active_year=t,HXWebDatePickerControl._current_active_month=n+1),void HXWebDatePickerControl._set_dateofmonth_content()):void 0},HXWebDatePickerControl._popup_calendar_area_clicked=function(e){var t=HXWebJS.Controls._Picker._current_active_control_info;if(null!=t&&t._process_class===HXWebDatePickerControl){e.stopPropagation();var n=e.target,o=HXWebDatePickerControl._current_active_year,_=HXWebDatePickerControl._current_active_month,l=n.tagName.toLowerCase(),a=n.id,r=n.parentNode.id;if("hxwebjs_popupcalendar__today_btn"!=a&&"hxwebjs_popupcalendar__today_btn"!=r)if("hxwebjs_popupcalendar__clear_btn"!=a&&"hxwebjs_popupcalendar__clear_btn"!=r){if("hxwebjs_popupcalendar__cancel_btn"==a||"hxwebjs_popupcalendar__cancel_btn"==r)return HXWebDatePickerControl._hide(),void(null==t._input_textbox||t._input_textbox.disabled||t._input_textbox.readOnly||HXWebJS.EventManager.FireEvent(t._input_textbox,"focusout"));if("span"==l){if("hxwebjs_popupcalendar__curr_period_lbl"==a||"hxwebjs_popupcalendar__curr_period_btn"==a)return void HXWebDatePickerControl._show_month_picker();if("hxwebjs_popupcalendar__time_lbl"==a||"hxwebjs_popupcalendar__time_btn"==a)return void HXWebDatePickerControl._show_time_picker();if("hxwebjs_popupcalendar__prevmonth_btn"==a)return void HXWebDatePickerControl._nav_active_month("prev");if("hxwebjs_popupcalendar__nextmonth_btn"==a)return void HXWebDatePickerControl._nav_active_month("next");if("hxwebjs_popupcalendar__prevyear_btn"==a)return HXWebDatePickerControl._current_active_year=o-1,void HXWebDatePickerControl._set_dateofmonth_content();if("hxwebjs_popupcalendar__nextyear_btn"==a)return HXWebDatePickerControl._current_active_year=o+1,void HXWebDatePickerControl._set_dateofmonth_content()}if("span"==l&&"spnDate"==a||"td"==l&&0==n.parentNode.id.indexOf("hxwebjs_popupcalendar__dataline_")){var i,d="span"==l?n:HXWebJS.DOM.FindFirstElementById("spnDate",n),s=d.parentNode.parentNode.id,c=parseInt(s.substr(s.length-1)),b=parseInt(HXWebJS.DOM.GetElementInnerText(d));i=0==c&&b>20?new Date(o,_-1-1,b):c>=4&&b<20?new Date(o,_,b):new Date(o,_-1,b),HXWebDatePickerControl._date_picked_process(i)}}else HXWebDatePickerControl._date_picked_process(null);else HXWebDatePickerControl._date_picked_process(new Date)}},HXWebDatePickerControl._date_picked_process=function(e){var t=HXWebJS.Utility.FormatDateTime(e);if(null==t&&(t=""),null!=HXWebJS.Controls._Picker._current_active_control_info){var n=HXWebJS.Controls._Picker._current_active_control_info._options;if(null!=n){if(n.allow_time_part&&""!=t){var o=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__time_lbl",HXWebDatePickerControl._global_popup_calendar_area);t+=" "+HXWebJS.DOM.GetElementInnerText(o)}var _=HXWebJS.Controls._Picker._current_active_control_info._input_textbox;if(null!=_&&(_.value=t,HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process({target:_,type:"change"})),null!=n.ondatachoosed_callback){var l=HXWebJS.Controls._Picker._current_active_control_info._webdatacontrol_id,a=HXWebJS.Controls._Picker._current_active_control_info._choose_button;n.ondatachoosed_callback(l,e,_,a)}var r=!1;null!=_&&(_.disabled||n.use_mobile_mode||(r=!0)),r?_.focus():HXWebJS.Controls._Picker._current_active_control_info=null,HXWebDatePickerControl._hide()}}},HXWebDatePickerControl._show_month_picker=function(){var e=HXWebDatePickerControl._global_popup_calendar_area,t=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__curr_period_lbl",e),n=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__curr_period_btn",e),o={default_period:100*HXWebDatePickerControl._current_active_year+HXWebDatePickerControl._current_active_month,ondatachoosed_callback:HXWebDatePickerControl._active_period_changed},_={left:HXWebJS.DOM.GetElementLeftPosition(e),top:HXWebJS.DOM.GetElementTopPosition(e),width:e.offsetWidth};HXWebMonthPickerControl._show("hxwebjs_popupcalendar__curr_period_lbl",t,n,o,null,"internal_call",_)},HXWebDatePickerControl._show_time_picker=function(){var e=HXWebDatePickerControl._global_popup_calendar_area,t=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__time_lbl",e),n=HXWebJS.DOM.FindFirstElementById("hxwebjs_popupcalendar__time_btn",e),o={ondatachoosed_callback:HXWebDatePickerControl._active_time_changed},_={left:HXWebJS.DOM.GetElementLeftPosition(e),top:HXWebJS.DOM.GetElementTopPosition(e),width:e.offsetWidth};HXWebTimePickerControl._show("hxwebjs_popupcalendar__time_lbl",t,n,o,null,"internal_call",_)},HXWebDatePickerControl._active_period_changed=function(e,t,n,o){null!=t&&(HXWebDatePickerControl._current_active_year=parseInt(t/100),HXWebDatePickerControl._current_active_month=t%100,HXWebDatePickerControl._set_dateofmonth_content())},HXWebDatePickerControl._active_time_changed=function(e,t,n,o){null!=t&&HXWebJS.DOM.SetElementInnerText(n,t)},HXWebMonthPickerControl={},HXWebMonthPickerControl._Internal={},HXWebMonthPickerControl._Internal.control_type="popupmonthpicker",HXWebMonthPickerControl.register=function(e,t,n){null==n&&(n={}),HXWebMonthPickerControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebMonthPickerControl._Internal.control_type,n)},HXWebMonthPickerControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebMonthPickerControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.default_period&&(n.default_period=t.default_period),null!=t.allow_choose_begin_period&&(n.allow_choose_begin_period=t.allow_choose_begin_period),null!=t.allow_choose_end_period&&(n.allow_choose_end_period=t.allow_choose_end_period),null!=t.oninit_callback&&(n.oninit_callback=t.oninit_callback),null!=t.ondatachoosed_callback&&(n.ondatachoosed_callback=t.ondatachoosed_callback),null!=t.use_mobile_mode&&(n.use_mobile_mode=t.use_mobile_mode),HXWebMonthPickerControl._options_check(n))}},HXWebMonthPickerControl._options_check=function(e){null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile),null==e.allow_choose_begin_period||HXWebJS.Utility.IsPeriod(e.allow_choose_begin_period)||(e.allow_choose_begin_period=null),null==e.allow_choose_end_period||HXWebJS.Utility.IsPeriod(e.allow_choose_end_period)||(e.allow_choose_end_period=null)},HXWebMonthPickerControl._show=function(e,t,n,o,_,l,a){if(null!=o.oninit_callback&&1!=o.oninit_callback(e,t,n,o))return null;var r=null==t?"":"SPAN"==t.tagName.toUpperCase()?HXWebJS.DOM.GetElementInnerText(t):t.value,i=HXWebJS.Utility.IsPeriod(r)?parseInt(r):null;if(null==i&&(i=o.default_period),null==i){var d=new Date;i=100*d.getFullYear()+d.getMonth()+1}return HXWebMonthPickerControl._current_is_internal_call="internal_call"==l,HXWebMonthPickerControl._current_internal_callback=o.ondatachoosed_callback,HXWebMonthPickerControl._current_textorspan_element=t,HXWebMonthPickerControl._current_default_period=i,HXWebMonthPickerControl._current_allow_choose_begin_period=o.allow_choose_begin_period,HXWebMonthPickerControl._current_allow_choose_end_period=o.allow_choose_end_period,HXWebMonthPickerControl._current_active_begin_year=parseInt(i/100)-5,HXWebMonthPickerControl._create_popup_area(o),HXWebMonthPickerControl._format_popup_area(o,t,n,_,"internal_call"==l,a),HXWebMonthPickerControl._global_popup_area},HXWebMonthPickerControl._create_popup_area=function(e){if(null==(_=HXWebJS.DOM.GetElementById("hxwebjs_monthpicker__container_div"))){var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_monthpicker__container_div" style="display:none; Z-INDEX:8100; LEFT:0px; TOP:0px;WIDTH:200px; POSITION: absolute; overflow:hidden; padding:1px;">'),t.append('<table border="0" cellpadding="0" cellspacing="0" width="100%" style="border-collapse:collapse;table-layout:fixed;">'),t.append('<tr id="hxwebjs_monthpicker__headline_tr"><td colspan=7 style="vertical-align:middle;"><div style="width:100%;text-align:center;vertical-align:middle;">'),t.append('<span id="hxwebjs_monthpicker__prev_btn" class="fa fa-angle-double-left"></span>'),t.append("<span id=hxwebjs_monthpicker__curr_period_lbl></span>"),t.append('<span id="hxwebjs_monthpicker__next_btn" class="fa fa-angle-double-right"></span>'),t.append("</div></td></tr>");for(var n=0;n<6;n++){t.append("<tr id=hxwebjs_monthpicker__dataline_"+n.toString()+" class=dataline>");for(var o=0;o<5;o++)t.append("<td></td>");t.append("<td class=monthcell></td><td class=monthcell></td></tr>")}t.append('<tr id=hxwebjs_monthpicker__footline><td colspan=7 style="text-align:left;">'),t.append('<button id="hxwebjs_monthpicker__ok_btn" class="hxbtn small primary"><span class="fa fa-check" style="margin-right:3px;color:lightgreen;"></span><span id="spnOkButtonText">Ok</span></button>'),t.append('<button id="hxwebjs_monthpicker__clear_btn" class="hxbtn small info"><span class="fa fa-rotate-left" style="margin-right:3px;color:white;"></span><span id="spnClearButtonText">Clear</span></button>'),t.append('<button id="hxwebjs_monthpicker__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button>'),t.append("</td></tr></table>"),t.append("</div>");var _=HXWebJS.DOM.CreateElement(t.toString());document.body.appendChild(_),HXWebJS.EventManager.AddListener(_,"click",HXWebMonthPickerControl._popup_area_clicked),HXWebMonthPickerControl._global_popup_area=_,e.use_mobile_mode&&HXWebJS.DOM.CSSClass.AddClass(_,"mobile");var l=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnOkButtonText",_).text(l[0]),$("#spnCancelButtonText",_).text(l[1]),$("#spnClearButtonText",_).text(l[3]);for(var a,r,i,d=HXWebJS.Controls._Internal._GetCalendarTextContent(),s=0;s<12;s++){a=s%6,r=parseInt(s/6)+5,i=d.text_of_month_abbr[s];var c=HXWebJS.DOM.FindFirstElementById("hxwebjs_monthpicker__dataline_"+a,_).cells[r];HXWebJS.DOM.SetElementInnerText(c,i)}if("ontouchend"in document&&"undefined"!=typeof Hammer){new Hammer(document.getElementById("hxwebjs_monthpicker__container_div")).on("swipe",function(e){HXWebMonthPickerControl._swipe_on_control(e)})}}},HXWebMonthPickerControl._format_popup_area=function(e,t,n,o,_,l){var a,r,i;null!=t&&"none"!=t.style.display&&"hidden"!=t.style.visibility?(r=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1,e.use_mobile_mode?(a=HXWebJS.DOM.GetScrollLeft()+2,i=HXWebJS.DOM.GetWindowWidth()-4):(a=HXWebJS.DOM.GetElementLeftPosition(t),(i=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-a)<380&&(i=380))):(r=HXWebJS.DOM.GetElementTopPosition(n)+n.offsetHeight+1,e.use_mobile_mode?(a=HXWebJS.DOM.GetScrollLeft()+2,i=HXWebJS.DOM.GetWindowWidth()-4):(a=HXWebJS.DOM.GetElementLeftPosition(n),i=300));var d=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,a,r,i,232,e.use_mobile_mode);a=d.left,r=d.top;var s=d.new_scroll_top;_&&(a=l.left,r=l.top,i=l.width);var c=HXWebMonthPickerControl._global_popup_area;c.style.left=a+"px",c.style.top=r+"px",c.style.width=i+"px",HXWebMonthPickerControl._set_yearmonth_content(),c.style.display="",s>0&&$(document).scrollTop(s)},HXWebMonthPickerControl._set_yearmonth_content=function(){for(var e,t=HXWebMonthPickerControl._current_active_begin_year,n=HXWebMonthPickerControl._current_default_period,o=parseInt(n/100),_=n%100,l=new Date,a=l.getFullYear(),r=l.getMonth()+1,i=0;i<30;i++)e=t+i,HXWebMonthPickerControl._set_single_cell_year_value(i,e,e==a,e==o);for(i=0;i<12;i++)HXWebMonthPickerControl._set_single_cell_month_value(i,i+1==r,i+1==_,o);HXWebMonthPickerControl._set_title_content(o,_)},HXWebMonthPickerControl._set_single_cell_year_value=function(e,t,n,o){var _=parseInt(e/5),l=e%5,a=HXWebJS.DOM.FindFirstElementById("hxwebjs_monthpicker__dataline_"+_,HXWebMonthPickerControl._global_popup_area).cells[l];HXWebJS.DOM.SetElementInnerText(a,t),a.className="hxwebjs_popupmonthpicker_normal_cell"+(n?" hxwebjs_popupmonthpicker_todayperiod_cell":"")+(o?" hxwebjs_popupmonthpicker_defaultperiod_cell":"");HXWebMonthPickerControl._IsYearAllowChosen(t)||(a.className=a.className+" disabled")},HXWebMonthPickerControl._IsYearAllowChosen=function(e){if(null!=HXWebMonthPickerControl._current_allow_choose_begin_period){if(e<Math.floor(HXWebMonthPickerControl._current_allow_choose_begin_period/100))return!1}if(null!=HXWebMonthPickerControl._current_allow_choose_end_period){if(e>Math.floor(HXWebMonthPickerControl._current_allow_choose_end_period/100))return!1}return!0},HXWebMonthPickerControl._set_single_cell_month_value=function(e,t,n){var o=e%6,_=parseInt(e/6),l=HXWebJS.DOM.FindFirstElementById("hxwebjs_monthpicker__dataline_"+o,HXWebMonthPickerControl._global_popup_area).cells[_+5];l.className="hxwebjs_popupmonthpicker_normal_cell"+(t?" hxwebjs_popupmonthpicker_todayperiod_cell":"")+(n?" hxwebjs_popupmonthpicker_defaultperiod_cell":"");HXWebMonthPickerControl._IsCurrentMonthAllowChosen(e)||(l.className=l.className+" disabled")},HXWebMonthPickerControl._IsCurrentMonthAllowChosen=function(e){var t=HXWebMonthPickerControl._current_default_period,n=parseInt(t/100),o=parseInt(HXWebMonthPickerControl._current_active_begin_year),_=parseInt(HXWebMonthPickerControl._current_active_begin_year)+30;if(null!=HXWebMonthPickerControl._current_allow_choose_begin_period){if(100*n+e+1<HXWebMonthPickerControl._current_allow_choose_begin_period)return!1;if(n<o||n>_)return!1}if(null!=HXWebMonthPickerControl._current_allow_choose_end_period){if(100*n+e+1>HXWebMonthPickerControl._current_allow_choose_end_period)return!1;if(n<o||n>_)return!1}return!0},HXWebMonthPickerControl._set_title_content=function(e,t){var n=HXWebJS.DOM.FindFirstElementById("hxwebjs_monthpicker__curr_period_lbl",HXWebMonthPickerControl._global_popup_area),o=HXWebJS.Controls._Internal._GetCalendarTextContent(),_=o.text_of_period_template.replace(/{Y}/gi,e),l=o.text_of_month[t-1];_=(_=_.replace(/{MM}/gi,l)).replace(/{M}/gi,t),HXWebJS.DOM.SetElementInnerText(n,_)},HXWebMonthPickerControl._popup_area_clicked=function(e){e.stopPropagation();var t=e.target,n=HXWebMonthPickerControl._current_default_period,o=t.tagName.toLowerCase(),_=t.id,l=t.parentNode.id;if("hxwebjs_monthpicker__ok_btn"!=_&&"hxwebjs_monthpicker__ok_btn"!=l)if("hxwebjs_monthpicker__clear_btn"!=_&&"hxwebjs_monthpicker__clear_btn"!=l){if("hxwebjs_monthpicker__cancel_btn"!=_&&"hxwebjs_monthpicker__cancel_btn"!=l){if("hxwebjs_monthpicker__prev_btn"==_)return HXWebMonthPickerControl._current_active_begin_year-=30,void HXWebMonthPickerControl._set_yearmonth_content();if("hxwebjs_monthpicker__next_btn"==_)return HXWebMonthPickerControl._current_active_begin_year+=30,void HXWebMonthPickerControl._set_yearmonth_content();if("td"==o&&-1!=t.parentNode.id.indexOf("hxwebjs_monthpicker__dataline_")){if(-1!=t.className.indexOf("disabled"))return;var a=t.cellIndex;if(a>=5){var r=parseInt(t.parentNode.id.substr(t.parentNode.id.length-1,1))+6*(a-5)+1;HXWebMonthPickerControl._current_default_period=100*parseInt(HXWebMonthPickerControl._current_default_period/100)+r,HXWebMonthPickerControl._set_yearmonth_content()}else{var i=parseInt(HXWebJS.DOM.GetElementInnerText(t));HXWebMonthPickerControl._current_default_period=100*i+HXWebMonthPickerControl._current_default_period%100,HXWebMonthPickerControl._set_yearmonth_content()}}}else if(HXWebMonthPickerControl._hide(),!HXWebMonthPickerControl._current_is_internal_call){var d=HXWebJS.Controls._Picker._current_active_control_info;if(null==d)return;if(d._process_class!==HXWebMonthPickerControl)return;null==d._input_textbox||d._input_textbox.disabled||d._input_textbox.readOnly||HXWebJS.EventManager.FireEvent(d._input_textbox,"focusout")}}else HXWebMonthPickerControl._period_chosen_process(null);else HXWebMonthPickerControl._period_chosen_process(n)},HXWebMonthPickerControl._period_chosen_process=function(e){if(HXWebMonthPickerControl._current_is_internal_call)return HXWebMonthPickerControl._global_popup_area.style.display="none",void HXWebMonthPickerControl._current_internal_callback(null,e,HXWebMonthPickerControl._current_textorspan_element);if(null!=HXWebJS.Controls._Picker._current_active_control_info&&HXWebJS.Controls._Picker._current_active_control_info._process_class===HXWebMonthPickerControl){var t=HXWebJS.Controls._Picker._current_active_control_info._options;if(null!=t){var n=HXWebJS.Controls._Picker._current_active_control_info._input_textbox;if(null!=n&&(n.value=null==e||isNaN(e)?"":e.toString(),HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process({target:n,type:"change"})),null!=t.ondatachoosed_callback){var o=HXWebJS.Controls._Picker._current_active_control_info._webdatacontrol_id,_=HXWebJS.Controls._Picker._current_active_control_info._choose_button;t.ondatachoosed_callback(o,e,n,_)}var l=!1;null!=n&&(n.disabled||t.use_mobile_mode||(l=!0)),l?n.focus():HXWebJS.Controls._Picker._current_active_control_info=null,HXWebMonthPickerControl._hide()}}},HXWebMonthPickerControl._hide=function(){HXWebMonthPickerControl._global_popup_area&&"none"!=HXWebMonthPickerControl._global_popup_area.style.display&&(HXWebMonthPickerControl._global_popup_area.style.display="none")},HXWebMonthPickerControl._input_data_validate=function(e,t,n,o){if(null==t)return!0;if(""!=t.value){if(!HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck(t,HXWebPageGlobalVariables.DateDisplayFormatString))return!1;if(null!=o.allow_choose_begin_period&&parseInt(t.value)<parseInt(o.allow_choose_begin_period)){var _=HXWebJS.Xml.XmlService.GetUITextOnServer("HXWEBMONTHPICKERCONTROL_WARNING__INPUT_PERIOD_LESS_THAN_ALLOWED_BEGIN_PERIOD"),_=HXWebJS.Utility.StringFormat(_,t.value,o.allow_choose_begin_period);return HXWebJS.Utility.ShowWindowTopTipMessage(_,{message_type:"warning",auto_hide_seconds:2}),!1}if(null!=o.allow_choose_end_period&&parseInt(t.value)>parseInt(o.allow_choose_end_period)){var _=HXWebJS.Xml.XmlService.GetUITextOnServer("HXWEBMONTHPICKERCONTROL_WARNING__INPUT_PERIOD_LARGE_THAN_ALLOWED_END_PERIOD"),_=HXWebJS.Utility.StringFormat(_,t.value,o.allow_choose_end_period);return HXWebJS.Utility.ShowWindowTopTipMessage(_,{message_type:"warning",auto_hide_seconds:2}),!1}}if(null!=o.ondatachoosed_callback){var l=parseInt(t.value);o.ondatachoosed_callback(e,l,t,n)}return!0},HXWebMonthPickerControl._is_element_in_popup_area=function(e){var t=HXWebJS.DOM.GetElementById("hxwebjs_monthpicker__container_div");return null!=t&&!!HXWebJS.DOM.IsElementInContainer(t,e)},HXWebMonthPickerControl._swipe_on_control=function(e){e.deltaX<-20?(HXWebMonthPickerControl._current_active_begin_year-=30,HXWebMonthPickerControl._set_yearmonth_content()):e.deltaX>20&&(HXWebMonthPickerControl._current_active_begin_year+=30,HXWebMonthPickerControl._set_yearmonth_content())},HXWebTimePickerControl={},HXWebTimePickerControl._Internal={},HXWebTimePickerControl._Internal.control_type="popuptimepicker",HXWebTimePickerControl._isTouchSupported="ontouchstart"in window,HXWebTimePickerControl._MouseDownEventName="mousedown"+(HXWebTimePickerControl._isTouchSupported?" touchstart":""),HXWebTimePickerControl._MouseMoveEventName="mousemove"+(HXWebTimePickerControl._isTouchSupported?" touchmove":""),HXWebTimePickerControl._MouseUpEventName="mouseup"+(HXWebTimePickerControl._isTouchSupported?" touchend":""),HXWebTimePickerControl.register=function(e,t,n){null==n&&(n={}),HXWebTimePickerControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebTimePickerControl._Internal.control_type,n)},HXWebTimePickerControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebTimePickerControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.auto_close&&(n.auto_close=t.auto_close),null!=t.default_time&&(n.default_time=t.default_time),null!=t.oninit_callback&&(n.oninit_callback=t.oninit_callback),null!=t.ondatachoosed_callback&&(n.ondatachoosed_callback=t.ondatachoosed_callback),null!=t.use_mobile_mode&&(n.use_mobile_mode=t.use_mobile_mode),HXWebTimePickerControl._options_check(n))}},HXWebTimePickerControl._options_check=function(e){null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile)},HXWebTimePickerControl._show=function(e,t,n,o,_,l,a){if(null!=o.oninit_callback&&1!=o.oninit_callback(e,t,n,o))return null;var r=null,i=null==t?"":"SPAN"==t.tagName.toUpperCase()?HXWebJS.DOM.GetElementInnerText(t):t.value;if(HXWebJS.Utility.IsTime(i)&&(r=HXWebJS.Utility.ConvertToTime(i)),null==r&&null!=o.default_time&&(r=HXWebJS.Utility.ConvertToTime(o.default_time)),null==r){var d=new Date;r={hour:d.getHours(),minute:d.getMinutes()}}return HXWebTimePickerControl._current_is_internal_call="internal_call"==l,HXWebTimePickerControl._current_internal_callback=o.ondatachoosed_callback,HXWebTimePickerControl._current_textorspan_element=t,HXWebTimePickerControl._current_time=r,HXWebTimePickerControl._create_popup_area(o),HXWebTimePickerControl._format_popup_area(o,t,n,_,"internal_call"==l,a),HXWebTimePickerControl._global_popup_area},HXWebTimePickerControl._hide=function(){HXWebTimePickerControl._global_popup_area&&"none"!=HXWebTimePickerControl._global_popup_area.style.display&&(HXWebTimePickerControl._global_popup_area.style.display="none")},HXWebTimePickerControl._input_data_validate=function(e,t,n,o){if(null==t)return!0;if(""!=t.value&&!HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck(t))return!1;if(null!=o.ondatachoosed_callback){var _=t.value;o.ondatachoosed_callback(e,_,t,n)}return!0},HXWebTimePickerControl._create_popup_area=function(e){if(null==(n=HXWebJS.DOM.GetElementById("hxwebjs_timepicker__container_div"))){var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_timepicker__container_div" style="display:none; Z-INDEX:8100; LEFT:0px; TOP:0px;WIDTH:220px; POSITION: absolute; overflow:hidden; padding:1px;">'),t.append('<div class="hxwebjs_timepicker__title_area"><span class="hxwebjs_timepicker__hours_title hxcolor_primary"></span>:<span class="hxwebjs_timepicker__minutes_title"></span></div>'),t.append('<div class="hxwebjs_timepicker__content_area">'),t.append('<div class="hours_outer_area" style="text-align:center;display:inline-block;"><div class="hours_inner_area" style="position:relative">'),t.append('<div class="hours_canvas"></div>'),t.append('<div class="hours_dial"></div>'),t.append("</div></div>"),t.append('<div class="minutes_outer_area" style="text-align:center;display:inline-block;"><div class="minutes_inner_area" style="position:relative">'),t.append('<div class="minutes_canvas"></div>'),t.append('<div class="minutes_dial"></div>'),t.append("</div></div>"),t.append("</div>"),t.append('<div class=hxwebjs_timepicker__command_area style="text-align:left;">'),t.append('<button id="hxwebjs_timepicker__ok_btn" class="hxbtn small primary"><span class="fa fa-check" style="margin-right:3px;color:lightgreen;"></span><span id="spnOkButtonText">Ok</span></button>'),t.append('<button id="hxwebjs_timepicker__clear_btn" class="hxbtn small info"><span class="fa fa-rotate-left" style="margin-right:3px;color:white;"></span><span id="spnClearButtonText">Clear</span></button>'),t.append('<button id="hxwebjs_timepicker__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button>'),t.append("</div>"),t.append("</div>");var n=HXWebJS.DOM.CreateElement(t.toString());document.body.appendChild(n),HXWebTimePickerControl._global_popup_area=n,HXWebTimePickerControl._global_hour_title_span$=$(".hxwebjs_timepicker__hours_title",n),HXWebTimePickerControl._global_minute_title_span$=$(".hxwebjs_timepicker__minutes_title",n),HXWebTimePickerControl._gloabl_hour_outer_area$=$(".hours_outer_area",n),HXWebTimePickerControl._gloabl_minute_outer_area$=$(".minutes_outer_area",n),e.use_mobile_mode&&HXWebJS.DOM.CSSClass.AddClass(n,"mobile");var o=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnOkButtonText",n).text(o[0]),$("#spnCancelButtonText",n).text(o[1]),$("#spnClearButtonText",n).text(o[3]),HXWebTimePickerControl._init_hours_and_minutes_view(e,n),HXWebJS.EventManager.AddListener(n,"click",HXWebTimePickerControl._popup_area_clicked),$(".hours_inner_area",n).on(HXWebTimePickerControl._MouseDownEventName,HXWebTimePickerControl._OnMouseDownAtHourDial),$(".minutes_inner_area",n).on(HXWebTimePickerControl._MouseDownEventName,HXWebTimePickerControl._OnMouseDownAtMinuteDial)}},HXWebTimePickerControl._format_popup_area=function(e,t,n,o,_,l){var a,r,i;null!=t&&"none"!=t.style.display&&"hidden"!=t.style.visibility?(r=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1,e.use_mobile_mode?(a=HXWebJS.DOM.GetScrollLeft()+2,i=HXWebJS.DOM.GetWindowWidth()-4):(a=HXWebJS.DOM.GetElementLeftPosition(t),(i=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-a)<460&&(i=460))):(r=HXWebJS.DOM.GetElementTopPosition(n)+n.offsetHeight+1,e.use_mobile_mode?(a=HXWebJS.DOM.GetScrollLeft()+2,i=HXWebJS.DOM.GetWindowWidth()-4):(a=HXWebJS.DOM.GetElementLeftPosition(n),i=460));var d=268;"one_dial_mode"==HXWebTimePickerControl._current_dial_mode&&0==e.auto_close&&(d+=44);var s=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,a,r,i,d,e.use_mobile_mode);a=s.left,r=s.top;var c=s.new_scroll_top;_&&(a=l.left,r=l.top,(i=l.width)<460&&(i=460));var b=HXWebTimePickerControl._global_popup_area;b.style.left=a+"px",b.style.top=r+"px",b.style.width=i+"px",HXWebTimePickerControl._global_hour_title_span$.text(HXWebTimePickerControl._leadingZeroFormat(HXWebTimePickerControl._current_time.hour)),HXWebTimePickerControl._global_minute_title_span$.text(HXWebTimePickerControl._leadingZeroFormat(HXWebTimePickerControl._current_time.minute)),i<460?(HXWebTimePickerControl._current_dial_mode="one_dial_mode",HXWebTimePickerControl._gloabl_hour_outer_area$[0].style.width="100%",HXWebTimePickerControl._gloabl_minute_outer_area$[0].style.width="100%",HXWebTimePickerControl._gloabl_hour_outer_area$[0].style.display="inline-block",HXWebTimePickerControl._gloabl_minute_outer_area$[0].style.display="none"):(HXWebTimePickerControl._current_dial_mode="two_dial_mode",HXWebTimePickerControl._gloabl_hour_outer_area$[0].style.width="50%",HXWebTimePickerControl._gloabl_minute_outer_area$[0].style.width="50%",HXWebTimePickerControl._gloabl_minute_outer_area$[0].style.display="inline-block",HXWebTimePickerControl._global_hour_title_span$.addClass("hxcolor_primary"),HXWebTimePickerControl._global_minute_title_span$.addClass("hxcolor_primary")),HXWebTimePickerControl._set_hour_hand(e,HXWebTimePickerControl._current_time.hour),HXWebTimePickerControl._set_minute_hand(e,HXWebTimePickerControl._current_time.minute),"one_dial_mode"==HXWebTimePickerControl._current_dial_mode&&(HXWebTimePickerControl._ToggleView("hours"),$(".hxwebjs_timepicker__command_area",b)[0].style.display=0!=e.auto_close?"none":""),b.style.display="",c>0&&$(document).scrollTop(c)},HXWebTimePickerControl._leadingZeroFormat=function(e){return(e<10?"0":"")+e},HXWebTimePickerControl._init_hours_and_minutes_view=function(e,t){var n,o,_,l,a=$(".hours_dial",t),r=$(".minutes_dial",t),i=$('<div class="tick" unselectable=on></div>');for(n=0;n<24;n+=1){o=i.clone(),_=n/6*Math.PI;var d=n>0&&n<13;l=d?54:80,o.css({left:100+Math.sin(_)*l-13,top:100-Math.cos(_)*l-13}),d&&o.css("font-size","120%"),o.html(0===n?"00":n),a.append(o)}for(n=0;n<60;n+=5)o=i.clone(),_=n/30*Math.PI,o.css({left:100+80*Math.sin(_)-13,top:100-80*Math.cos(_)-13}),o.css("font-size","120%"),o.html(HXWebTimePickerControl._leadingZeroFormat(n)),r.append(o);HXWebTimePickerControl._global_hour_hand_area=HXWebTimePickerControl._init_hand($(".hours_canvas",t)),HXWebTimePickerControl._global_minute_hand_area=HXWebTimePickerControl._init_hand($(".minutes_canvas",t))},HXWebTimePickerControl._init_hand=function(e){svg=HXWebTimePickerControl._CreateSvgElement("svg"),svg.setAttribute("width",200),svg.setAttribute("height",200);var t=HXWebTimePickerControl._CreateSvgElement("g");t.setAttribute("transform","translate(100,100)");var n=HXWebTimePickerControl._CreateSvgElement("circle");n.setAttribute("class","canvas_bearing"),n.setAttribute("cx",0),n.setAttribute("cy",0),n.setAttribute("r",2);var o=HXWebTimePickerControl._CreateSvgElement("line");o.setAttribute("class","canvas_line"),o.setAttribute("x1",0),o.setAttribute("y1",0);var _=HXWebTimePickerControl._CreateSvgElement("circle");_.setAttribute("class","canvas_bg"),_.setAttribute("r",13);var l=HXWebTimePickerControl._CreateSvgElement("circle");return l.setAttribute("class","canvas_fg"),l.setAttribute("r",3.5),t.appendChild(o),t.appendChild(_),t.appendChild(l),t.appendChild(n),svg.appendChild(t),e.append(svg),{hand:o,bg:_,fg:l,bearing:n,g:t,canvas$:e}},HXWebTimePickerControl._CreateSvgElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},HXWebTimePickerControl._set_hour_hand=function(e,t,n){var o=t/6*Math.PI,_=t>0&&t<13;radius=_?54:80;var l=+Math.sin(o)*radius,a=-Math.cos(o)*radius,r=HXWebTimePickerControl._global_hour_hand_area;r.hand.setAttribute("x2",l),r.hand.setAttribute("y2",a),r.bg.setAttribute("cx",l),r.bg.setAttribute("cy",a),r.fg.setAttribute("cx",l),r.fg.setAttribute("cy",a),n?r.g.insertBefore(r.bg,r.fg):r.g.insertBefore(r.fg,r.bg)},HXWebTimePickerControl._set_minute_hand=function(e,t,n){var o=t/30*Math.PI,_=80*Math.sin(o),l=80*-Math.cos(o),a=HXWebTimePickerControl._global_minute_hand_area;a.hand.setAttribute("x2",_),a.hand.setAttribute("y2",l),a.bg.setAttribute("cx",_),a.bg.setAttribute("cy",l),a.fg.setAttribute("cx",_),a.fg.setAttribute("cy",l);n||!(t%5==0)?a.g.insertBefore(a.bg,a.fg):a.g.insertBefore(a.fg,a.bg)},HXWebTimePickerControl._ToggleView=function(e){if("one_dial_mode"==HXWebTimePickerControl._current_dial_mode&&HXWebTimePickerControl._current_dial_view!=e){var t="hours"===e;HXWebTimePickerControl._current_dial_view=e,HXWebTimePickerControl._global_hour_title_span$.toggleClass("hxcolor_primary",t),HXWebTimePickerControl._global_minute_title_span$.toggleClass("hxcolor_primary",!t);var n=$(t?".hours_dial":".minutes_dial",HXWebTimePickerControl._global_popup_area),o=$(t?".minutes_dial":".hours_dial",HXWebTimePickerControl._global_popup_area);o.addClass("canvas_dial_out"),n.removeClass("canvas_dial_out"),clearTimeout(HXWebTimePickerControl._ToggleViewTimer),HXWebTimePickerControl._ToggleViewTimer=setTimeout(function(){o.parent().parent().css("display","none"),n.parent().parent().css("display","inline-block")},180)}},HXWebTimePickerControl._popup_area_clicked=function(e){e.stopPropagation();var t=e.target,n=(t.tagName.toLowerCase(),t.id),o=t.parentNode.id;if("hxwebjs_timepicker__ok_btn"!=n&&"hxwebjs_timepicker__ok_btn"!=o)if("hxwebjs_timepicker__clear_btn"!=n&&"hxwebjs_timepicker__clear_btn"!=o){if("hxwebjs_timepicker__cancel_btn"!=n&&"hxwebjs_timepicker__cancel_btn"!=o){var _=$(t);_.hasClass("hxwebjs_timepicker__hours_title")?HXWebTimePickerControl._ToggleView("hours"):_.hasClass("hxwebjs_timepicker__minutes_title")&&HXWebTimePickerControl._ToggleView("minutes")}else if(HXWebTimePickerControl._hide(),!HXWebTimePickerControl._current_is_internal_call){var l=HXWebJS.Controls._Picker._current_active_control_info;if(null==l)return;if(l._process_class!==HXWebTimePickerControl)return;null==l._input_textbox||l._input_textbox.disabled||l._input_textbox.readOnly||HXWebJS.EventManager.FireEvent(l._input_textbox,"focusout")}}else HXWebTimePickerControl._time_chosen_process(null);else{var a=HXWebTimePickerControl._global_hour_title_span$.text()+":"+HXWebTimePickerControl._global_minute_title_span$.text();HXWebTimePickerControl._time_chosen_process(a)}},HXWebTimePickerControl._time_chosen_process=function(e){if(null==e&&(e=HXWebTimePickerControl._global_hour_title_span$.text()+":"+HXWebTimePickerControl._global_minute_title_span$.text()),HXWebTimePickerControl._current_is_internal_call)return HXWebTimePickerControl._global_popup_area.style.display="none",void HXWebTimePickerControl._current_internal_callback(null,e,HXWebTimePickerControl._current_textorspan_element);if(null!=HXWebJS.Controls._Picker._current_active_control_info&&HXWebJS.Controls._Picker._current_active_control_info._process_class===HXWebTimePickerControl){var t=HXWebJS.Controls._Picker._current_active_control_info._options;if(null!=t){var n=HXWebJS.Controls._Picker._current_active_control_info._input_textbox;if(null!=n&&(n.value=null==e?"":e,HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process({target:n,type:"change"})),null!=t.ondatachoosed_callback){var o=HXWebJS.Controls._Picker._current_active_control_info._webdatacontrol_id,_=HXWebJS.Controls._Picker._current_active_control_info._choose_button;t.ondatachoosed_callback(o,e,n,_)}var l=!1;null!=n&&(n.disabled||t.use_mobile_mode||(l=!0)),l?n.focus():HXWebJS.Controls._Picker._current_active_control_info=null,HXWebTimePickerControl._hide()}}},HXWebTimePickerControl._OnMouseDownAtHourDial=function(e){var t=$(".hours_inner_area",HXWebTimePickerControl._global_popup_area);HXWebTimePickerControl._OnMouseDownAtDialProcess(e,t,"hours")},HXWebTimePickerControl._OnMouseDownAtMinuteDial=function(e){var t=$(".minutes_inner_area",HXWebTimePickerControl._global_popup_area),n=0==$(e.target).closest(".tick").length;HXWebTimePickerControl._OnMouseDownAtDialProcess(e,t,"minutes",n)},HXWebTimePickerControl._OnMouseDownAtDialProcess=function(e,t,n,o){var _=HXWebJS.Controls._Picker._current_active_control_info._options,l=$(document),a=$(document.body),r=t.offset(),i=/^touch/.test(e.type),d=r.left+100,s=r.top+100,c=(i?e.originalEvent.touches[0]:e).pageX-d,b=(i?e.originalEvent.touches[0]:e).pageY-s,p=Math.sqrt(c*c+b*b),u=!1;if(!o||!(p<67||p>93)){e.preventDefault();var m=setTimeout(function(){a.addClass("hxwebjs_timepicker__moving")},200);t.append($("hours"==n?"hours_canvas":"minutes_canvas",HXWebTimePickerControl._global_popup_area));var h=p<67;HXWebTimePickerControl._set_hand(_,n,c,b,o,h),l.off(HXWebTimePickerControl._MouseMoveEventName).on(HXWebTimePickerControl._MouseMoveEventName,function(e){e.preventDefault();var t=/^touch/.test(e.type),o=(t?e.originalEvent.touches[0]:e).pageX-d,l=(t?e.originalEvent.touches[0]:e).pageY-s;if(u||o!==c||l!==b){u=!0;var a,r;"hours"==n?a=Math.sqrt(o*o+l*l)<67:r=0==$(e.target).closest(".tick").length,HXWebTimePickerControl._set_hand(_,n,o,l,r,a,!0)}}),l.off(HXWebTimePickerControl._MouseUpEventName).on(HXWebTimePickerControl._MouseUpEventName,function(e){l.off(HXWebTimePickerControl._MouseUpEventName),e.preventDefault();var r=/^touch/.test(e.type),i=(r?e.originalEvent.changedTouches[0]:e).pageX-d,c=(r?e.originalEvent.changedTouches[0]:e).pageY-s;if(o||u){var b,p;"hours"==n?b=Math.sqrt(i*i+c*c)<67:p=0==$(e.target).closest(".tick").length,HXWebTimePickerControl._set_hand(_,n,i,c,p,b,!1)}"one_dial_mode"==HXWebTimePickerControl._current_dial_mode&&("hours"===n?HXWebTimePickerControl._ToggleView("minutes"):0!=_.auto_close&&setTimeout(function(){HXWebTimePickerControl._time_chosen_process()},150)),t.prepend($("hours"==n?"hours_canvas":"minutes_canvas",HXWebTimePickerControl._global_popup_area)),clearTimeout(m),a.removeClass("hxwebjs_timepicker__moving"),l.off(HXWebTimePickerControl._MouseMoveEventName)})}},HXWebTimePickerControl._set_hand=function(e,t,n,o,_,l,a){if("hours"==t){var r=HXWebTimePickerControl._calc_hour_via_mouse_position(n,o,l);HXWebTimePickerControl._current_time.hour=r,HXWebTimePickerControl._set_hour_hand(e,r,a),HXWebTimePickerControl._global_hour_title_span$.text(HXWebTimePickerControl._leadingZeroFormat(r))}else{var i=HXWebTimePickerControl._calc_minute_via_mouse_position(n,o,!_);HXWebTimePickerControl._current_time.minute=i,HXWebTimePickerControl._set_minute_hand(e,i,a),HXWebTimePickerControl._global_minute_title_span$.text(HXWebTimePickerControl._leadingZeroFormat(i))}},HXWebTimePickerControl._calc_hour_via_mouse_position=function(e,t,n){var o=Math.atan2(e,-t);o<0&&(o=2*Math.PI+o);var _=Math.PI/6,l=Math.round(o/_);return l=n?0===l?12:l:0===l?0:l+12},HXWebTimePickerControl._calc_minute_via_mouse_position=function(e,t,n){var o=Math.atan2(e,-t);o<0&&(o=2*Math.PI+o);var _=Math.PI/(n?6:30),l=Math.round(o/_);return n&&(l*=5),60==l&&(l=0),l},HXWebTreeViewControl={},HXWebTreeViewControl._Internal={},HXWebTreeViewControl.register=function(e,t){if(null!=e){var n=document.getElementById(e);if(null!=n){HXWebJS.DOM.SetElementAttributeValue(n,"hx_is_treeview_container","1"),HXWebTreeViewControl._Internal._registed_elements_info||(HXWebTreeViewControl._Internal._registed_elements_info={});o=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==t&&(t={}),!o){var o;(o=t).treeviewcontrol_id=e,o.treeview_container_object=n,o._hxxmldoc_for_all_treeview_data=null,o._has_all_treeview_data_loaded=!1,o._hxxmldoc_for_chosen_and_predecessors_data=null,o._last_selected_treenode_element=null,o._is_search_mode=!1,o._search_key_chars="",o._chosen_node_unique_code_list="",HXWebTreeViewControl._Internal._registed_elements_info[e]=o,HXWebJS.EventManager.AddListener(n,"click",HXWebTreeViewControl._Internal._treeview_container_clicked),null!=t.is_allow_dragdrop&&HXWebTreeViewControl._Internal._dragdrop_event_handler_process(n,t.is_allow_dragdrop)}}}},HXWebTreeViewControl.option={is_show_checkbox:void 0,is_allow_wrap_text:void 0,use_icon:void 0,use_css_expandcollapse_icon_mode:void 0,default_icon_class:void 0,is_auto_expandcollapse:void 0,is_auto_changecheckstatus:void 0,treeview_setting_code:void 0,customized_no_data_hint_msg:void 0,is_allow_dragdrop:void 0,trigger_node_move_event_to_svr:void 0,list_only_effective_items:void 0,extend_web_part_html_id:void 0,pagexmlsvc_class_name:void 0,ongetfilterdata_callback:void 0,oncheckstatuschanged_callback:void 0,oncheckstatusupdated_callback:void 0,onnodeclicked_callback:void 0,oncustomized_node_html_build__callback:void 0,onbeforedrop_callback:void 0},HXWebTreeViewControl.set_options=function(e,t){if(null!=t&&null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var n=HXWebTreeViewControl._Internal._registed_elements_info[e];null!=n&&(null!=t.is_show_checkbox&&(n.is_show_checkbox=t.is_show_checkbox),null!=t.use_icon&&(n.use_icon=t.use_icon),null!=t.use_css_expandcollapse_icon_mode&&(n.use_css_expandcollapse_icon_mode=t.use_css_expandcollapse_icon_mode),null!=t.is_auto_expandcollapse&&(n.is_auto_expandcollapse=t.is_auto_expandcollapse),null!=t.is_auto_changecheckstatus&&(n.is_auto_changecheckstatus=t.is_auto_changecheckstatus),null!=t.treeview_setting_code&&(n.treeview_setting_code=t.treeview_setting_code),null!=t.popup_treeviewcontrol_id&&(n.popup_treeviewcontrol_id=t.popup_treeviewcontrol_id),null!=t.list_only_effective_items&&(n.list_only_effective_items=t.list_only_effective_items),null!=t.customized_no_data_hint_msg&&(n.customized_no_data_hint_msg=t.customized_no_data_hint_msg),null!=t.is_allow_dragdrop&&(n.is_allow_dragdrop=t.is_allow_dragdrop),null!=t.trigger_node_move_event_to_svr&&(n.trigger_node_move_event_to_svr=t.trigger_node_move_event_to_svr),null!=t.ongetfilterdata_callback&&(t.ongetfilterdata_callback==HXWebJS.Core.DummyFunction?n.ongetfilterdata_callback=null:n.ongetfilterdata_callback=t.ongetfilterdata_callback),null!=t.onnodeclicked_callback&&(t.onnodeclicked_callback==HXWebJS.Core.DummyFunction?n.onnodeclicked_callback=null:n.onnodeclicked_callback=t.onnodeclicked_callback),null!=t.oncheckstatuschanged_callback&&(t.oncheckstatuschanged_callback==HXWebJS.Core.DummyFunction?n.oncheckstatuschanged_callback=null:n.oncheckstatuschanged_callback=t.oncheckstatuschanged_callback),null!=t.oncheckstatusupdated_callback&&(t.oncheckstatusupdated_callback==HXWebJS.Core.DummyFunction?n.oncheckstatusupdated_callback=null:n.oncheckstatusupdated_callback=t.oncheckstatusupdated_callback),null!=t.onbeforedrop_callback&&(t.onbeforedrop_callback==HXWebJS.Core.DummyFunction?n.onbeforedrop_callback=null:n.onbeforedrop_callback=t.onbeforedrop_callback),null!=t.oncustomized_node_html_build__callback&&(t.oncustomized_node_html_build__callback==HXWebJS.Core.DummyFunction?n.oncustomized_node_html_build__callback=null:n.oncustomized_node_html_build__callback=t.oncustomized_node_html_build__callback),null!=t.extend_web_part_html_id&&(n.extend_web_part_html_id=t.extend_web_part_html_id),null!=t.pagexmlsvc_class_name&&(n.pagexmlsvc_class_name=t.pagexmlsvc_class_name),null!=t.is_allow_dragdrop&&HXWebTreeViewControl._Internal._dragdrop_event_handler_process(n.treeview_container_object,t.is_allow_dragdrop))}},HXWebTreeViewControl.init_treeview_nodes=function(e,t,n){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var o=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null!=o){null==t&&(t={});var _=null==t.init_auto_show_level?1:t.init_auto_show_level<=0?-1:t.init_auto_show_level,l=null==t.search_key_chars?"":HXWebJS.Utility.Trim(t.search_key_chars);""!=l&&(_=-1);var a,r,i=!!t.search_from_begin,d=null==t.chosen_node_unique_code_list?"":t.chosen_node_unique_code_list,s=o.is_show_checkbox;""!=l?(a=!0,r=!0):_<=0?(a=!0,r=!!s):(a=1==t.acquire_all_treeview_data,r=!0),o._is_search_mode=""!=l,o._search_key_chars=l,o._search_from_begin=i,o._chosen_node_unique_code_list=d,o._hxxmldoc_for_chosen_and_predecessors_data=null,o._last_actived_node_container_div=null;HXWebTreeViewControl._Internal._get_init_treeview_data_from_server(o,l,i,d,_,a,r,function(t){if(null!=t){if(""==t)return HXWebTreeViewControl._Internal._clear_nodes(e),void(null!=n&&n(e));var l=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(t),r=l.SelectSingleNode("//HX_DATA_BLOCK[@CODE='chosen_nodes_and_predecessors_info']").GetText();o._hxxmldoc_for_chosen_and_predecessors_data=""==r?null:HXWebJS.Xml.GetHXXmlDocumentViaXmlString(r);var i=l.SelectSingleNode("//HX_DATA_BLOCK[@CODE='treeview_nodes_data']").GetText(),d=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(i);o._hxxmldoc_for_all_treeview_data=d,o._has_all_treeview_data_loaded=a;var s={min_allowed_node_level:-1,min_allowed_nodes_code_chain_list:[]},c="",b="",p=l.SelectSingleNode("//HX_DATA_BLOCK[@CODE='treeview_extra_feedback_info']");if(null!=p){var u=p.GetText(),m=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(u);s.min_allowed_node_level=parseInt(m.SelectSingleNode("//@ALLOWED_NODES_MIN_LEVEL").GetText());var h=m.SelectSingleNode("//@ALLOWED_NODE_CODE_CHAIN");null!=h&&(c=h.GetText(),HXWebJS.Core.IsStringNullOrEmpty(c)||s.min_allowed_nodes_code_chain_list.push(c));var f=m.SelectSingleNode("//@ALLOWED_NODES_CODE_CHAIN_LIST");if(null!=f&&(b=f.GetText(),!HXWebJS.Core.IsStringNullOrEmpty(b)))for(var C=b.split(/:/gi),X=0;X<C.length;X++)s.min_allowed_nodes_code_chain_list.indexOf(C[X])<0&&s.min_allowed_nodes_code_chain_list.push(C[X])}HXWebTreeViewControl._Internal._clear_nodes(e),HXWebTreeViewControl._Internal._append_child_nodes(o,_,"",0,o.treeview_container_object,s),0==$(o.treeview_container_object).children(".hxwebjs_treeview__node_container").length&&HXWebTreeViewControl._Internal._show_no_data_found_hint_msg(o),null!=n&&n(e,o)}})}}},HXWebTreeViewControl.expand_all_level_nodes=function(e){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var t=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null!=t)if(t._has_all_treeview_data_loaded)HXWebTreeViewControl._Internal._expand_all_level_children_nodes(t,t.treeview_container_object);else{HXWebTreeViewControl.init_treeview_nodes(e,{init_auto_show_level:0})}}},HXWebTreeViewControl.expand_to_node=function(e,t,n){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var o=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null!=o){if(!HXWebJS.Core.IsStringNullOrEmpty(t)){if(null!=(l=HXWebTreeViewControl.get_node_element(e,t))){for(i=$(l).parents(".hxwebjs_treeview__node_container");i.length>0;)HXWebTreeViewControl._Internal._show_child_nodes_area(i[0],!0),i=i.parents(".hxwebjs_treeview__node_container");return}}if(!HXWebJS.Core.IsStringNullOrEmpty(n))for(var _,l,a=n.split(/;/g),r=0;r<a.length-1;r++){_=a[r];var i=$(o.treeview_container_object).find(".hxwebjs_treeview__node_container[hx_treenode_uuid='"+_+"']");l=i[0];"1"==i.attr("hx_is_need_init_children")&&(HXWebTreeViewControl._Internal._expand_directly_children(o,l),HXWebJS.DOM.SetElementAttributeValue(l,"hx_is_need_init_children","0")),HXWebJS.DOM.SetElementAttributeValue(l,"hx_treenode_is_expanded","1"),HXWebTreeViewControl._Internal._show_child_nodes_area(l,!0)}}}},HXWebTreeViewControl.get_actived_node=function(e){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var t=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==t)return null;if(null!=t._last_actived_node_container_div){var n=HXWebJS.DOM.GetElementAttributeValue(t._last_actived_node_container_div,"hx_treenode_uuid");return HXWebTreeViewControl._Internal._get_node_json_data(t,n)}return null},HXWebTreeViewControl.set_actived_node=function(e,t,n,o,_){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var l=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==l)return null;var a=$("div[hx_treenode_uuid="+t+"]",l.treeview_container_object);if(0!=a.length){var r=a[0];HXWebTreeViewControl._Internal._mark_node_as_active(l,r),1==n&&HXWebTreeViewControl._Internal._expand_collapse_node(r),1==o&&HXWebTreeViewControl._Internal._change_node_check_status(r,null,_)}},HXWebTreeViewControl.collapse_all_level_nodes=function(e){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var t=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null!=t)for(var n,o=$(t.treeview_container_object).children("#hxwebjs_treeview__node_container_div[hx_treenode_is_leaf=0]").get(),_=0;_<o.length;_++)n=o[_],HXWebJS.DOM.SetElementAttributeValue(n,"hx_treenode_is_expanded","0"),HXWebTreeViewControl._Internal._show_child_nodes_area(n,!1)}},HXWebTreeViewControl.mark_node_as_checked=function(e,t,n,o){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var _=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null!=_&&1==_.is_show_checkbox){null==n&&(n=!0);var l=$("div[hx_treenode_uuid="+t+"]",_.treeview_container_object);if(0!=l.length){var a=l[0];HXWebTreeViewControl._Internal._change_node_check_status(a,n,o)}}}},HXWebTreeViewControl.get_choosed_nodes=function(e,t){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var n=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==n)return null;var o=$(n.treeview_container_object).find(".hxwebjs_treeview__node_container"),_=[];(2==t?$(n.treeview_container_object).find("#hxwebjs_treeview__node_container_div[hx_treenode_choose_status=1]"):3==t?$(n.treeview_container_object).find("#hxwebjs_treeview__node_container_div[hx_treenode_choose_status=1]").add($(n.treeview_container_object).find("#hxwebjs_treeview__node_container_div[hx_treenode_choose_status=2]")):$(n.treeview_container_object).find("#hxwebjs_treeview__node_container_div[hx_treenode_choose_status=1]").not("[hx_treenode_is_leaf=0]")).each(function(){var e=HXWebJS.DOM.GetElementAttributeValue(this,"hx_treenode_uuid"),t=HXWebTreeViewControl._Internal._get_node_json_data(n,e);_.push(t)});var l=HXWebTreeViewControl._Internal._get_chosen_nodes_info_not_loaded(n,o);return l.length>0?_.concat(l):_},HXWebTreeViewControl.get_node_data=function(e,t){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var n=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==n)return null;var o;return o="string"==typeof t?t:HXWebJS.DOM.CSSClass.HasClass(t,"hxwebjs_treeview__node_container")?HXWebJS.DOM.GetElementAttributeValue("hx_treeview_uuid"):$(t).parents(".hxwebjs_treeview__node_container").attr("hx_treenode_uuid"),HXWebTreeViewControl._Internal._get_node_json_data(n,o)},HXWebTreeViewControl.get_node_element=function(e,t){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var n=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==n)return null;var o=$(n.treeview_container_object).find(".hxwebjs_treeview__node_container[hx_treenode_uuid='"+t+"']");return 0==o.length?null:o[0]},HXWebTreeViewControl.change_node_data=function(e,t,n){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var o=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==o)return null;var _=o._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+t+"']");null!=_&&(null!=n.node_text&&_.SetAttributeValue("NODE_TEXT",n.node_text),null!=n.node_hint_desc&&_.SetAttributeValue("NODE_DESC",n.node_hint_desc),null!=n.node_attr_1&&_.SetAttributeValue("ATTR_1",n.node_attr_1),null!=n.node_attr_2&&_.SetAttributeValue("ATTR_2",n.node_attr_2),null!=n.node_attr_3&&_.SetAttributeValue("ATTR_3",n.node_attr_3),null!=n.node_attr_4&&_.SetAttributeValue("ATTR_4",n.node_attr_4),null!=n.node_attr_5&&_.SetAttributeValue("ATTR_5",n.node_attr_5),HXWebTreeViewControl._Internal._node_extra_data_fill_to_xmlnode(n,_));var l=$("div[hx_treenode_uuid="+t+"]",o.treeview_container_object);if(0!=l.length){var a=l[0];if(null!=n.node_text||null!=n.node_hint_desc){var r=(l=$(a).find(".hxwebjs_treeview__node_info_row #hxwebjs_treeview__node_text_spn")).text();null!=n.node_text&&l.text(n.node_text);var i=l.attr("title");null!=n.node_hint_desc&&""!=n.node_hint_desc?l.attr("title",n.node_hint_desc):i==r&&l.attr("title",n.node_text)}}},HXWebTreeViewControl.append_node=function(e,t,n,o){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var _=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==_)return null;var l,a=null;if(HXWebJS.Core.IsStringNullOrEmpty(n))t.node_level=1,l=_.treeview_container_object;else{var a=HXWebTreeViewControl.get_node_element(e,n),r=$(a).children(".hxwebjs_treeview__node_info_row").attr("hx_treenode_level");t.node_level=parseInt(r)+1,l=$(".hxwebjs_treeview__node_childs_cnt_area",a)[0]}if(null!=a){"1"==HXWebJS.DOM.GetElementAttributeValue(a,"hx_treenode_is_leaf")&&(HXWebJS.DOM.SetElementAttributeValue(a,"hx_treenode_is_leaf",0),HXWebTreeViewControl._Internal._expandcollapse_icon_change_as_expanded(_,a));return"0"==HXWebJS.DOM.GetElementAttributeValue(a,"hx_is_need_init_children")&&(HXWebJS.DOM.SetElementAttributeValue(a,"hx_is_need_init_children",1),$("#hxwebjs_treeview__node_childs_area>.hxwebjs_treeview__node_childs_cnt_area",a)[0].innerHTML=""),HXWebJS.DOM.SetElementAttributeValue(a,"hx_treenode_is_expanded",0),void HXWebTreeViewControl._Internal._expand_collapse_node(a)}t.node_is_leaf=!0;var i=null==t.node_choose_status?0:t.node_choose_status,d=!1,s=null;HXWebJS.Core.IsStringNullOrEmpty(o)?(blnIsLastChild=!0,el$=$(l).find(".hxwebjs_treeview__node_childs_row>.hxwebjs_treeview__node_childs_cnt_area>.hxwebjs_treeview__node_container"),0==el$.length&&(d=!0)):(s=HXWebTreeViewControl.get_node_element(e,o),blnIsLastChild=!1,el$=$(l).find(".hxwebjs_treeview__node_childs_row>.hxwebjs_treeview__node_childs_cnt_area>.hxwebjs_treeview__node_container"),0==el$.length?d=!0:el$.attr("hx_treenode_uuid")==o&&(d=!0)),HXWebTreeViewControl._Internal._get_and_merge_new_node_data_into_cache(_,t),HXWebTreeViewControl._Internal._append_node(_,t,i,l,d,blnIsLastChild,s)},HXWebTreeViewControl.remove_node=function(e,t){var n=HXWebTreeViewControl.get_node_element(e,t),o=$(n),_=1==o.parent().children().length,l=0==o.next().length,a=o.parents(".hxwebjs_treeview__node_container");o.parent()[0].removeChild(o[0]);var r=HXWebTreeViewControl._Internal._registed_elements_info[e],i=r._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+t+"']");if(r._hxxmldoc_for_all_treeview_data.GetRootXmlNode().RemoveChild(i),_){a.attr("hx_treenode_is_leaf","1");var d=a.attr("hx_treenode_uuid");r._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+d+"']").SetAttributeValue("NODE_IS_LEAF","1"),HXWebTreeViewControl._Internal._expandcollapse_icon_restore_as_leaf(r,a[0])}l&&a.find(".hxwebjs_treeview__node_childs_cnt_area>div:last-child").find(".hxwebjs_treeview__node_info_row>.hxwebjs_treeview__node_tree_img_area").addClass("half_vertical_line").removeClass("vertical_line")},HXWebTreeViewControl.redraw_node=function(e,t){if(null==e)return null;if(!HXWebTreeViewControl._Internal._registed_elements_info)return null;var n=HXWebTreeViewControl._Internal._registed_elements_info[e];if(null==n)return null;if(null!=n.oncustomized_node_html_build__callback){var o=$(n.treeview_container_object).find(".hxwebjs_treeview__node_container[hx_treenode_uuid='"+t+"']");if(0==o.length)return null;var _=HXWebTreeViewControl._Internal._get_node_json_data(n,t),l=_.node_choose_status,a=n.oncustomized_node_html_build__callback(n.treeviewcontrol_id,_,l);o.find(".hxwebjs_treeview__node_info_row>.hxwebjs_treeview__node_disp_cnt_area")[0].innerHTML=a}},HXWebTreeViewControl.clear_nodes=function(e){HXWebTreeViewControl._Internal._clear_nodes(e)},HXWebTreeViewControl._Internal._get_and_merge_new_node_data_into_cache=function(e,t){var n=t.node_unique_code;if(null==e._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+n+"']")){var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlString('<RS_DATA><RS_ROW NODE_UNIQUE_CODE="" PARENT_NODE_UNIQUE_CODE="" NODE_TEXT="" NODE_DESC="" NODE_TYPE="" NODE_IS_LEAF="" NODE_LEVEL="" ICON_CLASS="" IMAGE_SRC="" ATTR_1="" ATTR_2="" ATTR_3="" ATTR_4="" ATTR_5=""></RS_ROW></RS_DATA>').SelectSingleNode("//RS_ROW");o.SetAttributeValue("NODE_UNIQUE_CODE",n),HXWebJS.Core.IsStringNullOrEmpty(t.parent_node_unique_code)||o.SetAttributeValue("PARENT_NODE_UNIQUE_CODE",t.parent_node_unique_code),HXWebJS.Core.IsStringNullOrEmpty(t.node_text)||o.SetAttributeValue("NODE_TEXT",t.node_text),HXWebJS.Core.IsStringNullOrEmpty(t.node_hint_desc)||o.SetAttributeValue("NODE_DESC",t.node_hint_desc),HXWebJS.Core.IsStringNullOrEmpty(t.node_type)||o.SetAttributeValue("NODE_TYPE",t.node_type),HXWebJS.Core.IsStringNullOrEmpty(t.node_is_leaf)||o.SetAttributeValue("NODE_IS_LEAF",t.node_is_leaf),HXWebJS.Core.IsStringNullOrEmpty(t.node_level)||o.SetAttributeValue("NODE_LEVEL",t.node_level),HXWebJS.Core.IsStringNullOrEmpty(t.node_icon_class)||o.SetAttributeValue("ICON_CLASS",t.node_icon_class),HXWebJS.Core.IsStringNullOrEmpty(t.node_image_src)||o.SetAttributeValue("IMAGE_SRC",t.node_image_src),HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_1)||o.SetAttributeValue("ATTR_1",t.node_attr_1),HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_2)||o.SetAttributeValue("ATTR_2",t.node_attr_2),HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_3)||o.SetAttributeValue("ATTR_3",t.node_attr_3),HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_4)||o.SetAttributeValue("ATTR_4",t.node_attr_4),HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_5)||o.SetAttributeValue("ATTR_5",t.node_attr_5),HXWebTreeViewControl._Internal._node_extra_data_fill_to_xmlnode(t,o),e._hxxmldoc_for_all_treeview_data.GetRootXmlNode().AppendChild(o)}},HXWebTreeViewControl._Internal._node_extra_data_fill_to_xmlnode=function(e,t){if(null!=e.node_xml_data)for(var n,o,_=e.node_xml_data.SelectNodes("@*"),l=0;l<_.length;l++)"NODE_UNIQUE_CODE"!=(o=(n=_[l]).GetName())&&"PARENT_NODE_UNIQUE_CODE"!=o&&"NODE_TEXT"!=o&&"NODE_DESC"!=o&&"NODE_IS_LEAF"!=o&&"NODE_LEVEL"!=o&&"ICON_CLASS"!=o&&"IMAGE_SRC"!=o&&"ATTR_1"!=o&&"ATTR_2"!=o&&"ATTR_3"!=o&&"ATTR_4"!=o&&"ATTR_5"!=o&&t.SetAttributeValue(o,n.GetText(),!0)},HXWebTreeViewControl._Internal._get_chosen_nodes_info_not_loaded=function(e,t){if(null==e._chosen_node_unique_code_list||""==e._chosen_node_unique_code_list)return[];if(null==e._hxxmldoc_for_chosen_and_predecessors_data)return[];for(var n,o=e._chosen_node_unique_code_list.split(/[,|;]/g),_=[],l=0;l<o.length;l++){var a=o[l];if(!(t.filter("[hx_treenode_uuid="+a+"]").length>0)&&null!=(n=HXWebTreeViewControl._Internal._get_node_json_data(e,a,"via_chosen_and_predecessors_data_package"))){for(var r,i=null,d=n.parent_node_unique_code;""!=d;){if((r=t.filter("[hx_treenode_uuid="+d+"]")).length>0){i=r[0];break}d=e._hxxmldoc_for_chosen_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+d+"']/@PARENT_NODE_UNIQUE_CODE").GetText()}if(""!=d){var s=i.getAttribute("hx_treenode_choose_status");0!=s&&1!=s&&_.push(n)}}}return _},HXWebTreeViewControl._Internal._get_init_treeview_data_from_server=function(e,t,n,o,_,l,a,r){var i=HXWebTreeViewControl._Internal._get_customized_filter_data(e);if(null!=i){var d=HXWebTreeViewControl._Internal._build_pagxmlservice_xmlcontent_getdata(e,"",i,!1,l,o,t,n,_,a);HXWebTreeViewControl._Internal._call_gettreeviewdata_pagxmlservice(d,function(e){null!=e&&r(e)},e.extend_web_part_html_id,!0)}},HXWebTreeViewControl._Internal._get_and_merge_children_data_from_server=function(e,t){var n=HXWebTreeViewControl._Internal._get_customized_filter_data(e);if(null!=n){var o=HXWebTreeViewControl._Internal._build_pagxmlservice_xmlcontent_getdata(e,t,n,!0,!1,"","",!1,1,!1),_=HXWebTreeViewControl._Internal._call_gettreeviewdata_pagxmlservice(o,null,e.extend_web_part_html_id,!1);if(null!=_&&""!=_){if(""!=(_=HXWebJS.Xml.GetCompositeXmlDataBlock(_,"treeview_nodes_data")))for(var l,a,r=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(_).SelectNodes("//RS_ROW"),i=0;i<r.length;i++)a=(l=r[i]).GetAttributeValue("NODE_UNIQUE_CODE"),null==e._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+a+"']")&&e._hxxmldoc_for_all_treeview_data.GetRootXmlNode().AppendChild(l.CloneNode())}}},HXWebTreeViewControl._Internal._get_customized_filter_data=function(e){var t="";if(e.ongetfilterdata_callback)try{if(null==(t=e.ongetfilterdata_callback(e.treeviewcontrol_id)))return null}catch(e){return HXWebJS.Core.LogErrorToConsole(e.description),null}return t},HXWebTreeViewControl._Internal._build_pagxmlservice_xmlcontent_getdata=function(e,t,n,o,_,l,a,r,i,d){var s=e.pagexmlsvc_class_name?e.pagexmlsvc_class_name:"";null==t&&(t="");var c=e.treeview_setting_code;null==c&&(c=""),null==_&&(_=!1),null==i&&(i=1),null==a&&(a=""),null==l&&(l="");return'<ALL_DATA HXWEBJS_VERSION="6" RETURN_DATA_TYPE="" CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(s)+'" HX_WEB_TREEVIEW_SETTING_CODE="'+c+'" HX_WEB_TREEVIEW_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(e.treeviewcontrol_id)+'" HX_WEB_POPUP_TREEVIEW_CONTROL_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(null==e.popup_treeviewcontrol_id?"":e.popup_treeviewcontrol_id)+'" HX_READ_DIRECT_CHILD_NODES="'+(o?"1":"0")+'" HX_READ_ALL_LEVEL_NODES_DATA="'+(_?"1":"0")+'" HX_NODE_LEVELS_TO_READ="'+i+'" HX_KEY_CHARS_TO_FIND="'+HXWebJS.Xml.MarkXMLSpecialChars(a)+'" SEARCH_FROM_BEGIN="'+(r?"1":"0")+'" HX_SELECTED_NODES_CODE_LIST="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'" HX_READ_CHOSEN_NODE_PREDECESSORS="'+(d?"1":"0")+'" PARENT_NODE_UNIQUE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(t)+'" CUSTOMIZED_FILTER_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'" LIST_ONLY_EFFECTIVE_RECORD_ITEMS="'+(e.list_only_effective_items?1:0)+'"></ALL_DATA>'},HXWebTreeViewControl._Internal._call_gettreeviewdata_pagxmlservice=function(e,t,n,o){var _={assembly_name:"TrustHX.HXWWW6",extend_web_part_html_id:n,use_parallel_mode:!0};if(!o)return HXWebXmlService.CallPageXmlService("HXWEBTREEVIEWCONTROL_GET_DATA_LIST",e,_);HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBTREEVIEWCONTROL_GET_DATA_LIST",e,t,_)},HXWebTreeViewControl._Internal._append_child_nodes=function(e,t,n,o,_,l){var a=HXWebTreeViewControl._Internal._get_child_nodes_json_data(e,n);if(a.length>0){var r=_.parentNode;"hxwebjs_treeview__node_childs_area"==r.id&&"none"==r.style.display&&HXWebTreeViewControl._Internal._show_child_nodes_area(r.parentNode,!0)}for(var i,d,s=0;s<a.length;s++){i=a[s];var c=0;HXWebTreeViewControl._Internal._is_member_of_chosen_node(e._chosen_node_unique_code_list,i.node_unique_code)?c=1:HXWebTreeViewControl._Internal._is_member_of_chosen_node_predecessor(e,i.node_unique_code)&&(c=2),d=HXWebTreeViewControl._Internal._append_node(e,i,c,_,0==s,s==a.length-1,null);var b=!1;if(null!=l&&l.min_allowed_node_level>0&&l.min_allowed_nodes_code_chain_list.length>0&&t>0&&l.min_allowed_node_level>t&&l.min_allowed_node_level>o+1)for(var p=i.node_xml_data.SelectSingleNode("@NODE_CODE_CHAIN").GetText(),u=0;u<l.min_allowed_nodes_code_chain_list.length;u++){var m=l.min_allowed_nodes_code_chain_list[u];if(p.length<m.length&&0==m.indexOf(p)){b=!0;break}}if(t<=0||t>o+1||b){if(i.node_is_leaf)continue;HXWebTreeViewControl._Internal._append_child_nodes(e,t,i.node_unique_code,o+1,$(".hxwebjs_treeview__node_childs_cnt_area",d)[0],l),e._is_search_mode||HXWebJS.DOM.SetElementAttributeValue(d,"hx_is_need_init_children","0")}}},HXWebTreeViewControl._Internal._show_child_nodes_area=function(e,t){if(null!=e){HXWebJS.DOM.FindFirstElementById("hxwebjs_treeview__node_childs_area",e).style.display=t?"":"none";var n=HXWebJS.DOM.FindFirstElementById("hxwebjs_treeview__plusminus_img",e);null!=n?$(n).toggleClass("hxicon_treeview_hline_plus",!t).toggleClass("hxicon_treeview_hline_minus",t):(n=HXWebJS.DOM.FindFirstElementById("hxwebjs_treeview__expandcollapse_area_plusminus_spn",e),$(n).toggleClass("hxicon_treeview_node_collapsed",!t).toggleClass("hxicon_treeview_node_expanded",t))}},HXWebTreeViewControl._Internal._expand_directly_children=function(e,t){var n=HXWebJS.DOM.GetElementAttributeValue(t,"hx_treenode_uuid"),o=HXWebJS.DOM.GetElementAttributeValue(t,"hx_treenode_choose_status");e._has_all_treeview_data_loaded&&!e._is_search_mode||HXWebTreeViewControl._Internal._get_and_merge_children_data_from_server(e,n);var _=$(".hxwebjs_treeview__node_childs_cnt_area",t)[0],l=HXWebTreeViewControl._Internal._get_child_nodes_json_data(e,n);if(0!=l.length)for(var a,r=0;r<l.length;r++){a=l[r];var i=0;"1"==o?i="1":HXWebTreeViewControl._Internal._is_member_of_chosen_node(e._chosen_node_unique_code_list,a.node_unique_code)?i=1:HXWebTreeViewControl._Internal._is_member_of_chosen_node_predecessor(e,a.node_unique_code)&&(i=2),HXWebTreeViewControl._Internal._append_node(e,a,i,_,0==r,r==l.length-1,null)}else"0"==HXWebJS.DOM.GetElementAttributeValue(_,"hx_treenode_is_leaf")&&HXWebJS.DOM.SetElementAttributeValue(_,"hx_treenode_is_leaf","1")},HXWebTreeViewControl._Internal._get_child_nodes_json_data=function(e,t){var n=e._hxxmldoc_for_all_treeview_data,o=new Array,_=n.SelectNodes("//RS_ROW[@PARENT_NODE_UNIQUE_CODE='"+t+"']");if(null==_)return o;for(var l,a,r=0;r<_.length;r++)l=_[r],a=HXWebTreeViewControl._Internal._get_node_json_data(e,l),o.push(a);return o},HXWebTreeViewControl._Internal._get_node_json_data=function(e,t,n){var o=t;if("string"==typeof t&&(o="via_chosen_and_predecessors_data_package"==n?e._hxxmldoc_for_chosen_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+t+"']"):e._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+t+"']")),null!=o){objNodeData={},objNodeData.node_unique_code=o.SelectSingleNode("@NODE_UNIQUE_CODE").GetText(),objTempXmlNode=o.SelectSingleNode("@PARENT_NODE_UNIQUE_CODE"),objNodeData.parent_node_unique_code=null==objTempXmlNode?"":objTempXmlNode.GetText(),objNodeData.node_text=o.SelectSingleNode("@NODE_TEXT").GetText(),objNodeData.node_hint_desc=o.SelectSingleNode("@NODE_DESC").GetText(),objNodeData.node_type="",null!=o.SelectSingleNode("@NODE_TYPE")&&(objNodeData.node_type=o.SelectSingleNode("@NODE_TYPE").GetText()),objNodeData.node_attr_1=null==o.SelectSingleNode("@ATTR_1")?"":o.SelectSingleNode("@ATTR_1").GetText(),objNodeData.node_attr_2=null==o.SelectSingleNode("@ATTR_2")?"":o.SelectSingleNode("@ATTR_2").GetText(),objNodeData.node_attr_3=null==o.SelectSingleNode("@ATTR_3")?"":o.SelectSingleNode("@ATTR_3").GetText(),objNodeData.node_attr_4=null==o.SelectSingleNode("@ATTR_4")?"":o.SelectSingleNode("@ATTR_4").GetText(),objNodeData.node_attr_5=null==o.SelectSingleNode("@ATTR_5")?"":o.SelectSingleNode("@ATTR_5").GetText();var _=null==o.SelectSingleNode("@NODE_IS_LEAF")?"0":o.SelectSingleNode("@NODE_IS_LEAF").GetText();objNodeData.node_is_leaf=""!=_&&"0"!=_,objNodeData.node_level=parseInt(o.SelectSingleNode("@NODE_LEVEL").GetText()),objNodeData.node_icon_class=null==o.SelectSingleNode("@ICON_CLASS")?"":o.SelectSingleNode("@ICON_CLASS").GetText(),objNodeData.node_image_src=null==o.SelectSingleNode("@IMAGE_SRC")?"":o.SelectSingleNode("@IMAGE_SRC").GetText(),objNodeData.node_choose_status=0;var l=$("div[hx_treenode_uuid="+objNodeData.node_unique_code+"]",e.treeview_container_object);return l.length>0&&(objNodeData.node_choose_status=l.attr("hx_treenode_choose_status"),null!=objNodeData.node_choose_status&&""!=objNodeData.node_choose_status&&(objNodeData.node_choose_status=parseInt(objNodeData.node_choose_status))),objNodeData.node_xml_data=o,objNodeData}},HXWebTreeViewControl._Internal._is_member_of_chosen_node=function(e,t){if(null==e||""==e)return!1;for(var n=e.split(/[,|;]/g),o=0;o<n.length;o++)if(n[o]==t)return!0;return!1},HXWebTreeViewControl._Internal._is_member_of_chosen_node_predecessor=function(e,t){if(null==e._hxxmldoc_for_chosen_and_predecessors_data)return!1;return null!=e._hxxmldoc_for_chosen_and_predecessors_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+t+"']")},HXWebTreeViewControl._Internal._append_node=function(e,t,n,o,_,l,a){var r=new HXWebStringBuilder;r.append('<div id="hxwebjs_treeview__node_container_div" style="width:100%;"'),r.append('class="hxwebjs_treeview__node_container'+(e.use_css_expandcollapse_icon_mode?" css_expandcollapse_icon_mode":"")+'"'),r.append(" hx_treenode_choose_status="+n),r.append(" hx_treenode_is_expanded=0"),r.append(" hx_treenode_is_leaf="+(t.node_is_leaf?"1":"0")),r.append(" hx_is_need_init_children="+(t.node_is_leaf?"0":"1")),r.append(' hx_treenode_type="'+(null!=t.node_type?HXWebJS.Core.EscapeHtml(t.node_type):"")+'"'),r.append(' hx_treenode_uuid="'+t.node_unique_code+'">'),r.append('<div style="width:100%;" class="hxwebjs_treeview__node_info_row"'),r.append(' hx_treenode_level="'+t.node_level+'"'),r.append(' hx_treenode_type="'+(null!=t.node_type?HXWebJS.Core.EscapeHtml(t.node_type):"")+'"'),r.append(">");var i;if(i=HXWebJS.Core.IsStringNullOrEmpty(t.parent_node_unique_code)&&_?l?" no_vertical_line":" half_vertical_line_bottom":l?" half_vertical_line":" vertical_line",r.append('<span class="hxwebjs_treeview__node_tree_img_area'+i+'">'),r.append(HXWebTreeViewControl._Internal._build_node_prefix_tree_img_html(e,t,_,l)),r.append("</span>"),r.append(HXWebJS.Core.StringFormat('<span id="hxwebjs_treeview__node_disp_cnt_area_spn" class="hxwebjs_treeview__node_disp_cnt_area{0}{1}">',e.is_show_checkbox?" with_checkbox":"","use_css_icon"==e.use_icon||"use_img_icon"==e.use_icon?" with_icon":"")),e.oncustomized_node_html_build__callback){var d=e.oncustomized_node_html_build__callback(e.treeviewcontrol_id,t,n);r.append(d)}else r.append(HXWebTreeViewControl._Internal._build_node_checkbox_part_html(e,n)),r.append(HXWebTreeViewControl._Internal._build_node_icon_part_html(e,t)),r.append(HXWebTreeViewControl._Internal._build_node_content_part_html(e,t));return r.append("</span></div>"),r.append('<div id=hxwebjs_treeview__node_childs_area style="width:100%;display:none;" class="hxwebjs_treeview__node_childs_row">'),r.append('<span class="hxwebjs_treeview__node_child_tree_img_area'+(l?"":" vertical_line")+'"></span>'),r.append('<span class="hxwebjs_treeview__node_childs_cnt_area"></span>'),r.append("</div>"),r.append("</div>"),nodeContainerDiv=HXWebJS.DOM.CreateElement(r.toString()),o.insertBefore(nodeContainerDiv,a),nodeContainerDiv},HXWebTreeViewControl._Internal._build_node_prefix_tree_img_html=function(e,t,n,o,_){var l,a=new HXWebStringBuilder;return a.append("<span id=hxwebjs_treeview__expandcollapse_area_vertical_line_spn></span>"),e.use_css_expandcollapse_icon_mode?(l=t.node_is_leaf?"hxicon_treeview_node_is_leaf":_?"hxicon_treeview_node_expanded":"hxicon_treeview_node_collapsed",a.append('<span id=hxwebjs_treeview__expandcollapse_area_plusminus_spn style="cursor:pointer;"'),a.append(' class="'+l+'" ></span>'),a.append("<span id=hxwebjs_treeview__expandcollapse_area_horizontal_line_spn></span>")):(l=t.node_is_leaf?"hxicon_treeview_hline_only":_?"hxicon_treeview_hline_minus":"hxicon_treeview_hline_plus",a.append('<img id=hxwebjs_treeview__plusminus_img src="../hximages_v6/hxpub_clear.gif"'),a.append(' class="'+l+'" />')),a.toString()},HXWebTreeViewControl._Internal._build_node_checkbox_part_html=function(e,t){return e.is_show_checkbox?'<span id="hxwebjs_treeview__node_choose_spn" style="margin-right:4px;" class="fa '+(1==t?"fa-check-square-o":2==t?"fa-minus-square-o":"fa-square-o")+'" ></span>':""},HXWebTreeViewControl._Internal._change_node_checkbox_html=function(e,t){var n=HXWebJS.DOM.FindFirstElementById("hxwebjs_treeview__node_choose_spn",e);null!=n&&(n.className="fa "+(1==t?"fa-check-square-o":2==t?"fa-minus-square-o":"fa-square-o"))},HXWebTreeViewControl._Internal._build_node_icon_part_html=function(e,t){var n=new HXWebStringBuilder;if("use_css_icon"==e.use_icon){n.append('<span id="hxwebjs_treeview__node_icon_spn" draggable=true');return null!=(_=t.node_icon_class)&&""!=_||(_=e.default_icon_class),null!=_&&""!=_||(_="fa fa-cube"),n.append('  class="'+_+'"'),n.append(' style="margin-right:4px;" ></span>'),n.toString()}if("use_img_icon"==e.use_icon){n.append('<img id="hxwebjs_treeview__node_icon_img" style="margin-right:4px;"');var o=t.node_image_src;if(null==o||""==o){o="../hximages_v6/hxpub_clear.gif";var _=t.node_icon_class;null!=_&&""!=_||(_=e.default_icon_class),null!=_&&""!=_||(_="hxicon_treeview_dft_img_icon"),n.append(' class="'+_+'"')}return n.append(' src="'+o+'"'),n.append(" />"),n.toString()}return""},HXWebTreeViewControl._Internal._build_node_content_part_html=function(e,t){var n=new HXWebStringBuilder,o="hxwebtreeviewcontrol_node_level_"+t.node_level;null!=t.node_type&&""!=t.node_type&&(o+=" hxwebtreeviewcontrol_node_type__"+t.node_type),n.append("<span id=hxwebjs_treeview__node_text_spn"),n.append(' class="'+o+(0==e.is_allow_wrap_text?" hxtxt_nowrap":" hxtxt_wrap")+'"');var _=null!=t.node_hint_desc&&""!=t.node_hint_desc?t.node_hint_desc:t.node_text;return n.append(' title="'+HXWebJS.Core.EscapeHtml(_)+'"'),n.append(">"+HXWebJS.Core.MarkXMLSpecialChars(t.node_text)+"</span>"),n.toString()},HXWebTreeViewControl._Internal._show_no_data_found_hint_msg=function(e){var t=HXWebJS.Core.GetPlatformJsText("HXWebJS.UIText.HXWebTreeViewControl.NoDataFound");e.customized_no_data_hint_msg&&(t=e.customized_no_data_hint_msg);var n='<span style="padding:10px;display:inline-block;">'+HXWebJS.Core.MarkXMLSpecialChars(t)+"<span>";e.treeview_container_object.innerHTML=n},HXWebTreeViewControl._Internal._treeview_container_clicked=function(e){e.stopPropagation();var t=e.target,n=t.id;if("hxwebjs_treeview__plusminus_img"!=n&&"hxwebjs_treeview__expandcollapse_area_plusminus_spn"!=n)if("hxwebjs_treeview__node_choose_spn"!=n)if("hxwebjs_treeview__node_icon_spn"!=n&&"hxwebjs_treeview__node_icon_img"!=n&&"hxwebjs_treeview__node_text_spn"!=n)if("hxwebjs_treeview__node_disp_cnt_area_spn"!=n);else{o=t.parentNode.parentNode;HXWebTreeViewControl._Internal._click_node(o)}else{o=t.parentNode.parentNode.parentNode;HXWebTreeViewControl._Internal._click_node(o)}else{o=t.parentNode.parentNode.parentNode;HXWebTreeViewControl._Internal._change_node_check_status(o)}else{var o=t.parentNode.parentNode.parentNode;HXWebTreeViewControl._Internal._expand_collapse_node(o)}},HXWebTreeViewControl._Internal._expand_collapse_node=function(e){var t=$(e).parents("[hx_is_treeview_container=1]")[0].id,n=HXWebTreeViewControl._Internal._registed_elements_info[t];if("1"!=HXWebJS.DOM.GetElementAttributeValue(e,"hx_treenode_is_leaf")){var o=HXWebJS.DOM.GetElementAttributeValue(e,"hx_treenode_is_expanded");if("0"==o){if("1"==HXWebJS.DOM.GetElementAttributeValue(e,"hx_is_need_init_children")){var t=$(e).parents("[hx_is_treeview_container=1]")[0].id,n=HXWebTreeViewControl._Internal._registed_elements_info[t];HXWebTreeViewControl._Internal._expand_directly_children(n,e),HXWebJS.DOM.SetElementAttributeValue(e,"hx_is_need_init_children","0")}HXWebJS.DOM.SetElementAttributeValue(e,"hx_treenode_is_expanded","1")}else HXWebJS.DOM.SetElementAttributeValue(e,"hx_treenode_is_expanded","0");var _="0"==o;HXWebTreeViewControl._Internal._show_child_nodes_area(e,_)}else HXWebTreeViewControl._Internal._expandcollapse_icon_restore_as_leaf(n,e)},HXWebTreeViewControl._Internal._change_node_check_status=function(e,t,n){null==n&&(n=!0);var o=$(e).parents("[hx_is_treeview_container=1]")[0].id,_=HXWebTreeViewControl._Internal._registed_elements_info[o],l=HXWebJS.DOM.GetElementAttributeValue(e,"hx_treenode_uuid"),a=HXWebTreeViewControl._Internal._get_node_json_data(_,l);if(null==t){var r=HXWebJS.DOM.GetElementAttributeValue(e,"hx_treenode_choose_status");t="0"==r||"2"==r}if(null!=_.oncheckstatuschanged_callback&&n){if(0==_.oncheckstatuschanged_callback(o,a,t))return}HXWebJS.DOM.SetElementAttributeValue(e,"hx_treenode_choose_status",t?"1":"0"),HXWebTreeViewControl._Internal._change_node_checkbox_html(e,t?1:0),$(e).find("#hxwebjs_treeview__node_container_div").each(function(){HXWebJS.DOM.SetElementAttributeValue(this,"hx_treenode_choose_status",t?"1":"0"),HXWebTreeViewControl._Internal._change_node_checkbox_html(this,t?1:0)}),_._is_search_mode||$(e).parents("#hxwebjs_treeview__node_container_div").each(function(){var e=$(this).find(".hxwebjs_treeview__node_childs_cnt_area > #hxwebjs_treeview__node_container_div"),t=e.length,n=e.filter("div[hx_treenode_choose_status=1]").length,o=0==n?0:n==t?1:2;HXWebJS.DOM.SetElementAttributeValue(this,"hx_treenode_choose_status",o),HXWebTreeViewControl._Internal._change_node_checkbox_html(this,o)}),null!=_.oncheckstatusupdated_callback&&n&&_.oncheckstatusupdated_callback(o,a,t)},HXWebTreeViewControl._Internal._click_node=function(e){var t=$(e).parents("[hx_is_treeview_container=1]")[0].id,n=HXWebTreeViewControl._Internal._registed_elements_info[t];if(null!=n.onnodeclicked_callback){var o=HXWebJS.DOM.GetElementAttributeValue(e,"hx_treenode_uuid"),_=HXWebTreeViewControl._Internal._get_node_json_data(n,o);n.onnodeclicked_callback(t,_)}HXWebTreeViewControl._Internal._mark_node_as_active(n,e),1==n.is_auto_expandcollapse&&HXWebTreeViewControl._Internal._expand_collapse_node(e),0!=n.is_auto_changecheckstatus&&HXWebTreeViewControl._Internal._change_node_check_status(e)},HXWebTreeViewControl._Internal._mark_node_as_active=function(e,t){null!=e._last_actived_node_container_div&&$(e._last_actived_node_container_div).children(".hxwebjs_treeview__node_info_row").removeClass("actived"),$(t).children(".hxwebjs_treeview__node_info_row").addClass("actived"),e._last_actived_node_container_div=t},HXWebTreeViewControl._Internal._expand_all_level_children_nodes=function(e,t){for(var n,o=$(t).children("#hxwebjs_treeview__node_container_div[hx_treenode_is_leaf=0]").get(),_=0;_<o.length;_++){n=o[_];"1"==HXWebJS.DOM.GetElementAttributeValue(n,"hx_is_need_init_children")&&(HXWebTreeViewControl._Internal._expand_directly_children(e,n),HXWebJS.DOM.SetElementAttributeValue(n,"hx_is_need_init_children","0")),HXWebJS.DOM.SetElementAttributeValue(n,"hx_treenode_is_expanded","1"),HXWebTreeViewControl._Internal._show_child_nodes_area(n,!0);var l=$(n).find("#hxwebjs_treeview__node_childs_area>.hxwebjs_treeview__node_childs_cnt_area")[0];HXWebTreeViewControl._Internal._expand_all_level_children_nodes(e,l)}},HXWebTreeViewControl._Internal._clear_nodes=function(e){if(null!=e&&HXWebTreeViewControl._Internal._registed_elements_info){var t=HXWebTreeViewControl._Internal._registed_elements_info[e];null!=t&&(t._last_selected_treenode_element=null,t.treeview_container_object.innerHTML="")}},HXWebTreeViewControl._Internal._dragdrop_event_handler_process=function(e,t){t?(HXWebJS.EventManager.AddListener(e,"dragstart",HXWebTreeViewControl._Internal._ondragstart_process),HXWebJS.EventManager.AddListener(e,"dragend",HXWebTreeViewControl._Internal._ondragend_process),HXWebJS.EventManager.AddListener(e,"dragenter",HXWebTreeViewControl._Internal._ondragenterandover_process),HXWebJS.EventManager.AddListener(e,"dragover",HXWebTreeViewControl._Internal._ondragenterandover_process),HXWebJS.EventManager.AddListener(e,"drop",HXWebTreeViewControl._Internal._ondrop_process)):(HXWebJS.EventManager.RemoveListener(e,"dragstart",HXWebTreeViewControl._Internal._ondragstart_process),HXWebJS.EventManager.RemoveListener(e,"dragend",HXWebTreeViewControl._Internal._ondragend_process),HXWebJS.EventManager.RemoveListener(e,"dragenter",HXWebTreeViewControl._Internal._ondragenterandover_process),HXWebJS.EventManager.RemoveListener(e,"dragover",HXWebTreeViewControl._Internal._ondragenterandover_process),HXWebJS.EventManager.RemoveListener(e,"drop",HXWebTreeViewControl._Internal._ondrop_process))},HXWebTreeViewControl._Internal._drag_datatransfer_data="",HXWebTreeViewControl._Internal._ondragstart_process=function(e){var t=e.target;if("hxwebjs_treeview__node_icon_spn"==t.id||"hxwebjs_treeview__node_icon_img"==t.id){var n=t.parentNode.parentNode.parentNode,o="hxwebjs602_hxwebtreeviewcontrol;"+$(n).parents("[hx_is_treeview_container=1]")[0].id+";"+HXWebJS.DOM.GetElementAttributeValue(n,"hx_treenode_uuid");e.originalEvent.dataTransfer.setData("text",o),e.originalEvent.dataTransfer.effectAllowed="move",HXWebTreeViewControl._Internal._drag_datatransfer_data=o}},HXWebTreeViewControl._Internal._ondragend_process=function(e){HXWebTreeViewControl._Internal._drag_datatransfer_data=""},HXWebTreeViewControl._Internal._ondragenterandover_process=function(e){var t=$(e.target).parents("#hxwebjs_treeview__node_container_div");if(0!=t.length){var n=t.get(0),o=$(n).parents("[hx_is_treeview_container=1]")[0].id,_=HXWebJS.DOM.GetElementAttributeValue(n,"hx_treenode_uuid"),l=HXWebTreeViewControl._Internal._drag_datatransfer_data;null==l&&(l="");var a=l.split(";"),r=a.length>0?a[0]:"",i=a.length>1?a[1]:"",d=a.length>2?a[2]:"",s=null;""!=d&&(t=$("div[hx_treenode_uuid="+d+"]",e.currentTarget)).length>0&&(s=t[0]);0==HXWebTreeViewControl._Internal._is_allow_drop(r,i,d,o,_,s,n).indexOf("allow_drop")&&(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move")}},HXWebTreeViewControl._Internal._is_allow_drop=function(e,t,n,o,_,l,a,r){if("hxwebjs602_hxwebtreeviewcontrol"!=e)return"allow_drop__no_move";if(t!=o)return"allow_drop__no_move";var i=HXWebTreeViewControl._Internal._registed_elements_info[t];if(null==i||i._is_search_mode)return"not_allow_drop";if(HXWebJS.DOM.IsElementInContainer(l,a))return"not_allow_drop";var d=HXWebJS.DOM.GetElementAttributeValue(l,"hx_treenode_type");null==d&&(d="");var s=HXWebJS.DOM.GetElementAttributeValue(a,"hx_treenode_type");if(null==s&&(s=""),d==s)return""==d?r?"allow_drop__as_young_brother":"allow_drop__as_son":"allow_drop__as_young_brother";if(""==d||""==s)return"not_allow_drop";var c=i._hxxmldoc_for_all_treeview_data,b=null==c?"":c.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+n+"']/@PARENT_NODE_UNIQUE_CODE").GetText();if(""==b)return"not_allow_drop";return c.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+b+"']/@NODE_TYPE").GetText()!=s?"not_allow_drop":"allow_drop__as_son"},HXWebTreeViewControl._Internal._ondrop_process=function(e){var t=$(e.target).parents("#hxwebjs_treeview__node_container_div");if(0!=t.length){var n=t.get(0),o=$(n).parents("[hx_is_treeview_container=1]")[0].id,_=HXWebJS.DOM.GetElementAttributeValue(n,"hx_treenode_uuid"),l=HXWebTreeViewControl._Internal._registed_elements_info[o];if(null!=l){var a=e.shiftKey,r=e.originalEvent.dataTransfer.getData("text");null==r&&(r="");var i,d,s,c=r.split(";"),b=c.length>0?c[0]:"",p=c.length>1?c[1]:"",u=c.length>2?c[2]:"",m=null;""!=u&&(t=$("div[hx_treenode_uuid="+u+"]",e.currentTarget)).length>0&&(m=t[0],i=1==t.parent().children().length,d=0==t.next().length,s=m.parentNode.parentNode.parentNode);var h=HXWebTreeViewControl._Internal._is_allow_drop(b,p,u,o,_,m,n,a);if("not_allow_drop"!=h){if(null!=l.onbeforedrop_callback){if(0==l.onbeforedrop_callback(e,o,_,n,u,m))return}if("allow_drop__no_move"!=h){var f,C;if("allow_drop__as_young_brother"==h)f=n.parentNode,C=n.nextSibling;else if("allow_drop__as_son"==h){"1"==HXWebJS.DOM.GetElementAttributeValue(n,"hx_is_need_init_children")&&(HXWebTreeViewControl._Internal._expand_directly_children(l,n),HXWebJS.DOM.SetElementAttributeValue(n,"hx_is_need_init_children","0")),HXWebJS.DOM.SetElementAttributeValue(n,"hx_treenode_is_expanded","1"),HXWebTreeViewControl._Internal._show_child_nodes_area(n,!0),f=$(n).find(".hxwebjs_treeview__node_childs_cnt_area")[0],null==(C=(t=$(f).children().first()).length>0?t[0]:null)&&$(m).find("span.hxwebjs_treeview__node_tree_img_area").removeClass("vertical_line").addClass("half_vertical_line")}f.insertBefore(m,C);var X=l._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+_+"']"),g=parseInt(X.SelectSingleNode("@NODE_LEVEL").GetText()),H="allow_drop__as_young_brother"==h?X.SelectSingleNode("@PARENT_NODE_UNIQUE_CODE").GetText():_,x="allow_drop__as_young_brother"==h?g:g+1,W=l._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+u+"']");if(W.SelectSingleNode("@PARENT_NODE_UNIQUE_CODE").SetText(H),HXWebTreeViewControl._Internal._update_offspring_node_level(l,W,x),i){HXWebJS.DOM.SetElementAttributeValue(s,"hx_treenode_is_leaf","1");var v=HXWebJS.DOM.GetElementAttributeValue(s,"hx_treenode_uuid");l._hxxmldoc_for_all_treeview_data.SelectSingleNode("//RS_ROW[@NODE_UNIQUE_CODE='"+v+"']").SetAttributeValue("NODE_IS_LEAF","1"),HXWebTreeViewControl._Internal._expandcollapse_icon_restore_as_leaf(l,s)}if(d&&$(s).find(".hxwebjs_treeview__node_childs_cnt_area>div:last-child").find(".hxwebjs_treeview__node_info_row>.hxwebjs_treeview__node_tree_img_area").addClass("half_vertical_line").removeClass("vertical_line"),"allow_drop__as_son"==h){var w=null==X.SelectSingleNode("@NODE_IS_LEAF")?"1":X.SelectSingleNode("@NODE_IS_LEAF").GetText();""!=w&&"0"!=w&&(X.SetAttributeValue("NODE_IS_LEAF","0"),HXWebJS.DOM.SetElementAttributeValue(n,"hx_treenode_is_leaf","0"))}if(1==l.trigger_node_move_event_to_svr){var S=new HXWebStringBuilder;S.append("<RS_ROW"),S.append(' TREEVIEW_CONTROL_ID="'+HXWebJS.Core.MarkXMLSpecialChars(o)+'"'),S.append(' TREEVIEW_SETTING_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(l.treeview_setting_code)+'"'),S.append(' ASSEMBLY_CLASS_NAME="'+HXWebJS.Core.MarkXMLSpecialChars(null==l.pagexmlsvc_class_name?"":l.pagexmlsvc_class_name)+'"'),S.append(' MOVE_SRC_NODE_UNIQUE_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(u)+'"'),S.append(' MOVE_TARGET_NODE_UNIQUE_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(_)+'"'),S.append(' MOVE_AS="'+("allow_drop__as_young_brother"==h?"young_brother":"son")+'"'),S.append("/>");var k=S.toString(),y={assembly_name:"TrustHX.HXWWW6",use_parallel_mode:!0,extend_web_part_html_id:l.extend_web_part_html_id};HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBTREEVIEWCONTROL_NODE_MOVED_PROCESS",k,null,y)}}}}}},HXWebTreeViewControl._Internal._update_offspring_node_level=function(e,t,n){t.SelectSingleNode("@NODE_LEVEL").SetText(n);for(var o=t.SelectSingleNode("@NODE_UNIQUE_CODE").GetText(),_=e._hxxmldoc_for_all_treeview_data.SelectNodes("//RS_ROW[@PARENT_NODE_UNIQUE_CODE='"+o+"']"),l=0;l<_.length;l++)HXWebTreeViewControl._Internal._update_offspring_node_level(e,_[l],n+1)},HXWebTreeViewControl._Internal._expandcollapse_icon_restore_as_leaf=function(e,t){e.use_css_expandcollapse_icon_mode?$(t).find("#hxwebjs_treeview__expandcollapse_area_plusminus_spn").removeClass("hxicon_treeview_node_expanded").removeClass("hxicon_treeview_node_collapsed").addClass("hxicon_treeview_node_is_leaf"):$(t).find("#hxwebjs_treeview__plusminus_img").removeClass("hxicon_treeview_hline_plus").removeClass("hxicon_treeview_hline_minus").addClass("hxicon_treeview_hline_only")},HXWebTreeViewControl._Internal._expandcollapse_icon_change_as_expanded=function(e,t){e.use_css_expandcollapse_icon_mode?$(t).find("#hxwebjs_treeview__expandcollapse_area_plusminus_spn").addClass("hxicon_treeview_node_expanded").removeClass("hxicon_treeview_node_collapsed").removeClass("hxicon_treeview_node_is_leaf"):$(t).find("#hxwebjs_treeview__plusminus_img").addClass("hxicon_treeview_hline_plus").removeClass("hxicon_treeview_hline_minus").removeClass("hxicon_treeview_hline_only")},HXWebPopupTreeViewControl={},HXWebPopupTreeViewControl._Internal={},HXWebPopupTreeViewControl._Internal.control_type="popuptreeview",HXWebPopupTreeViewControl.register=function(e,t,n){null==n&&(n={}),HXWebPopupTreeViewControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebPopupTreeViewControl._Internal.control_type,n)},HXWebPopupTreeViewControl.option={content_type:void 0,choose_type:void 0,choose_return_value_option:void 0,use_icon:void 0,use_keyword_search:void 0,is_allow_wrap_text:void 0,default_icon_class:void 0,auto_show_when_focusin:void 0,dropdownbox_width:void 0,dropdownbox_lines_count:void 0,binding_datasrc_id:void 0,binding_datafld_for_key:void 0,binding_datafld_for_desc:void 0,binding_datafld_for_attr_1:void 0,binding_datafld_for_attr_2:void 0,binding_datafld_for_attr_3:void 0,binding_datafld_for_attr_4:void 0,binding_datafld_for_attr_5:void 0,treeview_setting_code:void 0,list_only_effective_items:void 0,init_auto_show_level:void 0,acquire_all_treeview_data:void 0,search_from_begin:void 0,use_mobile_mode:void 0,extend_web_part_html_id:void 0,pagexmlsvc_class_name:void 0,oninit_callback:void 0,ongetfilterdata_callback:void 0,ondatachoosed_callback:void 0},HXWebPopupTreeViewControl._options_check=function(e){null==e.content_type?e.content_type="key":"desc"==e.content_type.toLowerCase()?e.content_type="desc":e.content_type="key",1!=e.choose_type&&(e.choose_type=0),1!=e.choose_return_value_option&&3!=e.choose_return_value_option&&(e.choose_return_value_option=2),null==e.use_icon&&(e.use_icon="no"),null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile)},HXWebPopupTreeViewControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebPopupTreeViewControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.content_type&&(n.content_type=t.content_type),null!=t.choose_type&&(n.choose_type=t.choose_type),null!=t.choose_return_value_option&&(n.choose_return_value_option=t.choose_return_value_option),null!=t.use_icon&&(n.use_icon=t.use_icon),null!=t.use_keyword_search&&(n.use_keyword_search=t.use_keyword_search),null!=t.is_allow_wrap_text&&(n.is_allow_wrap_text=t.is_allow_wrap_text),null!=t.default_icon_class&&(n.default_icon_class=t.default_icon_class),null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.dropdownbox_width&&(n.dropdownbox_width=t.dropdownbox_width),null!=t.dropdownbox_lines_count&&(n.dropdownbox_lines_count=t.dropdownbox_lines_count),null!=t.binding_datasrc_id&&(n.binding_datasrc_id=t.binding_datasrc_id),null!=t.binding_datafld_for_key&&(n.binding_datafld_for_key=t.binding_datafld_for_key),null!=t.binding_datafld_for_desc&&(n.binding_datafld_for_desc=t.binding_datafld_for_desc),null!=t.binding_datafld_for_attr_1&&(n.binding_datafld_for_attr_1=t.binding_datafld_for_attr_1),null!=t.binding_datafld_for_attr_2&&(n.binding_datafld_for_attr_2=t.binding_datafld_for_attr_2),null!=t.binding_datafld_for_attr_3&&(n.binding_datafld_for_attr_3=t.binding_datafld_for_attr_3),null!=t.binding_datafld_for_attr_4&&(n.binding_datafld_for_attr_4=t.binding_datafld_for_attr_4),null!=t.binding_datafld_for_attr_5&&(n.binding_datafld_for_attr_5=t.binding_datafld_for_attr_5),null!=t.treeview_setting_code&&(n.treeview_setting_code=t.treeview_setting_code),null!=t.init_auto_show_level&&(n.init_auto_show_level=t.init_auto_show_level),null!=t.acquire_all_treeview_data&&(n.acquire_all_treeview_data=t.acquire_all_treeview_data),null!=t.search_from_begin&&(n.search_from_begin=t.search_from_begin),null!=t.list_only_effective_items&&(n.list_only_effective_items=t.list_only_effective_items),null!=t.extend_web_part_html_id&&(n.extend_web_part_html_id=t.extend_web_part_html_id),null!=t.pagexmlsvc_class_name&&(n.pagexmlsvc_class_name=t.pagexmlsvc_class_name),null!=t.oninit_callback&&(n.oninit_callback=t.oninit_callback),null!=t.ongetfilterdata_callback&&(n.ongetfilterdata_callback=t.ongetfilterdata_callback),null!=t.ondatachoosed_callback&&(n.ondatachoosed_callback=t.ondatachoosed_callback),null!=t.use_mobile_mode&&(n.use_mobile_mode=t.use_mobile_mode),HXWebPopupTreeViewControl._options_check(n))}},HXWebPopupTreeViewControl._show=function(e,t,n,o,_,l){var a=HXWebPopupTreeViewControl._initcallback_and_get_customized_filter_data(e,o,t,n);if("boolean"!=typeof a||0!=a){HXWebPopupTreeViewControl._Internal._CurrentCustomizedFilterData=a,HXWebPopupTreeViewControl._create_popup_area_html(),HXWebPopupTreeViewControl._format_popup_area(o,t,n);var r=HXWebPopupTreeViewControl._get_org_selected_values(o,t,n);return HXWebPopupTreeViewControl._fill_treeview_data(o,"",r),HXWebPopupTreeViewControl._global_popup_area.style.display="",HXWebPopupTreeViewControl._global_popup_area}},HXWebPopupTreeViewControl._hide=function(){HXWebPopupTreeViewControl._global_popup_area&&"none"!=HXWebPopupTreeViewControl._global_popup_area.style.display&&(HXWebPopupTreeViewControl._global_popup_area.style.display="none")},HXWebPopupTreeViewControl._is_element_in_popup_area=function(e){var t=HXWebJS.DOM.GetElementById("hxwebjs_popuptreeview__container_div");return null!=t&&(!!HXWebJS.DOM.IsElementInContainer(t,e)||void 0)},HXWebPopupTreeViewControl._create_popup_area_html=function(){var e=document.getElementById("hxwebjs_popuptreeview__container_div");if(null==e){e=HXWebJS.DOM.CreateElement('<div id="hxwebjs_popuptreeview__container_div" style="display:none;z-index:8000;left:0px;top:0px;min-width:200px;width:200px;height:auto;position:absolute;background-color:white;"></div>');var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_popuptreeview__treeview_data_area_div" style="width:100%;height:300px;overflow:auto;" class="hxscrollbar"></div>'),t.append('<table id="hxwebjs_popuptreeview__controlarea_table" cellpadding="0" cellspacing="0" style="width:100%;"><tr>'),t.append('<td id="hxwebjs_popuptreeview__cmdarea" style="width:70%;">'),t.append('<button id="hxwebjs_popuptreeview__ok_btn" class="hxbtn small primary"><span class="fa fa-check" style="margin-right:3px;color:lightgreen;"></span><span id="spnOKButtonText">OK</span></button>'),t.append('<button id="hxwebjs_popuptreeview__clear_btn" class="hxbtn small info"><span class="fa fa-rotate-left" style="margin-right:3px;color:white;"></span><span id="spnClearButtonText">Clear</span></button>'),t.append('<button id="hxwebjs_popuptreeview__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button></td>'),t.append('<td style="width:30%;vertical-align:top;text-align:left;">'),t.append('<span style="width:100%;" class="hxinput_group">'),t.append('<input type="text" class="hxinputbox" id="hxwebjs_popuptreeview__search_keyword" />'),t.append('<span class="hxinput_group_addon fa fa-search" style="width:24px;cursor:pointer" id="hxwebjs_popuptreeview__search_btn"></span>'),t.append("</span></td>"),t.append("</tr></table>"),e.innerHTML=t.toString(),document.body.appendChild(e);var n=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnOKButtonText",e).text(n[0]),$("#spnCancelButtonText",e).text(n[1]),$("#spnClearButtonText",e).text(n[3]),HXWebJS.EventManager.AddListener($("#hxwebjs_popuptreeview__controlarea_table",e)[0],"click",HXWebPopupTreeViewControl._popup_control_area_clicked);var o=HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__search_keyword",e);HXWebJS.EventManager.AddListener(o,"keyup",HXWebPopupTreeViewControl._searchkeyword_keypressed),HXWebPopupTreeViewControl._global_popup_area=e}},HXWebPopupTreeViewControl._format_popup_area=function(e,t,n){var o,_,l,a,r=1==e.choose_type;null!=t&&"none"!=t.style.display&&"hidden"!=t.style.visibility?(_=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1,e.use_mobile_mode?(o=HXWebJS.DOM.GetScrollLeft()+2,l=HXWebJS.DOM.GetWindowWidth()-4):(o=HXWebJS.DOM.GetElementLeftPosition(t),l=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-o,null!=e.dropdownbox_width&&e.dropdownbox_width>l&&(l=e.dropdownbox_width))):(_=HXWebJS.DOM.GetElementTopPosition(n)+n.offsetHeight+1,e.use_mobile_mode?(o=HXWebJS.DOM.GetScrollLeft()+2,l=HXWebJS.DOM.GetWindowWidth()-4):(o=HXWebJS.DOM.GetElementLeftPosition(n),l=null==e.dropdownbox_width?n.offsetWidth:e.dropdownbox_width)),l<320&&(l=320);var i=e.dropdownbox_lines_count;null==i&&(i=8),e.use_mobile_mode?intHeightOfDataListArea=32*i:intHeightOfDataListArea=24*i,a=intHeightOfDataListArea+38;var d=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,o,_,l,a,e.use_mobile_mode);o=d.left,_=d.top;var s=d.new_scroll_top,c=HXWebPopupTreeViewControl._global_popup_area;c.style.left=o+"px",c.style.top=_+"px",c.style.width=l+"px";HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__treeview_data_area_div",c,"div").style.height=intHeightOfDataListArea+"px";var b=HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__controlarea_table",c,"table");HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__ok_btn",b).style.display=r?"":"none";HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__search_keyword",HXWebPopupTreeViewControl._global_popup_area).value="",HXWebJS.DOM.FindFirstElementById("hxwebjs_popuptreeview__treeview_data_area_div",HXWebPopupTreeViewControl._global_popup_area).innerHTML="",HXWebPopupTreeViewControl._global_popup_area.style.display="",s>0&&$(document).scrollTop(s)},HXWebPopupTreeViewControl._fill_treeview_data=function(e,t,n){HXWebTreeViewControl.register("hxwebjs_popuptreeview__treeview_data_area_div");var o={is_show_checkbox:1==e.choose_type,is_allow_wrap_text:!!e.is_allow_wrap_text,use_icon:null==e.use_icon?"no":e.use_icon,default_icon_class:null==e.default_icon_class?"":e.default_icon_class,treeview_setting_code:null==e.treeview_setting_code?"":e.treeview_setting_code,is_auto_changecheckstatus:!1,is_auto_expandcollapse:!0,list_only_effective_items:!!e.list_only_effective_items,extend_web_part_html_id:null==e.extend_web_part_html_id?"":e.extend_web_part_html_id,pagexmlsvc_class_name:null==e.pagexmlsvc_class_name?"":e.pagexmlsvc_class_name,popup_treeviewcontrol_id:e.webdatacontrol_id,ongetfilterdata_callback:null==HXWebPopupTreeViewControl._getfilterdata_callback_for_treeview?HXWebJS.Core.DummyFunction:HXWebPopupTreeViewControl._getfilterdata_callback_for_treeview,onnodeclicked_callback:null==HXWebPopupTreeViewControl._on_treeview_node_clicked?HXWebJS.Core.DummyFunction:HXWebPopupTreeViewControl._on_treeview_node_clicked};HXWebTreeViewControl.set_options("hxwebjs_popuptreeview__treeview_data_area_div",o);var _={init_auto_show_level:e.init_auto_show_level,acquire_all_treeview_data:e.acquire_all_treeview_data,search_from_begin:e.search_from_begin,search_key_chars:t,chosen_node_unique_code_list:n};HXWebTreeViewControl.init_treeview_nodes("hxwebjs_popuptreeview__treeview_data_area_div",_)},HXWebPopupTreeViewControl._initcallback_and_get_customized_filter_data=function(e,t,n,o){if(null!=t.oninit_callback&&1!=t.oninit_callback(e,n,o,t))return!1;var _="";if(null!=t.ongetfilterdata_callback)try{if("boolean"==typeof(_=t.ongetfilterdata_callback(e,n,o))&&0==_)return!1}catch(e){return HXWebJS.Core.LogErrorToConsole("HXWebPopupTreeViewControl ongetfilterdata_callback() call failed. "+e.description),!1}return _},HXWebPopupTreeViewControl._getfilterdata_callback_for_treeview=function(){var e=HXWebPopupTreeViewControl._Internal._CurrentCustomizedFilterData;return null!=e?e:""},HXWebPopupTreeViewControl._on_treeview_node_clicked=function(e,t){var n=HXWebJS.Controls._Picker._current_active_control_info;if(null!=n&&n._process_class===HXWebPopupTreeViewControl){var o=n._options;if(0==o.choose_type){if(1==o.choose_return_value_option&&0==t.node_is_leaf)return;HXWebPopupTreeViewControl._data_item_choosed_process("single_choose",t)}}},HXWebPopupTreeViewControl._popup_control_area_clicked=function(e){var t=e.target,n=t.id,o=t.parentNode.id;return"hxwebjs_popuptreeview__ok_btn"==n||"hxwebjs_popuptreeview__ok_btn"==o?(e.stopPropagation(),void HXWebPopupTreeViewControl._data_item_choosed_process("multiple_choose")):"hxwebjs_popuptreeview__clear_btn"==n||"hxwebjs_popuptreeview__clear_btn"==o?(e.stopPropagation(),void HXWebPopupTreeViewControl._data_item_choosed_process("clear")):"hxwebjs_popuptreeview__cancel_btn"==n||"hxwebjs_popuptreeview__cancel_btn"==o?(e.stopPropagation(),void HXWebPopupTreeViewControl._hide()):"hxwebjs_popuptreeview__search_btn"==n?(e.stopPropagation(),void HXWebPopupTreeViewControl._search_treeview_data()):void 0},HXWebPopupTreeViewControl._data_item_choosed_process=function(e,t){var n=HXWebJS.Controls._Picker._current_active_control_info;if(null!=n&&n._process_class===HXWebPopupTreeViewControl){var o=n._options,_="",l="",a="",r="",i="",d="",s="";if("multiple_choose"==e)for(var c=HXWebTreeViewControl.get_choosed_nodes("hxwebjs_popuptreeview__treeview_data_area_div",o.choose_return_value_option),b=0;b<c.length;b++)_+=(""!=_?",":"")+c[b].node_unique_code,l+=(""!=l?",":"")+c[b].node_text,a+=(""!=a?",":"")+c[b].node_attr_1,r+=(""!=r?",":"")+c[b].node_attr_2,i+=(""!=i?",":"")+c[b].node_attr_3,d+=(""!=d?",":"")+c[b].node_attr_4,s+=(""!=s?",":"")+c[b].node_attr_5;else"single_choose"==e&&(_=t.node_unique_code,l=t.node_text,a=t.node_attr_1,r=t.node_attr_2,i=t.node_attr_3,d=t.node_attr_4,s=t.node_attr_5);var p=n._input_textbox,u=n._choose_button;HXWebPopupTreeViewControl._set_selected_value_to_textbox(o,p,_,l);var m=HXWebJS.DOM.GetElementBindingLineInfo(null!=p?p:u);HXWebPopupTreeViewControl._set_binding_datafields_values(o,m,_,l,a,r,i,d,s),HXWebPopupTreeViewControl._run_datachoosed_callback_function(n._webdatacontrol_id,o,p,u,"clear"==e?[]:"multiple_choose"==e?c:[t]);var h=!1;null!=p&&(p.disabled||(h=!0)),h?p.focus():HXWebJS.Controls._Picker._current_active_control_info=null,HXWebPopupTreeViewControl._hide()}},HXWebPopupTreeViewControl._set_selected_value_to_textbox=function(e,t,n,o){null!=t&&("desc"==e.content_type||null!=e.binding_datasrc_id&&null!=e.binding_datafld_for_key&&""!=e.binding_datafld_for_key?"desc"!=e.content_type||null!=e.binding_datasrc_id&&null!=e.binding_datafld_for_desc&&""!=e.binding_datafld_for_desc||(t.value=o):t.value=n)},HXWebPopupTreeViewControl._set_binding_datafields_values=function(e,t,n,o,_,l,a,r,i){var d=e.binding_datasrc_id;if(d){var s=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(d);if(null!=s){var c=e.binding_datafld_for_key,b=e.binding_datafld_for_desc,p=e.binding_datafld_for_attr_1,u=e.binding_datafld_for_attr_2,m=e.binding_datafld_for_attr_3,h=e.binding_datafld_for_attr_4,f=e.binding_datafld_for_attr_5,C=null;null!=(C=null!=t?t.binding_row_data:s.SelectSingleNode("//RS_ROW"))&&(null!=c&&""!=c&&(c=c.toUpperCase(),null!=C.GetAttributeValue(c)&&C.SetAttributeValue(c,n,null,!0)),null!=b&&""!=b&&(b=b.toUpperCase(),null!=C.GetAttributeValue(b)&&C.SetAttributeValue(b,o,null,!0)),null!=p&&""!=p&&(p=p.toUpperCase(),null!=C.GetAttributeValue(p)&&C.SetAttributeValue(p,_,null,!0)),null!=u&&""!=u&&(u=u.toUpperCase(),null!=C.GetAttributeValue(u)&&C.SetAttributeValue(u,l,null,!0)),null!=m&&""!=m&&(m=m.toUpperCase(),null!=C.GetAttributeValue(m)&&C.SetAttributeValue(m,a,null,!0)),null!=h&&""!=h&&(h=h.toUpperCase(),null!=C.GetAttributeValue(h)&&C.SetAttributeValue(h,r,null,!0)),null!=f&&""!=f&&(f=f.toUpperCase(),null!=C.GetAttributeValue(f)&&C.SetAttributeValue(f,i,null,!0)))}}},HXWebPopupTreeViewControl._run_datachoosed_callback_function=function(e,t,n,o,_){if(null!=t.ondatachoosed_callback)try{t.ondatachoosed_callback(e,n,o,_)}catch(e){return void HXWebJS.Core.LogErrorToConsole("hxwebpopuptreeview ondatachoosed_callback call failed. "+e.description)}},HXWebPopupTreeViewControl._get_org_selected_values=function(e,t,n){var o=null,_=null,l=e.binding_datasrc_id;if(null!=l&&""!=l&&null!=(o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(l))){var a=HXWebJS.DOM.GetElementBindingLineInfo(n),r=e.binding_datafld_for_key,i=null;if(i=null==a?o.SelectSingleNode("//RS_ROW"):a.binding_row_data,null!=r&&""!=r&&null!=i&&(r=r.toUpperCase(),null!=(_=i.GetAttributeValue(r))))return _}return"key"==e.content_type&&null!=t?t.value:null},HXWebPopupTreeViewControl._searchkeyword_keypressed=function(e){e.stopPropagation(),13==e.keyCode&&HXWebPopupTreeViewControl._search_treeview_data()},HXWebPopupTreeViewControl._search_treeview_data=function(){var e=HXWebJS.Controls._Picker._current_active_control_info;if(null!=e&&e._process_class===HXWebPopupTreeViewControl){var t,n=e._options,o=e._input_textbox,_=e._choose_button,l=$("#hxwebjs_popuptreeview__search_keyword",HXWebPopupTreeViewControl._global_popup_area).val();if(""!=l)if(1==n.choose_type){var a=HXWebPopupTreeViewControl._Internal._current_active_merged_chosn_node_code_list;null==a&&(a=HXWebPopupTreeViewControl._get_org_selected_values(n,o,_)),a=HXWebPopupTreeViewControl._merge_current_checked_nodes_into_chosen_node_list(n,a),HXWebPopupTreeViewControl._Internal._current_active_merged_chosn_node_code_list=a,t=a}else t="";else t=HXWebPopupTreeViewControl._get_org_selected_values(n,o,_);HXWebPopupTreeViewControl._fill_treeview_data(n,l,t)}},HXWebPopupTreeViewControl._merge_current_checked_nodes_into_chosen_node_list=function(e,t){var n=[];null!=t&&""!=t&&(n=t.split(/[,|;]/g));for(var o,_=[],l=0;l<n.length;l++)o=n[l],0==$(HXWebPopupTreeViewControl._global_popup_area).find(".hxwebjs_treeview__node_container[hx_treenode_uuid='"+o+"']").length&&_.push(o);var a=[],r=HXWebTreeViewControl.get_choosed_nodes("hxwebjs_popuptreeview__treeview_data_area_div",e.choose_return_value_option);if(null!=r&&r.length>0)for(l=0;l<r.length;l++)a.push(r[l].node_unique_code);for(l=0;l<a.length;l++)o=a[l],HXWebJS.Utility.StringInArray(_,o)||_.push(o);return _.join(",")},HXWebFileBoxControl={},HXWebFileBoxControl._Internal={},HXWebFileBoxControl.register=function(e,t){HXWebFileBoxControl._Internal._registed_elements_info||(HXWebFileBoxControl._Internal._registed_elements_info={}),null==t&&(t={}),t.web_control_id=e,HXWebFileBoxControl._options_check(t);HXWebFileBoxControl._Internal._registed_elements_info[e]||(HXWebFileBoxControl._Internal._registed_elements_info[e]=t),HXWebFileBoxControl._Internal._remove_button_showhide_via_value_and_setting(t)},HXWebFileBoxControl.set_options=function(e,t){if(null!=t&&HXWebFileBoxControl._Internal._registed_elements_info){var n=HXWebFileBoxControl._Internal._registed_elements_info[e];null!=n&&(HXWebFileBoxControl._options_check(t),null!=t.object_code&&(n.object_code=t.object_code),null!=t.object_view_code&&(n.object_view_code=t.object_view_code),null!=t.binding_datasrc_id&&(n.binding_datasrc_id=t.binding_datasrc_id),null!=t.binding_datafld_for_filename&&(n.binding_datafld_for_filename=t.binding_datafld_for_filename),null!=t.binding_datafld_for_tempname&&(n.binding_datafld_for_tempname=t.binding_datafld_for_tempname),null!=t.binding_datafld_for_filedesc&&(n.binding_datafld_for_filedesc=t.binding_datafld_for_filedesc),null!=t.show_remove_button&&(n.show_remove_button=t.show_remove_button),null!=t.max_file_size_kb&&(n.max_file_size_kb=t.max_file_size_kb),null!=t.allow_file_type_list&&(n.allow_file_type_list=t.allow_file_type_list),null!=t.input_file_accept_cnt&&(n.input_file_accept_cnt=t.input_file_accept_cnt),null!=t.allow_multi_files_upload&&(n.allow_multi_files_upload=t.allow_multi_files_upload),null!=t.image_file_compress_max_kb&&(n.image_file_compress_max_kb=t.image_file_compress_max_kb),null!=t.base64_image_file_cnt_in_db_mode&&(n.base64_image_file_cnt_in_db_mode=t.base64_image_file_cnt_in_db_mode),null!=t.onfileboxclicked_callback&&(n.onfileboxclicked_callback=t.onfileboxclicked_callback),null!=t.onfileuploaded_callback&&(n.onfileuploaded_callback=t.onfileuploaded_callback),null!=t.onfileuploadfailed_callback&&(n.onfileuploadfailed_callback=t.onfileuploadfailed_callback),null!=t.onfileremoved_callback&&(n.onfileremoved_callback=t.onfileremoved_callback),t.show_remove_button&&HXWebFileBoxControl._Internal._remove_button_showhide_via_value_and_setting(n))}},HXWebFileBoxControl._options_check=function(e){null==e.allow_multi_files_upload&&(e.allow_multi_files_upload=!1)},HXWebFileBoxControl.option={object_code:void 0,object_view_code:void 0,binding_datasrc_id:void 0,binding_datafld_for_filename:void 0,binding_datafld_for_tempname:void 0,binding_datafld_for_filedesc:void 0,show_remove_button:void 0,max_file_size_kb:void 0,allow_file_type_list:void 0,input_file_accept_cnt:void 0,allow_multi_files_upload:void 0,image_file_compress_max_kb:void 0,base64_image_file_cnt_in_db_mode:void 0,onfileboxclicked_callback:void 0,onfileuploaded_callback:void 0,onfileuploadfailed_callback:void 0,onfileremoved_callback:void 0},HXWebFileBoxControl.upload_file=function(e,t,n){HXWebFileBoxControl._Internal._upload_file(e,t,n)},HXWebFileBoxControl.upload_new_files=function(e,t){HXWebFileBoxControl._Internal._upload_file(e,null,t)},HXWebFileBoxControl.filebox_webpart_display_format=function(e,t,n){if(null!=t&&null!=n&&HXWebFileBoxControl._Internal._registed_elements_info){if(null!=HXWebFileBoxControl._Internal._registed_elements_info[e]){if(null!=n.show_remove_button){(o=$("span.filebox_remove_icon",t)).length>0&&(o[0].style.display=n.show_remove_button?"":"none")}if(null!=n.show_upload_file_button){(o=$("span.filebox_upload_icon",t)).length>0&&(o[0].style.display=n.show_upload_file_button?"":"none")}if(null!=n.show_download_link){var o=$("span.filebox_file_name",t);o.toggleClass("hxtxt_content",!n.show_download_link),o.toggleClass("hxtxt_hyperlink",!!n.show_download_link),$(".filebox_thumbnail_icon_area span,.filebox_file_name",t).attr("is_show_download_link",n.show_download_link?1:0)}}}},HXWebFileBoxControl._Internal._remove_button_showhide_via_value_and_setting=function(e){for(var t,n,o,_,l=$("[id='"+e.web_control_id+"']"),a=0;a<l.length;a++)if(t=l[a],0!=(n=$("span.filebox_remove_icon",t)).length)if(0==e.show_remove_button)n[0].style.display="none";else{if(e.base64_image_file_cnt_in_db_mode){var r=$("img.filebox_thumbnail_img",t).attr("src");_=!HXWebJS.Core.IsStringNullOrEmpty(r)&&-1==r.indexOf("hxpub_clear.gif")}else o=$("span.filebox_file_name",t).text(),_=!HXWebJS.Core.IsStringNullOrEmpty(o);n[0].style.display=_?"":"none"}},HXWebFileBoxControl._Internal._onclick_handler_on_filebox=function(e){var t=e.target,n=e.currentTarget.id;if(HXWebFileBoxControl._Internal._registed_elements_info){var o=HXWebFileBoxControl._Internal._registed_elements_info[n];if(null!=o){if(null!=o.onfileboxclicked_callback){var _=e.currentTarget;if(0==o.onfileboxclicked_callback(n,_))return}if(HXWebJS.DOM.CSSClass.HasClass(t,"filebox_upload_icon"))HXWebFileBoxControl._Internal._upload_file(n,t.parentNode);else if(HXWebJS.DOM.CSSClass.HasClass(t,"filebox_remove_icon"))HXWebFileBoxControl._Internal._remove_file(n,t.parentNode);else if(HXWebJS.DOM.CSSClass.HasClass(t,"filebox_file_name")){if("0"==$(t).attr("is_show_download_link"))return;HXWebFileBoxControl._Internal._download_file(n,t.parentNode,!0)}else if(HXWebJS.DOM.CSSClass.HasClass(t.parentNode,"filebox_thumbnail_icon_area")){if("0"==$(t).attr("is_show_download_link"))return;HXWebFileBoxControl._Internal._download_file(n,t.parentNode.parentNode,!1)}else if(HXWebJS.DOM.CSSClass.HasClass(t,"filebox_thumbnail_img")){if(o.base64_image_file_cnt_in_db_mode)return;HXWebFileBoxControl._Internal._download_file(n,t.parentNode,!1)}}}},HXWebFileBoxControl._Internal._upload_file=function(e,t,n){if(HXWebFileBoxControl._Internal._registed_elements_info){var o=HXWebFileBoxControl._Internal._registed_elements_info[e];if(null!=o){var _=o.allow_multi_files_upload,l="";if(null!=t){_=!1;var a=HXWebJS.DOM.GetElementBindingLineInfo(t);l=null!=a?a.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID"):o.base64_image_file_cnt_in_db_mode?$("img.filebox_thumbnail_img",t).attr("_hxwebjs_row_uuid"):$("span.filebox_file_name",t).attr("_hxwebjs_row_uuid")}var r={input_file_accept_cnt:o.input_file_accept_cnt,allow_multi_files_upload:_,filebox_setting_code:o.object_code+":"+o.binding_datafld_for_filename,allow_file_type_list:o.allow_file_type_list,max_file_size_kb:o.max_file_size_kb,image_file_compress_max_kb:o.image_file_compress_max_kb,binding_datasrc_id:o.binding_datasrc_id,hxwebjs_row_uuid:l,uplevel_hxwebjs_row_uuid:n,base64_image_file_cnt_in_db_mode:o.base64_image_file_cnt_in_db_mode,callback_func_name:"HXWebFileBoxControl._Internal._callback_process_after_upload_files"};HXWebJS.Utility.UploadFileDirectly(e,r)}}},HXWebFileBoxControl._Internal._callback_process_after_upload_files=function(e,t,n,o,_,l,a){if(""!=e||t){var r=HXWebFileBoxControl._Internal._registed_elements_info[e];if(null!=r){var i=null;if(!HXWebJS.Core.IsStringNullOrEmpty(l)){var d;d=r.base64_image_file_cnt_in_db_mode?"#{0}>.filebox_thumbnail_img[hx_binding_datasrc='{1}'][_hxwebjs_row_uuid='{2}'] ":"#{0}>.filebox_file_name[hx_binding_datasrc='{1}'][_hxwebjs_row_uuid='{2}'] ";var s=$(HXWebJS.Utility.StringFormat(d,e,r.binding_datasrc_id,l));s.length>0&&(i=s[0].parentNode)}if(t){if(null!=n&&0!=n.length){if(null!=i&&r.show_remove_button){var c=$("span.filebox_remove_icon",i);c.length>0&&(c[0].style.display="")}var b=null,p=null;if(null!=r.binding_datasrc_id&&""!=r.binding_datasrc_id){null!=(p=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(r.binding_datasrc_id))&&(HXWebJS.Core.IsStringNullOrEmpty(l)||(b=p.SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+l+"']")))}if(null!=b)HXWebFileBoxControl._Internal._update_xmlrowdata_for_upload_file_info(r,n[0],b);else if(null!=p){var u="";0==r.binding_datasrc_id.indexOf("hxxml_listdata__")&&(u=r.binding_datasrc_id.substr(0,15)+"blankrow__"+r.binding_datasrc_id.substr(16));var m=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(u);null!=m&&HXWebFileBoxControl._Internal._insert_xmlrowdatas_for_upload_files_info(r,n,p,m,a),HXWebFileBoxControl._Internal._remove_button_showhide_via_value_and_setting(r)}null!=r.onfileuploaded_callback&&r.onfileuploaded_callback(e,i,n)}}else null!=r.onfileuploadfailed_callback?r.onfileuploadfailed_callback(e,i,o):alert(o)}}else alert(o)},HXWebFileBoxControl._Internal._update_xmlrowdata_for_upload_file_info=function(e,t,n){""!=e.binding_datafld_for_filename&&(objTempHXXmlNode=n.SelectSingleNode("@"+e.binding_datafld_for_filename.toUpperCase()),null!=objTempHXXmlNode&&(e.base64_image_file_cnt_in_db_mode?objTempHXXmlNode.SetText(t.img_file_base64_cnt):objTempHXXmlNode.SetText(t.file_name),HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged(!0))),""!=e.binding_datafld_for_filedesc&&(objTempHXXmlNode=n.SelectSingleNode("@"+e.binding_datafld_for_filedesc.toUpperCase()),null!=objTempHXXmlNode&&""==objTempHXXmlNode.GetText()&&objTempHXXmlNode.SetText(t.file_name)),""!=e.binding_datafld_for_tempname&&(objTempHXXmlNode=n.SelectSingleNode("@"+e.binding_datafld_for_tempname.toUpperCase()),null!=objTempHXXmlNode?objTempHXXmlNode.SetText(t.file_temp_name):n.SetAttributeValue(e.binding_datafld_for_tempname.toUpperCase(),t.file_temp_name,!0))},HXWebFileBoxControl._Internal._insert_xmlrowdatas_for_upload_files_info=function(e,t,n,o,_){for(var l,a=0;a<t.length;a++)-1==n.GetXml().indexOf("<RS_ROW")&&n.ReloadXML("<RS_DATA></RS_DATA>"),l=o.SelectSingleNode("//RS_ROW").CloneNode(!0),HXWebFileBoxControl._Internal._update_xmlrowdata_for_upload_file_info(e,t[a],l),n.GetRootXmlNode().AppendChild(l,_)},HXWebFileBoxControl._Internal._remove_file=function(e,t){if(HXWebFileBoxControl._Internal._registed_elements_info){var n=HXWebFileBoxControl._Internal._registed_elements_info[e];if(null!=n&&null!=n.binding_datasrc_id&&""!=n.binding_datasrc_id){var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n.binding_datasrc_id);if(null!=o&&null!=t){var _,l=HXWebJS.DOM.GetElementBindingLineInfo(t);if(null==l)_=o.SelectSingleNode("//RS_ROW");else{var a=l.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID");_=o.SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+a+"']")}var r=null;null!=_&&(r=_.CloneNode());HXWebFileBoxControl._Internal._update_xmlrowdata_for_upload_file_info(n,{file_name:null,file_temp_name:null,file_size:null,file_extension_name:null,file_mime_type:null},_);var i=$("span.filebox_remove_icon",t);i.length>0&&(i[0].style.display="none"),null!=n.onfileremoved_callback&&n.onfileremoved_callback(e,t,r)}}}},HXWebFileBoxControl._Internal._download_file=function(e,t,n){if(HXWebFileBoxControl._Internal._registed_elements_info){var o=HXWebFileBoxControl._Internal._registed_elements_info[e];if(null!=o&&null!=o.binding_datasrc_id&&""!=o.binding_datasrc_id){var _=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(o.binding_datasrc_id);if(null!=_&&null!=t){var l,a=HXWebJS.DOM.GetElementBindingLineInfo(t);if(null==a)l=_.SelectSingleNode("//RS_ROW");else{var r=a.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID");l=_.SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+r+"']")}if(null!=l){var i=l.SelectSingleNode("@HX_UUID"),d=null!=i?i.GetText():"";if(""!=d){if(!HXWebJS.Core.IsStringNullOrEmpty(o.binding_datafld_for_tempname)&&(strTempFileNameOnServer=l.SelectSingleNode("@"+o.binding_datafld_for_tempname.toUpperCase()).GetText(),""!=strTempFileNameOnServer)){var s=HXWebJS.Utility.IsPictureFile(strTempFileNameOnServer),c="";return""!=o.binding_datafld_for_filename&&(c=l.GetAttributeValue(o.binding_datafld_for_filename.toUpperCase())),void HXWebJS.Navigation.OpenFileDownloadOnlyPage("tempfiles/"+strTempFileNameOnServer,n&&!s,c)}if(""!=o.binding_datafld_for_filename){var b=o.binding_datafld_for_filename;if(""!=l.SelectSingleNode("@"+b.toUpperCase()).GetText()){var p=o.object_view_code;HXWebJS.Utility.DownloadAndShowFileDirectly(p,b,d,null,n)}}}else{if(""==o.binding_datafld_for_tempname)return;if(strTempFileNameOnServer=l.SelectSingleNode("@"+o.binding_datafld_for_tempname.toUpperCase()).GetText(),""!=strTempFileNameOnServer){var s=HXWebJS.Utility.IsPictureFile(strTempFileNameOnServer),c="";""!=o.binding_datafld_for_filename&&(c=l.GetAttributeValue(o.binding_datafld_for_filename.toUpperCase())),HXWebJS.Navigation.OpenFileDownloadOnlyPage("tempfiles/"+strTempFileNameOnServer,n&&!s,c)}}}}}}},HXWebFileBoxControl._Internal._get_registed_filebox_list=function(){if(!HXWebFileBoxControl._Internal._registed_elements_info)return"";var e=new HXWebStringBuilder;e.append("<RS_DATA>");var t,n,o;for(key in HXWebFileBoxControl._Internal._registed_elements_info)n=(t=HXWebFileBoxControl._Internal._registed_elements_info[key]).object_code,o=t.binding_datafld_for_filename,e.append('<RS_ROW OBJECT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'" FIELD_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(o)+'" />');return e.append("</RS_DATA>"),e.toString()},HXWebPopupMenuControl={},HXWebPopupMenuControl._Internal={},HXWebPopupMenuControl.register=function(e,t){HXWebPopupMenuControl._Internal._registed_elements_info||(HXWebPopupMenuControl._Internal._registed_elements_info={});var n=HXWebPopupMenuControl._Internal._registed_elements_info[e];null==t&&(t={}),HXWebPopupMenuControl._Internal._options_check(t),n||((n=t).popupmenucontrol_id=e,n.popupmenucontrol_container=HXWebPopupMenuControl._Internal._create_popupmenu_element(e,n),HXWebPopupMenuControl._Internal._registed_elements_info[e]=n)},HXWebPopupMenuControl.is_registered=function(e){if(!HXWebPopupMenuControl._Internal._registed_elements_info)return!1;return null!=HXWebPopupMenuControl._Internal._registed_elements_info[e]},HXWebPopupMenuControl.set_options=function(e,t){if(null!=t&&HXWebPopupMenuControl._Internal._registed_elements_info){var n=HXWebPopupMenuControl._Internal._registed_elements_info[e];null!=n&&(null!=t.width&&(n.width=t.width),null!=t.zIndex_offset&&(n.zIndex_offset=t.zIndex_offset),null!=t.show_icon_area&&(n.show_icon_area=t.show_icon_area),null!=t.hidemenu_whenmenuitemclick&&(n.hidemenu_whenmenuitemclick=t.hidemenu_whenmenuitemclick),null!=t.onmenuitemclick_callback&&(n.onmenuitemclick_callback=t.onmenuitemclick_callback),null!=t.onmenuitemmouseover_callback&&(n.onmenuitemmouseover_callback=t.onmenuitemmouseover_callback),null!=t.onmenuitemmouseout_callback&&(n.onmenuitemmouseout_callback=t.onmenuitemmouseout_callback),null!=t.onmenuareamouseout_callback&&(n.onmenuareamouseout_callback=t.onmenuareamouseout_callback),HXWebPopupMenuControl._Internal._options_check(t))}},HXWebPopupMenuControl._Internal._options_check=function(e){null==e.zIndexOffset&&(e.zIndexOffset=0),null==e.show_icon_area&&(e.show_icon_area=!0),null==e.hidemenu_whenmenuitemclick&&(e.hidemenu_whenmenuitemclick=!0)},HXWebPopupMenuControl.option={width:void 0,zIndex_offset:void 0,show_icon_area:void 0,hidemenu_whenmenuitemclick:void 0,onmenuitemclick_callback:void 0,onmenuitemmouseover_callback:void 0,onmenuitemmouseout_callback:void 0,onmenuareamouseout_callback:void 0},HXWebPopupMenuControl._Internal._create_popupmenu_element=function(e,t){var n=new HXWebStringBuilder;n.append('<div id="'+e+'" class="hxwebpopupmenucontrol_menuarea"'),n.append(' style="POSITION: absolute;display:none; Z-INDEX:10000;height:auto;"'),n.append(' hxpage_mouseout_handler="hxcontrol.HXWebPopupMenuControl.menuarea_mouseout"></div>');var o=HXWebJS.DOM.CreateElement(n.toString());return document.body.appendChild(o),t.zIndex_offset>0&&(o.style.zIndex=parseInt(o.style.zIndex)+10*t.zIndex_offset),o.style.width=t.width+"px",o},HXWebPopupMenuControl.show=function(e,t,n,o,_,l){if(HXWebPopupMenuControl._Internal._registed_elements_info){var a=HXWebPopupMenuControl._Internal._registed_elements_info[e];if(a){a.show_trigger_src_object=_,a.show_trigger_src_ref_code=l;var r=t,i=n;r<0&&(r=0),i<0&&(i=0);var d;d=null!=o&&o>0?o:a.width;var s=HXWebJS.DOM.GetScrollLeft()+HXWebJS.DOM.GetWindowWidth();r+d>s&&(r=s-d);var c=a.popupmenucontrol_container;c.style.left=r+"px",c.style.top=i+"px",c.style.width=d+"px",c.style.display="";var b=HXWebJS.DOM.GetScrollTop()+HXWebJS.DOM.GetWindowHeight(),p=c.offsetHeight;i+p>b&&(i=b-p-2,c.style.top=i+"px")}}},HXWebPopupMenuControl.hide=function(e){if(HXWebPopupMenuControl._Internal._registed_elements_info){var t=HXWebPopupMenuControl._Internal._registed_elements_info[e];t&&(t.popupmenucontrol_container.style.display="none",t.img_for_hide_border_partly&&(t.img_for_hide_border_partly.style.display="none"),t.show_trigger_src_object=null,t.show_trigger_src_ref_code=null)}},HXWebPopupMenuControl.fill_items=function(e,t){if(HXWebPopupMenuControl._Internal._registed_elements_info){var n=HXWebPopupMenuControl._Internal._registed_elements_info[e];if(n&&null!=t&&null!=t.length&&0!=t.length)for(var o,_,l=0;l<t.length;l++)o=t[l],_=HXWebPopupMenuControl._Internal._build_menuitem_div(n,o),n.popupmenucontrol_container.insertBefore(_,null)}},HXWebPopupMenuControl.append_item=function(e,t){if(HXWebPopupMenuControl._Internal._registed_elements_info){var n=HXWebPopupMenuControl._Internal._registed_elements_info[e];n&&(objMenuItemDiv=HXWebPopupMenuControl._Internal._build_menuitem_div(n,t),n.popupmenucontrol_container.insertBefore(objMenuItemDiv,null))}},HXWebPopupMenuControl.clear_items=function(e){if(HXWebPopupMenuControl._Internal._registed_elements_info){var t=HXWebPopupMenuControl._Internal._registed_elements_info[e];t&&(t.popupmenucontrol_container.innerHTML="")}},HXWebPopupMenuControl.is_element_in_control=function(e,t,n){if(!HXWebPopupMenuControl._Internal._registed_elements_info)return!1;var o=HXWebPopupMenuControl._Internal._registed_elements_info[e];if(!o)return!1;var _=o.popupmenucontrol_container;return null!=_&&(null==n&&(n=!0),HXWebJS.DOM.IsElementInContainer(_,t,n))},HXWebPopupMenuControl.get_show_trigger_src_info=function(e){var t={trigger_src_object:null,trigger_src_ref_code:null};if(!HXWebPopupMenuControl._Internal._registed_elements_info)return t;var n=HXWebPopupMenuControl._Internal._registed_elements_info[e];return n?(t.trigger_src_object=n.show_trigger_src_object,t.trigger_src_ref_code=n.show_trigger_src_ref_code,t):t},HXWebPopupMenuControl._Internal._build_menuitem_div=function(e,t){var n=new HXWebStringBuilder;n.append('<div class="hxwebpopupmenucontrol_menuitem_area'+(t.has_seperator?" has_seperator_line":"")+'"'),n.append(' hxpage_click_handler="hxcontrol.HXWebPopupMenuControl.menuitem_clicked"'),n.append(' hxpage_mouseover_handler="hxcontrol.HXWebPopupMenuControl.menuitem_mouseover"'),n.append(' hxpage_mouseout_handler="hxcontrol.HXWebPopupMenuControl.menuitem_mouseout"'),n.append(' hxpopupmenuitem_key="'+t.key+'">'),e.show_icon_area&&(null==t.icon_class&&(t.icon_class=""),n.append('<span class="hxwebpopupmenucontrol_menuitem_icon '+t.icon_class+'"></span>')),n.append('<span class="hxwebpopupmenucontrol_menuitem_label hxtxt_nowrap">'),n.append(HXWebJS.Core.EscapeHtml(t.label)),n.append("</span>"),t.has_children&&n.append('<span class="hxwebpopupmenucontrol_menuitem_children_indicator fa fa-chevron-right"></span>'),n.append("</div>");return HXWebJS.DOM.CreateElement(n.toString())},HXWebPopupMenuControl.hide_border_partly=function(e,t,n,o,_){if(HXWebPopupMenuControl._Internal._registed_elements_info){var l=HXWebPopupMenuControl._Internal._registed_elements_info[e];if(l&&l.popupmenucontrol_container&&"none"!=l.popupmenucontrol_container.style.display){var a,r=$("#hxpopupmenucontrol_partlyline_for_hide",l.popupmenucontrol_container);if(0==r.length){a=HXWebJS.DOM.CreateElement('<img id="hxpopupmenucontrol_partlyline_for_hide" style="display:none; Z-INDEX:11000; WIDTH:1px;HEIGHT:1px; POSITION:absolute;" src="../hximages_v6/hxpub_clear.gif" />'),l.popupmenucontrol_container.appendChild(a)}else a=r[0];"top"==t?(a.style.left=n+"px",a.style.top="-1px",a.style.width=o+"px",a.style.height="1px",a.style.backgroundColor=_,a.style.display=""):"left"==t?(a.style.left="-1px",a.style.top=n+"px",a.style.width="1px",a.style.height=o+"px",a.style.backgroundColor=_,a.style.display=""):"right"==t&&(a.style.right="-1px",a.style.top=n+"px",a.style.width="1px",a.style.height=o+"px",a.style.backgroundColor=_,a.style.display="")}}},HXWebPopupMenuControl._OnHXControlClickHandlerProcess=function(e,t){if("menuitem_clicked"==e){var n=t.currentTarget,o=n.parentNode.id,_=HXWebPopupMenuControl._Internal._registed_elements_info[o];if(!_)return;var l=n.getAttribute("hxpopupmenuitem_key"),a=$(".hxwebpopupmenucontrol_menuitem_label",n).text();_.hidemenu_whenmenuitemclick&&HXWebPopupMenuControl.hide(o),null!=_.onmenuitemclick_callback&&_.onmenuitemclick_callback(o,l,a,n,t,_.show_trigger_src_object,_.show_trigger_src_ref_code)}},HXWebPopupMenuControl._OnHXControlMouseOverHandlerProcess=function(e,t){if("menuitem_mouseover"==e){var n=t.currentTarget,o=n.parentNode.id,_=HXWebPopupMenuControl._Internal._registed_elements_info[o];if(!_)return;var l=n.getAttribute("hxpopupmenuitem_key"),a=$(".hxwebpopupmenucontrol_menuitem_label",n).text();null!=_.onmenuitemmouseover_callback&&(HXWebJS.DOM.IsElementInContainer(n,t.relatedTarget,!0)||_.onmenuitemmouseover_callback(o,l,a,n,t,_.show_trigger_src_object,_.show_trigger_src_ref_code))}},HXWebPopupMenuControl._OnHXControlMouseOutHandlerProcess=function(e,t){if("menuarea_mouseout"==e){o=t.currentTarget.id;if(!(_=HXWebPopupMenuControl._Internal._registed_elements_info[o]))return;null!=_.onmenuareamouseout_callback&&(HXWebJS.DOM.IsElementInContainer(_.popupmenucontrol_container,t.relatedTarget)||_.onmenuareamouseout_callback(o,t,_.show_trigger_src_object,_.show_trigger_src_ref_code))}else if("menuitem_mouseout"==e){var n=t.currentTarget,o=n.parentNode.id,_=HXWebPopupMenuControl._Internal._registed_elements_info[o];if(!_)return;var l=n.getAttribute("hxpopupmenuitem_key"),a=$(".hxwebpopupmenucontrol_menuitem_label",n).text();null!=_.onmenuitemmouseout_callback&&(HXWebJS.DOM.IsElementInContainer(n,t.relatedTarget,!0)||_.onmenuitemmouseout_callback(o,l,a,n,t,_.show_trigger_src_object,_.show_trigger_src_ref_code))}},HXWebPopupMenuControl._Internal._onclickprocess_outsidepopupmenuarea=function(e){if(HXWebPopupMenuControl._Internal._registed_elements_info){var t=e.target;if(!($(t).parents(".hxwebpopupmenucontrol_menuarea").length>0))for(key in HXWebPopupMenuControl._Internal._registed_elements_info)null!=HXWebPopupMenuControl._Internal._registed_elements_info[key].show_trigger_src_object&&HXWebPopupMenuControl._Internal._registed_elements_info[key].show_trigger_src_object!==t&&HXWebPopupMenuControl.hide(key)}},HXWebJS.EventManager.RegisterFuncRunAfterOnDocumentClick(HXWebPopupMenuControl._Internal._onclickprocess_outsidepopupmenuarea),HXWebPopupTextAreaControl={},HXWebPopupTextAreaControl._Internal={},HXWebPopupTextAreaControl._Internal.control_type="popuptextarea",HXWebPopupTextAreaControl.register=function(e,t,n){null==n&&(n={}),HXWebPopupTextAreaControl._options_check(n),HXWebJS.Controls._Picker._register(e,t,HXWebPopupTextAreaControl._Internal.control_type,n)},HXWebPopupTextAreaControl.set_options=function(e,t){if(null!=t&&null!=e){var n=HXWebJS.Controls._Picker._get_options(e,HXWebPopupTextAreaControl._Internal.control_type);null!=n&&(null!=t.auto_show_when_focusin&&(n.auto_show_when_focusin=t.auto_show_when_focusin),null!=t.width&&(n.width=t.width),null!=t.height&&(n.height=t.height),HXWebPopupTextAreaControl._options_check(n))}},HXWebPopupTextAreaControl._options_check=function(e){(null==e.width||isNaN(e.width)||parseInt(e.width<200))&&(e.width=360),(null==e.height||isNaN(e.height)||parseInt(e.height<200))&&(e.height=280),null==e.use_mobile_mode&&(e.use_mobile_mode=HXWebJS.Core.Browser.IsMobile)},HXWebPopupTextAreaControl._show=function(e,t,n,o,_,l){return null!=o.oninit_callback&&1!=o.oninit_callback(e,t,n,o)?null:(HXWebPopupTextAreaControl._create_popup_area(o),HXWebPopupTextAreaControl._format_popup_area(o,t,n),HXWebPopupTextAreaControl._global_popup_text_area)},HXWebPopupTextAreaControl._hide=function(){HXWebPopupTextAreaControl._global_popup_text_area&&"none"!=HXWebPopupTextAreaControl._global_popup_text_area.style.display&&(HXWebPopupTextAreaControl._global_popup_text_area.style.display="none")},HXWebPopupTextAreaControl._is_element_in_popup_area=function(e,t){var n=HXWebJS.DOM.GetElementById("hxwebjs_popuptextarea__container_div");return null!=n&&!!HXWebJS.DOM.IsElementInContainer(n,e)},HXWebPopupTextAreaControl._create_popup_area=function(e){if(null==(n=HXWebJS.DOM.GetElementById("hxwebjs_popuptextarea__container_div"))){var t=new HXWebStringBuilder;t.append('<div id="hxwebjs_popuptextarea__container_div" style="display:none; Z-INDEX:8000; LEFT:0px; TOP:0px;WIDTH:200px; POSITION: absolute; overflow:hidden; padding:1px;">'),t.append('<textarea id=hxwebjs_popuptextarea__textcontentarea placeholder="请在此处输入文本内容\r\n\r\ninput text content here"></textarea>'),t.append("<div id=hxwebjs_popuptextarea__command_area>"),t.append('<button id="hxwebjs_popuptextarea__ok_btn" class="hxbtn small info" style="margin-right:12px;"><span class="fa fa-check" style="margin-right:3px;color:white;"></span><span id="spnOKButtonText">OK</span></button>'),t.append('<button id="hxwebjs_popuptextarea__cancel_btn" class="hxbtn small default" onclick=""><span class="fa fa-times" style="margin-right:3px;color:red;"></span><span id="spnCancelButtonText">Cancel</span></button>'),t.append("</div></div>");var n=HXWebJS.DOM.CreateElement(t.toString());document.body.appendChild(n),HXWebJS.EventManager.AddListener(n,"click",HXWebPopupTextAreaControl._popup_area_clicked),HXWebPopupTextAreaControl._global_popup_text_area=n;var o=HXWebJS.Controls._Internal._GetComboboxTextResourceString().split(";");$("#spnOKButtonText",n).text(o[0]),$("#spnCancelButtonText",n).text(o[1])}},HXWebPopupTextAreaControl._format_popup_area=function(e,t,n){var o=t.value,_=t.readOnly,l=$(t).attr("hx_allow_readonly_pick"),a=null!=l&&""!=l&&"0"!=l,r=document.getElementById("hxwebjs_popuptextarea__textcontentarea");r.value=o,r.readOnly=_&&!a,document.getElementById("hxwebjs_popuptextarea__ok_btn").style.display=_&&!a?"none":"";var i,d,s=HXWebJS.DOM.GetElementTopPosition(t)+t.offsetHeight+1;e.use_mobile_mode?(i=HXWebJS.DOM.GetScrollLeft()+2,d=HXWebJS.DOM.GetWindowWidth()-4):(i=HXWebJS.DOM.GetElementLeftPosition(t),(d=n.offsetWidth+HXWebJS.DOM.GetElementLeftPosition(n)-i)<e.width&&(d=e.width));var c=e.height,b=HXWebJS.Controls._Picker._adjust_dropdown_area_pos_if_exceed_win_border(t,n,i,s,d,c,e.use_mobile_mode);i=b.left,s=b.top;var p=b.new_scroll_top,u=HXWebPopupTextAreaControl._global_popup_text_area;u.style.left=i+"px",u.style.top=s+"px",u.style.width=d+"px",u.style.height=e.height+"px",u.style.display="",p>0&&$(document).scrollTop(p)},HXWebPopupTextAreaControl._popup_area_clicked=function(e){var t=HXWebJS.Controls._Picker._current_active_control_info;if(null!=t&&t._process_class===HXWebPopupTextAreaControl){e.stopPropagation();var n=e.target,o=n.id,_=n.parentNode.id;if("hxwebjs_popuptextarea__ok_btn"==o||"hxwebjs_popuptextarea__ok_btn"==_){var l=HXWebJS.Controls._Picker._current_active_control_info._input_textbox;return l.value=document.getElementById("hxwebjs_popuptextarea__textcontentarea").value,HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process({target:l,type:"change"}),void HXWebPopupTextAreaControl._hide()}"hxwebjs_popuptextarea__cancel_btn"!=o&&"hxwebjs_popuptextarea__cancel_btn"!=_||HXWebPopupTextAreaControl._hide()}},HXWebChartControl={},HXWebChartControl._Internal={},HXWebChartControl.register=function(e,t){HXWebChartControl._Internal._registed_elements_info||(HXWebChartControl._Internal._registed_elements_info={}),null==t&&(t={}),t.chart_control_id=e,HXWebChartControl._options_check(t);HXWebChartControl._Internal._registed_elements_info[e]||(HXWebChartControl._Internal._registed_elements_info[e]=t)},HXWebChartControl.set_options=function(e,t){if(null!=t&&HXWebChartControl._Internal._registed_elements_info){var n=HXWebChartControl._Internal._registed_elements_info[e];null!=n&&(null!=t.chart_type&&(n.chart_type=t.chart_type),null!=t.chart_xml_data_island_id&&(n.chart_xml_data_island_id=t.chart_xml_data_island_id),null!=t.field_code_of_category&&(n.field_code_of_category=t.field_code_of_category),null!=t.field_code_of_series&&(n.field_code_of_series=t.field_code_of_series),null!=t.field_code_of_value&&(n.field_code_of_value=t.field_code_of_value),null!=t.map_type&&(n.map_type=t.map_type),null!=t.axis_xy_exchange&&(n.axis_xy_exchange=t.axis_xy_exchange),null!=t.loading_option&&(n.loading_option=t.loading_option),null!=t.onbeforechartshow_callback&&(n.onbeforechartshow_callback=t.onbeforechartshow_callback),null!=t.ondatapointclicked_callback&&(n.ondatapointclicked_callback=t.ondatapointclicked_callback),null!=t.extend_web_part_html_id&&(n.extend_web_part_html_id=t.extend_web_part_html_id),null!=t.pagexmlsvc_class_name&&(n.pagexmlsvc_class_name=t.pagexmlsvc_class_name),HXWebChartControl._options_check(n))}},HXWebChartControl.option={chart_type:void 0,chart_xml_data_island_id:void 0,field_code_of_category:void 0,field_code_of_series:void 0,field_code_of_value:void 0,map_type:void 0,axis_xy_exchange:void 0,loading_option:void 0,extend_web_part_html_id:void 0,pagexmlsvc_class_name:void 0,onbeforechartshow_callback:void 0,ondatapointclicked_callback:void 0},HXWebChartControl._options_check=function(e){HXWebJS.Core.IsStringNullOrEmpty(e.chart_type)?e.chart_type="bar":(e.chart_type=e.chart_type.toLowerCase(),"effectscatter"==e.chart_type?e._formal_chart_type="effectScatter":"pictorialbar"==e.chart_type?e._formal_chart_type="pictorialBar":"themeriver"==e.chart_type?e._formal_chart_type="themeRiver":e._formal_chart_type=e.chart_type),null!=e.field_code_of_category&&(e.field_code_of_category=e.field_code_of_category.toUpperCase()),null!=e.field_code_of_series&&(e.field_code_of_series=e.field_code_of_series.toUpperCase()),null!=e.field_code_of_value?(e.field_code_of_value=e.field_code_of_value.toUpperCase(),e._arr_value_fields_list=e.field_code_of_value.split(/;/g)):e._arr_value_fields_list=[];e._use_category_in_axis=$.inArray(e.chart_type,["bar","line","candlestick","k","boxplot"])>=0;e._legend_data_source=$.inArray(e.chart_type,["pie","radar","boxplot","graph","sankey","funnel"])>=0?"category_name_list":$.inArray(e.chart_type,["bar","line","scatter","effectscatter","candlestick","k","map","parallel","gauge"])>=0?"series_name_list":"";var t={scatter:3,effectscatter:3,radar:-1,boxplot:5,candlestick:4,k:4,heatmap:3,parallel:-1,themeriver:3}[e.chart_type];null==t&&null!=e._arr_value_fields_list&&e._arr_value_fields_list.length>1?alert(HXWebJS.Core.StringFormat("类型为{0}的图表的值字段数量不能超过1个！请修订后再试。",e.chart_type)):t>1&&e._arr_value_fields_list.length<t&&alert(HXWebJS.Core.StringFormat("类型为{0}的图表的值字段数量至少需要{1}个，当前值字段名称参数中只有{2}个。请修订后再试。",e.chart_type,t,e._arr_value_fields_list.length))},HXWebChartControl.update_chart_xml_data=function(e,t){if(HXWebChartControl._Internal._registed_elements_info){var n=HXWebChartControl._Internal._registed_elements_info[e];if(n){HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n.chart_xml_data_island_id).ReloadXML(t)}}},HXWebChartControl.show_or_refresh_chart=function(e,t){if("undefined"!=typeof echarts){if(HXWebChartControl._Internal._registed_elements_info){var n=HXWebChartControl._Internal._registed_elements_info[e];if(n)if(null==t)for(var o=$("[id='"+e+"']"),_=0;_<o.length;_++)HXWebChartControl._show_or_refresh_chart_instance(n,o[_]);else HXWebChartControl._show_or_refresh_chart_instance(n,t)}}else alert("图表使用百度ECharts组件。请在页面上引用../hxpublic_v6/echarts-3.4.0.min.js文件，或者CDN服务器的echarts.min.js文件。")},HXWebChartControl._show_or_refresh_chart_instance=function(e,t){var n=e.chart_control_id,o=echarts.getInstanceByDom(t);o||(o=echarts.init(t)).on("click",function(t){HXWebChartControl._chart_clicked_process(e,t)}),o.clear(),e.loading_option?o.showLoading(e.loading_option):o.showLoading();var _={tooltip:{show:!0}},l=HXWebChartControl._get_chart_data(n,e,t);if(e._use_category_in_axis){var a=[{type:"category",data:l.category_data}],r=[{type:"value"}];_.xAxis=e.axis_xy_exchange?r:a,_.yAxis=e.axis_xy_exchange?a:r}l.legend_data&&(_.legend={data:l.legend_data}),_.series=l.series_data,HXWebChartControl._set_misc_necessary_options(e,_),null!=e.onbeforechartshow_callback&&e.onbeforechartshow_callback(n,_,null,t),o.hideLoading(),o.setOption(_)},HXWebChartControl._chart_clicked_process=function(e,t){var n=e.ondatapointclicked_callback;if(null!=n){var o=t.name,_=t.seriesName,l=t.value;n(e.chart_control_id,o,_,l,t)}},HXWebChartControl._get_chart_data=function(e,t,n){var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(t.chart_xml_data_island_id),_=[];if(null!=o){var l=null==t.parent_data_join?"":t.parent_data_join;if(HXWebJS.Core.IsStringNullOrEmpty(l))_=o.SelectNodes("//RS_ROW");else{var a=HXWebJS.Xml._XmlDataIsland._GetLevel2BindingInfo(n).parent_data_seek;_=o.SelectNodes("//RS_ROW["+a+"]")}}if(0==_.length)return{};if(HXWebJS.Core.IsStringNullOrEmpty(t.field_code_of_value))return{};return t._use_category_in_axis?HXWebChartControl._get_chart_data_detail__category_axis_mode(e,t,_):HXWebChartControl._get_chart_data_detail_normal(e,t,_)},HXWebChartControl._get_chart_data_detail__category_axis_mode=function(e,t,n){if(!!HXWebJS.Core.IsStringNullOrEmpty(t.field_code_of_category))return[];for(var o,_,l,a,r,i,d=!HXWebJS.Core.IsStringNullOrEmpty(t.field_code_of_series),s=t._arr_value_fields_list.length>1,c=[],b=[],p=[],u=0;u<n.length;u++)objHXXmlNode=n[u],d?(a=objHXXmlNode.GetAttributeValue(t.field_code_of_series),HXWebJS.Core.IsStringNullOrEmpty(a)&&(a="-"),$.inArray(a,b)<0&&(b.push(a),p.push({name:a,type:t._formal_chart_type,data:[]}))):0==u&&p.push({type:t._formal_chart_type,data:[]}),l=objHXXmlNode.GetAttributeValue(t.field_code_of_category),HXWebJS.Core.IsStringNullOrEmpty(l)&&(l="-"),$.inArray(l,c)<0&&c.push(l);d&&1==b.length&&(d=!1,b=[],delete p[0].name);for(var m=0;m<p.length;m++)p[m].data=new Array(c.length);for(u=0;u<n.length;u++)objHXXmlNode=n[u],d?(a=objHXXmlNode.GetAttributeValue(t.field_code_of_series),HXWebJS.Core.IsStringNullOrEmpty(a)&&(a="-"),o=p[$.inArray(a,b)]):o=p[0],l=objHXXmlNode.GetAttributeValue(t.field_code_of_category),HXWebJS.Core.IsStringNullOrEmpty(l)&&(l="-"),i=$.inArray(l,c),s?_=HXWebChartControl._build_chart_point_multi_values(t.options._arr_value_fields_list,objHXXmlNode):(r=objHXXmlNode.GetAttributeValue(t.field_code_of_value),_=HXWebJS.Utility.ConvertToNumber(r)),o.data[i]=_;var h=null;return"category_name_list"==t._legend_data_source?h=c.slice():"series_name_list"==t._legend_data_source&&(h=b.slice()),{category_data:c.slice(),series_data:p,legend_data:h}},HXWebChartControl._get_chart_data_detail_normal=function(e,t,n){for(var o,_,l,a,r,i,d,s=!HXWebJS.Core.IsStringNullOrEmpty(t.field_code_of_category),c=!HXWebJS.Core.IsStringNullOrEmpty(t.field_code_of_series),b=t._arr_value_fields_list.length>1,p=[],u=[],m=[],h=0;h<n.length;h++)objHXXmlNode=n[h],a="",c?(a=objHXXmlNode.GetAttributeValue(t.field_code_of_series),HXWebJS.Core.IsStringNullOrEmpty(a)&&(a="-"),(d=$.inArray(a,u))<0?(u.push(a),o={name:a,type:t._formal_chart_type,data:[]},m.push(o)):o=m[d]):0==m.length?(o={type:t._formal_chart_type,data:[]},m.push(o)):o=m[0],s?(l=objHXXmlNode.GetAttributeValue(t.field_code_of_category),HXWebJS.Core.IsStringNullOrEmpty(l)&&(l="-"),$.inArray(l,p)<0&&p.push(l),_={name:l,value:null}):_={value:null},b?_.value=HXWebChartControl._build_chart_point_multi_values(t._arr_value_fields_list,objHXXmlNode):(r=objHXXmlNode.GetAttributeValue(t.field_code_of_value),i=HXWebJS.Utility.ConvertToNumber(r),_.value=i),o.data.push(_);var f=null;return"category_name_list"==t._legend_data_source?f=p.slice():"series_name_list"==t._legend_data_source&&(f=u.slice()),{category_data:p.slice(),series_data:m,legend_data:f}},HXWebChartControl._build_chart_point_multi_values=function(e,t){for(var n,o,_,l=[],a=0;a<e.length;a++)(_=e[a]).indexOf(":")>0?(arrTemp=_.split(/:/g),n=arrTemp[0],o="STRING"!=arrTemp[1]):(n=_,o=!0),_=t.GetAttributeValue(n),l.push(o?parseFloat(_):_);return l},HXWebChartControl._set_misc_necessary_options=function(e,t){if("scatter"==e.chart_type||"effectscatter"==e.chart_type){t.xAxis={splitLine:{lineStyle:{type:"dashed"}},scale:!0},t.yAxis={splitLine:{lineStyle:{type:"dashed"}},scale:!0};for(o=0;o<t.series.length;o++)t.series[o].symbolSize=function(e){return e[2]}}else if("radar"==e.chart_type){for(var n=[],o=0;o<e._arr_value_fields_list.length;o++)n.push({name:e._arr_value_fields_list[o]});t.radar={indicator:n}}else if("map"==e.chart_type){var _=e.map_type;_=HXWebJS.Core.IsStringNullOrEmpty(_)?"china":_.toLowerCase();var l=$.inArray(_,["anhui","aomen","beijing","chongqing","fujian","gansu","guangdong","guangxi","guizhou","hainan","hebei","heilongjiang","henan","hubei","hunan","jiangsu","jiangxi","jilin","liaoning","neimenggu","ningxia","qinghai","shandong","shanghai","shanxi","shanxi1","sichuan","taiwan","tianjin","xianggang","xinjiang","xizang","yunnan","zhejiang"]);l>=0&&(_=["安徽","澳门","北京","重庆","福建","甘肃","广东","广西","贵州","海南","河北","黑龙江","河南","湖北","湖南","江苏","江西","吉林","辽宁","内蒙古","宁夏","青海","山东","上海","山西","陕西","四川","台湾","天津","香港","新疆","西藏","云南","浙江"][l]);for(o=0;o<t.series.length;o++)t.series[o].map=_;t.visualMap={calculable:!0}}},HXWebCalendarControl={},HXWebCalendarControl._Internal={},HXWebCalendarControl.register=function(e,t){HXWebCalendarControl._Internal._registed_elements_info||(HXWebCalendarControl._Internal._registed_elements_info={}),null==t&&(t={}),t.calendar_control_id=e,HXWebCalendarControl._options_check(t);HXWebCalendarControl._Internal._registed_elements_info[e]||(HXWebCalendarControl._Internal._registed_elements_info[e]=t)},HXWebCalendarControl.set_options=function(e,t){if(null!=t&&HXWebCalendarControl._Internal._registed_elements_info){var n=HXWebCalendarControl._Internal._registed_elements_info[e];null!=n&&(null!=t.extra_week_lines&&(n.extra_week_lines=t.extra_week_lines),null!=t.show_calendar_title&&(n.show_calendar_title=t.show_calendar_title),null!=t.show_prevnextmonth_btn&&(n.show_prevnextmonth_btn=t.show_prevnextmonth_btn),null!=t.show_prevnextyear_btn&&(n.show_prevnextyear_btn=t.show_prevnextyear_btn),null!=t.first_week_day&&(n.first_week_day=t.first_week_day),null!=t.onperiodchanged_callback&&(n.onperiodchanged_callback=t.onperiodchanged_callback),null!=t.ondatecellformat_callback&&(n.ondatecellformat_callback=t.ondatecellformat_callback),null!=t.ondatecellclicked_callback&&(n.ondatecellclicked_callback=t.ondatecellclicked_callback),null!=t.extend_web_part_html_id&&(n.extend_web_part_html_id=t.extend_web_part_html_id),null!=t.pagexmlsvc_class_name&&(n.pagexmlsvc_class_name=t.pagexmlsvc_class_name),HXWebCalendarControl._options_check(n))}},HXWebCalendarControl._options_check=function(e){null==e.extra_week_lines&&(e.extra_week_lines=0),(e.extra_week_lines<0||e.extra_week_lines>4)&&(e.extra_week_lines=0),e.first_week_day||(e.first_week_day=0),(e.first_week_day<0||e.first_week_day>6)&&(e.first_week_day=0)},HXWebCalendarControl.set_calendar_period=function(e,t){if(null!=e&&HXWebCalendarControl._Internal._registed_elements_info){var n=HXWebCalendarControl._Internal._registed_elements_info[e];null!=n&&(t=null==t||isNaN(t)?parseInt(HXWebJS.Utility.FormatDateTime(new Date,1)/100):parseInt(t),n.current_period=t,HXWebCalendarControl._Internal._create_calendar_area(n),HXWebCalendarControl._Internal._set_dateofmonth_content(n))}},HXWebCalendarControl.get_calendar_period=function(e){if(null!=e&&HXWebCalendarControl._Internal._registed_elements_info){var t=HXWebCalendarControl._Internal._registed_elements_info[e];if(null!=t)return t.current_period}},HXWebCalendarControl.set_customized_cell_template=function(e,t){if(!HXWebJS.Core.IsStringNullOrEmpty(t)&&null!=e&&HXWebCalendarControl._Internal._registed_elements_info){var n=HXWebCalendarControl._Internal._registed_elements_info[e];if(null!=n){n.date_cell_html_template=t;var o=document.getElementById(n.calendar_control_id);if(null!=o){var _=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",o);null!=_&&($(_).find("#td_hxwebcalendar_cell").html(t),HXWebCalendarControl._Internal._set_dateofmonth_content(n))}}}},HXWebCalendarControl._Internal._create_calendar_area=function(e){var t=document.getElementById(e.calendar_control_id);if(null!=t&&!HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",t)){var n=new HXWebStringBuilder;n.append('<table id="hxwebcalendarcontrol_calendar_table" cellpadding="0" cellspacing="0" class="hxtbl_grid"'),n.append(' hxpage_click_handler="hxcontrol.HXWebCalendarControl.calendar_area_clicked" hxwebcalendarcontrol_code="'+e.calendar_control_id+'">'),n.append('<tr id=hxwebcalendarcontrol_calendar_topicline><td colspan=7 style="vertical-align:middle;"><div style="width:100%;text-align:center;vertical-align:middle;">'),n.append('<span id="hxwebcalendarcontrol__prevyear_btn" class="fa fa-angle-double-left"></span>'),n.append('<span id="hxwebcalendarcontrol__prevmonth_btn" class="fa fa-angle-left"></span>'),n.append('<span id=hxwebcalendarcontrol__curr_period_lbl style="cursor:pointer" /><span id="hxwebcalendarcontrol__curr_period_btn" class="fa fa-caret-down" style="cursor:pointer;margin-left:4px;"></span>'),n.append('<span id="hxwebcalendarcontrol__nextyear_btn" class="fa fa-angle-double-right"></span>'),n.append('<span id="hxwebcalendarcontrol__nextmonth_btn" class="fa fa-angle-right"></span>'),n.append("</div></td></tr>"),n.append("<tr id=hxwebcalendarcontrol_calendar_weekline><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>");var o=e.extra_week_lines,_=e.date_cell_html_template;HXWebJS.Core.IsStringNullOrEmpty(_)&&(_="<div id=hxwebcalendarcontrol_cell_container><span id=hxwebcalendarcontrol_cell_text></span></div>");for(var l=0;l<6+o;l++){n.append("<tr id=hxwebcalendarcontrol_calendar_dataline_"+l.toString()+" class=dataline>");for(s=0;s<7;s++)n.append('<td id=td_hxwebcalendar_cell hx_cell_index="'+(7*l+s).toString()+'">'),n.append(_),n.append("</td>");n.append("</tr>")}n.append("</table>");var a=HXWebJS.DOM.CreateElement(n.toString());t.appendChild(a),$("#hxwebcalendarcontrol_calendar_topicline",t)[0].style.display=0==e.show_calendar_title?"none":"",$("#hxwebcalendarcontrol__prevyear_btn",t)[0].style.display=0==e.show_prevnextyear_btn?"none":"",$("#hxwebcalendarcontrol__nextyear_btn",t)[0].style.display=0==e.show_prevnextyear_btn?"none":"",$("#hxwebcalendarcontrol__prevmonth_btn",t)[0].style.display=0==e.show_prevnextmonth_btn?"none":"",$("#hxwebcalendarcontrol__nextmonth_btn",t)[0].style.display=0==e.show_prevnextmonth_btn?"none":"";for(var r,i=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_weekline",t),d=HXWebJS.Controls._Internal._GetCalendarTextContent(),s=0;s<7;s++)r=(7-e.first_week_day+s)%7,HXWebJS.DOM.SetElementInnerText(i.cells[r],d.text_of_weekday[s]);var c=6-e.first_week_day,b=(7-e.first_week_day)%7;$(i.cells[c]).addClass("weekend"),$(i.cells[b]).addClass("weekend");var p={ondatachoosed_callback:HXWebCalendarControl._Internal._manual_period_input_changed};HXWebMonthPickerControl.register("hxwebcalendarcontrol__curr_period_lbl","hxwebcalendarcontrol__curr_period_btn",p)}},HXWebCalendarControl._Internal._set_dateofmonth_content=function(e){var t=document.getElementById(e.calendar_control_id);if(null!=t){var n=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_table",t),o=parseInt(e.current_period/100),_=e.current_period%100,l=e.extra_week_lines,a=HXWebJS.Controls._Internal._GetCalendarTextContent(),r=a.text_of_period_template.replace(/{Y}/gi,o),i=a.text_of_month[_-1];r=(r=r.replace(/{MM}/gi,i)).replace(/{M}/gi,_);var d=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol__curr_period_lbl",n);null!=d&&HXWebJS.DOM.SetElementInnerText(d,r);var s=new Date(o,_-1,1),c=s.getDay(),b=new Date;b=new Date(b.getFullYear(),b.getMonth(),b.getDate());var p=new Date(o,_-1,1-c+e.first_week_day);p>s&&(p=HXWebJS.Utility.DateAdd(p,"d",-7));for(var u=0;u<42+7*l;u++)HXWebCalendarControl._Internal._set_single_cell_date_value(e,n,u,HXWebJS.Utility.FormatDateTime(p,1),p.getMonth()==_-1,p.valueOf()==b.valueOf(),p),p=new Date(p.getFullYear(),p.getMonth(),p.getDate()+1)}},HXWebCalendarControl._Internal._set_single_cell_date_value=function(e,t,n,o,_,l,a){var r=parseInt(n/7),i=n%7,d=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_calendar_dataline_"+r,t,"tr").cells[i],s=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_cell_container",d);l?HXWebJS.DOM.CSSClass.AddClass(s,"today_cell"):HXWebJS.DOM.CSSClass.RemoveClass(s,"today_cell"),_?(HXWebJS.DOM.CSSClass.AddClass(s,"currentmonth_cell"),HXWebJS.DOM.CSSClass.RemoveClass(s,"othermonth_cell")):(HXWebJS.DOM.CSSClass.RemoveClass(s,"currentmonth_cell"),HXWebJS.DOM.CSSClass.AddClass(s,"othermonth_cell"));var c=a.getDay();0==c||6==c?HXWebJS.DOM.CSSClass.AddClass(s,"weekend"):HXWebJS.DOM.CSSClass.RemoveClass(s,"weekend");var b=HXWebJS.DOM.FindFirstElementById("hxwebcalendarcontrol_cell_text",d,"span");HXWebJS.DOM.SetElementInnerText(b,parseInt(o%100)),null!=e.ondatecellformat_callback&&e.ondatecellformat_callback(e.calendar_control_id,o,s,b,_,l,a)},HXWebCalendarControl._OnHXControlClickHandlerProcess=function(e,t){var n=t.currentTarget,o=$(n).attr("hxwebcalendarcontrol_code"),_=HXWebCalendarControl._Internal._registed_elements_info[o];if(_){var l=t.target;if("hxwebcalendarcontrol__curr_period_lbl"!=l.id&&"hxwebcalendarcontrol__curr_period_btn"!=l.id){t.stopPropagation();_.current_period,l.tagName.toLowerCase();var a=l.id;if("hxwebcalendarcontrol__prevmonth_btn"!=a)if("hxwebcalendarcontrol__nextmonth_btn"!=a)if("hxwebcalendarcontrol__prevyear_btn"!=a)if("hxwebcalendarcontrol__nextyear_btn"!=a)if("td_hxwebcalendar_cell"!=a){var r=$(l).parents("#td_hxwebcalendar_cell");if(r.length>0){i=parseInt(r.attr("hx_cell_index"));HXWebCalendarControl._Internal._trigger_date_cell_clicked_event(_,i,r.get(0))}else;}else{var i=parseInt(l.getAttribute("hx_cell_index"));HXWebCalendarControl._Internal._trigger_date_cell_clicked_event(_,i,l)}else HXWebCalendarControl._Internal._nav_active_month(_,"nextyear");else HXWebCalendarControl._Internal._nav_active_month(_,"prevyear");else HXWebCalendarControl._Internal._nav_active_month(_,"nextmonth");else HXWebCalendarControl._Internal._nav_active_month(_,"prevmonth")}}},HXWebCalendarControl._Internal._nav_active_month=function(e,t){var n,o=e.current_period;switch(t){case"prevmonth":n=1==parseInt(o%100)?100*(parseInt(o/100)-1)+12:o-1;break;case"nextmonth":n=12==parseInt(o%100)?100*(parseInt(o/100)+1)+1:o+1;break;case"prevyear":n=100*(parseInt(o/100)-1)+parseInt(o%100);break;case"nextyear":n=100*(parseInt(o/100)+1)+parseInt(o%100)}e.current_period=n,HXWebCalendarControl._Internal._set_dateofmonth_content(e),$(document.getElementById(e.calendar_control_id)).find(".current_clicked_cell").removeClass("current_clicked_cell"),null!=e.onperiodchanged_callback&&e.onperiodchanged_callback(e.calendar_control_id,o,n)},HXWebCalendarControl._Internal._trigger_date_cell_clicked_event=function(e,t,n){if($(document.getElementById(e.calendar_control_id)).find(".current_clicked_cell").removeClass("current_clicked_cell"),$(n).addClass("current_clicked_cell"),null!=e.ondatecellclicked_callback){var o=e.current_period,_=parseInt(o/100),l=o%100,a=new Date(_,l-1,1),r=a.getDay(),i=new Date(_,l-1,1-r+e.first_week_day);i>a&&(i=HXWebJS.Utility.DateAdd(i,"d",-7)),i.setDate(i.getDate()+parseInt(t));var d=HXWebJS.Utility.FormatDateTime(i,1);e.ondatecellclicked_callback(e.calendar_control_id,d,n)}},HXWebCalendarControl._Internal._manual_period_input_changed=function(e,t,n){if(null!=t&&!isNaN(t)){var o=$(n).parents("#hxwebcalendarcontrol_calendar_table").attr("hxwebcalendarcontrol_code");if(null!=o&&HXWebCalendarControl._Internal._registed_elements_info){var _=HXWebCalendarControl._Internal._registed_elements_info[o];if(null!=_){var l=_.current_period;_.current_period=t,HXWebCalendarControl._Internal._set_dateofmonth_content(_),null!=_.onperiodchanged_callback&&_.onperiodchanged_callback(_.calendar_control_id,l,t)}}}},HXWebTabControl={},HXWebTabControl._Internal={},HXWebTabControl.register=function(e,t){HXWebTabControl._Internal._registed_elements_info||(HXWebTabControl._Internal._registed_elements_info={}),null==t&&(t={}),t.web_control_id=e,HXWebTabControl._options_check(t);HXWebTabControl._Internal._registed_elements_info[e]||(HXWebTabControl._Internal._registed_elements_info[e]=t,HXWebTabControl._Internal._init_tab_container(e,t))},HXWebTabControl.set_options=function(e,t){if(null!=t&&HXWebTabControl._Internal._registed_elements_info){var n=HXWebTabControl._Internal._registed_elements_info[e];null!=n&&(null!=t.layout_direction&&(n.layout_direction=t.layout_direction),null!=t.use_scroll_mode&&(n.use_scroll_mode=t.use_scroll_mode),null!=t.tab_icon_mode&&(n.tab_icon_mode=t.tab_icon_mode),null!=t.remove_tab_ondbclick&&(n.remove_tab_ondbclick=t.remove_tab_ondbclick),null!=t.onbeforetabchanged_callback&&(n.onbeforetabchanged_callback=t.onbeforetabchanged_callback),null!=t.onaftertabchanged_callback&&(n.onaftertabchanged_callback=t.onaftertabchanged_callback),null!=t.onbeforetabremoved_callback&&(n.onbeforetabremoved_callback=t.onbeforetabremoved_callback),null!=t.onaftertabremoved_callback&&(n.onaftertabremoved_callback=t.onaftertabremoved_callback),HXWebTabControl._options_check(t))}},HXWebTabControl._options_check=function(e){HXWebJS.Core.IsStringNullOrEmpty(e.layout_direction)?e.layout_direction="horizontal":(e.layout_direction=e.layout_direction.toString().trim().toLowerCase(),"horizontal"!=e.layout_direction&&"vertical"!=e.layout_direction&&(e.layout_direction="horizontal")),"use_css_icon"!=e.tab_icon_mode&&"use_img_icon"!=e.tab_icon_mode&&(e.tab_icon_mode="no")},HXWebTabControl.option={layout_direction:void 0,use_scroll_mode:void 0,tab_icon_mode:void 0,remove_tab_ondbclick:void 0,onbeforetabchanged_callback:void 0,onaftertabchanged_callback:void 0,onbeforetabremoved_callback:void 0,onaftertabremoved_callback:void 0},HXWebTabControl._Internal._init_tab_container=function(e,t){objExternalContainer=document.getElementById(e);var n=HXWebJS.DOM.CreateElement('<div class="hxwebtabcontrol__container '+t.layout_direction+'"></div>');if(objExternalContainer.appendChild(n),t.use_scroll_mode){var o=new HXWebStringBuilder;o.append('<span class="hxwebtabcontrol__scroll_btns_area" >'),"vertical"==t.layout_direction?(o.append('<span class="hxwebtabcontrol__scroll_up_btn hxcolor_info fa fa-chevron-circle-up"></span>'),o.append('<span class="hxwebtabcontrol__scroll_down_btn hxcolor_info fa fa-chevron-circle-down"></span>')):(o.append('<span class="hxwebtabcontrol__scroll_left_btn hxcolor_info fa fa-chevron-circle-left"></span>'),o.append('<span class="hxwebtabcontrol__scroll_right_btn hxcolor_info fa fa-chevron-circle-right"></span>')),o.append("</span>"),n.appendChild(HXWebJS.DOM.CreateElement(o.toString()))}t.container_object=n,HXWebJS.EventManager.AddListener(n,"click",HXWebTabControl._Internal._onclickprocess),HXWebJS.EventManager.AddListener(n,"dblclick",HXWebTabControl._Internal._ondblclickprocess)},HXWebTabControl.add_tab=function(e,t,n,o){if(HXWebTabControl._Internal._registed_elements_info){var _=HXWebTabControl._Internal._registed_elements_info[e];if(null!=_){var l=!1,a=!1,r="",i=!1;null!=o&&(l=1==o.is_selected,a=1==o.show_remove_icon,i=1==o.is_disabled,r=null==o.icon_class?"":o.icon_class);var d=new HXWebStringBuilder;d.append('<span class="hxwebtabcontrol__tab '+(l?"hxtab_selected":"hxtab_unselected")+(i?" hxtab_disabled":"")+'"'),d.append(' hxwebtabcontrol__allow_removed="'+(a?"1":"0")+'"'),d.append(' hxwebtabcontrol__tab_id="'+t+'">'),"use_css_icon"==_.tab_icon_mode?d.append('<span class="hxwebtabcontrol__tab_css_icon hxcolor_primary '+r+'" ></span>'):"use_img_icon"==_.tab_icon_mode&&d.append('<img class="hxwebtabcontrol__tab_img_icon '+r+'" src="../hximages_v6/hxpub_clear.gif" />'),d.append('<span class="hxwebtabcontrol__tab_text_area'+(1!=_.tab_text_allow_wrap?" hxtxt_nowrap":"")+'">'),d.append(n),d.append("</span>"),a&&d.append('<span class="hxwebtabcontrol__tab_remove_btn fa fa-close" ></span>'),d.append(" </span>");var s=HXWebJS.DOM.CreateElement(d.toString());_.container_object.appendChild(s),"use_img_icon"==_.tab_icon_mode&&(HXWebJS.Core.IsStringNullOrEmpty(o.image_src)||$("img.hxwebtabcontrol__tab_img_icon",s).attr("src",o.image_src)),HXWebTabControl._Internal._showhide_scroll_button(_),l&&HXWebTabControl._Internal._tab_changed_process(s,_,!0)}}},HXWebTabControl.fill_tabs=function(e,t){if(null!=t&&null!=t.length)for(var n,o,_,l=0;l<t.length;l++)n=(_=t[l]).tab_id,o=_.tab_text,HXWebTabControl.add_tab(e,n,o,_)},HXWebTabControl.disable_tab=function(e,t,n){if(HXWebTabControl._Internal._registed_elements_info){var o=HXWebTabControl._Internal._registed_elements_info[e];if(null!=o){var _=HXWebTabControl._Internal._find_specified_tab(t,o);null!=_&&(null==n&&(n=!0),HXWebJS.DOM.CSSClass.ToggleClass(_,"hxtab_disabled",n))}}},HXWebTabControl.remove_tab=function(e,t){if(HXWebTabControl._Internal._registed_elements_info){var n=HXWebTabControl._Internal._registed_elements_info[e];if(null!=n){var o,_;if("string"==typeof t){if(o=t,null==(_=HXWebTabControl._Internal._find_specified_tab(o,n)))return}else if(_=t,o=HXWebJS.DOM.GetElementAttributeValue(_,"hxwebtabcontrol__tab_id"),HXWebJS.Core.IsStringNullOrEmpty(o))return;if("0"!=_.getAttribute("hxwebtabcontrol__allow_removed")){if(null!=n.onbeforetabremoved_callback){var l=n.onbeforetabremoved_callback(n.web_control_id,o);if(null!=l&&0==l)return void console.log("onbeforetabremoved_callback()回调函数返回false撤消了本次删除操作！tab id:"+o)}if(o==n.current_selected_tab_id){var a=$(_).nextAll(":not(.hxtab_disabled)");if(0==a.length&&(a=$(_).prevAll(":not(.hxtab_disabled)")),0==a.length)return void console.log("当前节点是唯一有效标签按钮，不允许被删除。tab id:"+o);HXWebTabControl._Internal._tab_changed_process(a[0],n,!0)}var r=n.container_object;$(".hxwebtabcontrol__scroll_btns_area",r).css("display","none"),r.removeChild(_),null!=n.onaftertabremoved_callback&&n.onaftertabremoved_callback(n.web_control_id,o),HXWebTabControl._Internal._showhide_scroll_button(n)}else console.log("标记禁止移除的标签按钮不能被移除！tab id:"+o)}}},HXWebTabControl.select_tab=function(e,t,n){if(HXWebTabControl._Internal._registed_elements_info){var o=HXWebTabControl._Internal._registed_elements_info[e];if(null!=o){var _=HXWebTabControl._Internal._find_specified_tab(t,o);HXWebTabControl._Internal._set_active_tab(_,n)}}},HXWebTabControl.get_selected_tab_id=function(e){if(HXWebTabControl._Internal._registed_elements_info){var t=HXWebTabControl._Internal._registed_elements_info[e];if(null!=t)return t.current_selected_tab_id}},HXWebTabControl._Internal._find_specified_tab=function(e,t){var n=t.container_object,o=$("span[hxwebtabcontrol__tab_id='"+e+"']",n);return o.length>0?o[0]:null},HXWebTabControl._Internal._onclickprocess=function(e){var t=e.target;{if(!HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__tab_remove_btn"))return HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__scroll_up_btn")?(e.stopPropagation(),void HXWebTabControl._Internal._doscroll($(t).parents(".hxwebtabcontrol__container")[0].parentNode.id,"up")):HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__scroll_down_btn")?(e.stopPropagation(),void HXWebTabControl._Internal._doscroll($(t).parents(".hxwebtabcontrol__container")[0].parentNode.id,"down")):HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__scroll_left_btn")?(e.stopPropagation(),void HXWebTabControl._Internal._doscroll($(t).parents(".hxwebtabcontrol__container")[0].parentNode.id,"left")):HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__scroll_right_btn")?(e.stopPropagation(),void HXWebTabControl._Internal._doscroll($(t).parents(".hxwebtabcontrol__container")[0].parentNode.id,"right")):void(HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__tab")?HXWebTabControl._Internal._set_active_tab(t):HXWebJS.DOM.CSSClass.HasClass(t.parentNode,"hxwebtabcontrol__tab")&&HXWebTabControl._Internal._set_active_tab(t.parentNode));e.stopPropagation();var n=$(t).parents(".hxwebtabcontrol__tab")[0],o=n.parentNode.parentNode.id;HXWebTabControl.remove_tab(o,n)}},HXWebTabControl._Internal._set_active_tab=function(e,t){var n=$(e).parents(".hxwebtabcontrol__container");if(0!=n.length){var o=n.parent()[0].id;if(HXWebTabControl._Internal._registed_elements_info){var _=HXWebTabControl._Internal._registed_elements_info[o];null!=_&&(HXWebJS.DOM.CSSClass.HasClass(e,"hxtab_disabled")||HXWebTabControl._Internal._tab_changed_process(e,_,t))}}},HXWebTabControl._Internal._tab_changed_process=function(e,t,n){var o=t.current_selected_tab_id,_=t.current_selected_tab_button,l=e.getAttribute("hxwebtabcontrol__tab_id");if(HXWebJS.Core.IsStringNullOrEmpty(l))return!1;if(HXWebJS.Core.IsStringNullOrEmpty(o)&&(o=""),l!=o||n){if(null!=t.onbeforetabchanged_callback){var a=t.onbeforetabchanged_callback(t.web_control_id,l,o);if(null!=a&&0==a)return console.log("onbeforetabchanged_callback()回调函数返回false撤消了本次标签按钮切换操作。from tab id:"+o+",to tab id:"+l),!1}return null!=_&&(HXWebJS.DOM.CSSClass.RemoveClass(_,"hxtab_selected"),HXWebJS.DOM.CSSClass.AddClass(_,"hxtab_unselected")),HXWebJS.DOM.CSSClass.RemoveClass(e,"hxtab_unselected"),HXWebJS.DOM.CSSClass.AddClass(e,"hxtab_selected"),t.current_selected_tab_id=l,t.current_selected_tab_button=e,null!=t.onaftertabchanged_callback&&t.onaftertabchanged_callback(t.web_control_id,l,o),!0}},HXWebTabControl._Internal._showhide_scroll_button=function(e){if(1==e.use_scroll_mode){var t=e.layout_direction,n=e.container_object,o=$(".hxwebtabcontrol__scroll_btns_area",n)[0];"horizontal"==t?n.scrollWidth>n.offsetWidth||n.scrollHeight>n.offsetHeight?(o.style.right=-1*n.scrollLeft+"px",o.style.display=""):o.style.display="none":n.scrollHeight>n.offsetHeight?(o.style.bottom=-1*n.scrollTop+"px",o.style.display=""):o.style.display="none"}},HXWebTabControl._Internal._doscroll=function(e,t){if(HXWebTabControl._Internal._registed_elements_info){var n=HXWebTabControl._Internal._registed_elements_info[e];if(null!=n){var o=n.container_object;if("left"==t){if(o.scrollLeft<=0)return;(l=o.scrollLeft-100)<0&&(l=0),o.scrollLeft=l,$(".hxwebtabcontrol__scroll_btns_area",o).css("right",-1*l+"px")}else if("right"==t){var _=o.scrollWidth-o.offsetWidth;if(o.scrollLeft>=_)return;var l=o.scrollLeft+100;l>_&&(l=_),o.scrollLeft=l,$(".hxwebtabcontrol__scroll_btns_area",o).css("right",-1*l+"px")}else if("up"==t){if(o.scrollTop<=0)return;(r=o.scrollTop-32)<0&&(r=0),o.scrollTop=r,$(".hxwebtabcontrol__scroll_btns_area",o).css("bottom",-1*r+"px")}else if("down"==t){var a=o.scrollHeight-o.offsetHeight;if(o.scrollTop>=a)return;var r=o.scrollTop+32;r>a&&(r=a),o.scrollTop=r,$(".hxwebtabcontrol__scroll_btns_area",o).css("bottom",-1*r+"px")}}}},HXWebTabControl._Internal._ondblclickprocess=function(e){var t=e.target,n=$(t).parents(".hxwebtabcontrol__container");if(0!=n.length){var o=n[0].parentNode.id;if(HXWebTabControl._Internal._registed_elements_info){var _=HXWebTabControl._Internal._registed_elements_info[o];if(null!=_&&1==_.remove_tab_ondbclick){var l;if(HXWebJS.DOM.CSSClass.HasClass(t,"hxwebtabcontrol__tab"))l=t;else{if(!HXWebJS.DOM.CSSClass.HasClass(t.parentNode,"hxwebtabcontrol__tab"))return;l=t.parentNode}HXWebJS.DOM.CSSClass.HasClass(l,"hxtab_disabled")||"0"!=HXWebJS.DOM.GetElementAttributeValue(l,"hxwebtabcontrol__allow_removed")&&HXWebTabControl.remove_tab(o,l)}}}},HXWebFormulaEditorControl={},HXWebFormulaEditorControl._Internal={},HXWebFormulaEditorControl.register=function(e,t){HXWebFormulaEditorControl._Internal._registed_elements_info||(HXWebFormulaEditorControl._Internal._registed_elements_info={}),null==t&&(t={}),t.editor_control_id=e,HXWebFormulaEditorControl._options_check(t);HXWebFormulaEditorControl._Internal._registed_elements_info[e]||(HXWebFormulaEditorControl._Internal._registed_elements_info[e]=t)},HXWebFormulaEditorControl.set_options=function(e,t){if(null!=t&&HXWebFormulaEditorControl._Internal._registed_elements_info){var n=HXWebFormulaEditorControl._Internal._registed_elements_info[e];null!=n&&(null!=t.binding_datasrc_id&&(n.binding_datasrc_id=t.binding_datasrc_id),null!=t.binding_datafld&&(n.binding_datafld=t.binding_datafld),null!=t.binding_descfld&&(n.binding_descfld=t.binding_descfld),null!=t.read_only&&(n.read_only=t.read_only),null!=t.treeview_setting_code_of_parameters&&(n.treeview_setting_code_of_parameters=t.treeview_setting_code_of_parameters),null!=t.sample_expression&&(n.sample_expression=t.sample_expression),null!=t.ongetparamfilterdata_callback&&(n.ongetparamfilterdata_callback=t.ongetparamfilterdata_callback),HXWebFormulaEditorControl._options_check(n))}},HXWebFormulaEditorControl._options_check=function(e){HXWebJS.Core.IsStringNullOrEmpty(e.sample_expression)&&(e.sample_expression="var today = DateTime.Today;\r\n\r\n if (today.Month==12)\r\n   return true;/*年底最后一个月*/\r\nelse\r\n   return false;")},HXWebFormulaEditorControl.init_editor=function(e){if(null!=e&&HXWebFormulaEditorControl._Internal._registed_elements_info){var t=HXWebFormulaEditorControl._Internal._registed_elements_info[e];if(null!=t){HXWebFormulaEditorControl._Internal._create_editor_area(t);var n=t.binding_descfld,o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(t.binding_datasrc_id).SelectSingleNode("//RS_ROW/@"+t.binding_datafld.toUpperCase()).GetText();if(HXWebJS.Core.IsStringNullOrEmpty(n))$("#"+t.editor_control_id+" #hxwebjs_formula_editor__textarea_container_div textarea").val(o);else{var _=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(t.binding_datasrc_id).SelectSingleNode("//RS_ROW/@"+t.binding_descfld.toUpperCase()).GetText(),l=HXWebFormulaEditorControl._Internal._parse_formula_desc_info(_),a=l.forumla_content_with_placeholder;HXWebJS.Core.IsStringNullOrEmpty(a)&&(a=o),$("#"+t.editor_control_id+" #hxwebjs_formula_editor__textarea_container_div textarea").val(a),t._current_formula_placeholder_map_list=l.formula_placeholder_map_list}HXWebFormulaEditorControl.read_only_format(e,t.read_only)}}},HXWebFormulaEditorControl.read_only_format=function(e,t){if(null!=e&&HXWebFormulaEditorControl._Internal._registed_elements_info){var n=HXWebFormulaEditorControl._Internal._registed_elements_info[e];if(null!=n){n.read_only=!!t;var o=$("#"+n.editor_control_id)[0];null!=o&&$("#hxwebjs_formula_editor__editor_container_div",o)[0]&&($("textarea",o).attr("readonly",n.read_only),$("button",o).attr("disabled",n.read_only))}}},HXWebFormulaEditorControl._Internal._create_editor_area=function(e){if(null!=document.getElementById(e.editor_control_id)){var t=$("#"+e.editor_control_id)[0];if(!$("#hxwebjs_formula_editor__editor_container_div",t)[0]){var n=new HXWebStringBuilder;n.append('<div id="hxwebjs_formula_editor__editor_container_div"'),n.append(' hxwebformulaeditorcontrol_code="'+e.editor_control_id+'">');var o="hxwebjs_formula_editor__treeview_container_div__"+e.editor_control_id;n.append('<div id="'+o+'" class="treeview_container hxscrollbar"></div>'),n.append('<div id="hxwebjs_formula_editor__expression_container_div">'),n.append('<div id="hxwebjs_formula_editor__operator_container_div"  hxpage_click_handler="hxcontrol.HXWebFormulaEditorControl._operator_area_clicked">'),n.append('<button id="hxwebjs_editor__plus_btn" class="hxbtn small orange"><span>+</span></button>'),n.append('<button id="hxwebjs_editor__minus_btn" class="hxbtn small orange"><span>-</span></button>'),n.append('<button id="hxwebjs_editor__multiply_btn" class="hxbtn small orange"><span>*</span></button>'),n.append('<button id="hxwebjs_editor__divide_btn" class="hxbtn small orange"><span>/</span></button>'),n.append('<button id="hxwebjs_editor__parenthesis_left_btn" class="hxbtn small orange"><span>(</span></button>'),n.append('<button id="hxwebjs_editor__parenthesis_right_btn" class="hxbtn small orange"><span>)</span></button>'),n.append('<button id="hxwebjs_editor__greater_than_btn" class="hxbtn small orange"><span>></span></button>'),n.append('<button id="hxwebjs_editor__greater_equal_btn" class="hxbtn small orange"><span>>=</span></button>'),n.append('<button id="hxwebjs_editor__less_than_btn" class="hxbtn small orange"><span><</span></button>'),n.append('<button id="hxwebjs_editor__less_equal_btn" class="hxbtn small orange"><span><=</span></button>'),n.append('<button id="hxwebjs_editor__equal_btn" class="hxbtn small orange"><span>==</span></button>'),n.append('<button id="hxwebjs_editor__not_equal_btn" class="hxbtn small orange"><span>!=</span></button>'),n.append('<button id="hxwebjs_editor__or_btn" class="hxbtn small orange"><span>or</span></button>'),n.append('<button id="hxwebjs_editor__and_btn" class="hxbtn small orange"><span>and</span></button>'),n.append('<button id="hxwebjs_editor__if_btn" class="hxbtn small orange"><span>if</span></button>'),n.append('<button id="hxwebjs_editor__else_btn" class="hxbtn small orange"><span>else</span></button>'),n.append('<button id="hxwebjs_editor__return_btn" class="hxbtn small orange"><span>return</span></button>'),n.append("</div>"),n.append('<div id="hxwebjs_formula_editor__textarea_container_div">'),n.append('<textarea style="height:100%;" class="hxinputbox not_allow_pick" wrap="hard"></textarea>'),n.append("</div>");var _=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBFORMULAEDITOR_RESOURCE_STRING",!0).split(";");n.append('<div id="hxwebjs_formula_editor__command_container_div" style="padding-right:10px;text-align:right;"  hxpage_click_handler="hxcontrol.HXWebFormulaEditorControl._command_area_clicked">'),n.append('<button id="hxwebjs_formula_editor__sample_btn" class="hxbtn small default">'),n.append('<span class="fa fa-file-text-o" style="margin-right:3px;"></span><span>'+_[0]+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_formula_editor__compile_validate_btn" class="hxbtn small default">'),n.append('<span class="fa fa-bug" style="margin-right:3px;color:red;"></span><span>'+_[1]+"</span>"),n.append("</button>\r\n");if(!HXWebJS.Core.IsStringNullOrEmpty(e.binding_descfld)){n.append('<button id="hxwebjs_formula_editor__view_source_btn" class="hxbtn small default">'),n.append('<span class="fa fa-link" style="margin-right:3px;_color:red;"></span><span>'+_[2]+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_formula_editor__advance_edit_btn" class="hxbtn small default">'),n.append('<span class="fa fa-cogs" style="margin-right:3px;_color:red;"></span><span>'+_[3]+"</span>"),n.append("</button>\r\n");var l=_.length>10?_[10]:"公式完整复制",a=_.length>11?_[11]:"公式完整粘贴";n.append('<button id="hxwebjs_formula_editor__copy_full_btn" class="hxbtn small default">'),n.append('<span class="fa fa-copy" style="margin-right:3px;_color:red;"></span><span>'+l+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_formula_editor__paste_full_btn" class="hxbtn small default">'),n.append('<span class="fa fa-paste" style="margin-right:3px;_color:red;"></span><span>'+a+"</span>"),n.append("</button>\r\n")}n.append("</div></div></div>"),$(t).append($(n.toString())[0]),$(t).attr("hx_is_formula_editor_container","1"),$("textarea",t).on("change",HXWebFormulaEditorControl._Internal._onformulatextareachanged);var r={treeview_setting_code:e.treeview_setting_code_of_parameters,is_auto_expandcollapse:!0,use_icon:"use_css_icon",ongetfilterdata_callback:HXWebFormulaEditorControl._Internal._treeview_on_get_filterdata,onnodeclicked_callback:HXWebFormulaEditorControl._Internal._treeview_on_node_clicked};HXWebTreeViewControl.register(o,r),HXWebTreeViewControl.init_treeview_nodes(o)}}},HXWebFormulaEditorControl._OnHXControlClickHandlerProcess=function(e,t){if("_command_area_clicked"!=e){if("_operator_area_clicked"!=e)return"_placeholder_map_list_command_clicked"==e?HXWebFormulaEditorControl._Internal._placeholder_map_list_command_clicked(t):void 0;HXWebFormulaEditorControl._Internal._operator_area_clicked(t)}else HXWebFormulaEditorControl._Internal._command_area_clicked(t)},HXWebFormulaEditorControl._Internal._treeview_on_get_filterdata=function(e){var t=$("#"+e).parents("[hx_is_formula_editor_container=1]")[0],n=HXWebFormulaEditorControl._Internal._registed_elements_info[t.id];return null!=n.ongetparamfilterdata_callback?n.ongetparamfilterdata_callback(t.id):""},HXWebFormulaEditorControl._Internal._treeview_on_node_clicked=function(e,t){var n=$("#"+e).parents("[hx_is_formula_editor_container=1]")[0],o=HXWebFormulaEditorControl._Internal._registed_elements_info[n.id];if(!o.read_only&&t.node_is_leaf){var _=!HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_2)&&"0"!=t.node_attr_2;HXWebFormulaEditorControl._Internal._insert_expression_text(o,t.node_attr_1,"["+t.node_text+"]",_)}},HXWebFormulaEditorControl._Internal._operator_area_clicked=function(e){e.stopPropagation();var t=e.target,n=t.id||t.parentNode.id,o=$(t).parents("[hx_is_formula_editor_container=1]")[0],_=HXWebFormulaEditorControl._Internal._registed_elements_info[o.id];if(null!=_&&!_.read_only){var l=n.match(/^hxwebjs_editor__(\S*)_btn$/);if(l&&2==l.length){return HXWebFormulaEditorControl._Internal._insert_expression_text(_,{plus:" + ",minus:" - ",multiply:" * ",divide:" / ",parenthesis_left:" ( ",parenthesis_right:" ) ",greater_than:" > ",greater_equal:" >= ",less_than:" < ",less_equal:" <= ",equal:" == ",not_equal:" != ",or:" || ",and:" && ",if:"if ( )\r\n{\r\n}",else:"else\r\n{\r\n}",return:"return "}[l[1]],"",!1)}}},HXWebFormulaEditorControl._Internal._command_area_clicked=function(e){e.stopPropagation();var t=e.target,n=t.id||t.parentNode.id,o=$(t).parents("[hx_is_formula_editor_container=1]")[0],_=HXWebFormulaEditorControl._Internal._registed_elements_info[o.id];if(!_.read_only){if("hxwebjs_formula_editor__sample_btn"==n){var l=$("#hxwebjs_formula_editor__textarea_container_div textarea",o);return l.val(_.sample_expression),void HXWebJS.EventManager.FireEvent(l[0],"change")}if("hxwebjs_formula_editor__compile_validate_btn"==n)return HXWebFormulaEditorControl._Internal._compile_validate(_);if("hxwebjs_formula_editor__view_source_btn"==n){var a=$("#"+_.editor_control_id+" textarea").val(),r=HXWebFormulaEditorControl._Internal._build_formula_desc_info(_,a),i=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBFORMULAEDITOR_RESOURCE_STRING",!0).split(";");return HXWebMessageBox.Show(i[4],r.forumla_content,{width:800,height:450,hide_textarea_border:!0})}if("hxwebjs_formula_editor__advance_edit_btn"==n){var d=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(_.binding_datasrc_id).SelectSingleNode("//RS_ROW/@"+_.binding_descfld.toUpperCase()).GetText();if(""==d)return;var s=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(d);if(0==s.SelectNodes(".//FORUMLA_PLACEHOLDER_LIST/PLACEHOLDER").length)return;var c=s.SelectSingleNode(".//FORUMLA_PLACEHOLDER_LIST").GetXml();if(c=c.replace(/<PLACEHOLDER\s/g,"<RS_ROW ").replace(/<\/PLACEHOLDER\s*>/g,"</RS_ROW>"),c=c.replace("<FORUMLA_PLACEHOLDER_LIST>","<RS_DATA>").replace("</FORUMLA_PLACEHOLDER_LIST>","</RS_DATA>"),null==_._current_formula_placeholder_map_list||0==_._current_formula_placeholder_map_list.GetKeys().length)return;var b=$("#divFormulaPlaceholderMapContentSettingArea");null==b||0==b.length?HXWebFormulaEditorControl._Internal._create_placeholder_map_content_setting_area(_.editor_control_id,"divFormulaPlaceholderMapContentSettingArea"):(b.css("display",""),b.attr("hxwebformulaeditorcontrol_code",_.editor_control_id)),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV();var p=$("#hxxml_data__formula_placeholder_map_content_setting");return(p=0==p.length)&&document.body.appendChild(HXWebJS.DOM.CreateElement('<hxxmldataisland id="hxxml_data__formula_placeholder_map_content_setting" content=""></hxxmldataisland>')),void HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_data__formula_placeholder_map_content_setting").ReloadXML(c)}if("hxwebjs_formula_editor__copy_full_btn"!=n)"hxwebjs_formula_editor__paste_full_btn"!=n||HXWebFormulaEditorControl._Internal._full_formula_paste_process(_);else{var a=$("#"+_.editor_control_id+" textarea").val(),u=(r=HXWebFormulaEditorControl._Internal._build_formula_desc_info(_,a)).forumla_full_xml_desc_info;if(window.clipboardData){m=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBFORMULAEDITOR__FULL_COPY_TO_CLIPBOARD_OK");window.clipboardData.setData("text",u),alert(m)}else{var m=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBFORMULAEDITOR__FULL_COPY_TO_CLIPBOARD_PLEASE_W3C");HXWebMessageBox.Show(m,u),document.getElementById("hxwebmessageboxcontrol__textarea").select()}}}},HXWebFormulaEditorControl._Internal._full_formula_paste_process=function(e){var t,n=function(t){if(!HXWebJS.Core.IsStringNullOrEmpty(t)){if(0!=t.indexOf("<FORMULA_INFO")){return console.log("接收到的完整公式数据内容格式不正确，操作被取消！"),void alert("接收到的完整公式数据内容格式不正确，操作被取消！")}var n=HXWebFormulaEditorControl._Internal._parse_formula_desc_info(t),o=n.forumla_content_with_placeholder;$("#"+e.editor_control_id+" #hxwebjs_formula_editor__textarea_container_div textarea").val(o),e._current_formula_placeholder_map_list=n.formula_placeholder_map_list,HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(e.binding_datasrc_id,e.binding_datafld,n.forumla_content),HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(e.binding_datasrc_id,e.binding_descfld,n.forumla_full_xml_desc_info)}};if(window.clipboardData){if(null==(t=window.clipboardData.getData("text"))||""==t)return strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_NO_DATA"),void alert(strMessageText);n(t)}else{strMessageText=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_PLEASE_COPY_DATA_W3C");var o={show_okcancel_button:!0,height:500,callback_after_ok_button_clicked:n};HXWebMessageBox.Show(strMessageText,"",o)}},HXWebFormulaEditorControl._Internal._placeholder_map_list_command_clicked=function(e){e.stopPropagation();var t=e.target,n=t.id||t.parentNode.id;if("hxwebjs_formula_editor__ok_btn"==n){for(var o=$(t).parents("[id='divFormulaPlaceholderMapContentSettingArea']").attr("hxwebformulaeditorcontrol_code"),_=HXWebFormulaEditorControl._Internal._registed_elements_info[o],l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_data__formula_placeholder_map_content_setting").SelectNodes("//RS_ROW"),a=new HXWebJS.Core.Dictionary,r=0,i=l.length;r<i;r++){var d=l[r].GetAttributeValue("DISPLAY_NAME"),s=l[r].GetAttributeValue("MAPPING_VALUE");a.Add(d,s)}_._current_formula_placeholder_map_list=a;var c=$("#"+o+" textarea").val(),b=HXWebFormulaEditorControl._Internal._build_formula_desc_info(_,c);HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,_.binding_datafld,b.forumla_content),HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,_.binding_descfld,b.forumla_full_xml_desc_info),$("#divFormulaPlaceholderMapContentSettingArea").css("display","none"),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!1)}else"hxwebjs_formula_editor__cancel_btn"==n&&($("#divFormulaPlaceholderMapContentSettingArea").css("display","none"),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!1))},HXWebFormulaEditorControl._Internal._create_placeholder_map_content_setting_area=function(e,t){var n=new HXWebStringBuilder,o=$(window).width(),_=$(window).height(),l=o-800<0?0:(o-800)/2,a=_-450<0?0:(_-450)/2;a+=document.documentElement.scrollTop||document.body.scrollTop;var r=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBFORMULAEDITOR_RESOURCE_STRING",!0).split(";");n.append('<div id="'+t+'" hxwebformulaeditorcontrol_code="'+e+'"'),n.append(' style="position:absolute;left:'+l+"px;top:"+a+'px;width:800px;height:450px;background-color:white;z-index:999999;">'),n.append('<div class="hxpg_section hxpg_vertical_flex_container" style="border:none;height:100%;margin-bottom:0px;">'),n.append('<div class="hxpg_section_head no_line hxtxt_decorated_line" style="flex:0 0 auto;">'),n.append('<span class="hxfld_container no_caption"><span class="hxtxt_nowrap hxtxt_left_align">'+r[5]+"</span></span>"),n.append("</div>"),n.append('<div class="hxscrollbar" style="flex:1 1 auto;overflow:auto;">'),n.append('<table id="tbl_placeholder_map_list" class="hxtbl_datalist striped bordered hover" style="table-layout:fixed;width:100%;"'),n.append(' hx_binding_datasrc="hxxml_data__formula_placeholder_map_content_setting">'),n.append('<thead><tr><td style="width:30%;text-align:center;"><span class="hxtxt_list_column_caption hxtxt_bold hxtxt_nowrap">'+r[6]+'</span></td><td style="width:70%;text-align:center;"><span class="hxtxt_list_column_caption hxtxt_bold hxtxt_nowrap">'+r[7]+"</span></td></tr></thead>"),n.append('<tbody><tr><td><span hx_binding_datasrc="hxxml_data__formula_placeholder_map_content_setting" hx_binding_datafld="display_name"></span></td><td><textarea style="height:80px;" class="hxinputbox not_allow_pick" hx_binding_datasrc="hxxml_data__formula_placeholder_map_content_setting" hx_binding_datafld="mapping_value" /></td></tr></tbody>'),n.append("</table>"),n.append("</div>"),n.append('<div style="flex:0 0 auto;text-align:right;margin-top:10px;" hxpage_click_handler="hxcontrol.HXWebFormulaEditorControl._placeholder_map_list_command_clicked">'),n.append('<button id="hxwebjs_formula_editor__ok_btn" class="hxbtn small default">'),n.append('<span class="fa fa-check" style="margin-right:3px;"></span><span>'+r[8]+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_formula_editor__cancel_btn" class="hxbtn small default">'),n.append('<span class="fa fa-close" style="margin-right:3px;"></span><span>'+r[9]+"</span>"),n.append("</button>\r\n"),n.append("</div>"),n.append("</div>"),n.append("</div>");var i=HXWebJS.DOM.CreateElement(n.toString());return document.body.appendChild(i),i},HXWebFormulaEditorControl._Internal._compile_validate=function(e){var t,n=$("#"+e.editor_control_id).find("textarea")[0];if(HXWebJS.Core.IsStringNullOrEmpty(e.binding_descfld))t=n.value;else{t=HXWebFormulaEditorControl._Internal._build_formula_desc_info(e,n.value).forumla_content}HXWebXmlService.CallPageXmlServiceAsync("HXWEBFORMULAEDITORCONTROL_COMPILE_VALIDATE",t,function(e){null!=e&&alert(HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBFORMULAEDITOR__COMPILED_THROUGH"))},{assembly_name:"TrustHX.HXWWW6",use_parallel_mode:!0})},HXWebFormulaEditorControl._Internal._insert_expression_text=function(e,t,n,o){if(!e.read_only){var _=!HXWebJS.Core.IsStringNullOrEmpty(e.binding_descfld),l=$("#"+e.editor_control_id).find("textarea")[0];l.focus();var a=_&&o?n:t;if(document.selection)document.selection.createRange().text=a;else if("number"==typeof l.selectionStart&&"number"==typeof l.selectionEnd){var r=l.selectionStart,i=l.selectionEnd,d=r,s=l.value;l.value=s.substring(0,r)+a+s.substring(i,s.length),d+=a.length,l.selectionStart=l.selectionEnd=d}else l.value+=a;_&&o&&(HXWebJS.Core.IsStringNullOrEmpty(n)||e._current_formula_placeholder_map_list.Add(n,t)),HXWebJS.EventManager.FireEvent(l,"change")}},HXWebFormulaEditorControl._Internal._onformulatextareachanged=function(e){var t=e.target,n=t.value,o=$(t).parents("[id='hxwebjs_formula_editor__editor_container_div']").attr("hxwebformulaeditorcontrol_code");if(null!=o&&HXWebFormulaEditorControl._Internal._registed_elements_info){var _=HXWebFormulaEditorControl._Internal._registed_elements_info[o];if(null!=_){var l=_.binding_datafld,a=_.binding_descfld;if(!HXWebJS.Core.IsStringNullOrEmpty(a)){var r=HXWebFormulaEditorControl._Internal._build_formula_desc_info(_,n);HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,l,r.forumla_content),HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,a,r.forumla_full_xml_desc_info)}else HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,l,n)}}},HXWebFormulaEditorControl._Internal._parse_formula_desc_info=function(e){var t={forumla_content:"",forumla_content_with_placeholder:"",formula_placeholder_map_list:null,forumla_full_xml_desc_info:e};if(t.formula_placeholder_map_list=new HXWebJS.Core.Dictionary,HXWebJS.Core.IsStringNullOrEmpty(e))return t;var n=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e);if(null==n)return t;objXmlNode=n.SelectSingleNode("//FORMULA_INFO/FORUMLA_CONTENT_WITH_PLACEHOLDER"),null!=objXmlNode&&(t.forumla_content_with_placeholder=objXmlNode.GetText());for(var o=t.forumla_content_with_placeholder,_=n.SelectNodes("//FORMULA_INFO/FORUMLA_PLACEHOLDER_LIST/PLACEHOLDER"),l=0;l<_.length;l++){var a=_[l].GetAttributeValue("DISPLAY_NAME"),r=_[l].GetAttributeValue("MAPPING_VALUE");t.formula_placeholder_map_list.Add(a,r),o=HXWebJS.Utility.Replace(o,a,r)}return t.forumla_content=o,t},HXWebFormulaEditorControl._Internal._build_formula_desc_info=function(e,t){var n,o,_,l,a={forumla_content:"",forumla_content_with_placeholder:t,forumla_full_xml_desc_info:""},r=e._current_formula_placeholder_map_list,i=t;if(null!=r){n=r.GetKeys(),o=r.GetValues();for(s=0;s<n.length;s++)_=null==n[s]?"":n[s],l=null==o[s]?"":o[s],i=HXWebJS.Utility.Replace(i,_,l)}a.forumla_content=i;var d=new HXWebStringBuilder;if(d.append("<FORMULA_INFO>"),d.append("<FORUMLA_CONTENT_WITH_PLACEHOLDER>"),d.append(HXWebJS.Xml.MarkXMLSpecialChars(t)),d.append("</FORUMLA_CONTENT_WITH_PLACEHOLDER>"),d.append("<FORUMLA_PLACEHOLDER_LIST>"),null!=r)for(var s=0;s<=n.length;s++)_=null==n[s]?"":n[s],l=null==o[s]?"":o[s],""!=_&&-1!=t.indexOf(_)&&(d.append("<PLACEHOLDER"),d.append(' DISPLAY_NAME="'+HXWebJS.Core.MarkXMLSpecialChars(_)+'"'),d.append(' MAPPING_VALUE="'+HXWebJS.Core.MarkXMLSpecialChars(l)+'"'),d.append(" />"));return d.append("</FORUMLA_PLACEHOLDER_LIST>"),d.append("</FORMULA_INFO>"),a.forumla_full_xml_desc_info=d.toString(),a},HXWebFormulaEditorControl._Internal._show_formula_content=function(e,t,n,o){var _=e.getAttribute("hx_binding_datafld"),l=o.SelectSingleNode("@"+_.toUpperCase()+"__DEF_DATA");if(null!=l){var a=HXWebFormulaEditorControl._Internal._parse_formula_desc_info(l.GetText());e.value=a.forumla_content_with_placeholder}else e.value=t},HXWebHtmlEditorControl={},HXWebHtmlEditorControl._Internal={},HXWebHtmlEditorControl._Internal._kindEditorLangType="",HXWebHtmlEditorControl._Internal._kindEditorToolbarItems=["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","hximage","flash","media","insertfile","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink"],HXWebHtmlEditorControl.register=function(e,t){HXWebHtmlEditorControl._Internal._registed_elements_info||(HXWebHtmlEditorControl._Internal._registed_elements_info={}),null==t&&(t={}),t.htmleditor_control_id=e,HXWebHtmlEditorControl._options_check(t);if(HXWebHtmlEditorControl._Internal._registed_elements_info[e]||(HXWebHtmlEditorControl._Internal._registed_elements_info[e]=t),""==HXWebHtmlEditorControl._Internal._kindEditorLangType){var n,o=HXWebJS.Core.WebPageGlobalVariables.CurrentCultureName;n="zh-HANT"==o?"zh_TW":"en"==o?"en":"ko"==o?"ko":"ar"==o?"ar":"zh_CN",HXWebJS.Core.LoadJsCssFile(HXWebPageGlobalVariables.WebRootPath+"kindeditor/lang/"+n+".js"),HXWebHtmlEditorControl._Internal._kindEditorLangType=n}},HXWebHtmlEditorControl.set_options=function(e,t){if(null!=t&&HXWebHtmlEditorControl._Internal._registed_elements_info){var n=HXWebHtmlEditorControl._Internal._registed_elements_info[e];null!=n&&(null!=t.object_view_code&&(n.object_view_code=t.object_view_code),null!=t.binding_datasrc_id&&(n.binding_datasrc_id=t.binding_datasrc_id),null!=t.binding_datafld&&(n.binding_datafld=t.binding_datafld),null!=t.binding_descfld&&(n.binding_descfld=t.binding_descfld),null!=t.show_placeholder_desc_text&&(n.show_placeholder_desc_text=t.show_placeholder_desc_text),null!=t.read_only&&(n.read_only=t.read_only),null!=t.disable_image_upload&&(n.disable_image_upload=t.disable_image_upload),null!=t.treeview_setting_code__placeholder&&(n.treeview_setting_code__placeholder=t.treeview_setting_code__placeholder),null!=t.object_view_code__placeholder&&(n.object_view_code__placeholder=t.object_view_code__placeholder),null!=t.placeholder_area_width&&(n.placeholder_area_width=t.placeholder_area_width),null!=t.placeholder_area_height&&(n.placeholder_area_height=t.placeholder_area_height),null!=t.onbeforeshow_callback&&(n.onbeforeshow_callback=t.onbeforeshow_callback),null!=t.ongetplaceholderfilterdata_callback&&(n.ongetplaceholderfilterdata_callback=t.ongetplaceholderfilterdata_callback),null!=t.ongetfieldplaceholderfilterdata_callback&&(n.ongetfieldplaceholderfilterdata_callback=t.ongetfieldplaceholderfilterdata_callback),HXWebHtmlEditorControl._options_check(n))}},HXWebHtmlEditorControl._options_check=function(e){null==e.placeholder_area_width&&(e.placeholder_area_width=300),null==e.placeholder_area_height&&(e.placeholder_area_height=250),null==e.show_placeholder_desc_text&&(e.show_placeholder_desc_text=!0)},HXWebHtmlEditorControl.init_editor=function(e){if(HXWebHtmlEditorControl._Internal._registed_elements_info){var t=HXWebHtmlEditorControl._Internal._registed_elements_info[e];if(null!=t){t.batch_code=HXWebJS.Core.CreateUUID();var n={resizeType:0,allowFileManager:!1,allowFlashUpload:!1,allowFileUpload:!1,allowMediaUpload:!1,afterChange:HXWebHtmlEditorControl._Internal._onafterhtmlcontentchanged};n.langType=HXWebHtmlEditorControl._Internal._kindEditorLangType,n.afterCreate=HXWebHtmlEditorControl._Internal._onafterhtmleditorcreated,n.afterFocus=HXWebHtmlEditorControl._Internal._onafterhtmleditorfocused,n.uploadJson=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_htmleditor_fileupload_process",n.items=HXWebHtmlEditorControl._Internal._kindEditorToolbarItems.slice(0);var o=!HXWebJS.Core.IsStringNullOrEmpty(t.treeview_setting_code__placeholder),_=!HXWebJS.Core.IsStringNullOrEmpty(t.object_view_code__placeholder);(o||_)&&n.items.push("|");var l=HXWebHtmlEditorControl._Internal._kindEditorLangType;o&&(KindEditor.lang({hxplaceholder:"zh_CN"==l||"zh_TW"==l?"全局占位符":"Global Place Holder"}),n.items.push("hxplaceholder")),_&&(KindEditor.lang({hxfieldplaceholder:"zh_CN"==l||"zh_TW"==l?"字段占位符":"Field Place Holder"}),n.items.push("hxfieldplaceholder"));var a=!HXWebJS.Core.IsStringNullOrEmpty(t.binding_descfld)&&t.show_placeholder_desc_text;a&&(KindEditor.lang({hxplaceholdermapedit:"zh_CN"==l||"zh_TW"==l?"占位符对照表":"Place Holder Map List"}),n.items.push("hxplaceholdermapedit")),t.disable_image_upload&&(n.allowImageUpload=!1);var r=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(t.binding_datasrc_id);if(null!=r){var i=r.SelectSingleNode("//RS_ROW/@HX_UUID"),d=null==i?"":i.GetText();n.extraFileUploadParams={batch_code:t.batch_code,object_view_code:t.object_view_code,binding_field_code:t.binding_datafld,record_uuid:d},t.onbeforeshow_callback&&t.onbeforeshow_callback(e,n);var s=document.getElementById(e);n.width=$(s).outerWidth();var c=KindEditor.create(s,n);c.__hxwebhtmleditorcontrol_htmlid=e,t.kind_editor_instance=c,t._is_init_editor_phase=!0;var b=r.SelectSingleNode("//RS_ROW/@"+t.binding_datafld.toUpperCase()).GetText();if(a){var p=r.SelectSingleNode("//RS_ROW/@"+t.binding_descfld.toUpperCase()).GetText(),u=HXWebHtmlEditorControl._Internal._parse_html_content_package(p),m=u.html_content_with_placeholder;HXWebJS.Core.IsStringNullOrEmpty(m)&&(m=b),t._current_placeholder_map_list=u.placeholder_map_list,HXWebHtmlEditorControl.set_html(e,m)}else HXWebHtmlEditorControl.set_html(e,b);t.read_only&&HXWebHtmlEditorControl.set_readonly(e,t.read_only),t._is_init_editor_phase=!1}}}},HXWebHtmlEditorControl._Internal._get_kind_editor_instance=function(e){if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return null;var t=HXWebHtmlEditorControl._Internal._registed_elements_info[e];return null==t?null:t.kind_editor_instance},HXWebHtmlEditorControl.get_editor=function(e){return HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e)},HXWebHtmlEditorControl.remove_editor=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=t&&t.remove(document.getElementById(e))},HXWebHtmlEditorControl.get_html=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t?"":t.html()},HXWebHtmlEditorControl.is_empty=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t||t.isEmpty()},HXWebHtmlEditorControl.get_text=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t?"":t.text()},HXWebHtmlEditorControl.get_selected_html=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t?"":t.selectedHtml()},HXWebHtmlEditorControl.set_html=function(e,t){var n=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=n&&n.html(t)},HXWebHtmlEditorControl.set_text=function(e,t){var n=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=n&&n.text(t)},HXWebHtmlEditorControl.insert_html=function(e,t){var n=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=n&&n.insertHtml(t)},HXWebHtmlEditorControl.append_html=function(e,t){var n=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=n&&n.appendHtml(t)},HXWebHtmlEditorControl.clear=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=t&&t.html("")},HXWebHtmlEditorControl.set_readonly=function(e,t){null==t&&(t=!0);var n=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);null!=n&&n.readonly(t)},HXWebHtmlEditorControl.get_html_count=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t?0:t.count()},HXWebHtmlEditorControl.get_text_count=function(e){var t=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(e);return null==t?0:t.count("text")},HXWebHtmlEditorControl._Internal._onafterhtmlcontentchanged=function(){var e=this.__hxwebhtmleditorcontrol_htmlid;if(!HXWebJS.Core.IsStringNullOrEmpty(e)){if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return null;var t=HXWebHtmlEditorControl._Internal._registed_elements_info[e];if(null!=t&&!t._is_init_editor_phase){if(!HXWebJS.Core.IsStringNullOrEmpty(t.binding_descfld)&&t.show_placeholder_desc_text){var n=this.html(),o=HXWebHtmlEditorControl._Internal._build_html_content_package(t,n);HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(t.binding_datasrc_id,t.binding_datafld,o.html_content),HXWebJS.Xml._XmlDataIsland._xmldataisland_onbindingvaluechanged_callback_trigger(t.binding_datasrc_id,t.binding_datafld,o.html_content),HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(t.binding_datasrc_id,t.binding_descfld,o.full_html_content_package_xml)}else{var _=this.html();HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(t.binding_datasrc_id,t.binding_datafld,_),HXWebJS.Xml._XmlDataIsland._xmldataisland_onbindingvaluechanged_callback_trigger(t.binding_datasrc_id,t.binding_datafld,_)}}}},HXWebHtmlEditorControl._Internal._onafterhtmleditorfocused=function(){$(".hxwebhtmleditor_placeholdertreeview").css("display","none"),$("#hxwebjs_combobox__container_div").css("display","none")},HXWebHtmlEditorControl._Internal._parse_html_content_package=function(e){var t={html_content_with_placeholder:"",placeholder_map_list:null};if(t.placeholder_map_list=new HXWebJS.Core.Dictionary,HXWebJS.Core.IsStringNullOrEmpty(e))return t;var n=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e);if(null==n)return t;objXmlNode=n.SelectSingleNode("//HTML_CONTENT_PACKAGE/HTML_CONTENT_WITH_PLACEHOLDER"),null!=objXmlNode&&(t.html_content_with_placeholder=objXmlNode.GetText());for(var o=n.SelectNodes("//HTML_CONTENT_PACKAGE/PLACEHOLDER_LIST/PLACEHOLDER"),_=0;_<o.length;_++){var l=o[_].GetAttributeValue("DISPLAY_NAME"),a=o[_].GetAttributeValue("MAPPING_VALUE");t.placeholder_map_list.Add(l,a)}return t},HXWebHtmlEditorControl._Internal._build_html_content_package=function(e,t){var n,o,_,l,a={html_content:"",full_html_content_package_xml:""},r=e._current_placeholder_map_list,i=t;if(null!=r){n=r.GetKeys(),o=r.GetValues();for(s=0;s<n.length;s++)_=null==n[s]?"":n[s],l=null==o[s]?"":o[s],i=HXWebJS.Utility.Replace(i,_,l)}a.html_content=i;var d=new HXWebStringBuilder;if(d.append('<HTML_CONTENT_PACKAGE BATCH_CODE="'+e.batch_code+'">'),d.append("<HTML_CONTENT_WITH_PLACEHOLDER>"),d.append(HXWebJS.Xml.MarkXMLSpecialChars(t)),d.append("</HTML_CONTENT_WITH_PLACEHOLDER>"),d.append("<PLACEHOLDER_LIST>"),null!=r)for(var s=0;s<=n.length;s++)_=null==n[s]?"":n[s],l=null==o[s]?"":o[s],""!=_&&-1!=t.indexOf(_)&&(d.append("<PLACEHOLDER"),d.append(' DISPLAY_NAME="'+HXWebJS.Core.MarkXMLSpecialChars(_)+'"'),d.append(' MAPPING_VALUE="'+HXWebJS.Core.MarkXMLSpecialChars(l)+'"'),d.append(" />"));return d.append("</PLACEHOLDER_LIST>"),d.append("</HTML_CONTENT_PACKAGE>"),a.full_html_content_package_xml=d.toString(),a},HXWebHtmlEditorControl._Internal._show_html_content=function(e,t,n,o){var _,l=e.getAttribute("hx_binding_datafld"),a=o.SelectSingleNode("@"+l.toUpperCase()+"__DEF_DATA");if(null==a)_=t;else{_=HXWebHtmlEditorControl._Internal._parse_html_content_package(a.GetText()).html_content_with_placeholder}e.innerHTML=_},HXWebHtmlEditorControl._Internal._show_placeholder_list=function(e){var t=e.__hxwebhtmleditorcontrol_htmlid;if(HXWebHtmlEditorControl._Internal._registed_elements_info){var n=HXWebHtmlEditorControl._Internal._registed_elements_info[t];if(null!=n){var o=t+"__placeholder_treeview";if(null==n._placeholder_choose_area_container){a=HXWebHtmlEditorControl._Internal._create_placeholder_choosing_area(o),n._placeholder_choose_area_container=a;var _={use_icon:"use_css_icon",is_auto_expandcollapse:!0,list_only_effective_items:!0,treeview_setting_code:n.treeview_setting_code__placeholder,extend_web_part_html_id:n.extend_web_part_html_id,ongetfilterdata_callback:HXWebHtmlEditorControl._Internal._placeholder_treeview_on_get_filterdata,onnodeclicked_callback:HXWebHtmlEditorControl._Internal._placeholder_treeview_on_node_clicked};HXWebTreeViewControl.register(o,_),HXWebTreeViewControl.init_treeview_nodes(o)}var l=$(".ke-toolbar-icon.ke-icon-hxplaceholder",e.container[0]);if(0!=l.length){var a=n._placeholder_choose_area_container;a.style.left=l.offset().left+6+"px",a.style.top=l.offset().top+6+"px",a.style.width=n.placeholder_area_width+"px",a.style.height=n.placeholder_area_height+"px",a.style.display="",$("#hxwebjs_combobox__container_div").css("display","none")}}}},HXWebHtmlEditorControl._Internal._create_placeholder_choosing_area=function(e){var t=new HXWebStringBuilder;t.append('<div id="'+e+'"'),t.append(' class="hxscrollbar hxwebhtmleditor_placeholdertreeview"'),t.append(' style="display:none;"'),t.append("></div>");var n=HXWebJS.DOM.CreateElement(t.toString());return document.body.appendChild(n),n},HXWebHtmlEditorControl._Internal._placeholder_treeview_on_get_filterdata=function(e){var t=e.substring(0,e.indexOf("__placeholder_treeview"));if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return"";var n=HXWebHtmlEditorControl._Internal._registed_elements_info[t];return null==n?"":null!=n.ongetplaceholderfilterdata_callback?n.ongetplaceholderfilterdata_callback(t):""},HXWebHtmlEditorControl._Internal._placeholder_treeview_on_node_clicked=function(e,t){var n=e.substring(0,e.indexOf("__placeholder_treeview"));if(HXWebHtmlEditorControl._Internal._registed_elements_info){var o=HXWebHtmlEditorControl._Internal._registed_elements_info[n];if(null!=o&&!o.read_only){var _=!HXWebJS.Core.IsStringNullOrEmpty(o.binding_descfld)&&o.show_placeholder_desc_text,l=!HXWebJS.Core.IsStringNullOrEmpty(t.node_attr_2)&&"0"!=t.node_attr_2,a="["+t.node_text+"]",r=t.node_attr_1;_&&l&&(HXWebJS.Core.IsStringNullOrEmpty(a)||o._current_placeholder_map_list.Add(a,r));var i=_&&l?a:r;o.kind_editor_instance.insertHtml(i);o._placeholder_choose_area_container.style.display="none"}}},HXWebHtmlEditorControl._Internal._show_fieldplaceholder_list=function(e){var t=e.__hxwebhtmleditorcontrol_htmlid;if(HXWebHtmlEditorControl._Internal._registed_elements_info){var n=HXWebHtmlEditorControl._Internal._registed_elements_info[t];if(null!=n){var o=$(".ke-toolbar-icon.ke-icon-hxfieldplaceholder",e.container[0]);if(0!=o.length){var _=t+"__placeholder_combobox",l=t+"__placeholder_dropdown_btn";if(null==document.getElementById(l)){var a={content_type:"desc",choose_type:0,use_icon:"use_css_icon",object_view_code_for_field_list_get:n.object_view_code__placeholder,dropdownlist_code:"hxmd_object_or_view_field",columns_width_rate:"0%;100%",dropdownbox_width:300,ist_only_effective_items:!0,extend_web_part_html_id:n.extend_web_part_html_id,ongetfilterdata_callback:HXWebHtmlEditorControl._Internal._placeholder_combobox_on_get_filterdata,ondatachoosed_callback:HXWebHtmlEditorControl._Internal._placeholder_combobox_on_data_choosed,pagexmlsvc_class_name:"hxeims6.hxpage.htmleditor_control__placeholder_field_choose_combobox_filter"};$(o).append($('<img id="'+l+'" src="../hximages_v6/hxpub_clear.gif"/>')[0]),HXWebComboBoxControl.register(_,l,a)}else HXWebComboBoxControl.set_options(_,{object_view_code_for_field_list_get:n.object_view_code__placeholder});HXWebJS.EventManager.FireEvent(document.getElementById(l),"click")}}}},HXWebHtmlEditorControl._Internal._placeholder_combobox_on_get_filterdata=function(e){var t=e.substring(0,e.indexOf("__placeholder_combobox"));if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return null;var n=HXWebHtmlEditorControl._Internal._registed_elements_info[t];if(null==n)return null;var o;return null!=n.ongetfieldplaceholderfilterdata_callback&&(o=n.ongetfieldplaceholderfilterdata_callback(t)),o||(o=""),'<RS_DATA><RS_ROW OBJECT_VIEW_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(n.object_view_code__placeholder)+'" CUSTOMIZED_DATA="'+HXWebJS.Core.MarkXMLSpecialChars(o)+'" /></RS_DATA>'},HXWebHtmlEditorControl._Internal._placeholder_combobox_on_data_choosed=function(e,t,n,o){var _=e.substring(0,e.indexOf("__placeholder_combobox"));if(HXWebHtmlEditorControl._Internal._registed_elements_info){var l=HXWebHtmlEditorControl._Internal._registed_elements_info[_];if(null!=l&&!l.read_only){var a=!HXWebJS.Core.IsStringNullOrEmpty(l.binding_descfld)&&l.show_placeholder_desc_text,r="["+o.SelectSingleNode("//@DESC").GetText()+"]",i="[!HX BIZDATA."+o.SelectSingleNode("//@KEY").GetText().toUpperCase()+"]";a&&(HXWebJS.Core.IsStringNullOrEmpty(r)||l._current_placeholder_map_list.Add(r,i));var d=a?r:i;l.kind_editor_instance.insertHtml(d)}}},HXWebHtmlEditorControl._Internal._show_placeholder_map_list=function(e){var t=e.__hxwebhtmleditorcontrol_htmlid;if(HXWebHtmlEditorControl._Internal._registed_elements_info){var n=HXWebHtmlEditorControl._Internal._registed_elements_info[t];if(null!=n){if(0!=$(".ke-toolbar-icon.ke-icon-hxplaceholdermapedit",e.container[0]).length){var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n.binding_datasrc_id).SelectSingleNode("//RS_ROW/@"+n.binding_descfld.toUpperCase()).GetText();if(""!=o){var _=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(o);if(0!=_.SelectNodes(".//PLACEHOLDER_LIST/PLACEHOLDER").length){var l=_.SelectSingleNode(".//PLACEHOLDER_LIST").GetXml();if(l=l.replace(/<PLACEHOLDER\s/g,"<RS_ROW ").replace(/<\/PLACEHOLDER\s*>/g,"</RS_ROW>"),l=l.replace("<PLACEHOLDER_LIST>","<RS_DATA>").replace("</PLACEHOLDER_LIST>","</RS_DATA>"),null!=n._current_placeholder_map_list&&0!=n._current_placeholder_map_list.GetKeys().length){var a=$("#divHtmlPlaceholderMapContentSettingArea");null==a||0==a.length?HXWebHtmlEditorControl._Internal._create_placeholder_map_content_setting_area(t,"divHtmlPlaceholderMapContentSettingArea"):(a.css("display",""),a.attr("hxwebhtmleditorcontrol_code",n.editor_control_id)),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV();var r=$("#hxxml_data__html_placeholder_map_content_setting");(r=0==r.length)&&document.body.appendChild(HXWebJS.DOM.CreateElement('<hxxmldataisland id="hxxml_data__html_placeholder_map_content_setting" content=""></hxxmldataisland>')),HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_data__html_placeholder_map_content_setting").ReloadXML(l)}}}}}}},HXWebHtmlEditorControl._Internal._create_placeholder_map_content_setting_area=function(e,t){var n=new HXWebStringBuilder,o=$(window).width(),_=$(window).height(),l=o-800<0?0:(o-800)/2,a=_-450<0?0:(_-450)/2;a+=document.documentElement.scrollTop||document.body.scrollTop;var r=HXWebXmlService.GetUITextOnServer("TEXT__HXWWW_HXWEBFORMULAEDITOR_RESOURCE_STRING",!0).split(";");n.append('<div id="'+t+'" hxwebhtmleditorcontrol_code="'+e+'"'),n.append(' style="position:absolute;left:'+l+"px;top:"+a+'px;width:800px;height:450px;background-color:white;z-index:100050;">'),n.append('<div class="hxpg_section hxpg_vertical_flex_container" style="border:none;height:100%;margin-bottom:0px;">'),n.append('<div class="hxpg_section_head no_line hxtxt_decorated_line" style="flex:0 0 auto;">'),n.append('<span class="hxfld_container no_caption"><span class="hxtxt_nowrap hxtxt_left_align">'+r[5]+"</span></span>"),n.append("</div>"),n.append('<div class="hxscrollbar" style="flex:1 1 auto;overflow:auto;">'),n.append('<table id="tbl_placeholder_map_list" class="hxtbl_datalist striped bordered hover" style="table-layout:fixed;width:100%;"'),n.append(' hx_binding_datasrc="hxxml_data__html_placeholder_map_content_setting">'),n.append('<thead><tr><td style="width:30%;text-align:center;"><span class="hxtxt_list_column_caption hxtxt_bold hxtxt_nowrap">'+r[6]+'</span></td><td style="width:70%;text-align:center;"><span class="hxtxt_list_column_caption hxtxt_bold hxtxt_nowrap">'+r[7]+"</span></td></tr></thead>"),n.append('<tbody><tr><td><span hx_binding_datasrc="hxxml_data__html_placeholder_map_content_setting" hx_binding_datafld="display_name"></span></td><td><input class="hxinputbox not_allow_pick" hx_binding_datasrc="hxxml_data__html_placeholder_map_content_setting" hx_binding_datafld="mapping_value" /></td></tr></tbody>'),n.append("</table>"),n.append("</div>"),n.append('<div style="flex:0 0 auto;text-align:right;margin-top:10px;" hxpage_click_handler="hxcontrol.HXWebHtmlEditorControl._placeholder_map_list_command_clicked">'),n.append('<button id="hxwebjs_html_editor__source_btn" class="hxbtn small default">'),n.append('<span class="fa fa-file-text-o" style="margin-right:3px;"></span><span>'+r[2]+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_html_editor__ok_btn" class="hxbtn small default">'),n.append('<span class="fa fa-check" style="margin-right:3px;color:blue"></span><span>'+r[8]+"</span>"),n.append("</button>\r\n"),n.append('<button id="hxwebjs_html_editor__cancel_btn" class="hxbtn small default">'),n.append('<span class="fa fa-close" style="margin-right:3px;color:red"></span><span>'+r[9]+"</span>"),n.append("</button>\r\n"),n.append("</div>"),n.append("</div>"),n.append("</div>");var i=HXWebJS.DOM.CreateElement(n.toString());return document.body.appendChild(i),i},HXWebHtmlEditorControl._OnHXControlClickHandlerProcess=function(e,t){if("_placeholder_map_list_command_clicked"==e)return HXWebHtmlEditorControl._Internal._placeholder_map_list_command_clicked(t)},HXWebHtmlEditorControl._Internal._placeholder_map_list_command_clicked=function(e){e.stopPropagation();var t=e.target,n=t.id||t.parentNode.id,o=$(t).parents("[id='divHtmlPlaceholderMapContentSettingArea']").attr("hxwebhtmleditorcontrol_code");if(!HXWebJS.Core.IsStringNullOrEmpty(o)){if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return null;var _=HXWebHtmlEditorControl._Internal._registed_elements_info[o];if(null!=_){var l=HXWebHtmlEditorControl._Internal._get_kind_editor_instance(o);if("hxwebjs_html_editor__source_btn"==n){var a=l.html(),r=HXWebHtmlEditorControl._Internal._build_html_content_package(_,a),i=($("div[hxwebhtmleditorcontrol_code="+o+"]"),0==HXWebPageGlobalVariables.CurrentCultureName.indexOf("zh")?"Html 内容":"Html Content");return HXWebMessageBox.Show(i,r.html_content,{width:800,height:450,hide_textarea_border:!0,keep_background_cover_div:!0})}if("hxwebjs_html_editor__ok_btn"==n){for(var d=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_data__html_placeholder_map_content_setting").SelectNodes("//RS_ROW"),s=new HXWebJS.Core.Dictionary,c=0,b=d.length;c<b;c++){var p=d[c].GetAttributeValue("DISPLAY_NAME"),u=d[c].GetAttributeValue("MAPPING_VALUE");s.Add(p,u)}_._current_placeholder_map_list=s;var a=l.html(),r=HXWebHtmlEditorControl._Internal._build_html_content_package(_,a);HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,_.binding_datafld,r.html_content),HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(_.binding_datasrc_id,_.binding_descfld,r.full_html_content_package_xml),HXWebHtmlEditorControl._Internal._show_hide_placeholder_map_edit_area(!1)}else"hxwebjs_html_editor__cancel_btn"==n&&HXWebHtmlEditorControl._Internal._show_hide_placeholder_map_edit_area(!1)}}},HXWebHtmlEditorControl._Internal._show_hide_placeholder_map_edit_area=function(e){e=!!e;var t=$("#divHtmlPlaceholderMapContentSettingArea");null!=t&&0!=t.length&&(t.css("display",e?"":"none"),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(e))},HXWebHtmlEditorControl._Internal._OnDocumentClicked=function(e){if(!HXWebHtmlEditorControl._Internal._registed_elements_info)return null;var t=e.target,n=$(t);if(!n.hasClass("ke-icon-hxplaceholder")){n.parents(".hxwebhtmleditor_placeholdertreeview").length>0||$(".hxwebhtmleditor_placeholdertreeview").css("display","none")}},HXWebJS.EventManager.RegisterFuncRunAfterOnDocumentClick(HXWebHtmlEditorControl._Internal._OnDocumentClicked);var HXWebLayoutDashboard={};HXWebLayoutDashboard._Internal={},HXWebLayoutDashboard.Init=function(e){for(var t,n,o,_,l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_dashboard_block__"+e.toLowerCase()),a=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_dashboard_widget__"+e.toLowerCase()),r=l.SelectNodes("//RS_ROW[(@IS_SUB_SECTION_BLOCK='' or @IS_SUB_SECTION_BLOCK!='0')]"),i=0;i<r.length;i++)n=(t=r[i]).GetAttributeValue("DASHBOARD_BLOCK_CODE"),"level1"==t.GetAttributeValue("BLOCK_TAGS_SHOW_STYLE")?(o=a.SelectNodes("//RS_ROW[@DASHBOARD_BLOCK_CODE='"+n+"']"),HXWebLayoutDashboard._Internal._BlockHeadPartInit(e,n,t,o)):null!=(_=a.SelectSingleNode("//RS_ROW[@DASHBOARD_BLOCK_CODE='"+n+"']"))&&HXWebLayoutDashboard._Internal._InitAndLoadWebPart(e,n,!1,_)},HXWebLayoutDashboard._OnHXControlClickHandlerProcess=function(e,t){if("dashboard_webpart_refresh"==e||"dashboard_webpart_showmore"==e){var n=t.target.parentNode.id,o=HXWebTabControl.get_selected_tab_id(n);if(HXWebJS.Core.IsStringNullOrEmpty(o))return;"dashboard_webpart_refresh"==e?HXWebTabControl.select_tab(n,o,!0):HXWebLayoutDashboard._Internal._WebPartShowMore(t.target,o)}},HXWebLayoutDashboard._Internal._BlockHeadPartInit=function(e,t,n,o){if(0!=o.length){var _=HXWebJS.Core.StringFormat("hxsm_dashboard__{0}__block__{1}__head_part",e,t),l={tab_icon_mode:n.GetAttributeValue("TAB_ICON_MODE"),onaftertabchanged_callback:HXWebLayoutDashboard._Internal._OnAfterBlockTabChanged};HXWebTabControl.register(_,l);for(var a,r,i,d,s,c,b="",p=0;p<o.length;p++)a=(s=o[p]).GetAttributeValue("DASHBOARD_WIDGET_CODE"),r=s.GetAttributeValue("WIDGET_TAG_NAME"),i=s.GetAttributeValue("ICON_CLASS"),d=s.GetAttributeValue("ICON_IMAGE_SRC"),c=s.GetAttributeValue("IS_DEFAULT_IN_BLOCK"),""==b&&""!=c&&"0"!=c&&(b=a),tabSetting={icon_class:i,image_src:d},HXWebTabControl.add_tab(_,a,r,tabSetting);""==b&&(b=o[0]),HXWebTabControl.select_tab(_,b)}},HXWebLayoutDashboard._Internal._OnAfterBlockTabChanged=function(e,t,n){var o=$("#"+e).parents("div[hx_element_type='dashboard']").attr("id"),_=t,l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_dashboard_widget__"+o.toLowerCase()).SelectSingleNode("//RS_ROW[@DASHBOARD_WIDGET_CODE='"+_+"']");if(null!=l){var a=l.GetAttributeValue("DASHBOARD_BLOCK_CODE");HXWebLayoutDashboard._Internal._InitAndLoadWebPart(o,a,!0,l)}},HXWebLayoutDashboard._Internal._InitAndLoadWebPart=function(e,t,n,o){var _=o.GetAttributeValue("EXTEND_WEBPART_TYPE");if(!HXWebJS.Core.IsStringNullOrEmpty(_)){var l=HXWebJS.Core.StringFormat("hxsm_dashboard__{0}__block__{1}",e.toLowerCase(),t);n&&(l+="__content_part");document.getElementById(l);var a=o.GetAttributeValue("SHOW_MORE_URL"),r=!HXWebJS.Core.IsStringNullOrEmpty(a);if(n){var i=HXWebJS.Core.StringFormat("hxsm_dashboard__{0}__block__{1}__head_part",e.toLowerCase(),t);$("#"+i).find(".hxsm_dashboard_block___show_more_button").toggleClass("disabled",!r)}if(HXWebDynamicPage&&HXWebDynamicPage.ExtendWebPartBrowserSideInit){var d={dashboard_html_id:e,dashboard_code:o.GetAttributeValue("DASHBOARD_CODE"),dashboard_widget_code:o.GetAttributeValue("DASHBOARD_WIDGET_CODE"),webpart_setting_info:o.GetAttributeValue("WEBPART_SETTING_INFO")};HXWebDynamicPage.ExtendWebPartBrowserSideInit(l,_,d)}}},HXWebLayoutDashboard._Internal._WebPartShowMore=function(e,t){var n=$(e).parents("div[hx_element_type='dashboard']").attr("id"),o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_dashboard_widget__"+n.toLowerCase()).SelectSingleNode("//RS_ROW[@DASHBOARD_WIDGET_CODE='"+t+"']");if(null!=o){var _=o.GetAttributeValue("SHOW_MORE_URL");HXWebJS.Core.IsStringNullOrEmpty(_)||HXWebJS.Navigation.OpenWebPage(_)}};