!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function n(e){return r.raw?e:decodeURIComponent(e)}function l(t,n){var l=r.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(a," "))}catch(e){return}try{return r.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(n)?n(l):l}var a=/\+/g,r=e.cookie=function(a,i,o){if(void 0!==i&&!e.isFunction(i)){if("number"==typeof(o=e.extend({},r.defaults,o)).expires){var _=o.expires,s=o.expires=new Date;s.setDate(s.getDate()+_)}return document.cookie=[t(a),"=",function(e){return t(r.json?JSON.stringify(e):String(e))}(i),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}for(var d=a?void 0:{},u=document.cookie?document.cookie.split("; "):[],b=0,m=u.length;b<m;b++){var c=u[b].split("="),p=n(c.shift()),X=c.join("=");if(a&&a===p){d=l(X,i);break}a||void 0===(X=l(X))||(d[p]=X)}return d};r.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!0)}});var HXWebJS={};HXWebJS.Core={},HXWebJS.Core._Internal={},HXWebJS.Core.LogErrorToConsole=function(e,t){if(null!=e&&""!=e)if(null==t&&(t=!0),"undefined"!=typeof console&&null!=console&&null!=console.error)console.error(e);else if(t)throw e},HXWebJS.Core.LogToConsoleWithTimeStamp=function(e){null==e&&(e=""),console&&console.log((new Date).toISOString()+"\t"+e)},HXWebJS.Core.StringBuilder=function(){this._strings_=new Array},HXWebJS.Core.StringBuilder.prototype.append=function(e){this._strings_.push(e)},HXWebJS.Core.StringBuilder.prototype.toString=function(){return this._strings_.join("")},HXWebJS.Core.StringBuilder.prototype.clear=function(){this._strings_=new Array},HXWebJS.Core.StringBuilder.prototype.isEmpty=function(){return 0==this._strings_.length};var HXWebStringBuilder=HXWebJS.Core.StringBuilder;HXWebJS.Core.Timer=function(){this._interval=500,this._enabled=!1,this._uniqueID=null,this._timer=null,this._tickhandler=null},HXWebJS.Core.Timer.prototype={get_uniqueID:function(){return this._uniqueID},set_uniqueID:function(e){this._uniqueID=e},get_enabled:function(){return this._enabled},set_enabled:function(e){var t=this._enabled;t!=e&&(1==t&&this._stopTimer(),this._enabled=e,1==e&&this._startTimer())},get_interval:function(){return this._interval},set_interval:function(e){this._interval!=e&&(this._interval=e,this._enabled&&(this._stopTimer(),this._startTimer()))},set_tickhandler:function(e){this._tickhandler=e},_startTimer:function(){this._timer=window.setTimeout(HXWebJS.Core.CreateDelegateFunction(this,this._raisetick),this.get_interval())},_stopTimer:function(){null!==this._timer&&(window.clearTimeout(this._timer),this._timer=null)},_raisetick:function(){this._tickhandler(),this._startTimer()}},HXWebJS.Core.Browser={},HXWebJS.Core.Browser._userAgent=navigator.userAgent.toLowerCase(),HXWebJS.Core.Browser.IsMobile=/mobile/.test(HXWebJS.Core.Browser._userAgent),HXWebJS.Core.Browser.IsMicroMessenger=/micromessenger/.test(HXWebJS.Core.Browser._userAgent),HXWebJS.Core.Browser.IsMiniProgram=/miniprogram/.test(HXWebJS.Core.Browser._userAgent),HXWebJS.Core.Browser.IsAliPayClient=/alipayclient/.test(HXWebJS.Core.Browser._userAgent),HXWebJS.Core.Browser.IsIE=(/msie/.test(HXWebJS.Core.Browser._userAgent)||/trident/.test(HXWebJS.Core.Browser._userAgent))&&!/opera/.test(HXWebJS.Core.Browser._userAgent),HXWebJS.Core.Browser.IsEdge=/edge/.test(HXWebJS.Core.Browser._userAgent)&&!HXWebJS.Core.Browser.IsIE,HXWebJS.Core.Browser.Version=(HXWebJS.Core.Browser._userAgent.match(/.+(?:rv|it|ra|ie|on|chrome)[\/: ]([\d.]+)/)||[0,"0"])[1],HXWebJS.Core.WebPageGlobalVariables={},HXWebJS.Core.WebPageGlobalVariables._GetValue=function(e){var t=window.document.documentElement.attributes[e],n=null==t?"":t.value,l=null==n||""==n;if("hx_web_root_path"==e)return l?(HXWebJS.Core.LogErrorToConsole("HXWebJS.Core.WebPageGlobalVariables运行错误： WebRootPath参数值未被登记！"),null):n;if("hx_page_name"==e)return l?(HXWebJS.Core.LogErrorToConsole("HXWebJS.Core.WebPageGlobalVariables运行错误： CurrentWebPageName参数值未被登记！"),null):n;if("hx_page_param_uuid"==e)return l?(HXWebJS.Core.LogErrorToConsole("HXWebJS.Core.WebPageGlobalVariables运行错误： HXPageParamUUID参数值未被登记！"),null):n;if("hx_language_culture"==e)return l?"zh-CN":n;if("hx_date_display_format"==e)return l?"YYYY-MM-DD":10!=n.length?"YYYY-MM-DD":n;if("hx_decimal_display_format"==e){if(l||isNaN(n))return 0;return 1!=(a=parseInt(n))?0:1}if("hx_currency_display_scale"==e){if(l||isNaN(n))return 2;var a=parseInt(n);return a<0?2:a}return"hx_ui_theme"==e&&l?"blue":n},HXWebJS.Core.WebPageGlobalVariables.WebRootPath=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_web_root_path"),HXWebJS.Core.WebPageGlobalVariables.CurrentPageName=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_page_name"),HXWebJS.Core.WebPageGlobalVariables.HXPageParamUUID=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_page_param_uuid"),HXWebJS.Core.WebPageGlobalVariables.CurrentCultureName=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_language_culture"),HXWebJS.Core.WebPageGlobalVariables.CurrentUITheme=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_ui_theme"),HXWebJS.Core.WebPageGlobalVariables.DateDisplayFormatString=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_date_display_format"),HXWebJS.Core.WebPageGlobalVariables.DecimalDisplayFormatType=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_decimal_display_format"),HXWebJS.Core.WebPageGlobalVariables.CurrencyDisplayFormatScale=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_currency_display_scale"),HXWebJS.Core.WebPageGlobalVariables.DynamicPageType=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_page_type"),HXWebJS.Core.WebPageGlobalVariables.DynamicPageVersion=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_page_version"),HXWebJS.Core.WebPageGlobalVariables._GetLanguageType=function(){var e=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_language_type");return""==e?"zh-cn"==HXWebJS.Core.WebPageGlobalVariables.CurrentCultureName.toLowerCase()?0:1:parseInt(e)},HXWebJS.Core.WebPageGlobalVariables.CurrentLanguageType=HXWebJS.Core.WebPageGlobalVariables._GetLanguageType(),HXWebJS.Core.WebPageGlobalVariables._GetLanguageDbCntType=function(){var e=HXWebJS.Core.WebPageGlobalVariables._GetValue("hx_language_db_cnt_type");return""==e?"zh-cn"==HXWebJS.Core.WebPageGlobalVariables.CurrentCultureName.toLowerCase()?0:1:parseInt(e)},HXWebJS.Core.WebPageGlobalVariables.CurrentLanguageDbCntType=HXWebJS.Core.WebPageGlobalVariables._GetLanguageDbCntType();var HXWebPageGlobalVariables=HXWebJS.Core.WebPageGlobalVariables;HXWebJS.Core.Dictionary=function(){var e=[],t=[];this.ContainsKey=function(t){return $.inArray(t,e)>=0},this.Add=function(n,l,a){if(this.ContainsKey(n)){if(null==a&&(a=!0),a)return;throw"字典中已存在项："+n}e.push(n),t.push(l)},this.Remove=function(n){var l=$.inArray(n,e);return l>=0&&(e.splice(l,1),t.splice(l,1),!0)},this.GetValue=function(n){if(this.ContainsKey(n)){var l=$.inArray(n,e);return t[l]}},this.SetValue=function(n,l){if(this.ContainsKey(n)){var a=$.inArray(n,e);t[a]=l}},this.GetLength=function(){return e.length},this.Clear=function(){e=[],t=[]},this.GetValues=function(){return t.slice(0)},this.GetKeys=function(){return e.slice(0)}},HXWebJS.Core.CreateDelegateFunction=function(e,t){for(var n=[],l=2;l<arguments.length;l++)n.push(arguments[l]);return function(){return t.apply(e,n)}},HXWebJS.Core.IsJavascriptFunctionDefined=function(fn){if(null==fn)return!1;if(void 0===fn)return!1;if("function"==typeof fn)return!0;try{if("function"==typeof eval(fn))return!0}catch(e){return!1}},HXWebJS.Core.MarkXMLSpecialChars=function(e,t){if(null==e)return t?"":null;"string"!=typeof e&&(e=e.toString());var n=e.replace(/&/g,"&amp;");return n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/"/g,"&quot;")},HXWebJS.Core.EscapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},HXWebJS.Core.CreateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},HXWebJS.Core.Trim=function(e){return $.trim(e)},HXWebJS.Core.IsStringNullOrEmpty=function(e,t){return null==e||""==e||(null==t&&(t=!0),!(!t||""!=HXWebJS.Core.Trim(e)))},HXWebJS.Core.StringFormat=function(e,t){if(null==e)return null;for(var n,l=e,a=1;a<arguments.length;a++)n=new RegExp("\\{"+(a-1).toString()+"\\}","g"),l=l.replace(n,arguments[a]);return l},HXWebJS.Core.AlertWithReplaceCrLfString=function(e){null!=e&&alert(e.replace(/\\r/g,"\r").replace(/\\n/g,"\n"))},HXWebJS.Core.DummyFunction=function(){},HXWebJS.Core.DebugMessageDisable=function(e){null==e&&(e=!0),HXWebJS.Core._Internal._debug_message_output_disabled=e,$("#hxdiv_debug_log_message_display_area").hide()},HXWebJS.Core.DebugMessageClear=function(){$("#hxdiv_debug_log_message_display_area").html("")},HXWebJS.Core.DebugMessageOutputOnPage=function(e){if(void 0===HXWebJS.Core._Internal._debug_message_output_disabled&&(HXWebJS.Core._Internal._debug_message_output_disabled=!1),1!=HXWebJS.Core._Internal._debug_message_output_disabled){if(null==document.getElementById("hxdiv_debug_log_message_display_area")){$("body").append('<div id="hxdiv_debug_log_message_display_area" style="position:absolute;z-index:150000;right:2px;width:360px;bottom:2px;height:240px;border:solid 1px red;background-color:yellow;overflow:auto;"><span style="width:100%;">\x3c!--dummy for IE5 Qurick Bug --\x3e</span></div>'),$("body").append('<a href="#" id="hxdiv_debug_area_close_btn" style="z-index:150002;position:absolute;right:8px;bottom:8px;text-decoration:none;">Hide</a>'),$("#hxdiv_debug_area_close_btn").click(function(){$("#hxdiv_debug_log_message_display_area").hide()})}var t=new Date,n=JSON.stringify(t),l="<div>"+(n=n.substr(1,n.length-7))+"   "+HXWebJS.Core.MarkXMLSpecialChars(e)+"</div>";$("#hxdiv_debug_log_message_display_area").append(l),$("#hxdiv_debug_log_message_display_area").show()}},HXWebJS.Core.LoadJsCssFile=function(e){if(!HXWebJS.Core.IsStringNullOrEmpty(e)){var t=(e=e.toLowerCase()).length,n=t>=4&&".js"==e.substr(t-3),l=t>=5&&".css"==e.substr(t-4);if(n||l){var a=new Date,r=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();if(n){if($("head script[src*='"+e+"']").length>0)return;$("<script>").attr({type:"text/javascript",src:e+"?v="+r}).appendTo("head")}else if(l){if($("head link[type='text/css'][href*='"+e+"']").length>0)return;$("<link>").attr({rel:"stylesheet",type:"text/css",href:e+"?v="+r}).appendTo("head")}}}},HXWebJS.Core.LoadPlatformJsCssFile=function(e){if(!HXWebJS.Core.IsStringNullOrEmpty(e)){var t=(e=e.toLowerCase()).length,n=t>=4&&".js"==e.substr(t-3),l=t>=5&&".css"==e.substr(t-4);if(n||l)if(e.indexOf("../")>=0)console.log("HXWebJS.Core.LoadPlatformJsCssFile(fileNameWithPath)参数值不允许包含..特殊相对路径。");else{var a="../hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_web_resource_download&file="+e;if(n){if($("head script[src*='"+a+"']").length>0)return;$("<script>").attr({type:"text/javascript",src:a}).appendTo("head")}else if(l){if($("head link[type='text/css'][href*='"+a+"']").length>0)return;$("<link>").attr({rel:"stylesheet",type:"text/css",href:a}).appendTo("head")}}}},HXWebJS.Core.LoadJsFileAndRunFunction=function(strJsFileNameWithRelativePath,strFunctionName,funcParam1){if(!HXWebJS.Core.IsStringNullOrEmpty(strFunctionName)){HXWebJS.Core.LoadPlatformJsCssFile(strJsFileNameWithRelativePath);for(var args=[],i=2;i<arguments.length;i++)args.push(arguments[i]);var func=eval(strFunctionName);null!=func&&"function"==typeof func&&func.apply(null,args)}},HXWebJS.Core.GetPlatformJsText=function(e){var t=HXWebJS.Core._GetPlatformJsTextFromHXXmlUITextPackage(e);if(!HXWebJS.Core.IsStringNullOrEmpty(t))return t;var n=HXWebPageGlobalVariables.CurrentCultureName;return"HXWebJS.UIText.Core.ProgressBarWaitingMsg"==e?"en"==n?"Processing, Please Waiting...":"处理中，请稍等...":"HXWebJS.UIText.HXWebTreeViewControl.NoDataFound"==e?"en"==n?"No Data Found":"没有找到任何数据":e},HXWebJS.Core._GetPlatformJsTextFromHXXmlUITextPackage=function(e){if(HXWebJS.Core.IsStringNullOrEmpty(e))return"";var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text");if(null==t)return"";var n=t.SelectSingleNode("//@"+e);return null==n?"":n.GetText()},HXWebJS.DOM={},HXWebJS.DOM._Internal={},HXWebJS.DOM.GetFrameWindow=function(e){if(null==e||""==e)return null;if("string"==typeof e&&null==(e=window.frames[e]))return null;new HXWebStringBuilder;return e.window?e.window:e.contentWindow},HXWebJS.DOM.GetChildWindowInSameDomain=function(e,t){var n=HXWebJS.DOM.GetFrameWindow(e);return null==n?null:0==HXWebJS.DOM._Internal._IsSameDomainWindow(n,t)?null:n},HXWebJS.DOM.SetFrameSource=function(e,t){var n=HXWebJS.DOM.GetFrameWindow(e);if(null!=n){var l=n.document;if(null==l)return null;l.location.href=t}},HXWebJS.DOM.GetParentWindowInSameDomain=function(e,t){null==t&&(t=window);var n=null;if(null!=t.parent&&t.parent!=t.self)try{n=t.parent.document.body}catch(e){}if(null==n)return null;var l=t.parent;return 0==HXWebJS.DOM._Internal._IsSameDomainWindow(l,e)?null:l},HXWebJS.DOM.GetTopWindowInSameDomain=function(e){if(window.parent==window.self)return null;var t=HXWebJS.DOM.GetParentWindowInSameDomain(e);if(null==t)return null;for(var n=HXWebJS.DOM.GetParentWindowInSameDomain(e);null!=n;)t=n,n=HXWebJS.DOM.GetParentWindowInSameDomain(e,t);return t},HXWebJS.DOM._Internal._IsSameDomainWindow=function(e,t){return window.location.host==e.location.host&&(null==t&&(t=!1),!t||null!=e.HXWebJS)},HXWebJS.DOM.GetWindowWidth=function(e){null==e&&(e=window);var t=jQuery(e).width();return t>0?t:0},HXWebJS.DOM.GetWindowHeight=function(e){null==e&&(e=window);var t=jQuery(e).height();return t>0?t:0},HXWebJS.DOM.GetWindowX=function(e){return null==e&&(e=window),null!=e.screenLeft?e.screenLeft:null!=e.screenX?e.screenX:0},HXWebJS.DOM.GetWindowY=function(e){return null==e&&(e=window),null!=e.screenTop?e.screenTop:null!=e.screenY?e.screenY:0},HXWebJS.DOM.GetDocumentWidth=function(e){return null==e&&(e=window),$(e.document).width()},HXWebJS.DOM.GetDocumentHeight=function(e){return null==e&&(e=window),$(e.document).height()},HXWebJS.DOM.GetScrollLeft=function(e){return null==e&&(e=window),jQuery(e.document).scrollLeft()},HXWebJS.DOM.GetScrollTop=function(e){return null==e&&(e=window),jQuery(e.document).scrollTop()},HXWebJS.DOM.CreateElement=function(e){return $(e)[0]},HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV=function(e,t,n,l){var a=t?"hxwebjs_progessbar_cover_div_to_disable_mouse_input":"hxwebjs_progessbar_cover_div_to_disable_mouse_input_under_dialog";null==n&&(n=HXWebJS.DOM.GetTopWindowInSameDomain(!0)),null==n&&(n=window);var r=90;null!=l&&null!=l.cover_div_opacity&&(r=l.opacity);var i=!!t?"#ffffff":"black";null!=l&&null!=l.cover_div_background_color&&(i=l.cover_div_background_color);var o=n.document.getElementById(a);if(0!=e){var _=HXWebJS.DOM.GetWindowWidth(n),s=HXWebJS.DOM.GetWindowHeight(n),d=HXWebJS.DOM.GetDocumentWidth(n),u=HXWebJS.DOM.GetDocumentHeight(n),b=_>d?_:d,m=s>u?s:u;if(null==o){var c=new HXWebStringBuilder;c.append("<div"),c.append(' id="'+a+'"'),c.append(' style="position:absolute;top:0px;left:0px;'),c.append(" opacity:"+r/100+";filter:alpha(opacity="+r+");"),c.append(" z-index:"+(1e5+(t?1e3:-1e3))+";"),c.append(" background-color:"+i+";"),c.append(" width:"+b+"px;"),c.append(" height:"+m+"px;"),c.append(' " />');var p=n.HXWebJS.DOM.CreateElement(c.toString());n.document.body.appendChild(p),jQuery(p).click(function(e){e.stopPropagation()})}else o.style.backgroundColor=i,o.style.width=b+"px",o.style.height=m+"px",o.style.display=""}else null!=o&&(o.style.display="none")},HXWebJS.DOM._Internal._DisableEnableMouseInput=function(e,t,n,l){null==e&&(e=!0),null==t&&(t=!0),null==n&&(n=HXWebJS.DOM.GetTopWindowInSameDomain(!0)),null==n&&(n=window),HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(e,t,n,l)},HXWebJS.DOM._Internal._ShowHideProgressBar=function(e,t,n){null==e&&(e=!0),null==t&&(t=HXWebJS.DOM.GetTopWindowInSameDomain(!0)),null==t&&(t=window);var l=t.document.getElementById("hxwebjs_progessbar_area_with_img_and_text");if(e){if(null==l){var a;if("undefined"!=typeof HXWebDynamicPage&&null!=HXWebDynamicPage&&HXWebDynamicPage.OnProgressBarHtmlBuild)a=HXWebDynamicPage.OnProgressBarHtmlBuild("hxwebjs_progessbar_area_with_img_and_text");else{var r=new HXWebStringBuilder;r.append('<div id="hxwebjs_progessbar_area_with_img_and_text" style="position:absolute;height:24px;line-height:24px;">'),r.append('<img id="hxwebjs_progessbar_img_for_animation"');r.append(' src="'+t.HXWebPageGlobalVariables.WebRootPath+'hximages_v6/hxpub_waiting_hint_slow.gif" />'),r.append('<span id="hxwebjs_progessbar_area__hint_text" style="margin-left:5px;font-size:14px;height:20px;line-height:20px;">'),r.append(HXWebJS.Core.MarkXMLSpecialChars(HXWebJS.Core.GetPlatformJsText("HXWebJS.UIText.Core.ProgressBarWaitingMsg"))),r.append("</span>"),r.append("</div>"),a=r.toString()}var i=t.HXWebJS.DOM.CreateElement(a);i.style.zIndex=2e5,t.document.body.appendChild(i),l=i}var o=HXWebJS.DOM.GetWindowWidth(t),_=HXWebJS.DOM.GetWindowHeight(t),s=HXWebJS.DOM.GetScrollTop(t),d=l.offsetWidth,u=l.offsetHeight;l.style.left=(o-d)/2+"px",l.style.top=(_-u)/2+s+"px",l.style.visibility="visible"}else null!=l&&(l.style.visibility="hidden")},HXWebJS.DOM.GetElementTopPosition=function(e){return HXWebJS.Core.Browser.IsIE?HXWebJS.DOM._GetElementTopPositionInIE(e):$(e).offset().top},HXWebJS.DOM._GetElementTopPositionInIE=function(e){for(var t=null,n=0,l=0,a=e;a;)n+=a.offsetTop,null==a.offsetParent&&(t=a),a=a.offsetParent;if(null!=t){var r="";null!=window.getComputedStyle?r=window.getComputedStyle(t).position:null!=t.currentStyle&&(r=t.currentStyle.position),"fixed"==r&&(n+=HXWebJS.Core.WindowGeometry.GetScrollTop(window))}for(a=e;a&&"HTML"!=a.tagName;)l+=a.scrollTop,a=a.parentNode;return n-l},HXWebJS.DOM.GetElementLeftPosition=function(e){return $(e).offset().left},HXWebJS.DOM.GetElementOuterHTML=function(e){return null==e?"":$(e).prop("outerHTML")},HXWebJS.DOM.GetElementInnerText=function(e){return null==e?"":$(e).text()},HXWebJS.DOM.SetElementInnerText=function(e,t){null!=e&&$(e).text(t)},HXWebJS.DOM.GetElementAttributeValue=function(e,t){return null==e||null==t?null:$(e).attr(t)},HXWebJS.DOM.SetElementAttributeValue=function(e,t,n){null!=e&&null!=t&&$(e).attr(t,n)},HXWebJS.DOM.ElementAttributeIsDefined=function(e,t){var n=HXWebJS.DOM.GetElementAttributeValue(e,t);return null!=n&&void 0!=n},HXWebJS.DOM.IsElementInContainer=function(e,t,n){if(null==e||null==t)return!1;if(n&&e===t)return!0;for(var l=$(t).parents(),a=0;a<l.length;a++)if(l[a]===e)return!0;return!1},HXWebJS.DOM.IsPointInElementArea=function(e,t,n){if(arguments.length<2)return!1;if(2==arguments.length){var l=arguments[1];t=l.x,n=l.y}var a=HXWebJS.DOM.GetElementTopPosition(e),r=HXWebJS.DOM.GetElementLeftPosition(e),i=e.offsetWidth,o=e.offsetHeight;return t>=r&&t<=r+i&&n>=a&&n<=a+o},HXWebJS.DOM.IsRectInElementArea=function(e,t){if(void 0==e)return 0;var n=HXWebJS.DOM.IsPointInElementArea(e,{x:t.left,y:t.top}),l=HXWebJS.DOM.IsPointInElementArea(e,{x:t.left+t.width,y:t.top+t.height});return n&&l?2:n||l?1:0},HXWebJS.DOM.GetElementById=function(e){return document.getElementById(e)},HXWebJS.DOM.FindElementsByTagName=function(e,t){return t||(t=document),t.getElementsByTagName(e)},HXWebJS.DOM.FindElementsById=function(e,t,n){return t||(t=document),HXWebJS.DOM.FindElementsByAttribute("id",e,n,t)},HXWebJS.DOM.FindFirstElementById=function(e,t,n){t||(t=document);var l=HXWebJS.DOM.FindElementsByAttribute("id",e,n,t);return null==l||0==l.length?null:l[0]},HXWebJS.DOM.FindElementsByAttribute=function(e,t,n,l){return l||(l=document),$(l).find((null!=n?n:"*")+"["+e+(null==t?"":"='"+t+"'")+"]")},HXWebJS.DOM.GetElementBindingLineInfo=function(e){return HXWebJS.Xml._XmlDataIsland._GetElementBindingLineInfo(e)},HXWebJS.DOM.TriggerRowRebindingCallback=function(e,t){HXWebJS.Xml._XmlDataIsland._TriggerRowRebindingCallback(e,t)},HXWebJS.DOM.GetInputFieldFullName=function(e){var t=HXWebJS.DOM.GetElementAttributeValue(e,"hx_binding_datafld");if(null==t||""==t)return null;var n=HXWebJS.DOM.GetElementAttributeValue(e,"hx_binding_datasrc");if(null==n||""==n)return t;var l=n.indexOf("__"),a=l>0?n.substr(l+2):"";if(""==a)return t;var r;if(null==(r=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text__"+a)))return t;var i;if(null==(i=r.SelectSingleNode("//RS_ROW")))return t;var o=i.GetAttributeValue("LBL__"+t.toUpperCase());null!=o&&""!=o||(o=t);var _=i.GetAttributeValue("TITLE__HX_OBJECT_NAME");return null!=_&&""!=_||(_=a),_+"."+o},HXWebJS.DOM.CSSAddStyle=function(e){var t=document.createElement("style");if(t.type="text/css",HXWebJS.Core.Browser.IsIE)t.styleSheet.cssText=e;else{var n=document.createDocumentFragment();n.appendChild(document.createTextNode(e)),t.appendChild(n)}document.getElementsByTagName("head")[0].appendChild(t)},HXWebJS.DOM.CSSClass={},HXWebJS.DOM.CSSClass.HasClass=function(e,t){return $(e).hasClass(t)},HXWebJS.DOM.CSSClass.AddClass=function(e,t){$(e).addClass(t)},HXWebJS.DOM.CSSClass.RemoveClass=function(e,t){$(e).removeClass(t)},HXWebJS.DOM.CSSClass.ToggleClass=function(e,t,n){$(e).toggleClass(t,n)},HXWebJS.DOM.Cookies={},HXWebJS.DOM.Cookies.SetCookie=function(e,t,n,l,a){var r={expires:n,path:l,domain:a};$.cookie(e,t,r)},HXWebJS.DOM.Cookies.GetCookie=function(e){return $.cookie(e)},HXWebJS.DOM.Cookies.RemoveCookie=function(e,t){$.removeCookie(e,{path:t})},HXWebJS.EventManager={},HXWebJS.EventManager._Internal={},HXWebJS.EventManager.AddListener=function(e,t,n){$(e).on(t,n)},HXWebJS.EventManager.RemoveListener=function(e,t,n){$(e).off(t,n)},HXWebJS.EventManager.FireEvent=function(e,t,n){$(e).trigger(t,n)},HXWebJS.EventManager.PostMessageToParentOrOpenerWin=function(e,t){var n=window.opener||(window.parent===window?null:window.parent);null!=n&&null!=n.postMessage&&n.postMessage({hxwebjs_message_type:e,hxwebjs_message_data:t},window.location.origin)},HXWebJS.EventManager.OnDocumentReady=null,HXWebJS.EventManager._Internal._funcsAfterOnLoad=[],HXWebJS.EventManager._Internal._loadedOK=!1,HXWebJS.EventManager.RegisterFuncRunAfterOnLoad=function(e){HXWebJS.EventManager._Internal._loadedOK?e():HXWebJS.EventManager._Internal._funcsAfterOnLoad.push(e)},HXWebJS.EventManager._Internal._runAfterOnLoad=function(){if(!HXWebJS.EventManager._Internal._loadedOK){null!=HXWebJS.Navigation&&null!=HXWebJS.Navigation.IsWebPageOpenedInDialog&&HXWebJS.Navigation.IsWebPageOpenedInDialog()&&HXWebJS.Navigation.SetWebDialogTitle(),null!=HXWebJS.Xml&&null!=HXWebJS.Xml._XmlDataIsland&&HXWebJS.Xml._XmlDataIsland._onload_binding_process();for(var e,t=0;t<HXWebJS.EventManager._Internal._funcsAfterOnLoad.length;t++){e=HXWebJS.EventManager._Internal._funcsAfterOnLoad[t];try{e()}catch(t){HXWebJS.Core.LogErrorToConsole("HXWebJS.EventManager执行通过RegisterFuncRunAfterOnLoad()注册的函数时发生错误。\r\n 函数："+e.toString()+", 错误消息："+t)}}if(null!=HXWebJS.EventManager.OnDocumentReady&&"function"==typeof HXWebJS.EventManager.OnDocumentReady){if(HXWebJS.EventManager.OnDocumentReady())return}HXWebJS.EventManager._Internal._loadedOK=!0,delete HXWebJS.EventManager._Internal._funcsAfterOnLoad,delete HXWebJS.EventManager._Internal._runAfterOnLoad}},HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick=[],HXWebJS.EventManager.RegisterFuncRunAfterOnDocumentClick=function(e){HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick.push(e)},$.when($.ready).then(function(){HXWebJS.EventManager._Internal._runAfterOnLoad(),$(document).on("mouseover","[hxpage_mouseover_handler]",HXWebJS.EventManager._Internal._OnWebPageMouseOverMainHandler),$(document).on("mousemove","[hxpage_mousemove_handler]",HXWebJS.EventManager._Internal._OnWebPageMouseMoveMainHandler),$(document).on("mouseout","[hxpage_mouseout_handler]",HXWebJS.EventManager._Internal._OnWebPageMouseOutMainHandler),$(document).on("click","[hxpage_click_handler]",HXWebJS.EventManager._Internal._OnWebPageClickMainHandler),$(document).on("paste","input[type=text],textarea",HXWebJS.EventManager._Internal._OnWebPagePasteHandler),$(window).on("message",HXWebJS.EventManager._Internal._OnMessageHandler),$("body").click(function(e){for(var t,n=0;n<HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick.length;n++){t=HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick[n];try{t(e)}catch(e){HXWebJS.Core.LogErrorToConsole("HXWebJS.EventManager执行通过_funcsAfterOnDocumentClick()注册的函数时发生错误。\r\n 函数："+t.toString()+", 错误消息："+e)}}var l=HXWebJS.DOM.GetParentWindowInSameDomain(!0);if(null!=l)try{$(l.document.body).trigger("click")}catch(e){HXWebJS.Core.LogErrorToConsole(e)}})}),HXWebJS.EventManager._Internal._OnWebPageMouseOverMainHandler=function(e){HXWebJS.EventManager._Internal._OnWebPageMouseEventMainHandlerProcess(e,"mouseover","MouseOverHandlerProcess")},HXWebJS.EventManager._Internal._OnWebPageMouseMoveMainHandler=function(e){HXWebJS.EventManager._Internal._OnWebPageMouseEventMainHandlerProcess(e,"mousemove","MouseMoveHandlerProcess")},HXWebJS.EventManager._Internal._OnWebPageMouseOutMainHandler=function(e){HXWebJS.EventManager._Internal._OnWebPageMouseEventMainHandlerProcess(e,"mouseout","MouseOutHandlerProcess")},HXWebJS.EventManager._Internal._OnWebPageClickMainHandler=function(e){HXWebJS.EventManager._Internal._OnWebPageMouseEventMainHandlerProcess(e,"click","ClickHandlerProcess")},HXWebJS.EventManager._Internal._OnWebPageMouseEventMainHandlerProcess=function(evt,strEventType,strEventHandlerFuncBaseName){var strFullHandlerCode=$(evt.currentTarget).attr("hxpage_"+strEventType+"_handler"),arrHanlderCode=strFullHandlerCode.split(/\./g),strHanlderCodeType=arrHanlderCode[0],fnEventHandlerFunc;if("hxcontrol"==strHanlderCodeType){if(arrHanlderCode.length<3)return;var strWebControlType=arrHanlderCode[1],objWebControlInstance=eval(strWebControlType);null!=objWebControlInstance&&null!=(fnEventHandlerFunc=eval("objWebControlInstance._OnHXControl"+strEventHandlerFuncBaseName))&&fnEventHandlerFunc(arrHanlderCode.slice(2).join("."),evt)}else if("hxpage"==strHanlderCodeType){if(arrHanlderCode.length<2)return;null!=HXWebDynamicPage&&null!=HXWebDynamicPage._Internal&&null!=(fnEventHandlerFunc=eval("HXWebDynamicPage._Internal._OnHXPage"+strEventHandlerFuncBaseName))&&fnEventHandlerFunc(arrHanlderCode.slice(1).join("."),evt)}else if("hxextendwebpart"==strHanlderCodeType){if(arrHanlderCode.length<3)return;if(null!=HXWebDynamicPage&&null!=HXWebDynamicPage._Internal&&null!=HXWebDynamicPage._Internal._GetExtendWebPartInstance){var strExtendWebPartType=arrHanlderCode[1],objExtendWebPartInstance=HXWebDynamicPage._Internal._GetExtendWebPartInstance(strExtendWebPartType);null!=objExtendWebPartInstance&&null!=(fnEventHandlerFunc=eval("objExtendWebPartInstance._On"+strEventHandlerFuncBaseName))&&fnEventHandlerFunc(arrHanlderCode.slice(2).join("."),evt)}}else null!=HXWebDynamicPage&&null!=(fnEventHandlerFunc=eval("HXWebDynamicPage.On"+strEventHandlerFuncBaseName))&&fnEventHandlerFunc(strFullHandlerCode,evt)},HXWebJS.EventManager._Internal._OnWebPagePasteHandler=function(e){var t=$(e.target).attr("hx_auto_replace_crlf_as_char");if(!HXWebJS.Core.IsStringNullOrEmpty(t,!1)){var n=e.clipboardData||e.originalEvent.clipboardData||window.clipboardData;if(null!=n&&!e.target.readOnly&&!e.target.disabled){var l=n.getData("Text").trim().replace(/\r\n/g,t).replace(/\r/g,t).replace(/\n/g,t);e.preventDefault(),e.target.value=l,$(e.target).trigger("change")}}},HXWebJS.EventManager._Internal._OnMessageHandler=function(e){null!=HXWebDynamicPage&&null!=HXWebDynamicPage.OnMessageHandlerProcess&&null!=e.originalEvent.data&&null!=e.originalEvent.data.hxwebjs_message_type&&HXWebDynamicPage.OnMessageHandlerProcess(e.originalEvent.data.hxwebjs_message_type,e.originalEvent.data.hxwebjs_message_data,e.originalEvent.source)},HXWebJS.EventManager._Internal._RegistedCallbackFunctions={},HXWebJS.EventManager.RegisterCallbackFunction=function(e,t){if(null!=e&&""!=e&&null!=t){var n=HXWebJS.EventManager._Internal._RegistedCallbackFunctions[e];if(null==n)(n=[]).push(t),HXWebJS.EventManager._Internal._RegistedCallbackFunctions[e]=n;else{for(var l=0;l<n.length;l++)if(n[l]===t)return;n.push(t)}}},HXWebJS.EventManager.CallRegistedCallbackFunctions=function(strCallbackType,arg1){if(null==strCallbackType||""==strCallbackType)return null;for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var fns=HXWebJS.EventManager._Internal._RegistedCallbackFunctions[strCallbackType];if(null!=fns)for(var fn,i=0;i<fns.length;i++){if("string"==typeof(fn=fns[i])){var strCallbackFuncName=fn;fn=eval(strCallbackFuncName),"function"!=typeof fn&&HXWebJS.Core.LogErrorToConsole("HXWebJS.EventManager.CallRegistedCallbackFuncs()时发生错误。\r\n 回调类型:"+strCallbackType+", 注册的回调函数字符串("+strCallbackFuncName+")不是有效函数。")}try{fn.apply(this,args)}catch(e){HXWebJS.Core.LogErrorToConsole("HXWebJS.EventManager.CallRegistedCallbackFuncs()时发生错误。\r\n 回调类型:"+strCallbackType+", 函数："+fn.toString()+", 错误消息："+e)}}},HXWebJS.EventManager.HasCallbackFunctionRegisted=function(e){var t=HXWebJS.EventManager._Internal._RegistedCallbackFunctions[e];return null!=t&&t.length>0},HXWebJS.Xml={},HXWebJS.Xml.MarkXMLSpecialChars=function(e,t){return HXWebJS.Core.MarkXMLSpecialChars(e,t)},HXWebJS.Xml.BuildAllXmlDatas=function(e,t,n,l){var a,r=arguments.length;{if(!(r<4)){var i=new HXWebStringBuilder;for(i.append("<HX_ALL_DATAS>"),a=0;a<r;a+=2)i.append('<HX_DATA_BLOCK CODE="'),i.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[a].toLowerCase())),i.append('">'),i.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[a+1])),i.append("</HX_DATA_BLOCK>");return i.append("</HX_ALL_DATAS>"),i.toString()}HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.BuildAllXmlDatas()函数的参数数量太少（至少需要4个或者以上）。")}},HXWebJS.Xml.GetCompositeXmlDataBlock=function(e,t){if(null==e||""==e)return"";if(null==t||""==t)return"";var n=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e).SelectSingleNode("//HX_DATA_BLOCK[@CODE='"+t+"']");return null==n?"":n.GetText()},HXWebJS.Xml.IsCompositeXmlDataPackage=function(e){return!HXWebJS.Core.IsStringNullOrEmpty(e)&&0==e.indexOf("<HX_ALL_DATAS")},HXWebJS.Xml.BuildXmlRowStringViaArray=function(e,t){var n,l=arguments.length;{if(!(l<2)){var a=new HXWebStringBuilder;a.append("<RS_DATA><RS_ROW");var r;for(n=0;n<l;n+=2)r=HXWebJS.Core.StringFormat(' {0}="{1}"',HXWebJS.Xml.MarkXMLSpecialChars(arguments[n].toUpperCase()),HXWebJS.Xml.MarkXMLSpecialChars(null==arguments[n+1]?"":arguments[n+1])),a.append(r);return a.append(" /></RS_DATA>"),a.toString()}HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.BuildXmlDataViaArray()函数的参数数量太少（至少需要2个或者以上）。")}},HXWebJS.Xml._Internal={},HXWebJS.Xml._Internal._get_xml_object_type=function(){if(void 0!==window.DOMParser&&void 0!==document.createExpression)return"w3c_xml_object";var e=null;try{e=new ActiveXObject("Microsoft.XMLDOM")}catch(e){}return null!=e?"ie_xml_object":"unknown"},HXWebJS.Xml._Internal._xml_object_type=HXWebJS.Xml._Internal._get_xml_object_type(),HXWebJS.Xml.GetHXXmlDocumentViaXmlString=function(e){var t=new HXWebJS.Xml.HXXmlDocument(null,"");if(null==e||""==e)return t;if(e=e.trim(),e=e.replace(/\n/g,"&#10;").replace(/\r/g,"&#13;"),"w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type)t._xmldoc=(new DOMParser).parseFromString(e,"text/xml");else{if("ie_xml_object"!=HXWebJS.Xml._Internal._xml_object_type)return HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.GetHXXmlDocumentViaXmlString()函数运行错误：不能确定当前浏览器的XmlDOM类型！"),null;t._xmldoc=new ActiveXObject("Microsoft.XMLDOM"),t._xmldoc.async=!1,t._xmldoc.loadXML(e),t._xml_object_type="ie_xml"}return t},HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland={},HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland=function(e){if(null==e)return null;var t,n=HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[e];if(null!=n)return t=new HXWebJS.Xml.HXXmlDocument(n,e);var l=document.getElementById(e);if(null==l)return null;var a=HXWebJS.DOM.GetElementAttributeValue(l,"content");return t=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(a),HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[e]=t._xmldoc,t._xml_data_island_id=e,t},HXWebJS.Xml.CreateXmlDataIsland=function(e,t,n){return null==e?null:(null==n&&(n=!0),objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(t),objHXXmlDoc._xml_data_island_id=e,HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[e]=objHXXmlDoc._xmldoc,n&&HXWebJS.Xml._XmlDataIsland._reload_xml_rebinding_process(e),objHXXmlDoc)},HXWebJS.Xml.GetHXXmlDocumentViaURL=function(e){"w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type?xmlhttp=new XMLHttpRequest:"ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),xmlhttp.open("GET",e,!1),xmlhttp.send();var t=xmlhttp.responseXML;return new HXWebJS.Xml.HXXmlDocument(t,"")},HXWebJS.Xml.GetHXXmlDocumentFieldValue=function(e,t){var n=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(e);if(null==n)return null;var l=n.SelectSingleNode("//@"+t.toUpperCase());return null==l?null:l.GetText()},HXWebJS.Xml.CreateNode=function(e){if(null==e||""==e)return null;var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e);if(null==t)return null;var n=t.GetRootXmlNode();return null==n?null:n.CloneNode()},HXWebJS.Xml.RegisterOnBindingValueChangedCallback=function(e,t,n){if(null!=e&&""!=e){var l="hxxmldataisland_onbindingvaluechanged__"+e.toLowerCase();null!=n&&""!=n&&(l+="__"+n.toLowerCase()),HXWebJS.EventManager.RegisterCallbackFunction(l,t)}},HXWebJS.Xml.RegisterOnBindingRowAddedCallback=function(e,t){if(null!=e&&""!=e){var n="hxxmldataisland_onbindingrowadded__"+e.toLowerCase();HXWebJS.EventManager.RegisterCallbackFunction(n,t)}},HXWebJS.Xml.RegisterOnBindingRowRemovedCallback=function(e,t){if(null!=e&&""!=e){var n="hxxmldataisland_onbindingrowremoved__"+e.toLowerCase();HXWebJS.EventManager.RegisterCallbackFunction(n,t)}},HXWebJS.Xml.RegisterOnBindingRowReplacedCallback=function(e,t){if(null!=e&&""!=e){var n="hxxmldataisland_onbindingrowreplaced__"+e.toLowerCase();HXWebJS.EventManager.RegisterCallbackFunction(n,t)}},HXWebJS.Xml.RegisterOnBindingDataChangedCallback=function(e,t){if(null!=e&&""!=e){var n="hxxmldataisland_ondatachanged__"+e.toLowerCase();HXWebJS.EventManager.RegisterCallbackFunction(n,t)}},HXWebJS.Xml.XmlDataIslandBindingProcess=function(e){var t=HXWebJS.DOM.GetElementBindingLineInfo(e);if(null==t)HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(e);else{var n,l;if(null!=t.parent_level_row_data)return;l=t.binding_row_data,n={container_id:t.binding_list_container.id,data_src:l._xml_data_island_id,parent_hxwebjs_row_uuid:null,parent_data_seek:null},HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(e,"",n,l)}},HXWebJS.Xml.HXXmlDocument=function(e,t){null==t&&(t=""),this._xml_data_island_id=t,this._xmldoc=e},HXWebJS.Xml.HXXmlDocument.prototype.GetXml=function(){var e=this._xmldoc;if(null==e)return"";var t;if("ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type)t=e.xml;else{if("w3c_xml_object"!=HXWebJS.Xml._Internal._xml_object_type)return HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlDocument.GetXml()函数运行错误：无法正确获取XmlDoc对象"+e+"的内容"),"";-1!=(t=(new XMLSerializer).serializeToString(e)).indexOf("<?xml")&&(t=t.substr(21))}return t=t.replace(/&#10;/g,"\n").replace(/&#13;/g,"\r")},HXWebJS.Xml.HXXmlDocument.prototype.GetRootXmlNode=function(){if(null==this._xmldoc)return null;var e=new HXWebJS.Xml.HXXmlNode;if(e._xml_data_island_id=this._xml_data_island_id,"ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type)e._xmlnode=this._xmldoc.documentElement;else if("w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type){for(var t=this._xmldoc.firstChild;null!=t&&1!=t.nodeType;)t=t.nextSibling;e._xmlnode=t}return e},HXWebJS.Xml.HXXmlDocument.prototype.SelectSingleNode=function(e){if(null==this._xmldoc)return null;var t=this.GetRootXmlNode();return null==t?null:t.SelectSingleNode(e)},HXWebJS.Xml.HXXmlDocument.prototype.SelectNodes=function(e){if(null==this._xmldoc)return new Array(0);var t=this.GetRootXmlNode();return null==t?null:t.SelectNodes(e)},HXWebJS.Xml.HXXmlDocument.prototype.ReloadXML=function(e,t){null==e&&(e=""),null==t&&(t=!0),"ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type?(null==this._xmldoc&&(this._xmldoc=new ActiveXObject("Microsoft.XMLDOM")),this._xmldoc.async=!1,this._xmldoc.loadXML(e)):"w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type&&(this._xmldoc=""==e?document.implementation.createDocument("","",null):(new DOMParser).parseFromString(e,"text/xml")),null!=this._xml_data_island_id&&""!=this._xml_data_island_id&&(HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[this._xml_data_island_id]=this._xmldoc,t&&HXWebJS.Xml._XmlDataIsland._reload_xml_rebinding_process(this._xml_data_island_id),strCallbackType="hxxmldataisland_ondatachanged__"+this._xml_data_island_id,HXWebJS.EventManager.CallRegistedCallbackFunctions(strCallbackType,this._xml_data_island_id))},HXWebJS.Xml.HXXmlDocument.prototype.ClearAllContents=function(){this.ReloadXML("")},HXWebJS.Xml.HXXmlDocument.prototype.InsertChild=function(e,t){return this.GetRootXmlNode().InsertChild(e,t)},HXWebJS.Xml.HXXmlDocument.prototype.AppendChild=function(e){return this.GetRootXmlNode().InsertChild(e,null)},HXWebJS.Xml.HXXmlDocument.prototype.RemoveChild=function(e){return this.GetRootXmlNode().RemoveChild(e)},HXWebJS.Xml.HXXmlDocument.prototype.ReplaceChild=function(e,t){return this.GetRootXmlNode().ReplaceChild(e,t)},HXWebJS.Xml.HXXmlNode=function(){this._xml_data_island_id="",this._xmlnode=null},HXWebJS.Xml.HXXmlNode.prototype.SelectSingleNode=function(t){if(null==this._xmlnode)return null;if("w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type){var n=(null==this._xmlnode.ownerDocument?this._xmlnode:this._xmlnode.ownerDocument).createExpression(t,null).evaluate(this._xmlnode,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(null==n.singleNodeValue)return null;return(r=new HXWebJS.Xml.HXXmlNode)._xml_data_island_id=this._xml_data_island_id,r._xmlnode=n.singleNodeValue,r}if("ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type){var l=this._xmlnode.ownerDocument;null==l&&(l=this._xmlnode),this._xmlnode==l&&(this._xmlnode=l.documentElement);var a=this._xmlnode.selectSingleNode(t);if(null==a)return null;var r=new HXWebJS.Xml.HXXmlNode;return r._xml_data_island_id=this._xml_data_island_id,r._xmlnode=a,r}return HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode.SelectSingleNode()运行错误：当前浏览器不支持 XPath."+e),null},HXWebJS.Xml.HXXmlNode.prototype.SelectNodes=function(t){if(null==this._xmlnode)return new Array(0);if("w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type){for(var n=(null==this._xmlnode.ownerDocument?this._xmlnode:this._xmlnode.ownerDocument).createExpression(t,function(e){return null}).evaluate(this._xmlnode,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),l=new Array(n.snapshotLength),a=0;a<n.snapshotLength;a++){(o=new HXWebJS.Xml.HXXmlNode)._xml_data_island_id=this._xml_data_island_id,o._xmlnode=n.snapshotItem(a),l[a]=o}return l}if("ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type){var r=this._xmlnode.ownerDocument;null==r&&(r=this._xmlnode),this._xmlnode==r&&(this._xmlnode=r.documentElement);for(var i=this._xmlnode.selectNodes(t),l=new Array(i.length),a=0;a<i.length;a++){var o=new HXWebJS.Xml.HXXmlNode;o._xml_data_island_id=this._xml_data_island_id,o._xmlnode=i.item(a),l[a]=o}return l}return HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode.SelectNodes()运行错误：当前浏览器不支持 XPath."+e),new Array(0)},HXWebJS.Xml.HXXmlNode.prototype.GetOwnerXmlDataIsland=function(){return HXWebJS.Core.IsStringNullOrEmpty(this._xml_data_island_id)?null:HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(this._xml_data_island_id)},HXWebJS.Xml.HXXmlNode.prototype.GetXmlDataIslandId=function(){return this._xml_data_island_id},HXWebJS.Xml.HXXmlNode.prototype.GetFirstChild=function(){if(null==this._xmlnode)return null;var e=this._xmlnode.childNodes;if(null==e)return null;for(var t=null,n=0;n<e.length;n++)if(1==e[n].nodeType){t=e[n];break}if(null==t)return null;var l=new HXWebJS.Xml.HXXmlNode;return l._xml_data_island_id=this._xml_data_island_id,l._xmlnode=t,l},HXWebJS.Xml.HXXmlNode.prototype.GetPrevSibling=function(){if(null==this._xmlnode)return null;var e=this._xmlnode.previousSibling;if(null==e)return null;var t=new HXWebJS.Xml.HXXmlNode;return t._xml_data_island_id=this._xml_data_island_id,t._xmlnode=e,t},HXWebJS.Xml.HXXmlNode.prototype.GetNextSibling=function(){if(null==this._xmlnode)return null;var e=this._xmlnode.nextSibling;if(null==e)return null;var t=new HXWebJS.Xml.HXXmlNode;return t._xml_data_island_id=this._xml_data_island_id,t._xmlnode=e,t},HXWebJS.Xml.HXXmlNode.prototype.GetName=function(){return null==this._xmlnode?"":this._xmlnode.nodeName},HXWebJS.Xml.HXXmlNode.prototype.GetText=function(){if(null==this._xmlnode)return"";if(void 0!==this._xmlnode.text)return this._xmlnode.text;if(void 0!==this._xmlnode.textContent)return this._xmlnode.textContent;throw"HXWebJS.Xml.HXXmlNode.GetText()运行错误：当前浏览器不支持Xml."},HXWebJS.Xml.HXXmlNode.prototype.GetXml=function(){var e=this._xmlnode;if(null==e)return"";var t;if("ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type)t=e.xml;else{if("w3c_xml_object"!=HXWebJS.Xml._Internal._xml_object_type)return HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode.GetXml()函数运行错误：无法正确获取XmlNode对象"+e+"的内容"),"";t=(new XMLSerializer).serializeToString(e)}return t=t.replace(/&#10;/g,"\n").replace(/&#13;/g,"\r")},HXWebJS.Xml.HXXmlNode.prototype._SetText=function(e){null!=this._xmlnode&&(null==e&&(e=""),void 0===this._xmlnode.text?void 0===this._xmlnode.textContent?void 0===this._xmlnode.value?HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode.SetText()运行错误：当前浏览器不支持Xml."):this._xmlnode.value=e:this._xmlnode.textContent=e:this._xmlnode.text=e)},HXWebJS.Xml.HXXmlNode.prototype.SetText=function(e,t){var n=this.GetText();if(this._SetText(e),""!=this._xml_data_island_id){if(2!=this._xmlnode.nodeType)return;var l=this._xmlnode.nodeName,a=this.SelectSingleNode("..");HXWebJS.Xml._XmlDataIsland._update_binding_elements_value(a,l,e,null,null,t,n)}},HXWebJS.Xml.HXXmlNode.prototype.SetCDATAText=function(e){if(null!=this._xmlnode&&1==this._xmlnode.nodeType){this._SetText("");var t=this._xmlnode.ownerDocument;if(null!=t){var n=t.createCDATASection(e);this._xmlnode.appendChild(n)}else HXWebJS.Core.LogErrorToConsole("没有找到当前节点的归属Xml文档对象（可能是孤立节点）！不能创建CDATA段！")}},HXWebJS.Xml.HXXmlNode.prototype.GetAttributeValue=function(e){var t=this._xmlnode;return null==t?null:"ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type?null==t.selectSingleNode("@"+e)?null:t.selectSingleNode("@"+e).text:"w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type?t.getAttribute(e):null},HXWebJS.Xml.HXXmlNode.prototype._SetAttributeValueOnly=function(e,t,n){if(null!=this._xmlnode){null==n&&(n=!1),null==t&&(t="");var l=this._xmlnode;if("ie_xml_object"==HXWebJS.Xml._Internal._xml_object_type){var a=l.selectSingleNode("@"+e);if(null!=a)a.text=t;else if(n){var r=l.ownerDocument.createAttribute(e);r.value=t,l.attributes.setNamedItem(r)}}else"w3c_xml_object"==HXWebJS.Xml._Internal._xml_object_type?(null!=l.getAttribute(e)||n)&&l.setAttribute(e,t):HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode._SetAttributeValueOnly()运行错误：当前浏览器不支持 Xml属性处理。")}},HXWebJS.Xml.HXXmlNode.prototype.SetAttributeValue=function(e,t,n,l){var a=this.GetAttributeValue(e);this._SetAttributeValueOnly(e,t,n),""!=this._xml_data_island_id&&HXWebJS.Xml._XmlDataIsland._update_binding_elements_value(this,e,t,null,null,l,a)},HXWebJS.Xml.HXXmlNode.prototype.RemoveAttribute=function(e){if(null!=this._xmlnode){var t=this._xmlnode;if("function"==typeof t.removeAttribute)t.removeAttribute(e);else if(t.attributes){null!=t.selectSingleNode("@"+e)&&t.attributes.removeNamedItem(e)}else HXWebJS.Core.LogErrorToConsole("HXWebJS.Xml.HXXmlNode.RemoveAttribute()运行错误：当前浏览器不支持 Xml属性移除操作。")}},HXWebJS.Xml.HXXmlNode.prototype.CloneNode=function(e){if(null==this._xmlnode)return null;var t=new HXWebJS.Xml.HXXmlNode;if(t._xml_data_island_id="",t._xmlnode=this._xmlnode.cloneNode(!0),null==e&&(e=!0),e){var n=t.GetAttributeValue("_HXWEBJS_ROW_UUID");HXWebJS.Core.IsStringNullOrEmpty(n)||t._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",HXWebJS.Core.CreateUUID(),!0)}return t},HXWebJS.Xml.HXXmlNode.prototype.InsertChild=function(e,t,n){if(null==this._xmlnode)return null;if(null==e)return null;if(null==e._xmlnode)return null;var l=null;return null!=t&&null!=t._xmlnode&&(l=t._xmlnode),e._xml_data_island_id=this._xml_data_island_id,this._xmlnode.insertBefore(e._xmlnode,l),""!=this._xml_data_island_id&&HXWebJS.Xml._XmlDataIsland._insert_new_binding_line(e,t,n),e},HXWebJS.Xml.HXXmlNode.prototype.AppendChild=function(e,t){return this.InsertChild(e,null,t)},HXWebJS.Xml.HXXmlNode.prototype.RemoveChild=function(e){return null==this._xmlnode?null:null==e?null:null==e._xmlnode?null:(this._xmlnode.removeChild(e._xmlnode),""!=this._xml_data_island_id&&HXWebJS.Xml._XmlDataIsland._remove_binding_line(e),e)},HXWebJS.Xml.HXXmlNode.prototype.RemoveSelf=function(){if(null!=this._xmlnode&&null!=this._xmlnode.parentNode){this._xmlnode.parentNode.removeChild(this._xmlnode),""!=this._xml_data_island_id&&HXWebJS.Xml._XmlDataIsland._remove_binding_line(this)}},HXWebJS.Xml.HXXmlNode.prototype.ReplaceChild=function(e,t){if(null==this._xmlnode)return null;if(null==e)return null;if(null==e._xmlnode)return null;if(null==t)return null;if(null==t._xmlnode)return null;if(this._xmlnode.replaceChild(t._xmlnode,e._xmlnode),""!=this._xml_data_island_id){var n=e.GetAttributeValue("_HXWEBJS_ROW_UUID");if(null==n||""==n)return;t._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",n,!0),t._xml_data_island_id=this._xml_data_island_id,HXWebJS.Xml._XmlDataIsland._update_binding_line(t,n);var l="hxxmldataisland_onbindingrowreplaced__"+this._xml_data_island_id.toLowerCase();HXWebJS.EventManager.CallRegistedCallbackFunctions(l,this._xml_data_island_id,t),l="hxxmldataisland_ondatachanged__"+this._xml_data_island_id.toLowerCase(),HXWebJS.EventManager.CallRegistedCallbackFunctions(l,this._xml_data_island_id)}return t},HXWebJS.Xml.HXXmlNode.prototype._SwapChild=function(e,t){if(e!=t){var n=this._xmlnode.childNodes[e],l=this._xmlnode.childNodes[t],a=n.cloneNode(!0);this._xmlnode.replaceChild(l.cloneNode(!0),n),this._xmlnode.replaceChild(a,l)}},HXWebJS.Xml.HXXmlNode.prototype._MoveChildAfter=function(e,t){if(null==this._xmlnode)return null;if(null==e)return null;if(null==e._xmlnode)return null;if(null==t)this._xmlnode.insertBefore(e._xmlnode,e._xmlnode.parentNode.childNodes[0]);else{var n=t._xmlnode.nextSibling;null==n?this._xmlnode.appendChild(e._xmlnode):this._xmlnode.insertBefore(e._xmlnode,n)}},HXWebJS.Xml.HXXmlNode.prototype._MoveChildBefore=function(e,t){return null==this._xmlnode?null:null==e?null:null==e._xmlnode?null:void(null==t?this._xmlnode.insertBefore(e._xmlnode,null):this._xmlnode.insertBefore(e._xmlnode,t._xmlnode))},HXWebJS.Xml.HXXmlNode.prototype.TriggerBindingRowFormatCallback=function(){if(""!=this._xml_data_island_id){var e=this.GetAttributeValue("_HXWEBJS_ROW_UUID");if(null==e||""==e)return;HXWebJS.Xml._XmlDataIsland._update_binding_line(this,e)}},HXWebJS.Xml._XmlDataIsland={},HXWebJS.Xml._XmlDataIsland._binding_row_template_cache={},HXWebJS.Xml._XmlDataIsland._gblnBindingDataHasChangedByUser=!1,HXWebJS.Xml._XmlDataIsland._onload_binding_process=function(){HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(document.body),HXWebJS.EventManager.AddListener(document.body,"change",HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process)},HXWebJS.Xml._XmlDataIsland._reload_xml_rebinding_process=function(e){null!=e&&""!=e&&HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(document.body,e)},HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element=function(e,t,n,l,a,r){e?"string"==typeof e&&(e=document.getElementById(e)):e=document.body,t=null==t?"":t.toLowerCase();var i=e.tagName.toLowerCase(),o=e.getAttribute("hx_binding_datasrc"),_=!1;if(""!=(o=null!=o?o.toLowerCase():"")&&("table"==i?_=!0:"div"==i&&"1"==e.getAttribute("hx_binding_list_container")&&(_=!0)),""!=o&&(t==o||""==t)){if(_)return a?void HXWebJS.Core.LogErrorToConsole("HXWebJS引擎不支持3级及以上的列表绑定！"):void HXWebJS.Xml._XmlDataIsland._binding_process_for_list_container_element(e,t,n,l);var s=e.getAttribute("hx_binding_datafld");if(""!=(s=null!=s?s:""))return void HXWebJS.Xml._XmlDataIsland._binding_process_for_value_element(e,o,s,n,l,a,r)}for(var d=[],u=0;u<e.childNodes.length;u++){1==e.childNodes[u].nodeType&&d.push(e.childNodes[u])}for(u=0;u<d.length;u++)HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(d[u],t,n,l,a,r)},HXWebJS.Xml._XmlDataIsland._binding_process_for_list_container_element=function(e,t,n,l){var a=e.id;if(null!=a&&""!=a){var r=e.getAttribute("hx_binding_datasrc").toLowerCase(),i="1"==e.getAttribute("hx_binding_use_single_tbody_mode")&&"TABLE"==e.tagName.toUpperCase(),o=null;if(n){if(r==n.data_src)return void HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(e,t,n,l);var _=e.getAttribute("hx_binding_parent_datasrc");if(""==(_=null==_?"":_.toLowerCase()))return void HXWebJS.Core.LogErrorToConsole(HXWebJS.Core.StringFormat("一级绑定表({0})条目行元素内部不允许定义别的一级绑定表({1})。",n.container_id,a));if(_!=n.data_src)return void HXWebJS.Core.LogErrorToConsole(HXWebJS.Core.StringFormat("一级绑定表({0})条目行元素内部不允许定义关联其它上级数据源的二级绑定表({1})。",n.container_id,a));o=HXWebJS.Xml._XmlDataIsland._GetLevel2BindingInfo(e)}else n={container_id:a,data_src:r,parent_hxwebjs_row_uuid:null,parent_data_seek:null};for(var s,d,u=HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[a],b=e.childNodes,m=b.length-1;m>=0;m--)if(1==(s=b[m]).nodeType)if("tbody"==(d=s.nodeName.toLowerCase())||"div"==d&&"1"==s.getAttribute("hx_binding_row_container")){if(null==u){if(i){var c=$(s).children("tr");if(1!=c.length)return void HXWebJS.Core.LogErrorToConsole("单行tbody绑定模式下，table tbody的模板行必须且只能有一个tr元素！容器元素："+e.id);u=c[0].cloneNode(!0)}else u=s.cloneNode(!0);HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[a]=u}try{e.removeChild(s)}catch(e){}}else HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(s,t,n,l);if(null!=u){var p=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(r);if(null!=p){var X,g=0;if(null==o?(X=p.SelectNodes("//RS_ROW"),g=e.getAttribute("hx_binding_list_async_load_batch_count"),HXWebJS.Core.IsStringNullOrEmpty(g)||isNaN(g)||(g=parseInt(g))<=0&&(g=0)):X=p.SelectNodes("//RS_ROW["+o.parent_data_seek+"]"),null!=X&&0!=X.length)if(g>0)HXWebJS.Xml._XmlDataIsland._binding_process_for_list_rows_batch(e,X,u,i,n,g,0);else{var S,f;for(m=0;m<X.length;m++){f=X[m];var W=u.cloneNode(!0);if(null!=(S=f.GetAttributeValue("_HXWEBJS_ROW_UUID"))&&""!=S||(S=HXWebJS.Core.CreateUUID(),f._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",S,!0)),W.setAttribute("_hxwebjs_row_uuid",S),W.setAttribute("_hxwebjs_binding_line_no",m+1),i)0==$("tbody",e).length&&$("<tbody></tbody>").appendTo(e),$("tbody",e)[0].appendChild(W);else{var h=$(e).children("[hx_binding_appendix_container=1]");"1"==e.getAttribute("hx_binding_list_container")&&h.length>0?e.insertBefore(W,h[0]):e.appendChild(W)}o?(W.setAttribute("_hxwebjs_parent_row_uuid",o.parent_hxwebjs_row_uuid),f._SetAttributeValueOnly("_HXWEBJS_PARENT_ROW_UUID",o.parent_hxwebjs_row_uuid,!0),HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(W,"",n,l,o,f)):HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(W,"",n,f)}HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback(e,X)}}}}else HXWebJS.Core.LogErrorToConsole("绑定列表容器元素(table|div)必需要指定有效的id值。")},HXWebJS.Xml._XmlDataIsland._binding_process_for_list_rows_batch=function(e,t,n,l,a,r,o){var _,s,d=!1,u=o+r;for(u>=t.length-1&&(u=t.length-1,d=!0),i=o;i<=u;i++){s=t[i];var b=n.cloneNode(!0);if(null!=(_=s.GetAttributeValue("_HXWEBJS_ROW_UUID"))&&""!=_||(_=HXWebJS.Core.CreateUUID(),s._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",_,!0)),b.setAttribute("_hxwebjs_row_uuid",_),b.setAttribute("_hxwebjs_binding_line_no",i+1),l)0==$("tbody",e).length&&$("<tbody></tbody>").appendTo(e),$("tbody",e)[0].appendChild(b);else{var m=$(e).children("[hx_binding_appendix_container=1]");"1"==e.getAttribute("hx_binding_list_container")&&m.length>0?e.insertBefore(b,m[0]):e.appendChild(b)}HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(b,"",a,s)}if(!d){var c=HXWebJS.Core.CreateDelegateFunction(this,HXWebJS.Xml._XmlDataIsland._binding_process_for_list_rows_batch,e,t,n,l,a,r,u+1);window.setTimeout(c,100)}for(i=o;i<=u;i++)s=t[i],HXWebJS.Xml._XmlDataIsland._TriggerRowRebindingCallback(s,1)},HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element=function(e,t,n,l,a,r){for(var i=e.firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(i,t,n,l,a,r)},HXWebJS.Xml._XmlDataIsland._binding_process_for_value_element=function(e,t,n,l,a,r,i){var o=e.tagName.toLowerCase(),_="",s="",d=null;if(null==l||null!=l&&l.data_src!=t&&(null==r||null!=r&&r.data_src!=t)){var u=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(t);if(null==u)return;var b=u.SelectSingleNode("//RS_ROW");if(null==b)return;d=b;var m=b.SelectSingleNode("@"+n.toUpperCase());if(null==m)return;_=b.GetAttributeValue("_HXWEBJS_ROW_UUID"),HXWebJS.Core.IsStringNullOrEmpty(_)&&(_=HXWebJS.Core.CreateUUID(),b._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",_,!0)),s=m.GetText()}else null==r||null!=r&&r.data_src!=t?(_=a.GetAttributeValue("_HXWEBJS_ROW_UUID"),s=a.GetAttributeValue(n.toUpperCase()),d=a):(_=i.GetAttributeValue("_HXWEBJS_ROW_UUID"),s=i.GetAttributeValue(n.toUpperCase()),d=i);HXWebJS.Xml._XmlDataIsland._binding_process_for_update_element_value(e,o,s,_,d)},HXWebJS.Xml._XmlDataIsland._binding_process_for_update_element_value=function(element,strElementTagName,strXmlNodeValue,strHXWebJSRowUUID,objHXXmlNode){if(null!=element.getAttribute("hx_binding_custom_extend")){var strCustomExtendProcessFunc=element.getAttribute("hx_binding_custom_extend");if(HXWebJS.Core.IsJavascriptFunctionDefined(strCustomExtendProcessFunc)){var fnTemp=eval(strCustomExtendProcessFunc);if(null!=fnTemp){try{fnTemp(element,strXmlNodeValue,strHXWebJSRowUUID,objHXXmlNode)}catch(e){HXWebJS.Core.LogErrorToConsole(e,!0)}return}}}{if("input"!=strElementTagName)return"select"==strElementTagName?(element.value=strXmlNodeValue,void element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)):"textarea"==strElementTagName?(element.value=strXmlNodeValue,void element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)):"span"==strElementTagName||"div"==strElementTagName||"button"==strElementTagName||"label"==strElementTagName||"legend"==strElementTagName||"marquee"==strElementTagName?(HXWebJS.DOM.SetElementInnerText(element,strXmlNodeValue),void element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)):"a"==strElementTagName?(element.href=strXmlNodeValue,void element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)):"img"==strElementTagName?(HXWebJS.Core.IsStringNullOrEmpty(strXmlNodeValue)&&(strXmlNodeValue="../hximages_v6/hxpub_clear.gif"),element.src=strXmlNodeValue,void element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)):void 0;var strInputType=element.type;if(null==strInputType&&(strInputType="text"),"checkbox"==(strInputType=strInputType.toLowerCase()))if("1"==$(element).attr("hx_is_multi_choose")){var strTempValue=$(element).attr("hx_checked_value");HXWebJS.Core.IsStringNullOrEmpty(strTempValue)||HXWebJS.Core.IsStringNullOrEmpty(strXmlNodeValue)?element.checked=!1:element.checked=$.inArray(strTempValue,strXmlNodeValue.split(/;|,/g))>=0}else element.checked=null!=strXmlNodeValue&&""!=strXmlNodeValue&&"0"!=strXmlNodeValue;else"radio"==strInputType?element.value==strXmlNodeValue?element.checked=!0:element.checked=!1:element.value=strXmlNodeValue;element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID)}},HXWebJS.Xml._XmlDataIsland._GetLevel2BindingInfo=function(e){var t=HXWebJS.Xml._XmlDataIsland._GetBindingRowContainerElement(e.parentNode);if(null==t)return HXWebJS.Core.LogErrorToConsole("未找到元素"+e.id+"所在的绑定行容器元素(tbody|div[hx_binding_row_container='1'])"),null;var n;n="tr"==t.tagName.toLowerCase()?t.parentNode.parentNode.getAttribute("hx_binding_datasrc"):t.parentNode.getAttribute("hx_binding_datasrc");var l=t.getAttribute("_hxwebjs_row_uuid"),a=e.getAttribute("hx_binding_parent_datasrc");if(""!=(a=null==a?"":a.toLowerCase())){if(n!=a)return HXWebJS.Core.LogErrorToConsole("二级绑定容器元素的父亲数据源定义和该元素所在的上级条目对应的绑定数据源不一致！操作被撤消。"),null}else a=n;var r=e.getAttribute("hx_binding_datasrc"),i=e.getAttribute("hx_binding_parent_join");if(null==i||""==i)return HXWebJS.Core.LogErrorToConsole("二级绑定容器元素的父亲数据源关联关系信息未被定义！操作被撤消。"),null;var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(a);if(null==o)return null;var _=o.SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+l+"']");if(null==_)return null;var s,d=i.match(/(this\.)(\w+)=/gi);for(var u in d)s=d[u],i=i.replace(s,"@"+s.substring(5,s.length-1).toUpperCase()+"=");var b,m,c,p=i.match(/(PARENT\.\w+ )|(PARENT\.\w+$)/gi);for(var u in p){if(b=p[u]," "==b.substr(b.length-1)&&(b=b.substr(0,b.length-1)),m=b.substr(7),null==(c=_.GetAttributeValue(m.toUpperCase()))||""==c)return{container_id:e.id,data_src:r,parent_hxwebjs_row_uuid:l,parent_data_seek:"1=0",parent_container_id:"TR"==t.tagName.toUpperCase()?t.parentNode.parentNode.id:t.parentNode.id,parent_data_src:a,parent_xml_data:_};i=i.replace(b,"'"+c+"'")}return{container_id:e.id,data_src:r,parent_hxwebjs_row_uuid:l,parent_data_seek:i,parent_container_id:"TR"==t.tagName.toUpperCase()?t.parentNode.parentNode.id:t.parentNode.id,parent_data_src:a,parent_xml_data:_}},HXWebJS.Xml._XmlDataIsland._GetBindingRowContainerElement=function(e){for(var t,n=e;null!=n;){if("html"==(t=n.tagName.toLowerCase()))return null;if(null!=n.getAttribute("_hxwebjs_binding_line_no")&&("tbody"==t||"div"==t&&"1"==n.getAttribute("hx_binding_row_container")||"tr"==t&&"1"==n.parentNode.parentNode.getAttribute("hx_binding_use_single_tbody_mode")))return n;n=n.parentNode}return null},HXWebJS.Xml._XmlDataIsland._GetElementBindingLineInfo=function(e){if(null==e)return null;var t=HXWebJS.Xml._XmlDataIsland._GetBindingRowContainerElement(e);if(null==t)return null;var n=t.getAttribute("_hxwebjs_binding_line_no");if(null==n||""==n)return HXWebJS.Core.LogErrorToConsole("绑定数据条目容器上的行号信息不存在!操作被取消。"),null;var l=parseInt(n);if(isNaN(l)||l<0)return HXWebJS.Core.LogErrorToConsole("绑定数据条目容器上的行号信息不是正确的数字或者是小于零的非法数字!操作被取消。"),null;var a=t.getAttribute("_hxwebjs_row_uuid");if(null==a||""==a)return HXWebJS.Core.LogErrorToConsole("绑定数据条目容器上的数据记录定位uuid信息不存在! 操作被取消。"),null;var r;if(null==(r="tr"==t.tagName.toLowerCase()?t.parentNode.parentNode:t.parentNode))return HXWebJS.Core.LogErrorToConsole("绑定数据条目容器的父亲节点不存在! 操作被取消。"),null;var i=r.getAttribute("hx_binding_datasrc");if(null==i||""==i)return HXWebJS.Core.LogErrorToConsole("绑定数据列表容器元素（绑定条目容器的父亲节点）上的绑定数据源信息不存在! 操作被取消。"),null;var o=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(i);if(null==o)return HXWebJS.Core.LogErrorToConsole("绑定数据源对应的Xml数据岛定义不存在! 操作被取消。"),null;var _=o.SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+a+"']"),s=null,d=null,u=null,b=t.getAttribute("_hxwebjs_parent_row_uuid");if(null!=b&&""!=b){s=HXWebJS.Xml._XmlDataIsland._GetBindingRowContainerElement(r.parentNode),u=parseInt(s.getAttribute("_hxwebjs_binding_line_no"));var m;m="TR"==s.tagName.toUpperCase()?s.parentNode.parentNode.getAttribute("hx_binding_datasrc"):s.parentNode.getAttribute("hx_binding_datasrc");d=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(m).SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+b+"']")}return{binding_list_container:r,binding_row_container:t,binding_row_data:_,binding_row_line_no:l,parent_level_row_container:s,parent_level_row_data:d,parent_level_row_line_no:u}},HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback=function(containerElement,objHXXmlNodeList,rowContainerElement,rowHXXmlNodeData){var strFuncNameForDataRowPrecedeRebinding=containerElement.getAttribute("hx_binding_row_precede_callback"),strFuncNameForDataRowRebinding=containerElement.getAttribute("hx_binding_row_callback"),blnFuncExistForRowPrecedeRebinding=null!=strFuncNameForDataRowPrecedeRebinding&&""!=strFuncNameForDataRowPrecedeRebinding&&1==HXWebJS.Core.IsJavascriptFunctionDefined(strFuncNameForDataRowPrecedeRebinding),blnFuncExistForRowRebinding=null!=strFuncNameForDataRowRebinding&&""!=strFuncNameForDataRowRebinding&&1==HXWebJS.Core.IsJavascriptFunctionDefined(strFuncNameForDataRowRebinding);if(blnFuncExistForRowPrecedeRebinding||blnFuncExistForRowRebinding){var fnCallbackDataRowPrecedeRebinding=blnFuncExistForRowPrecedeRebinding?eval(strFuncNameForDataRowPrecedeRebinding):null,fnCallbackDataRowRebinding=blnFuncExistForRowRebinding?eval(strFuncNameForDataRowRebinding):null,strContainerTagName=containerElement.tagName.toLowerCase(),strContainerHtmlId=containerElement.id,objBindingHtmlElemnetRows;if(null!=rowContainerElement)objBindingHtmlElemnetRows=[rowContainerElement],objHXXmlNodeList=[rowHXXmlNodeData];else if("table"==strContainerTagName){var blnUseSingleTBodyMode="1"==containerElement.getAttribute("hx_binding_use_single_tbody_mode");objBindingHtmlElemnetRows=blnUseSingleTBodyMode?containerElement.tBodies[0].rows:containerElement.tBodies}else objBindingHtmlElemnetRows=$(containerElement).children("div[hx_binding_row_container='1']");for(var tmpRowElement,i=0;i<objBindingHtmlElemnetRows.length;i++){tmpRowElement=objBindingHtmlElemnetRows[i];try{blnFuncExistForRowPrecedeRebinding&&fnCallbackDataRowPrecedeRebinding(strContainerHtmlId,tmpRowElement,objHXXmlNodeList[i])}catch(e){HXWebJS.Core.LogErrorToConsole(strFuncNameForDataRowPrecedeRebinding+"()函数调用失败。错误详情："+(null!=e.description?e.description:e))}try{blnFuncExistForRowRebinding&&fnCallbackDataRowRebinding(strContainerHtmlId,tmpRowElement,objHXXmlNodeList[i])}catch(e){HXWebJS.Core.LogErrorToConsole(strFuncNameForDataRowRebinding+"()函数调用失败。错误详情："+(null!=e.description?e.description:e))}}}},HXWebJS.Xml._XmlDataIsland._TriggerRowRebindingCallback=function(e,t){if(null!=e)if(e instanceof HXWebJS.Xml.HXXmlNode){var n=e;2==n._xmlnode.nodeType&&(n=n.SelectSingleNode(".."));var l=n.GetAttributeValue("_HXWEBJS_ROW_UUID");if(null==l||""==l)return;for(var a,r=$(HXWebJS.Core.StringFormat("tbody[_hxwebjs_row_uuid='{0}']",l)),i=$(HXWebJS.Core.StringFormat("div[hx_binding_row_container='1'][_hxwebjs_row_uuid='{0}']",l)),o=$(HXWebJS.Core.StringFormat("tr[_hxwebjs_row_uuid='{0}']",l)),_=$.merge($.merge(r,i),o),s=0;s<_.length;s++)m="TR"==(a=_[s]).tagName.toUpperCase()?a.parentNode.parentNode:a.parentNode,HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback(m,null,a,n)}else{var d=HXWebJS.Xml._XmlDataIsland._GetElementBindingLineInfo(e);if(null!=d){var u,b;null!=d.parent_level_row_container?1==t?(u=d.binding_row_container,b=d.binding_row_data):(u=d.parent_level_row_container,b=d.parent_level_row_data):(u=d.binding_row_container,b=d.binding_row_data);var m;m="TR"==u.tagName.toUpperCase()?u.parentNode.parentNode:u.parentNode,HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback(m,null,u,b)}}},HXWebJS.Xml._XmlDataIsland._update_binding_elements_value=function(e,t,n,l,a,r,i){if(null!=e){var o=e._xml_data_island_id,_=e.GetAttributeValue("_HXWEBJS_ROW_UUID");null==_&&(_=""),null==r&&(r=!1);var s="*[hx_binding_datasrc='"+o.toLowerCase()+"'][hx_binding_datafld='"+t.toLowerCase()+"']";""!=_&&(s+="[_hxwebjs_row_uuid='"+_+"']");var d=$(s);if(null!=d){for(var u=0;u<d.length;u++)tmpElement=d[u],null!=l&&tmpElement===l||null!=a&&$.inArray(tmpElement,a)>=0||HXWebJS.Xml._XmlDataIsland._binding_process_for_update_element_value(tmpElement,tmpElement.tagName.toLowerCase(),n,_,e);r&&HXWebJS.Xml._XmlDataIsland._xmldataisland_onbindingvaluechanged_callback_trigger(o,t,n,i,e,l)}}},HXWebJS.Xml._XmlDataIsland._xmldataisland_onbindingvaluechanged_callback_trigger=function(e,t,n,l,a,r){var e=e.toLowerCase(),t=t.toLowerCase(),i="hxxmldataisland_onbindingvaluechanged__"+e;HXWebJS.EventManager.CallRegistedCallbackFunctions(i+"__"+t,e,t,n,l,a,r),HXWebJS.EventManager.CallRegistedCallbackFunctions(i,e,t,n,l,a,r),i="hxxmldataisland_ondatachanged__"+e,HXWebJS.EventManager.CallRegistedCallbackFunctions(i,e)},HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process=function(e){var t=e.target,n=e.type.toLowerCase(),l=t.getAttribute("hx_binding_datafld");if(null!=l&&""!=l){var a=t.getAttribute("hx_binding_datasrc");if(null==a||""==a)return null;var r=t.getAttribute("_hxwebjs_row_uuid");null==r&&(r="");var i,o=t.tagName.toLowerCase(),_=null;if("input"==o){var s=t.type;if(null==s&&(s="text"),"checkbox"==(s=s.toLowerCase()))if("1"==$(t).attr("hx_is_multi_choose")){var d="*[hx_binding_datasrc='"+a.toLowerCase()+"'][hx_binding_datafld='"+l.toLowerCase()+"']";""!=r&&(d+="[_hxwebjs_row_uuid='"+r+"']"),_=$(d).toArray();for(var u=new HXWebStringBuilder,b=0;b<_.length;b++)_[b].checked&&(u.isEmpty()||u.append(";"),u.append($(_[b]).attr("hx_checked_value")));i=u.toString()}else i=t.checked?"-1":"0";else i=t.value}else if("select"==o){if("change"!=n)return;i=t.value}else if("textarea"==o){if("change"!=n)return;i=t.value}var m=HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value(a,l,i,r);if(null!=m&&m.is_ok){var c=m.old_value,p=m.binding_xmlnode;HXWebJS.Xml._XmlDataIsland._update_binding_elements_value(p,l,i,t,_,!0,c)}}},HXWebJS.Xml._XmlDataIsland._set_xmldataisland_field_value=function(e,t,n,l){var a=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(e);if(null!=a){var r=HXWebJS.Core.IsStringNullOrEmpty(l)?"//RS_ROW":"//RS_ROW[@_HXWEBJS_ROW_UUID='"+l+"']",i=a.SelectSingleNode(r);if(null!=i){var o=i.GetAttributeValue(t.toUpperCase());return i._SetAttributeValueOnly(t.toUpperCase(),n),HXWebJS.Xml._XmlDataIsland._gblnBindingDataHasChangedByUser=!0,{is_ok:!0,old_value:o,binding_xmlnode:i}}}},HXWebJS.Xml._XmlDataIsland._insert_new_binding_line=function(e,t,n){if(null!=e){var l=e.GetAttributeValue("_HXWEBJS_ROW_UUID");null!=l&&""!=l||(l=HXWebJS.Core.CreateUUID(),e._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",l,!0)),HXWebJS.Core.IsStringNullOrEmpty(n)||e._SetAttributeValueOnly("_HXWEBJS_PARENT_ROW_UUID",n,!0);var a,r,i=e._xml_data_island_id,o=null==t?"":t.GetAttributeValue("_HXWEBJS_ROW_UUID"),_=$(HXWebJS.Core.StringFormat("table[hx_binding_datasrc='{0}']",i)),s=$(HXWebJS.Core.StringFormat("div[hx_binding_list_container='1'][hx_binding_datasrc='{0}']",i)),d=$.merge(_,s);if(null!=d&&0!=d.length){for(var u,b,m,c,p,X=0;X<d.length;X++){if(u=d[X],!HXWebJS.Core.IsStringNullOrEmpty(n)){if(null==(c=HXWebJS.Xml._XmlDataIsland._GetElementBindingLineInfo(u))){HXWebJS.Core.LogErrorToConsole("待插入Xml数据包新记录指示为2级绑定列表，但该数据包绑定的元素不在任何1级绑定列表行容器中。");continue}if(c.binding_row_container.getAttribute("_hxwebjs_row_uuid")!=n)continue}p=null!=(b=null!=o&&""!=o?$(u).children(HXWebJS.Core.StringFormat("*[_hxwebjs_row_uuid='{0}']",o))[0]:null)?b.getAttribute("_hxwebjs_binding_line_no"):"table"==u.tagName.toLowerCase()?"1"==u.getAttribute("hx_binding_use_single_tbody_mode")?u.tBodies[0].rows.length+1:u.tBodies.length+1:$(u).children("div[hx_binding_row_container='1']").length+1,null!=b&&HXWebJS.Xml._XmlDataIsland._refresh_binding_line_no_of_binding_row_elements(u,p,1),null!=(m=HXWebJS.Xml._XmlDataIsland._create_new_row_element(u,b))&&(m.setAttribute("_hxwebjs_row_uuid",l),m.setAttribute("_hxwebjs_binding_line_no",p),null!=n&&""!=n?(m.setAttribute("_hxwebjs_parent_row_uuid",n),a={container_id:(r=HXWebJS.Xml._XmlDataIsland._GetLevel2BindingInfo(u)).parent_container_id,data_src:r.parent_data_src},objHXXmlNodeOfLevel1Row=r.parent_xml_data,HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(m,"",a,objHXXmlNodeOfLevel1Row,r,e)):(a={container_id:u.id,data_src:i},HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(m,"",a,e)),HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback(u,null,m,e))}var g="hxxmldataisland_onbindingrowadded__"+i.toLowerCase();HXWebJS.EventManager.CallRegistedCallbackFunctions(g,i,e),g="hxxmldataisland_ondatachanged__"+i.toLowerCase(),HXWebJS.EventManager.CallRegistedCallbackFunctions(g,i)}}},HXWebJS.Xml._XmlDataIsland._refresh_binding_line_no_of_binding_row_elements=function(e,t,n){var l;l="table"==e.tagName.toLowerCase()?"1"==e.getAttribute("hx_binding_use_single_tbody_mode")?e.tBodies[0].rows:e.tBodies:$(e).children("div[hx_binding_row_container='1']");for(var a,r=t-1;r<l.length;r++)a=l[r].getAttribute("_hxwebjs_binding_line_no"),l[r].setAttribute("_hxwebjs_binding_line_no",parseInt(a)+n)},HXWebJS.Xml._XmlDataIsland._remove_binding_line=function(e){if(null!=e){var t=e.GetAttributeValue("_HXWEBJS_ROW_UUID");if(null!=t&&""!=t){var n=e._xml_data_island_id,l=$(HXWebJS.Core.StringFormat("table[hx_binding_datasrc='{0}'] > tbody[_hxwebjs_row_uuid='{1}']",n,t)),a=$(HXWebJS.Core.StringFormat("div[hx_binding_list_container='1'][hx_binding_datasrc='{0}'] > div[hx_binding_row_container='1'][_hxwebjs_row_uuid='{1}']",n,t)),r=$(HXWebJS.Core.StringFormat("table[hx_binding_datasrc='{0}'][hx_binding_use_single_tbody_mode='1'] > tbody > tr[_hxwebjs_row_uuid='{1}']",n,t)),i=$.merge($.merge(l,a),r);if(null!=i&&0!=i.length){for(var o,_,s,d=0;d<i.length;d++)_=i[d],s=parseInt(_.getAttribute("_hxwebjs_binding_line_no")),o="TR"==_.tagName.toUpperCase()?_.parentNode.parentNode:_.parentNode,_.parentNode.removeChild(_),HXWebJS.Xml._XmlDataIsland._refresh_binding_line_no_of_binding_row_elements(o,s,-1);var u="hxxmldataisland_onbindingrowremoved__"+n.toLowerCase();HXWebJS.EventManager.CallRegistedCallbackFunctions(u,n,e),u="hxxmldataisland_ondatachanged__"+n.toLowerCase(),HXWebJS.EventManager.CallRegistedCallbackFunctions(u,n)}}}},HXWebJS.Xml._XmlDataIsland._update_binding_line=function(e,t){if(null!=e){var n=e._xml_data_island_id,l=$(HXWebJS.Core.StringFormat("table[hx_binding_datasrc='{0}'] > tbody[_hxwebjs_row_uuid='{1}']",n,t)),a=$(HXWebJS.Core.StringFormat("div[hx_binding_list_container='1'][hx_binding_datasrc='{0}'] > div[hx_binding_row_container='1'][_hxwebjs_row_uuid='{1}']",n,t)),r=$(HXWebJS.Core.StringFormat("table[hx_binding_datasrc='{0}'][hx_binding_use_single_tbody_mode='1'] > tbody > tr[_hxwebjs_row_uuid='{1}']",n,t)),i=$.merge($.merge(l,a),r);if(null!=i&&0!=i.length)for(var o,_,s,d,u=0;u<i.length;u++)s="TR"==(d=i[u]).tagName.toUpperCase()?d.parentNode.parentNode:d.parentNode,strUpLevelWebJSRowUUID=d.getAttribute("_hxwebjs_parent_row_uuid"),null!=strUpLevelWebJSRowUUID&&""!=strUpLevelWebJSRowUUID?(o={container_id:(_=HXWebJS.Xml._XmlDataIsland._GetLevel2BindingInfo(s)).parent_container_id,data_src:_.parent_data_src},objHXXmlNodeOfLevel1Row=_.parent_xml_data,HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(d,n,o,objHXXmlNodeOfLevel1Row,_,e)):(o={container_id:s.id,data_src:n},HXWebJS.Xml._XmlDataIsland._binding_process_for_list_row_element(d,n,o,e)),HXWebJS.Xml._XmlDataIsland._call_data_row_rebinding_callback(s,null,d,e)}},HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged=function(e){null==e&&(e=!0),HXWebJS.Xml._XmlDataIsland._gblnBindingDataHasChangedByUser=e},HXWebJS.Xml._XmlDataIsland._HasAnyXmlDataChanged=function(){return HXWebJS.Xml._XmlDataIsland._gblnBindingDataHasChangedByUser},HXWebJS.Xml._XmlDataIsland._create_new_row_element=function(e,t){var n=e.id,l=HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[n];if(null==l)return null;var a,r=l.cloneNode(!0);if("TR"==r.tagName.toUpperCase())a=e.tBodies[0].insertBefore(r,t);else if(null!=t)a=e.insertBefore(r,t);else{var i=$(e).children("[hx_binding_appendix_container=1]");a="1"==e.getAttribute("hx_binding_list_container")&&i.length>0?e.insertBefore(r,i[0]):e.appendChild(r)}return a},HXWebJS.Xml._XmlDataIsland._GetBindingRowTemplateElement=function(e){var t=HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[e];if(null!=t)return t;var n=document.getElementById(e);return"TABLE"==n.tagName.toUpperCase()?(t="1"==n.getAttribute("hx_binding_use_single_tbody_mode")?$.find("tbody > tr",n)[0]:$.find("tbody",n)[0],HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[e]=t,t):(t=HXWebJS.DOM.FindElementsByAttribute("hx_binding_row_container","1","div",n)[0],HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[e]=t,t)},HXWebJS.Xml.XmlService={},HXWebJS.Xml.XmlService.OnXmlServiceFailed=null,HXWebJS.Xml.XmlService._Internal={};var HXWebXmlService=HXWebJS.Xml.XmlService;HXWebXmlService._Internal._SayToServer=function(e,t,n,l,a){null==a?a={async:!0,disable_input:!1,show_progressbar:!1,crossDomain:!1,ignore_bod_warning_msg:!1,ignore_bod_error_msg:!1,ignore_connect_fail_msg:!1}:(0!=a.async&&(a.async=!0),1!=a.disable_input&&(a.disable_input=!1),1!=a.show_progressbar&&(a.show_progressbar=!1),1!=a.ignore_bod_warning_msg&&(a.ignore_bod_warning_msg=!1),1!=a.ignore_bod_error_msg&&(a.ignore_bod_error_msg=!1),1!=a.ignore_connect_fail_msg&&(a.ignore_connect_fail_msg=!1),1!=a.crossDomain&&(a.crossDomain=!1));var r=HXWebXmlService._Internal._HXBOD205_Build(e,t,n);a.disable_input&&HXWebJS.DOM._Internal._DisableEnableMouseInput(),a.show_progressbar&&HXWebJS.DOM._Internal._ShowHideProgressBar();var i=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxxmlservice6.aspx";1==a.use_parallel_mode&&(i=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxxmlsvc6_readonlysession.aspx"),a.crossDomain&&(jQuery.support.cors=!0),$.ajax({url:i,type:"POST",dataType:"text",cache:!1,timeout:1e3*a.timeout_seconds,global:!1,async:a.async,processData:!1,data:r,crossDomain:a.crossDomain,complete:HXWebXmlService._Internal._GetSayToServerCompleteCallbackFunc(l,a)})},HXWebJS.Xml.XmlService._Internal._HXBOD205_Build=function(e,t,n){var l=new HXWebStringBuilder;l.append("<HXBOD205><CNTROLAREA>"),l.append("<SUBSYSTEM>"+e+"</SUBSYSTEM>"),l.append("<TASK>"+t+"</TASK>");var a=HXWebJS.Core.WebPageGlobalVariables.CurrentPageName;return l.append("<HX_PAGE_NAME>"+a+"</HX_PAGE_NAME>"),l.append("</CNTROLAREA>"),l.append("<DATAAREA>"),l.append(n),l.append("</DATAAREA></HXBOD205>"),HXWebJS.Xml.MarkXMLSpecialChars(l.toString())},HXWebJS.Xml.XmlService._Internal._GetSayToServerCompleteCallbackFunc=function(e,t){return function(n,l){if("timeout"==l||0==n.status)return t.disable_input&&HXWebJS.DOM._Internal._DisableEnableMouseInput(!1),t.show_progressbar&&HXWebJS.DOM._Internal._ShowHideProgressBar(!1),HXWebJS.Core.LogToConsoleWithTimeStamp("HXWebJS.Xml.XmlService Call 返回异常执行状态："+l),void(null!=e&&e(null,"timeout"));if(t.disable_input&&HXWebJS.DOM._Internal._DisableEnableMouseInput(!1),t.show_progressbar&&HXWebJS.DOM._Internal._ShowHideProgressBar(!1),n.status>=200&&n.status<300){if(null==HXWebJS||null==HXWebJS.Xml)return;var a=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(n.responseText),r=HXWebXmlService._Internal._HXBOD205_ErrorHandle(a,t);null!=e&&e(r)}else{var i=HXWebJS.Xml.XmlService._Internal._GetTrustHXAppOfflineHtmlPageFriendlyNoticeText(n.responseText);if(null!=i&&""!=i)t.ignore_connect_fail_msg||HXWebJS.Core.AlertWithReplaceCrLfString(i);else if(null!=(i=n.responseText)){var o=i.search(/<BODY/gi);-1!=o&&(i=i.substr(o));_="HXWebXmlService通信或服务器处理出现错误。参考信息：\r\n"+(i=i.replace(/\r\n\r\n/g,"\r\n"));t.ignore_connect_fail_msg?HXWebJS.Core.LogErrorToConsole(_,!1):HXWebJS.Core.AlertWithReplaceCrLfString(_)}else{var _="HXWebXmlService通信出现错误且未返回任何响应消息。通常由跨域访问限制引发。参考状态信息：\r\n"+n.statusText+",状态代码:"+n.status;t.ignore_connect_fail_msg?HXWebJS.Core.LogErrorToConsole(_,!1):HXWebJS.Core.AlertWithReplaceCrLfString(_)}null!=e&&e(null)}}},HXWebJS.Xml.XmlService._Internal._GetTrustHXAppOfflineHtmlPageFriendlyNoticeText=function(e){if(!e)return null;var t=e.indexOf("trusthx_app_offline_html_page_flag__used_for_hxxmlservice_friend_notice");if(-1!=t){if(-1==(t=e.indexOf(">",t+1)))return null;var n=e.indexOf("</span>",t+1),l=-1==n?e.substr(t+1):e.substring(t+1,n);return l=l.replace(/<br \/>/g,"\r\n")}return null},HXWebJS.Xml.XmlService._Internal._HXBOD205_ErrorHandle=function(e,t){var n=e.SelectSingleNode("/HXBOD205_CONFIRM/STATUSLVL").GetText(),l=e.SelectSingleNode("/HXBOD205_CONFIRM/DESCRIPTN").GetText(),a=e.SelectSingleNode("/HXBOD205_CONFIRM/CONFIRM_DATA").GetText(),r=e.SelectSingleNode("/HXBOD205_CONFIRM/ERROR_SOURCE").GetText(),i=e.SelectSingleNode("/HXBOD205_CONFIRM/ERROR_CODE").GetText();if(0==n)return a;if(1==n){if(!HXWebJS.Core.IsStringNullOrEmpty(i)){var o=new Object;return o.message=l,o.exit_category=r,o.exit_data=a,o.exit_code=i,o}if("hxwww_warning_msg__xmlservice_no_active_session"==a){var _=window.document.documentElement.attributes.hx_no_active_session_action,s=null==_?"":_.value;if(null!=s&&""!=s)return void window.document.location.reload(!0);if(HXWebJS.EventManager.HasCallbackFunctionRegisted("hxxmlservice_noactivesession"))return HXWebJS.EventManager.CallRegistedCallbackFunctions("hxxmlservice_noactivesession"),null;a=null}return HXWebJS.Core.AlertWithReplaceCrLfString(l),a}return 2==n?(t.ignore_bod_warning_msg?HXWebJS.Core.LogErrorToConsole(l,!1):HXWebJS.Xml.XmlService._Internal._AlertWarningOrError("warning",l,a,r,i),"WARNING_MSG__HXSM_LOGIN_FAIL_6_PASSWORD_HAS_EXPIRED"==i?{exit_category:i,exit_code:i}:null):3==n?(t.ignore_bod_error_msg?HXWebJS.Core.LogErrorToConsole(l,!1):HXWebJS.Xml.XmlService._Internal._AlertWarningOrError("error",l,a,r,i),null):void 0},HXWebJS.Xml.XmlService._Internal._AlertWarningOrError=function(e,t,n,l,a){null!=HXWebJS.Xml.XmlService.OnXmlServiceFailed?HXWebJS.Xml.XmlService.OnXmlServiceFailed(e,t,n,l,a):HXWebJS.Core.AlertWithReplaceCrLfString(t)},HXWebXmlService.RegisterNoActiveSessionCallback=function(e){HXWebJS.EventManager.RegisterCallbackFunction("hxxmlservice_noactivesession",e)},HXWebJS.Xml.XmlService._Internal._BuildPageXmlSvcXmlCmdContent=function(e,t,n,l,a){var r=HXWebPageGlobalVariables.HXPageParamUUID,i=HXWebPageGlobalVariables.CurrentPageName;null==t&&(t=""),null==a&&(a="");var o=new HXWebStringBuilder;return o.append('<PAGE_XML_SERVICE ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'"'),o.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'"'),o.append(' HX_PAGE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(i)+'"'),o.append(' HX_PAGE_PARAM_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(r)+'"'),o.append(' EXTEND_WEBPART_HTML_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(a)+'"'),o.append(' PAGE_XML_SERVICE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),o.append(">"),o.append(HXWebJS.Xml.MarkXMLSpecialChars(t)),o.append("</PAGE_XML_SERVICE>"),o.toString()},HXWebXmlService._Internal._CallPageXmlService=function(e,t,n,l){null==l&&(l={});var a=null!=l.assembly_name?l.assembly_name:"",r=null!=l.assembly_class_name?l.assembly_class_name:"";null==t&&(t="");var i=l.extend_web_part_html_id,o=HXWebXmlService._Internal._BuildPageXmlSvcXmlCmdContent(e,t,a,r,i);HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_XML_SERVICE",o,n,l)},HXWebXmlService.CallPageXmlService=function(e,t,n){null==n&&(n={async:!1}),0!=n.async&&(n.async=!1);var l=null;return HXWebXmlService._Internal._CallPageXmlService(e,t,function(e){l=e},n),l},HXWebXmlService.CallPageXmlServiceAsync=function(e,t,n,l){null==l&&(l={}),1!=l.async&&(l.async=!0),HXWebXmlService._Internal._CallPageXmlService(e,t,n,l)},HXWebJS.Xml.XmlService._Internal._BuildObjectXmlSvcXmlCmdContent=function(e,t,n){var l=HXWebPageGlobalVariables.HXPageParamUUID,a=HXWebPageGlobalVariables.CurrentPageName;null==t&&(t="");var r=new HXWebStringBuilder;return r.append("<OBJECT_XML_SERVICE"),r.append(' HX_PAGE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(a)+'"'),r.append(' HX_PAGE_PARAM_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'"'),r.append(' OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),r.append(' OBJECT_XML_SERVICE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(t)+'"'),r.append(" >"),r.append(HXWebJS.Xml.MarkXMLSpecialChars(n)),r.append("</OBJECT_XML_SERVICE>"),r.toString()},HXWebXmlService._CallObjectXmlService=function(e,t,n,l,a){var r=HXWebJS.Xml.XmlService._Internal._BuildObjectXmlSvcXmlCmdContent(e,t,n);null==a&&(a={disable_input:!1,show_progressbar:!0}),HXWebXmlService._Internal._SayToServer("HXSM","HXSM_OBJECT_XML_SERVICE",r,l,a)},HXWebXmlService.RegisterParameterValueToServer=function(e,t){var n=[];if(1==arguments.length&&e instanceof Array)n=e;else for(a=0;a<arguments.length;a++)n.push(arguments[a]);if(n.length<2)return alert("调用HXWebXmlService.RegisterParameterValueToServer()函数时参数数量不足！"),"";var l=new HXWebStringBuilder;l.append("<RS_DATA>");for(var a=0;a<n.length;a+=2)l.append('<RS_ROW PARAM_NAME="'),l.append(HXWebJS.Xml.MarkXMLSpecialChars(n[a]).toUpperCase()),l.append('" PARAM_VALUE="'),l.append(null==n[a+1]?"":HXWebJS.Xml.MarkXMLSpecialChars(n[a+1])),l.append('" />');l.append("</RS_DATA>");var r=null;return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_PARAMETER_VALUE_REGISTER",l.toString(),function(e){r=e},{async:!1,use_parallel_mode:!0}),null==r?"":r},HXWebXmlService.AppendOrUpdateMyParameterValueToServer=function(e,t,n){var l=arguments.length;if(l<3)return alert("调用AppendOrUpdateMyParameterValueToServer()函数时传递的参数数量不足！"),"";var a=new HXWebStringBuilder;a.append("<RS_DATA>");for(var r=1;r<l;r+=2)a.append('<RS_ROW PARAM_NAME="'),a.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[r]).toUpperCase()),a.append('" PARAM_VALUE="'),a.append(null==arguments[r+1]?"":HXWebJS.Xml.MarkXMLSpecialChars(arguments[r+1])),a.append('" />');a.append("</RS_DATA>");var i=HXWebJS.Xml.BuildAllXmlDatas("hx_page_param_uuid",e,"appended_param_values",a.toString()),o=null;return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_PARAMETER_VALUE_APPEND",i,function(e){o=e},{async:!1,use_parallel_mode:!0}),null==o?"":o},HXWebXmlService.AppendParameterValueToServer=function(e,t){var n=HXWebPageGlobalVariables.HXPageParamUUID,l=[];l.push(n);for(var a=0;a<arguments.length;a++)l.push(arguments[a]);HXWebXmlService.AppendOrUpdateMyParameterValueToServer.apply(null,l)},HXWebXmlService._Internal._RemoveParameterValueToServer=function(e){var t=HXWebPageGlobalVariables.HXPageParamUUID,n=arguments.length;if(n<1)return alert("调用_RemoveParameterValueToServer()函数时传递的参数数量不足！"),"";var l=new HXWebStringBuilder;l.append("<RS_DATA>");for(var a=0;a<n;a++)l.append('<RS_ROW PARAM_NAME="'),l.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[a]).toUpperCase()),l.append('" />');l.append("</RS_DATA>");var r=HXWebJS.Xml.BuildAllXmlDatas("hx_page_param_uuid",t,"removed_param_name",l.toString()),i=null;return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_PARAMETER_VALUE_REMOVE",r,function(e){i=e},{async:!1,use_parallel_mode:!0}),null==i?"":i},HXWebXmlService._Internal._CachedUITextContent={},HXWebXmlService.GetUITextOnServer=function(e,t){if(0!=t){var n=HXWebXmlService._Internal._CachedUITextContent[e];if(null!=n&&""!=n)return n}var l=null;return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_UTILITY_GET_HXEIMS_CORE_UI_TEXT",e,function(e){l=e},{async:!1,use_parallel_mode:!0}),0!=t&&(HXWebXmlService._Internal._CachedUITextContent[e]=l),l},HXWebXmlService.GetObjectUITextOnServer=function(e,t){null==e&&(e="");var n=new HXWebStringBuilder;n.append("<RS_DATA><RS_ROW"),n.append(' OBJECT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),n.append(' TEXT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(t)+'"'),n.append(" /></RS_DATA>");var l=null;return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_UTILITY_GET_UI_TEXT",n.toString(),function(e){l=e},{async:!1,use_parallel_mode:!0}),l},HXWebXmlService.IsOnline=function(e,t,n){null==n&&(n={async:!0,crossDomain:!0,ignore_bod_warning_msg:!0,ignore_bod_error_msg:!0,ignore_connect_fail_msg:!0}),n.use_parallel_mode=!0;HXWebXmlService._Internal._SayToServer("HXSM","HXSM_ONLINE_CHECK","",function(n){"OK"==n?null!=e&&e(!0):null!=t&&t(!1)},n)},HXWebXmlService.LoginVerifyPictureAcquire=function(e){var t=null;if(HXWebXmlService._Internal._SayToServer("HXSM","HXSM_LOGIN_VERIFY_DATA_BUILD","",function(e){t=e},{async:!1,show_progressbar:!0,crossDomain:!0,use_parallel_mode:!0}),null!=t){var n=t.substr(0,36);return e.src=t.substr(40),n}return null},HXWebXmlService._Internal._UserLoginProcess=function(e,t,n,l){null==e&&(e=""),null==t&&(t=""),null==n&&(n=""),null==l&&(l={});var a=null!=l.token_for_verify_code?l.token_for_verify_code:"",r=null!=l.ignore_warning_error_msg&&l.ignore_warning_error_msg,i=null!=l.request_system_code?l.request_system_code:"",o=null!=l.request_culture_name?l.request_culture_name:"",_=null!=l.request_ui_theme?l.request_ui_theme:"",s=null!=l.request_date_display_format?l.request_date_display_format:"",d=null!=l.request_decimal_display_format?l.request_decimal_display_format:"",u=null!=l.request_extra_data?l.request_extra_data:"",b=null!=l.access_token_code?l.access_token_code:"",m=null!=l.app_code_for_access_token?l.app_code_for_access_token:"",c=null!=l.need_new_access_token&&l.need_new_access_token,p=null!=l.use_ad_account_login&&l.use_ad_account_login,X=null!=l.default_ad_domain_name?l.default_ad_domain_name:"",g=new HXWebStringBuilder;g.append('<RS_DATA><RS_ROW HXWEBJS_VERSION="6"'),g.append(' USER_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),g.append(' PASSWORD="'+HXWebJS.Xml.MarkXMLSpecialChars(t)+'"'),g.append(' VERIFY_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'"'),g.append(' TOKEN_FOR_VERIFY_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(a)+'"'),g.append(' ACCESS_TOKEN_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(b)+'"'),g.append(' APP_CODE_FOR_ACCESS_TOKEN="'+HXWebJS.Xml.MarkXMLSpecialChars(m)+'"'),g.append(' NEED_NEW_ACCESS_TOKEN="'+(c?"1":"0")+'"'),g.append(' REQUEST_SYSTEM_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(i)+'"'),g.append(' REQUEST_CULTURE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(o)+'"'),g.append(' REQUEST_UI_THEME="'+HXWebJS.Xml.MarkXMLSpecialChars(_)+'"'),g.append(' REQUEST_DATE_DISPLAY_FORMAT="'+HXWebJS.Xml.MarkXMLSpecialChars(s)+'"'),g.append(' REQUEST_DECIMAL_DISPLAY_FORMAT="'+HXWebJS.Xml.MarkXMLSpecialChars(d)+'"'),g.append(' REQUEST_CUSTOMIZED_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(u)+'"'),g.append(' LOGIN_BY_AD_AUTHENTICATION="'+(p?"1":"0")+'"'),g.append(' DEFAULT_AD_DOMAIN="'+HXWebJS.Xml.MarkXMLSpecialChars(X)+'"'),g.append(" /></RS_DATA>");var S=null,l={async:!1,disable_input:!0,show_progressbar:!0,crossDomain:!0,ignore_bod_warning_msg:r,ignore_bod_error_msg:r};return HXWebXmlService._Internal._SayToServer("HXSM","HXSM_USER_LOGIN",g.toString(),function(e){if(null!=e&&"string"==typeof e){var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e).SelectSingleNode("//RS_ROW"),n=t.GetAttributeValue("CULTURE_CODE"),l=t.GetAttributeValue("ACCESS_TOKEN_CODE"),a=t.GetAttributeValue("ACCESS_TOKEN_EXPIRE_DAYS"),r=null!=a&&""!=a?parseInt(a):3,i=t.GetAttributeValue("NEED_CHANGE_PWD"),o=""!=i&&"0"!=i,_=t.GetAttributeValue("CHANGE_PWD_TEXT");S={exit_category:"login_ok",access_token_code:l,culture_code:n,access_token_expire_days:r,need_change_password:o,change_password_hint_text:_}}else if(null!=e&&"object"==typeof e)if("HXSYS_LOGIN_BY_PWD_TRY_TIMES_WITHOUT_VERIFY_CODE_THRESHOLD_REACHED"==e.exit_category){var s=e.exit_data.substr(0,36),d=e.exit_data.substr(40);S={exit_category:e.exit_category,message:e.message,token_for_verify_code:s,verify_code_image_src:d}}else S="WARNING_MSG__HXSM_LOGIN_FAIL_6_PASSWORD_HAS_EXPIRED"==e.exit_category?e:null},l),S},HXWebJS.Navigation={},HXWebJS.Navigation._Internal={};var HXWebNavigation=HXWebJS.Navigation;HXWebJS.Navigation.PostDataToWebPage=function(e,t,n,l){var a=new HXWebStringBuilder;a.append('<Form method="POST" name="frmHXPostDataToWebPage" id="frmHXPostDataToWebPage">');var r,i=arguments.length;if(i<4)alert("调用HXWebJS.Navigation.PostDataToWebPage()时参数数量不足！");else{for(r=2;r<i;r+=2)a.append('<INPUT name="'),a.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[r])),a.append('" Type=hidden value="'),a.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[r+1])),a.append('">');a.append("</Form>");var o=document.getElementById("frmHXPostDataToWebPage");null==o&&(o=HXWebJS.DOM.CreateElement(a.toString())),document.body.appendChild(o),o.action=e,null!=t&&(o.target=t),o.submit(),document.body.removeChild(o)}},HXWebJS.Navigation.OpenWebPopupPage=function(e,t,n,l){(null==n||isNaN(n))&&(n=screen.availHeight/2),(null==t||isNaN(t))&&(t=screen.availWidth/2),null==l&&(l="yes");var a=(screen.availHeight-28-6-n)/2,r=(screen.availWidth-12-t)/2,i=window.open(e,"_blank","height="+n+",left="+r+",top="+a+",width="+t+",location=no,menubar=no,toolbar=no, status=yes,scrollbars="+l+", resizable=yes");return i.location.protocol.indexOf(!0)&&i.focus(),i},HXWebJS.Navigation.OpenWebPage=function(e,t){null==t?t={}:"string"==typeof t&&(t={window_name:t});var n=t.show_style;if((null==n||1!=n&&2!=n)&&(n=0),0==n){var l=null!=t.window_name?t.window_name:"_blank";return window.open(e,l)}1!=n?2!=n||HXWebJS.DOM.SetFrameSource(t.window_name,e):HXWebJS.Navigation.OpenWebDialog(e,t.dialog_argument,t.dialog_width,t.dialog_height,t.dialog_scroll,t.dialog_callback_func,t.dialog_show_close_btn,t.dialog_show_title_bar)},HXWebJS.Navigation.OpenFileDownloadOnlyPage=function(e,t,n){null==t&&(t=!0),null==n&&(n="");var l=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_directly_file_download&file_name_to_download="+escape(e).replace(/\+/,"%2B")+"&file_name_to_display="+escape(n).replace(/\+/,"%2B")+"&download_file_as_stream="+(t?"1":"0");HXWebJS.Navigation.OpenWebPage(l)},HXWebJS.Navigation.GoHomePage=function(e){null==e&&(e=""),top.location.replace(HXWebPageGlobalVariables.WebRootPath+e)},HXWebJS.Navigation.BuildDynamicPageFullUrl=function(e,t){if(0==new RegExp("(hxdynamicpage)(\\w)+(:)(\\w)+").test(e))return e;var n;if(0==e.indexOf("hxdynamicpage_common_v13:"))n=e.substr(25);else if(0==e.indexOf("hxdynamicpage_edit_v13:"))n=e.substr(23);else if(0==e.indexOf("hxdynamicpage_list_v13:"))n=e.substr(23);else if(0==e.indexOf("hxdynamicpage_statistic_v13:"))n=e.substr(28);else{if(0!=e.indexOf("hxdynamicpage_v20:"))return e;n=e.substr(18)}var l,a,r=n.indexOf("?");-1==r?(l=n,a=""):(l=n.substring(0,r),a=n.substr(r+1));var i,o,_,s,d=["_hxpage",l];if(""!=a)for(var u=a.split("&"),b=0;b<u.length;b++)if(i=u[b],(o=i.indexOf("="))>0){if(_=i.substring(0,o),s=i.substr(o+1),s=unescape(s),"hx_search_field_default_values"==_){d.push("_hxsearchfieldvalues"),d.push(JSON.stringify(HXWebJS.Utility.ConvertStringToJSON(s)));continue}if("hx_key_field_values"==_){d.push("_hxkeys"),d.push(JSON.stringify(HXWebJS.Utility.ConvertStringToJSON(s)));continue}d.push(_),d.push(s)}if(null!=t)for(var m in t)d.push(m),d.push(t[m]);var c=HXWebXmlService.RegisterParameterValueToServer(d);if(null==c||""==c)return null;return HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxdynamicpage6.aspx?hx_page_param_uuid="+c},HXWebJS.Navigation.ExecuteMenuCommand=function(strMenuCmdHref,strWindowNameWebPageShowIn,strMenuSetAppCode){if(!HXWebJS.Core.IsStringNullOrEmpty(strMenuCmdHref))if(0!=strMenuCmdHref.indexOf("javascript:")){HXWebJS.Core.IsStringNullOrEmpty(strWindowNameWebPageShowIn)&&(strWindowNameWebPageShowIn="_blank");var objWindowSetting={show_style:0,window_name:strWindowNameWebPageShowIn},re=new RegExp("^(hxdynamic)(\\w)+(:)(\\w)+");if(re.test(strMenuCmdHref)){var externalParamData=null;HXWebJS.Core.IsStringNullOrEmpty(strMenuSetAppCode)||(externalParamData={_hx_menu_set_app_code:strMenuSetAppCode});var strUrl=HXWebJS.Navigation.BuildDynamicPageFullUrl(strMenuCmdHref,externalParamData);if(null==strUrl)return;HXWebJS.Navigation.OpenWebPage(strUrl,objWindowSetting)}else(re=new RegExp("^http(s)?://")).test(strMenuCmdHref)?HXWebJS.Navigation.OpenWebPage(strMenuCmdHref,objWindowSetting):HXWebJS.Navigation.OpenWebPage(HXWebPageGlobalVariables.WebRootPath+strMenuCmdHref,objWindowSetting)}else eval(strMenuCmdHref.substr(11))},HXWebJS.Navigation.OpenWebDialog=function(e,t,n,l,a,r,i,o){var _=HXWebJS.DOM.GetTopWindowInSameDomain();null==_&&(_=window.self),null==o&&(o=!0),null==i&&(i=!0),null==_._hx_web_dialog_divs_stacks&&(_._hx_web_dialog_divs_stacks=[]);var s=_._hx_web_dialog_divs_stacks.length,d=HXWebJS.Navigation._Internal._CreateNewDialogHtmlElement(_,s+1,e,n,l,r,t,a,i,o);0==s?HXWebJS.DOM._Internal._DisableEnableMouseInput(!0,!1,_):_._hx_web_dialog_divs_stacks[s-1]._hx_dialog_div_object.style.display="none",_._hx_web_dialog_divs_stacks.push(d),d._hx_dialog_div_object.style.display=""},HXWebJS.Navigation.CloseWebDialog=function(e){var t=HXWebJS.Core.Browser.IsIE&&parseInt(HXWebJS.Core.Browser.Version)<=11;void 0===e&&(e=null);var n=HXWebJS.DOM.GetTopWindowInSameDomain();if(null==n&&(n=window.self),null==n._hx_web_dialog_divs_stacks||0==n._hx_web_dialog_divs_stacks.length)return window.returnValue=e,void window.close();var l=n._hx_web_dialog_divs_stacks.pop();l._hx_dialog_div_object.style.display="none";var a=n._hx_web_dialog_divs_stacks.length;0==a?(HXWebJS.DOM._Internal._DisableEnableMouseInput(!1,!1,n),n._hx_web_dialog_divs_stacks=null):n._hx_web_dialog_divs_stacks[a-1]._hx_dialog_div_object.style.display="";var r=l._hx_dialog_callback_func;if(null!=r){if(null==(i=l._hx_dialog_opened_from_window))return;r.call(i,e)}if(l._hx_dialog_div_object.parentNode.removeChild(l._hx_dialog_div_object),l._hx_dialog_div_object=null,t){CollectGarbage&&CollectGarbage();var i=l._hx_dialog_opened_from_window;if(null==i)return;for(var o=i.document.getElementsByTagName("input"),_=0;_<o.length;_++)if(0==o[_].disabled&&""==o[_].style.display){o[_].focus();break}}},HXWebJS.Navigation.SetWebDialogTitle=function(e){var t=HXWebJS.DOM.GetTopWindowInSameDomain();if(null==t&&(t=window.self),null!=t._hx_web_dialog_divs_stacks){var n=t._hx_web_dialog_divs_stacks.length;if(0!=n){var l=null;l=t._hx_web_dialog_divs_stacks[n-1],null!=e&&""!=e||(e=window.document.title),jQuery("#hxwebjs_span_for_web_dialog_title",l._hx_dialog_div_object).text(e)}}},HXWebJS.Navigation.GetWebDialogArgumentsData=function(){var e=HXWebJS.DOM.GetTopWindowInSameDomain();if(null==e&&(e=window.self),null==e._hx_web_dialog_divs_stacks)return null;var t=e._hx_web_dialog_divs_stacks.length;if(0==t)return null;return e._hx_web_dialog_divs_stacks[t-1]._hx_dialog_argument},HXWebJS.Navigation.IsWebPageOpenedInDialog=function(){return null!=window.dialogLeft||null!=window.frameElement&&0==window.frameElement.id.indexOf("hxwebjs_iframe_for_web_dialog_window_")},HXWebJS.Navigation.ShowWebDialogExtendButton=function(e,t,n){var l=HXWebJS.DOM.GetTopWindowInSameDomain();if(null==l&&(l=window.self),null!=l._hx_web_dialog_divs_stacks){var a=l._hx_web_dialog_divs_stacks.length;if(0!=a){var r=null,i=(r=l._hx_web_dialog_divs_stacks[a-1])._hx_dialog_div_object,o=jQuery("#hxwebjs_img_for_web_dialog_ext_button_"+e,i).addClass(t)[0];null!=n&&(o.style.marginTop=n+"px"),o.style.display="";jQuery("#hxwebjs_img_for_web_dialog_ext_button_span_"+e,i).addClass(t)[0].style.display=""}}},HXWebJS.Navigation._Internal._CreateNewDialogHtmlElement=function(e,t,n,l,a,r,i,o,_,s){var d=HXWebJS.DOM.GetWindowWidth(e),u=HXWebJS.DOM.GetWindowHeight(e);(null==l||""==l||isNaN(l))&&(l=d/2),(null==a||""==a||isNaN(a))&&(a=u/2);var b=HXWebJS.DOM.GetScrollLeft(e)+(d-l)/2,m=HXWebJS.DOM.GetScrollTop(e)+(u-a)/2;b<0&&(b=0),m<0&&(m=0);var c=new HXWebStringBuilder;if(c.append('<div id="hxwebjs_div_for_web_dialog_container_v6" class="hxwebjs_web_dialog_container"'),c.append(' has_title_bar="'+(s?"1":"0")+'"'),c.append(' style="position:absolute;z-index:'+(1e5+t).toString()+";"),c.append("top:"+m+"px;left:"+b+"px;width:"+(l+2)+"px;height:"+(a+2)+"px;"),c.append('">'),c.append('<span id="hxwebjs_span_for_web_dialog_title" class="hxwebjs_web_dialog_title"'),c.append(' style="position:absolute;left:0px;top:0px;height:24px;line-height:24px;padding-left:18px;;width:'+parseInt(l)+"px"+(s?"":";display:none")+";z-index:"+(1e5+t+20)+'"'),c.append("></span>"),s&&(c.append('<img id="hxwebjs_img_for_web_dialog_decoration" src="../hximages_v6/hxpub_clear.gif"'),c.append(' class="hxicon_star hxwebjs_web_dialog_decoration_icon"'),c.append(' style="position:absolute;top:5px;left:4px;;z-index:'+(1e5+t+25)+'"'),c.append(" />")),s&&(c.append('<div style="position:absolute;right:20px;width:160px;height:24px;line-height:24px;top:0px;text-align:right;padding-right:4px;'),c.append("z-index:"+(1e5+t+20)),c.append(' ">'),c.append('<img id="hxwebjs_img_for_web_dialog_ext_button_2" src="../hximages_v6/hxpub_clear.gif"'),c.append(' class="hxwebjs_web_dialog_extend_button_2"'),c.append(' style="vertical-align:top;margin-left:4px;display:none;z-index:'+(1e5+t+25)+'"'),c.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(2)" />'),c.append('<img id="hxwebjs_img_for_web_dialog_ext_button_1" src="../hximages_v6/hxpub_clear.gif"'),c.append(' class="hxwebjs_web_dialog_extend_button_1"'),c.append(' style="vertical-align:top;margin-left:4px;display:none;z-index:'+(1e5+t+25)+'"'),c.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(1)" />'),c.append('<span id="hxwebjs_img_for_web_dialog_ext_button_span_2"'),c.append(' class="hxwebjs_web_dialog_extend_button_2"'),c.append(' style="margin-left:4px;display:none;z-index:'+(1e5+t+25)+'"'),c.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(2)"></span>'),c.append('<span id="hxwebjs_img_for_web_dialog_ext_button_span_1"'),c.append(' class="hxwebjs_web_dialog_extend_button_1"'),c.append(' style="margin-left:4px;display:none;z-index:'+(1e5+t+25)+'"'),c.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(1)"></span>'),c.append("</div>")),_&&(c.append('<img id="hxwebjs_img_for_web_dialog_close_button" src="../hximages_v6/hxpub_clear.gif"'),c.append(' class="hxicon_delete hxwebjs_web_dialog_close_button"'),c.append(' style="position:absolute;right:4px;top:3px;display:'+(_&&s?"":"none")+";z-index:"+(1e5+t+25)+'"'),c.append(' onclick="HXWebJS.Navigation.CloseWebDialog()" />')),c.append('<iframe id="hxwebjs_iframe_for_web_dialog_window_'+t+'"'),c.append(" frameborder=0 border=0 scrolling="+(o||"yes"==o||"1"==o?"yes":"no")),c.append(' class="hxwebjs_iframe_for_web_dialog_window"'),c.append(' style="position:absolute;left:0px;background-color:white;top:'+(s?24:0)+"px;width:"+l+"px;height:"+(a-(s?24:0)).toString()+"px;z-index:"+(1e5+t+10)+'">'),c.append("</iframe>"),objDivForWebDialog=HXWebJS.DOM.CreateElement(c.toString()),e.document.body.appendChild(objDivForWebDialog),null!=e.HXWebJS.DOM.SetFrameSource)e.HXWebJS.DOM.SetFrameSource("hxwebjs_iframe_for_web_dialog_window_"+t,n);else{var p=e.frames["hxwebjs_iframe_for_web_dialog_window_"+t];null!=p&&(p.window&&p.window.document?p.window.document.location.href=n:p.contentWindow&&p.contentWindow.document&&(p.contentWindow.document.location.href=n))}HXWebJS.EventManager.AddListener(objDivForWebDialog,"mousedown",HXWebJS.Navigation._Internal._dialog_ondragstart_process),HXWebJS.EventManager.AddListener(objDivForWebDialog,"mousemove",HXWebJS.Navigation._Internal._dialog_ondrag_process),HXWebJS.EventManager.AddListener(objDivForWebDialog,"mouseup",HXWebJS.Navigation._Internal._dialog_ondragend_process);var X=new Object;return X._hx_dialog_div_object=objDivForWebDialog,X._hx_dialog_opened_from_window=window,X._hx_dialog_deep_level=t,X._hx_dialog_argument=i,X._hx_dialog_callback_func=r,X},HXWebJS.Navigation._Internal._ExtendButtonClicked=function(e){var t=HXWebJS.DOM.GetTopWindowInSameDomain();if(null==t&&(t=window.self),null!=t._hx_web_dialog_divs_stacks){var n=t._hx_web_dialog_divs_stacks.length;if(0!=n){var l=null,a=(l=t._hx_web_dialog_divs_stacks[n-1])._hx_dialog_div_object,r=jQuery("iframe",a)[0],i=r.contentWindow?r.contentWindow:r;null!=i.HXWebJS&&null!=i.HXWebJS.DOM&&null!=i.HXWebJS.DOM.OnDialogExtendButtonClicked&&i.HXWebJS.DOM.OnDialogExtendButtonClicked(e)}}},HXWebJS.Navigation._Internal._dialog_ondragstart_process=function(e){if("hxwebjs_span_for_web_dialog_title"==e.target.id){var t=e.target.parentNode;HXWebJS.DOM.SetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_x",e.screenX),HXWebJS.DOM.SetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_y",e.screenY)}},HXWebJS.Navigation._Internal._dialog_ondrag_process=function(e){if((1==e.button||1==e.buttons)&&"hxwebjs_span_for_web_dialog_title"==e.target.id){var t=e.target.parentNode,n=HXWebJS.DOM.GetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_x"),l=HXWebJS.DOM.GetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_y");if(null!=n&&null!=l){var a=e.screenX-parseInt(n),r=e.screenY-parseInt(l);t.style.left=t.offsetLeft+a+"px",t.style.top=t.offsetTop+r+"px",HXWebJS.DOM.SetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_x",e.screenX),HXWebJS.DOM.SetElementAttributeValue(t,"_hx_dialog_drag_begin_mouse_y",e.screenY)}}},HXWebJS.Navigation._Internal._dialog_ondragend_process=function(e){if("hxwebjs_span_for_web_dialog_title"==e.target.id){var t=e.target.parentNode;t.removeAttribute("_hx_dialog_drag_begin_mouse_x"),t.removeAttribute("_hx_dialog_drag_begin_mouse_y")}};var HXWebMessageBox={};HXWebMessageBox.Show=function(e,t,n){null==n&&(n={});var l=document.getElementById("hxwebmessageboxcontrol__container");if(null==l){var a=new HXWebStringBuilder;a.append('<div id="hxwebmessageboxcontrol__container" style="position:absolute;display:none;z-index:100100">'),a.append('<div id="hxwebmessageboxcontrol__title"></div>'),a.append('<textarea id="hxwebmessageboxcontrol__textarea"></textarea>'),a.append('<button id="hxwebmessageboxcontrol__ok_btn" class="hxbtn default" onclick="HXWebMessageBox._hide_messagebox(true)"><span class="fa fa-check" style="color:blue;padding-right:3px;margin-left:-6px;"></span><span hx_binding_datasrc="hxxml_ui_text" hx_binding_datafld="btn__hx_ok"></span></button>'),a.append('<button id="hxwebmessageboxcontrol__cancel_btn" class="hxbtn default" onclick="HXWebMessageBox._hide_messagebox()"><span class="fa fa-close" style="color: red;padding-right:3px;margin-left:-6px;"></span><span hx_binding_datasrc="hxxml_ui_text" hx_binding_datafld="btn__hx_cancel"></span></button>'),a.append('<button id="hxwebmessageboxcontrol__closebtn" class="hxbtn default" onclick="HXWebMessageBox._hide_messagebox()"><span class="fa fa-close" style="color: red;padding-right:3px;margin-left:-6px;"></span><span hx_binding_datasrc="hxxml_ui_text" hx_binding_datafld="btn__hx_closewin"></span></button>'),a.append("</div>"),l=HXWebJS.DOM.CreateElement(a.toString()),document.body.appendChild(l),HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(l)}HXWebJS.DOM.SetElementInnerText(document.getElementById("hxwebmessageboxcontrol__title"),e),document.getElementById("hxwebmessageboxcontrol__textarea").value=t;var r=HXWebJS.DOM.GetWindowWidth(),i=HXWebJS.DOM.GetWindowHeight(),o=null!=n.width?n.width:r/2,_=null!=n.height?n.height:i/2,s=(r-o)/2+HXWebJS.DOM.GetScrollLeft(),d=(i-_)/2+HXWebJS.DOM.GetScrollTop();l.style.left=s+"px",l.style.top=d+"px",l.style.width=o+"px",l.style.height=_+"px",document.getElementById("hxwebmessageboxcontrol__textarea").style.display=0==n.show_textarea?"none":"",document.getElementById("hxwebmessageboxcontrol__textarea").style.borderWidth=n.hide_textarea_border?"0px":"1px",document.getElementById("hxwebmessageboxcontrol__ok_btn").style.display=1==n.show_okcancel_button?"":"none",document.getElementById("hxwebmessageboxcontrol__cancel_btn").style.display=1==n.show_okcancel_button?"":"none",document.getElementById("hxwebmessageboxcontrol__closebtn").style.display=1==n.show_okcancel_button?"none":"",HXWebMessageBox._callback_after_ok_button_clicked=n.callback_after_ok_button_clicked,HXWebMessageBox._keep_background_cover_div=n.keep_background_cover_div,HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!0,!1,window),l.style.display=""},HXWebMessageBox._hide_messagebox=function(e){HXWebMessageBox._keep_background_cover_div||HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!1,!1,window);if(document.getElementById("hxwebmessageboxcontrol__container").style.display="none",e&&null!=HXWebMessageBox._callback_after_ok_button_clicked){var t=document.getElementById("hxwebmessageboxcontrol__textarea").value;HXWebMessageBox._callback_after_ok_button_clicked(t)}},HXWebJS.Utility={},HXWebJS.Utility._Internal={},HXWebJS.Utility.Trim=function(e){return HXWebJS.Core.Trim(e)},HXWebJS.Utility.StringFormat=function(e,t){return HXWebJS.Core.StringFormat.apply(this,arguments)},HXWebJS.Utility.Replace=function(e,t,n){if(HXWebJS.Core.IsStringNullOrEmpty(t))return e;var l=t.replace(/\\/g,"\\\\").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\^/g,"\\^").replace(/\?/g,"\\?").replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,"\\*"),a=new RegExp(l,"ig");return e.replace(a,n)},HXWebJS.Utility.IsStringHasInvalidChar=function(e,t){if(null==e||""==e)return!1;if(null!=t&&1==t||(t=!1),0==t&&-1!=e.indexOf(" "))return!1;return!new RegExp("[,:'`*|?\\\\\"&%$!+[\\]=(){}\\f\\n\\r\\t\\v]").test(e)},HXWebJS.Utility.StringInArray=function(e,t,n){if(null==e||null==e.length||0==e.length)return!1;if(null==t||""==t)return!1;null==n&&(n=!1);for(var l,a=n?t.toUpperCase():t,r=0;r<e.length;r++)if(null!=(l=e[r])&&""!=l){if(l==t)return!0;if(n&&l.toUpperCase()==a)return!0}return!1},HXWebJS.Utility.ConvertStringToJSON=function(strJSONContent){var theJsonValue=null;return eval("theJsonValue="+strJSONContent),theJsonValue},HXWebJS.Utility.ConvertKeyValueListStringToDictionary=function(e){var t={};if(HXWebJS.Core.IsStringNullOrEmpty(e))return t;for(var n=e.split(/[,|;]/g),l=0;l<n.length;l++){var a=n[l];if(!HXWebJS.Core.IsStringNullOrEmpty(a)){var r=a.split("="),i=HXWebJS.Utility.Trim(r[0]),o=r.length>0?r[1]:"";t[i]=o}}return t},HXWebJS.Utility.Round=function(e,t,n){return null==n&&(n=0),e>=0||1==n?null==t||t<=0?Math.round(e):Math.round(e*Math.pow(10,t))/Math.pow(10,t):-1*HXWebJS.Utility.Round(Math.abs(e),t)},HXWebJS.Utility.ConvertToNumber=function(e){if(null==e||""==e)return null;e=HXWebJS.Core.Trim(e);var t=1==HXWebPageGlobalVariables.DecimalDisplayFormatType?".":",";e=e.replace(new RegExp("\\"+t,"g"),""),1==HXWebPageGlobalVariables.DecimalDisplayFormatType&&(e=e.replace(/,/g,"."));var n=!1;"%"==e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1),n=!0);if(0==/^[+-]?\d*[\.]?\d*$/g.test(e))return null;var l=parseFloat(e),a=n?l/100:l;return HXWebJS.Utility.ConvertFloatToDecimal(a)},HXWebJS.Utility.IsNumeric=function(e){return null!=HXWebJS.Utility.ConvertToNumber(e)},HXWebJS.Utility.FormatNumber=function(e,t,n,l){if(null==e||isNaN(e))return"";var a=1==HXWebPageGlobalVariables.DecimalDisplayFormatType?".":",",r=1==HXWebPageGlobalVariables.DecimalDisplayFormatType?",":".";e=null!=t?HXWebJS.Utility.Round(e,t,n):HXWebJS.Utility.ConvertFloatToDecimal(e);var i=new HXWebStringBuilder,o=e.toString();"-"==o.substring(0,1)&&(i.append("-"),o=o.substring(1,o.length));var _,s=o.split("."),d=s[0].length;if(l){var u=d<4?0:parseInt((d-1)/3);i.append(s[0].substring(0,d-3*u));for(b=u;b>0;b--)_=s[0].substring(d-3*b,d-3*(b-1)),i.append(a+_)}else i.append(s[0]);if(null!=t&&t>0)if(s.length>1){i.append(r+s[1]);for(b=s[1].length;b<t;b++)i.append("0")}else{i.append(r);for(var b=0;b<t;b++)i.append("0")}else s.length>1&&i.append(r+s[1]);return i.toString()},HXWebJS.Utility.ConvertFloatToDecimal=function(e){if(null==e||isNaN(e))return null;var t=e.toString(),n=t.indexOf(".");if(-1==n)return e;var l=t.length-n-1;if(l<7)return e;return 0==/0{6}[1-9]$/.test(t)?e:HXWebJS.Utility.Round(e,l-6)},HXWebJS.Utility.ConvertToDate=function(strDate,strDateDisplayFormatString){if(null==strDate)return null;null==strDateDisplayFormatString&&(strDateDisplayFormatString=HXWebPageGlobalVariables.DateDisplayFormatString),"number"==typeof strDate&&(strDate=strDate.toString());var re=/^\d{8}$/;if(re.test(strDate)){var dt=eval('new Date("'+strDate.substr(0,4)+"-"+strDate.substr(4,2)+"-"+strDate.substr(6,2)+'")');return!dt instanceof Date?null:dt}if(strDatePartArray=strDate.split(/\D/g),""==strDatePartArray[strDatePartArray.length-1]&&strDatePartArray.splice(strDatePartArray.length-1,1),strDatePartArray.length<3)return null;var strTemp;if("MM"==strDateDisplayFormatString.substr(0,2)?(strTemp=strDatePartArray[2],strDatePartArray[2]=strDatePartArray[1],strDatePartArray[1]=strDatePartArray[0],strDatePartArray[0]=strTemp):"DD"==strDateDisplayFormatString.substr(0,2)&&(strTemp=strDatePartArray[2],strDatePartArray[2]=strDatePartArray[0],strDatePartArray[0]=strTemp),isNaN(strDatePartArray[0])||isNaN(strDatePartArray[1])||isNaN(strDatePartArray[2])||""==strDatePartArray[0]||""==strDatePartArray[1]||""==strDatePartArray[2])return null;strDatePartArray[1]--;var dt=eval("new Date("+strDatePartArray.join(",")+")");return!dt instanceof Date?null:dt},HXWebJS.Utility.FormatDateTime=function(e,t,n){if(null==e)return null;if(null==n&&(n=HXWebPageGlobalVariables.DateDisplayFormatString),"string"==typeof e&&(e=HXWebJS.Utility.ConvertToDate(e)),null==e)return null;(null==t||1!=t&&2!=t&&3!=t&&4!=t)&&(t=2);var l=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();if(1==t)return l;var a="YYYY"==n.substr(0,4)?n.substr(4,1):n.substr(2,1),r=l.toString(),i=r.substr(0,4)+a+r.substr(4,2)+a+r.substr(6,2);if("MM"==n.substr(0,2)&&(i=r.substr(4,2)+a+r.substr(6,2)+a+r.substr(0,4)),"DD"==n.substr(0,2)&&(i=r.substr(6,2)+a+r.substr(4,2)+a+r.substr(0,4)),2==t)return i;var o=e.getHours().toString()+":"+e.getMinutes().toString()+":"+e.getSeconds().toString();return 3==t?i+" "+o:4==t?i+" "+o+"."+e.getMilliseconds().toString():void 0},HXWebJS.Utility.ConvertToTime=function(e){if(null==e)return null;if("string"!=typeof e)return null;if(!new RegExp("^\\d{1,2}:\\d{1,2}(:\\d{1,2})?(.\\d{1,4})?$").test(e.toString()))return null;var t=e.split(/[:]/g),n=parseInt(t[0],10),l=parseInt(t[1],10),a=0;return 3==t.length&&(a=parseInt(t[2],10)),n>=24?null:l>=60?null:a>=60?null:{hour:n,minute:l,second:a}},HXWebJS.Utility.IsPeriod=function(e){return null!=e&&(("string"==typeof e||"number"==typeof e)&&("number"==typeof e&&(e=e.toString()),6==e.length&&/^(\d{4})([01]\d)$/.test(e)))},HXWebJS.Utility.IsDate=function(e,t){if(null==e)return!1;if("string"!=typeof e)return!1;null==t&&(t=HXWebPageGlobalVariables.DateDisplayFormatString);var n=/^(\d{4})[^\d]{1}([01]?\d)[^\d]{1}([0123]?\d)$/;if("MM"==t.substr(0,2)?n=/^([01]?\d)[^\d]{1}([0123]?\d)[^\d]{1}(\d{4})$/:"DD"==t.substr(0,2)&&(n=/^([0123]?\d)[^\d]{1}([01]?\d)[^\d]{1}(\d{4})$/),!n.test(e))return!1;var l=e.split(/\D/g);""==l[l.length-1]&&l.splice(l.length-1,1);var a,r,i;return"MM"==t.substr(0,2)?(a=parseInt(l[2],10),r=parseInt(l[0],10),i=parseInt(l[1],10)):"DD"==t.substr(0,2)?(a=parseInt(l[2],10),r=parseInt(l[1],10),i=parseInt(l[0],10)):(a=parseInt(l[0],10),r=parseInt(l[1],10),i=parseInt(l[2],10)),!(r<1||r>12)&&(!(i>31)&&((31!=i||2!=r&&4!=r&&6!=r&&9!=r&&11!=r)&&(!(2==r&&i>29)&&!(2==r&&29==i&&!HXWebJS.Utility.IsLeapYear(a)))))},HXWebJS.Utility.IsLeapYear=function(e){return!isNaN(e)&&(e%4==0&&e%100!=0||e%400==0)},HXWebJS.Utility.IsTime=function(e){if(null==e)return!1;if("string"!=typeof e)return!1;if(!new RegExp("^\\d{1,2}:\\d{1,2}(:\\d{1,2})?(.\\d{1,4})?$").test(e.toString()))return!1;var t=e.split(/[:]/g),n=parseInt(t[0],10),l=parseInt(t[1],10),a=0;return 3==t.length&&(a=parseInt(t[2],10)),!(n>=24)&&!(l>=60||a>=60)},HXWebJS.Utility.IsDateTime=function(e,t){if(null==e)return!1;if("string"!=typeof e)return!1;var n=e.indexOf(" "),l=-1==n?e:e.substr(0,n);if(!HXWebJS.Utility.IsDate(l,t))return!1;if(-1==n)return!0;var a=e.substring(n+1);return!!HXWebJS.Utility.IsTime(a)},HXWebJS.Utility.IsIntegerDate=function(e){if(null==e)return!1;if(isNaN(e))return!1;var t=e.toString();if(8!=t.toString().length)return!1;var n=t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2);return HXWebJS.Utility.IsDate(n,"YYYY-MM-DD")},HXWebJS.Utility.DateAdd=function(e,t,n){if(null==e)return null;var l=new Date(e);n=parseFloat(n);var a=parseInt(n),r=n-a;switch(r=Math.round(r*Math.pow(10,3))/Math.pow(10,3),t){case"y":l.setFullYear(l.getFullYear()+a,l.getMonth()+12*r);break;case"m":var i=new Date(l.getFullYear(),l.getMonth()+a+1,0);i.getDate()<l.getDate()?l=i:l.setMonth(l.getMonth()+a,l.getDate()+30*r);break;case"w":l.setDate(l.getDate()+7*a);break;case"d":l.setDate(l.getDate()+a);break;case"h":l.setHours(l.getHours()+a,l.getMinutes()+60*r);break;case"n":l.setMinutes(l.getMinutes()+a,l.getSeconds()+60*r);break;case"s":l.setSeconds(l.getSeconds()+a,l.getMilliseconds()+1e3*r);break;case"l":l.setMilliseconds(l.getMilliseconds()+a);break;default:return l.setDate(l.getDate()+a)}return l},HXWebJS.Utility.DateDiff=function(e,t,n){if("string"==typeof e&&(e=HXWebJS.Utility.ConvertToDate(e)),"string"==typeof t&&(t=HXWebJS.Utility.ConvertToDate(t)),null==e||null==t)return null;if(null==n&&(n="d"),"y"==n)return e.getFullYear()-t.getFullYear();if("m"==n)return 12*e.getFullYear()+e.getMonth()-(12*t.getFullYear()+t.getMonth());var l,a=e-t;switch(n){case"w":l=Math.ceil(a/36e5/168);break;case"d":l=Math.ceil(a/36e5/24);break;case"h":l=Math.ceil(a/36e5);break;case"n":l=Math.ceil(a/6e4);break;case"s":l=Math.ceil(a/1e3);break;case"l":l=a;break;default:l=Math.ceil(a/36e5/24)}return l},HXWebJS.Utility.HXXmlDataList_QuickSort=function(e,t,n,l,a){if(null!=e&&null!=e.GetRootXmlNode()){var r=e.GetRootXmlNode()._xmlnode;if(null!=r){var i="@"+t.toUpperCase(),o=function(e,t,n){if(t!=n){var l=e.childNodes[t],a=e.childNodes[n],r=l.cloneNode(!0);e.replaceChild(a.cloneNode(!0),l),e.replaceChild(r,a)}},_=function(e,t,n){return HXWebJS.Utility.IsNumeric(e)&&HXWebJS.Utility.IsNumeric(t)?">"==n?parseFloat(e)>parseFloat(t):parseFloat(e)<parseFloat(t):HXWebJS.Utility.IsDate(e)&&HXWebJS.Utility.IsDate(t)?">"==n?HXWebJS.Utility.ConvertToDate(e)>HXWebJS.Utility.ConvertToDate(t):HXWebJS.Utility.ConvertToDate(e)<HXWebJS.Utility.ConvertToDate(t):null==e||""==e?null!=t&&""!=t:">"==n?null==t||""==t||1==e.toString().localeCompare(t):null!=t&&""!=t&&-1==e.toString().localeCompare(t)},s=function(e,t,n){var l=e.childNodes[n];if(document.createExpression){var a=(null==l.ownerDocument?l:l.ownerDocument).createExpression(t,null).evaluate(l,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return null==a?"":null==a.singleNodeValue?"":a.singleNodeValue.textContent}var r=l.selectSingleNode(t);return null==r?"":r.text},d=function(e,t,n,l,a){if(l-1>n){if(l-n<9)return void u(e,t,a,n,l-n);var r=n+Math.floor(Math.random()*(l-n));r=function(e,t,n,l,a,r){var i=s(e,t,a);o(e,a,l-1);var d,u=n;for(d=n;d<l-1;++d){var b=s(e,t,d);_(b,i,r)&&(o(e,u,d),++u)}return o(e,l-1,u),u}(e,t,n,l,r,a),d(e,t,n,r,a),d(e,t,r+1,l,a)}},u=function(e,t,n,l,a){for(var r,i,d,u=1;u<a;u++)for(r=u;r>0&&(i=s(e,t,l+r),d=s(e,t,l+r-1),0!=_(i,d,n));)o(e,l+r,l+r-1),r--};null==l&&(l=0),null==a&&(a=r.childNodes.length),null==n&&(n=!0);d(r,i,l,a,n?"<":">")}}},HXWebJS.Utility.GetStringPixelWidth=function(e,t,n){if(null==e||""==e)return 0;for(var l=0,a=0,r=0;r<e.length;r++)e.charCodeAt(r)>=255?a++:l++;return null==t&&(t=8),null==n&&(n=12),l*t+a*n},HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue=function(e,t,n,l,a,r){var i=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(e);if(null==i)return"";var o="//RS_ROW";HXWebJS.Core.IsStringNullOrEmpty(r)||(o+="[@_HXWEBJS_PARENT_ROW_UUID='"+r+"']");var _=i.SelectNodes(o);t=t.toUpperCase(),null==l&&(l=!1),null==a&&(a=!1);for(var s,d,u=0,b=0;b<(null==_?0:_.length);b++)if(null!=(d=_[b].SelectSingleNode("@"+t))){var m=d.GetText();""!=m&&(null!=(s=HXWebJS.Utility.ConvertToNumber(m))?(u+=s,l&&a&&(m=HXWebJS.Utility.FormatNumber(s,n,null,!0),d.SetText(m))):a&&d.SetText(""))}return l?HXWebJS.Utility.FormatNumber(u,n,null,!0):null!=n&&n>-1?HXWebJS.Utility.FormatNumber(u,n):HXWebJS.Utility.FormatNumber(u)},HXWebJS.Utility.CheckInputValidation=function(e,t){null==e&&(e=document);var n,l=HXWebPageGlobalVariables.DateDisplayFormatString,a=HXWebPageGlobalVariables.DecimalDisplayFormatType;n=null==t?$("input:visible",e):$("input:visible",e).find(t);for(r=0;r<n.length;r++)if(!HXWebJS.Utility._Internal._CheckInputValidation_Single(n[r],l,a))return!1;n=null==t?$("select:visible",e):$("select:visible",e).find(t);for(r=0;r<n.length;r++)if(!HXWebJS.Utility._Internal._CheckInputValidation_Single(n[r]))return!1;n=null==t?$("textarea:visible",e):$("textarea:visible",e).find(t);for(r=0;r<n.length;r++)if(!HXWebJS.Utility._Internal._CheckInputValidation_Single(n[r]))return!1;n=null==t?$("[hx_is_field_container=1][hx_input_is_must=1]",e):$("[hx_is_field_container=1][hx_input_is_must=1]",e).find(t);for(var r=0;r<n.length;r++)if(!HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheckOfFieldWebPart(n[r]))return!1;return!0},HXWebJS.Utility._Internal._CheckInputValidation_Single=function(e,t,n){if(null==e)return!0;if(e.offsetHeight<=0)return!0;if("input"==e.tagName.toLowerCase()){return"text"!=e.type.toLowerCase()||HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck(e,t,n)}return!0},HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheckOfFieldWebPart=function(e){var t=$(e),n=t.attr("hx_field_code");if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l,a=t.find("input[type='text']");if(0==a.length&&(a=t.find("textarea")),0==a.length&&(a=t.find("select")),0==a.length&&(a=t.find("input[type='radio']")),0==a.length&&(a=t.find("input[type='checkbox'][hx_is_multi_choose=1]")),0==a.length&&(a=t.find("input[type='password']")),0==a.length&&(a=t.find("input[type='date']")),0==a.length&&(a=t.find("input[type='month']")),0==a.length&&(a=t.find("input[type='datetime-local']")),0==a.length&&(a=t.find("input[type='time']")),0==a.length&&(a=$(e).find("span.filebox_file_name")),0==a.length)return!0;if(l=a.attr("hx_binding_datasrc"),HXWebJS.Core.IsStringNullOrEmpty(l))return!0;var r;null==(r=a.attr("_hxwebjs_row_uuid"))&&(r="");var i=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(l);if(null==i)return!0;var o=""==r?"//RS_ROW":"//RS_ROW[@_HXWEBJS_ROW_UUID='"+r+"']",_=i.SelectSingleNode(o);if(null==_)return!0;var s=_.GetAttributeValue(n.toUpperCase());if(!HXWebJS.Core.IsStringNullOrEmpty(s,!1))return!0;var d=t.attr("hx_object_view_code");HXWebJS.Core.IsStringNullOrEmpty(d)&&null!=HXWebDynamicPage&&(d=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"));var u,b=d,m=n,c=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text__"+d);if(null!=c){var p=c.SelectSingleNode("//RS_ROW");null!=p&&(u=p.GetAttributeValue("LBL__"+n.toUpperCase()),HXWebJS.Core.IsStringNullOrEmpty(u)||(m=u)),u=p.GetAttributeValue("TITLE__HX_OBJECT_NAME"),HXWebJS.Core.IsStringNullOrEmpty(u)||(b=u)}var X=b+"."+m,g=HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_INPUT_VALIDATION__VALUE_CANNOT_EMPTY__WITH_FIELD_NAME");return g=HXWebJS.Core.StringFormat(g,X),HXWebJS.Utility._Internal._InputValidationFailMsgFeedback(a[0],g),!1}},HXWebJS.Utility._Internal._InputValidationFailMsgFeedback=function(e,t){alert(t),null==e||"INPUT"!=e.tagName.toUpperCase()||e.disabled||"none"==e.style.display||"hidden"==e.style.visibility||e.focus()},HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck=function(e,t,n){var l=HXWebJS.DOM.GetElementAttributeValue(e,"hx_input_data_type");l=null==l?"normal_str":l.toLowerCase();var a=e.value;if(null==a||""==a)return!0;var r,i=!0,o="";if("word_str"==l){(m=new RegExp("^[\\w]+$")).test(a)||(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__WORDSTR_LIMITATION",i=!1)}"key_str"==l&&(HXWebJS.Utility.IsStringHasInvalidChar(a)||(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__KEYSTR_LIMITATION",i=!1)),"date"==l&&0==HXWebJS.Utility.IsDate(a,t)&&0==HXWebJS.Utility.IsIntegerDate(a)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_DATE",i=!1,o="date"),"time"==l&&0==HXWebJS.Utility.IsTime(a)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_TIME",i=!1),"datetime"==l&&0==HXWebJS.Utility.IsDateTime(a,t)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_DATETIME",i=!1,o="datetime"),"intdate"==l&&0==HXWebJS.Utility.IsIntegerDate(a)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_INTDATE",i=!1),"period"==l&&0==HXWebJS.Utility.IsPeriod(a)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_PERIOD",i=!1);var _="";if("custom"==l&&null!=(_=HXWebJS.DOM.GetElementAttributeValue(e,"hx_input_custom_rule"))&&""!=_){0==(m=new RegExp(_,"g")).test(a)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__CUSTOM_RULE_CHECK_FAILED",i=!1,o="custom")}if(-1!=l.indexOf("number")){var s=HXWebJS.Utility._Internal._BuildNumberCheckRegExpAndSampleString(l,n),d=s[0],u=s[1],b=s[2],m=new RegExp(d),c=HXWebJS.Utility.ConvertToNumber(a);if(null==c)r="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_NUMBER",i=!1;else if("+"==b&&c<0)r="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_MUST_BE_POSITIVE",i=!1;else if("-"==b&&c>0)r="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_MUST_BE_NEGATIVE",i=!1;else{g=HXWebJS.Utility.FormatNumber(c);0==m.test(g)&&(r="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_PRECISION_INVALID",o="number__precision",i=!1)}}if(0==i){var p,X=HXWebJS.DOM.GetInputFieldFullName(e);if(null==X||""==X?p=HXWebXmlService.GetUITextOnServer(r):(p=HXWebXmlService.GetUITextOnServer(r+"__WITH_FIELD_NAME"),p=HXWebJS.Utility.StringFormat(p,X)),"number__precision"==o)p+=" "+u;else if("custom"==o){var g;null!=(g=HXWebJS.Utility._Internal._CheckInputValidation_GetCustomInvalidMsgText(e))&&""!=g?p=g:p+=" "+_}else"date"!=o&&"datetime"!=o||(g=t.replace("MM","08").replace("DD","28").replace("YYYY","2008"),p=p.replace(/2008-08-28/g,g));return HXWebJS.Utility._Internal._InputValidationFailMsgFeedback(e,p),!1}return!0},HXWebJS.Utility._Internal._BuildNumberCheckRegExpAndSampleString=function(e,t){var n,l,a,r,i=0==t?".":",";if("+"!=(n=e.substr(e.length-1,1))&&"-"!=n&&(n=""),-1==e.indexOf("(")||-1==e.indexOf(")"))l="",a="";else{var o=e.substring(e.indexOf("(")+1,e.indexOf(")"));-1==(o=o.replace(/ /g,"")).indexOf(",")?(l=o,a=""):(l=o.substr(0,o.indexOf(",")),a=o.substr(o.indexOf(",")+1)),0==(r=new RegExp("^\\d{1,2}$")).test(l)&&(l=""),0==r.test(a)&&(a=""),""!=l&&""!=a&&parseInt(a)>=parseInt(l)&&(a=parseInt(l)-1)}var _;_=""==n?"^[+-]?":"+"==n?"^[+]?":"^-",_+=""==l?"\\d*[\\"+i+"]?\\d*$":""==a?"\\d{1,"+l+"}$":"\\d{1,"+(parseInt(l)-parseInt(a))+"}([\\"+i+"]\\d{0,"+a+"})?$";var s="";if(""!=l){var d,u;u=""==a?0:parseInt(a),d=parseInt(l)-u;for(b=0;b<d;b++)s+="n";if(u>0){s+=i;for(var b=0;b<u;b++)s+="n"}}return[_,s,n]},HXWebJS.Utility._Internal._CheckInputValidation_GetCustomInvalidMsgText=function(e){var t=HXWebJS.DOM.GetElementAttributeValue(e,"hx_input_invalid_msg_datafld");if(null==t||""==t)return null;var n=HXWebJS.DOM.GetElementAttributeValue(e,"hx_input_invalid_msg_datasrc");null!=n&&""!=n||(n="hxxml_ui_text");var l,a=null;if(null!=(l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n))){var r;null!=(r=l.SelectSingleNode("//RS_ROW"))&&(a=r.GetAttributeValue(t.toUpperCase()))}return a},HXWebJS.Utility._Internal._WindowTopTipMessageTimerId=null,HXWebJS.Utility.ShowWindowTopTipMessage=function(e,t){null==t&&(t={});var n=document.getElementById("hxwebjs_window_top_tip_message_container_div");if(null==n){var l=document.createElement("div");l.id="hxwebjs_window_top_tip_message_container_div",l.style.position="absolute",l.style.zIndex=11e4,l.style.top="0px",l.style.left="25%",l.style.width="50%",l.style.textAlign="center",l.style.display="none",document.body.appendChild(l),(n=l).innerHTML='<div id="hxwebjs_window_top_tip_message_content_div" style="display:inline-block;"></div>'}var a=null==t.opacity?100:t.opacity;n.style.opacity=a/100,n.style.filter="Alpha(Opacity="+a+")";var r=HXWebJS.DOM.FindFirstElementById("hxwebjs_window_top_tip_message_content_div",n,"div");r.className=null==t.message_type?"info":t.message_type,HXWebJS.DOM.SetElementInnerText(r,e),n.style.display="",null!=HXWebJS.Utility._Internal._WindowTopTipMessageTimerId&&(window.clearTimeout(HXWebJS.Utility._Internal._WindowTopTipMessageTimerId),HXWebJS.Utility._Internal._WindowTopTipMessageTimerId=null);var i=null==t.auto_hide_seconds?5:t.auto_hide_seconds;if(i<=0&&(i=0),i>0){var o=window.setTimeout(HXWebJS.Utility._Internal._HideWindowTopTipMessageArea,1e3*i);HXWebJS.Utility._Internal._WindowTopTipMessageTimerId=o}},HXWebJS.Utility._Internal._HideWindowTopTipMessageArea=function(){var e=document.getElementById("hxwebjs_window_top_tip_message_container_div");null!=e&&(e.style.display="none")},HXWebJS.Utility.GetUrlParameterValues=function(){var e=window.location.href.indexOf("?");if(e<0)return null;for(var t,n,l=[],a=window.location.href.slice(e+1).split("&"),r=0;r<a.length;r++)t=a[r],HXWebJS.Core.IsStringNullOrEmpty(t)||(1==(n=t.split("=")).length?(l.push(null),l.null=decodeURIComponent(n[0])):void 0===n[0]||""==n[0]?(l.push(""),l[""]=decodeURIComponent(n[1])):(l.push(n[0]),l[n[0]]=decodeURIComponent(n[1])));return l},HXWebJS.Utility.WeChatJSInterfaceInit=function(e){if(wx&&null!=e&&null!=e.appId&&null!=e.timestamp&&null!=e.nonceStr&&null!=e.signature){var t=["chooseImage","previewImage","uploadImage","downloadImage","openLocation","getLocation","closeWindow","scanQRCode"];if(null!=e.jsExtendApiList){var n=e.jsExtendApiList.split(/;/g);for(var l in n)HXWebJS.Utility.StringInArray(t,l,!0)||t.push(l)}wx.config({debug:!!e.debug,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:t})}},HXWebJS.Utility.WxJsApiPayRequest=function(strWxJsApiPayRequestJsonData,fnSuccessCallback,fnFailCallback){var jsApiCall=function(){var requestData;eval("requestData="+strWxJsApiPayRequestJsonData),HXWebJS.Utility._WeChatJsPayRequestInternal(requestData,fnSuccessCallback,fnFailCallback)};"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",jsApiCall,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",jsApiCall),document.attachEvent("onWeixinJSBridgeReady",jsApiCall)):jsApiCall()},HXWebJS.Utility._WeChatJsPayRequestInternal=function(e,t,n){WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){"get_brand_wcpay_request:ok"==e.err_msg?t&&t(e):n&&n(e)})},HXWebJS.Utility.UploadFileDirectly=function(e,t){null==t&&(t={});var n=HXWebJS.Core.Browser.IsIE&&parseInt(HXWebJS.Core.Browser.Version)<=10,l=document.getElementById("hxwebfileboxcontrol_upload_file_form");if(null==l){var a=HXWebJS.DOM.CreateElement('<iframe id="hxwebfileboxcontrol_upload_file_response_iframe" name="hxwebfileboxcontrol_upload_file_response_iframe" style="display:none;" src="about:blank"></iframe>');document.body.appendChild(a),$(a).on("load",HXWebJS.Utility._Internal._OnUploadFileResponseIframeResultPageLoaded);var r=new HXWebStringBuilder;r.append('<div id="hxwebfileboxcontrol_upload_file_form_container" style="display:none;">'),r.append('<form method="post" name="hxwebfileboxcontrol_upload_file_form" id="hxwebfileboxcontrol_upload_file_form"'),r.append(' enctype="multipart/form-data" target="hxwebfileboxcontrol_upload_file_response_iframe"'),r.append(' action="'+HXWebPageGlobalVariables.WebRootPath+'hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_filebox_upload_file">'),r.append('<input type="file" id="hxwebfileboxcontrol_upload_file_inputbox" name="hxwebfileboxcontrol_upload_file_inputbox" accept="*/*"'),r.append(' onchange="HXWebJS.Utility._Internal._OnFileInputBoxChanged(event)" />'),n&&(r.append('<input id="hxwebfileboxcontrol__display_inputbox" />'),r.append('<button id="hxwebfileboxcontrol__browse_button" class="hxbtn default"><span hx_binding_datasrc="hxxml_ui_text" hx_binding_datafld="lbl__word__browse" style="margin-left:-3px;"></span></button>'),r.append('<button id="hxwebfileboxcontrol__cancel_button" class="hxbtn default" onclick="HXWebJS.Utility._Internal._HideIE9FileUploadChooseArea()"><span class="fa fa-close" style="color: red;padding-right:3px;margin-left:-6px;"></span><span hx_binding_datasrc="hxxml_ui_text" hx_binding_datafld="btn__hx_cancel"></span></button>')),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_controlhtmlid" name="hxwebfileboxcontrol_upload_file_controlhtmlid" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_fileboxsettingcode" name="hxwebfileboxcontrol_upload_file_fileboxsettingcode" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_allowfiletypelist" name="hxwebfileboxcontrol_upload_file_allowfiletypelist" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_maxfilesizekb" name="hxwebfileboxcontrol_upload_file_maxfilesizekb" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file__callbackfuncname" name="hxwebfileboxcontrol_upload_file__callbackfuncname" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_process_version" name="hxwebfileboxcontrol_process_version" value="6" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_binding_datasrc_id" name="hxwebfileboxcontrol_upload_file_binding_datasrc_id" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_binding_webjs_row_uuid" name="hxwebfileboxcontrol_upload_file_binding_webjs_row_uuid" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_upload_file_uplevel_hxwebjs_row_uuid" name="hxwebfileboxcontrol_upload_file_uplevel_hxwebjs_row_uuid" value="" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_image_file_compress_max_kb" name="hxwebfileboxcontrol_image_file_compress_max_kb" value="0" />'),r.append('<input type="hidden" id="hxwebfileboxcontrol_is_base64_image_file_cnt_mode" name="hxwebfileboxcontrol_is_base64_image_file_cnt_mode" value="0" />'),r.append("</form></div>"),l=HXWebJS.DOM.CreateElement(r.toString()),document.body.appendChild(l),n&&HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(l)}var i=document.getElementById("hxwebfileboxcontrol_upload_file_inputbox");if(HXWebJS.Core.IsStringNullOrEmpty(t.hxwebjs_row_uuid)||(t.allow_multi_files_upload=!1),t.allow_multi_files_upload?i.setAttribute("multiple","multiple"):i.removeAttribute("multiple"),null!=t.input_file_accept_cnt?i.setAttribute("accept",t.input_file_accept_cnt):i.removeAttribute("accept"),document.getElementById("hxwebfileboxcontrol_upload_file_controlhtmlid").value=e,document.getElementById("hxwebfileboxcontrol_upload_file_fileboxsettingcode").value=null==t.filebox_setting_code?"":t.filebox_setting_code,document.getElementById("hxwebfileboxcontrol_upload_file_allowfiletypelist").value=null==t.allow_file_type_list?"":t.allow_file_type_list,document.getElementById("hxwebfileboxcontrol_upload_file_maxfilesizekb").value=null==t.max_file_size_kb?"":t.max_file_size_kb,document.getElementById("hxwebfileboxcontrol_upload_file__callbackfuncname").value=null==t.callback_func_name?"":t.callback_func_name,document.getElementById("hxwebfileboxcontrol_upload_file_binding_datasrc_id").value=null==t.binding_datasrc_id?"":t.binding_datasrc_id,document.getElementById("hxwebfileboxcontrol_upload_file_binding_webjs_row_uuid").value=null==t.hxwebjs_row_uuid?"":t.hxwebjs_row_uuid,document.getElementById("hxwebfileboxcontrol_upload_file_uplevel_hxwebjs_row_uuid").value=null==t.uplevel_hxwebjs_row_uuid?"":t.uplevel_hxwebjs_row_uuid,null!=t.image_file_compress_max_kb&&!isNaN(t.image_file_compress_max_kb)&&t.image_file_compress_max_kb>0&&(document.getElementById("hxwebfileboxcontrol_image_file_compress_max_kb").value=t.image_file_compress_max_kb),document.getElementById("hxwebfileboxcontrol_is_base64_image_file_cnt_mode").value=t.base64_image_file_cnt_in_db_mode?"1":"0",n)return HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!0,!1,window),i.value="",void(document.getElementById("hxwebfileboxcontrol_upload_file_form_container").style.display="");i.value="",i.click()},HXWebJS.Utility.IsPictureFile=function(e){return HXWebJS.Utility._Internal._IsPictureFile(e)},HXWebJS.Utility._Internal._OnFileInputBoxChanged=function(e){var t=e.target.value;if(null!=t&&""!=t){HXWebJS.Core.Browser.IsIE&&parseInt(HXWebJS.Core.Browser.Version)<=10?HXWebJS.Utility._Internal._HideIE9FileUploadChooseArea():(HXWebJS.DOM._Internal._DisableEnableMouseInput(!0,!1,window),HXWebJS.DOM._Internal._ShowHideProgressBar(!0,window));var n=!1,l=document.getElementById("hxwebfileboxcontrol_image_file_compress_max_kb").value;l>0&&(n=!0),n&&"function"==typeof FileReader?HXWebJS.Utility._Internal._ImageFileCompressProcess(e.target,l,HXWebJS.Utility._Internal._PostFilesToServerWithAjax):document.getElementById("hxwebfileboxcontrol_upload_file_form").submit()}},HXWebJS.Utility._Internal._HideIE9FileUploadChooseArea=function(){HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(!1,!1,window),document.getElementById("hxwebfileboxcontrol_upload_file_form_container").style.display="none"},HXWebJS.Utility._Internal._OnAfterFileUploadedToServer=function(strXmlData,blnIsAjaxMode){HXWebJS.DOM._Internal._DisableEnableMouseInput(!1,!1,window),HXWebJS.DOM._Internal._ShowHideProgressBar(!1,window),null==blnIsAjaxMode&&(blnIsAjaxMode=!1);var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlData),strWebControlHtmlId,strBindingDataSrcId,strBindingHXWebJSRowUUID,strUpLevelHXWebJSRowUUID,strIsBase64ImageFileCntMode="0",strCallbackFuncName="";blnIsAjaxMode?(strWebControlHtmlId=document.getElementById("hxwebfileboxcontrol_upload_file_controlhtmlid").value,strBindingDataSrcId=document.getElementById("hxwebfileboxcontrol_upload_file_binding_datasrc_id").value,strBindingHXWebJSRowUUID=document.getElementById("hxwebfileboxcontrol_upload_file_binding_webjs_row_uuid").value,strUpLevelHXWebJSRowUUID=document.getElementById("hxwebfileboxcontrol_upload_file_uplevel_hxwebjs_row_uuid").value,strCallbackFuncName=document.getElementById("hxwebfileboxcontrol_upload_file__callbackfuncname").value,strIsBase64ImageFileCntMode=document.getElementById("hxwebfileboxcontrol_is_base64_image_file_cnt_mode").value):(strWebControlHtmlId=objHXXmlDoc.SelectSingleNode("//@CONTROL_HTML_ID").GetText(),strBindingDataSrcId=objHXXmlDoc.SelectSingleNode("//@BINDING_DATASRC_ID").GetText(),strBindingHXWebJSRowUUID=objHXXmlDoc.SelectSingleNode("//@BINDING_HXWEBJS_ROW_UUID").GetText(),strUpLevelHXWebJSRowUUID=objHXXmlDoc.SelectSingleNode("//@UPLEVEL_HXWEBJS_ROW_UUID").GetText(),null!=objHXXmlDoc.SelectSingleNode("//@CALLBACK_FUNC_NAME")&&(strCallbackFuncName=objHXXmlDoc.SelectSingleNode("//@CALLBACK_FUNC_NAME").GetText()),null!=objHXXmlDoc.SelectSingleNode("//@IS_BASE64_IMAGE_MODE")&&(strIsBase64ImageFileCntMode=objHXXmlDoc.SelectSingleNode("//@IS_BASE64_IMAGE_MODE").GetText()));var strTemp=objHXXmlDoc.SelectSingleNode("//@RESULT").GetText(),blnIsUploadOK="upload_ok"==strTemp,blnIsBase64ImageFileCntMode=!HXWebJS.Core.IsStringNullOrEmpty(strIsBase64ImageFileCntMode)&&"0"!=strIsBase64ImageFileCntMode,base64ImageFileCntList=null;blnIsBase64ImageFileCntMode&&(base64ImageFileCntList=HXWebJS.Utility._Internal._ParseBaseImageFileCntList(objHXXmlDoc.SelectSingleNode("//@BASE64_IMG_FILE_CNT_LIST")));var arrUploadedFileInfo=[],strUploadFileInfo=objHXXmlDoc.SelectSingleNode("//@FILE_DATA").GetText();if(""!=strUploadFileInfo)for(var arrUploadFilesList=strUploadFileInfo.split(/;/g),arrTemp,strOrgFileName,strUploadTempName,strBase64ImageFileCnt=null,i=0;i<arrUploadFilesList.length;i++)arrTemp=arrUploadFilesList[i].split(/:/g),strUploadTempName=arrTemp[1],strBase64ImageFileCnt=blnIsBase64ImageFileCntMode&&null!=base64ImageFileCntList?base64ImageFileCntList[strUploadTempName]:null,arrUploadedFileInfo.push({file_name:arrTemp[0],file_temp_name:strUploadTempName,file_size:arrTemp[2],file_extension_name:arrTemp[3],file_mime_type:arrTemp[4],img_file_base64_cnt:strBase64ImageFileCnt});var strWarningMessage=objHXXmlDoc.SelectSingleNode("//@MESSAGE").GetText();if(""==strCallbackFuncName);else{var fn=eval(strCallbackFuncName);"function"==typeof fn&&fn(strWebControlHtmlId,blnIsUploadOK,arrUploadedFileInfo,strWarningMessage,strBindingDataSrcId,strBindingHXWebJSRowUUID,strUpLevelHXWebJSRowUUID)}},HXWebJS.Utility._Internal._ParseBaseImageFileCntList=function(e){if(null==e)return null;var t=e.GetText();if(HXWebJS.Core.IsStringNullOrEmpty(t))return null;for(var n,l,a,r,i=t.split(/;/g),o={},_=0;_<i.length;_++)l=(n=i[_].split(/:/g))[0],a=n[1],r=n[2],o[l]="data:"+a+";base64,"+r;return o},HXWebJS.Utility._Internal._OnUploadFileResponseIframeResultPageLoaded=function(e){HXWebJS.DOM._Internal._DisableEnableMouseInput(!1,!1,window),HXWebJS.DOM._Internal._ShowHideProgressBar(!1,window);var t=e.target.contentWindow.document,n=t.title;if(n.indexOf("404.13")>=0){var l=HXWebJS.DOM.GetElementInnerText(t.body);console.log("Response Title:"+n+", Text:"+l);var a=l.match(/[^\n]*404\.13.*\n.*\n/);alert(0==a.length?l:a[0])}},HXWebJS.Utility._Internal._IsPictureFile=function(e){if(HXWebJS.Core.IsStringNullOrEmpty(e))return!1;var t=(e=HXWebJS.Core.Trim(e)).lastIndexOf(".");if(t<=0)return!1;var n=e.substring(t).toLowerCase();return".jpg"==n||".png"==n||".jpeg"==n||".gif"==n||".bmp"==n},HXWebJS.Utility._Internal._ImageFileCompressProcess=function(e,t,n){var l=e.files.length,a=function(r,i){if(r+1<l)HXWebJS.Utility._Internal._ConvertFileContentAsBase64(r+1,e.files[r+1],t,a);else{for(var o,_,s=new HXWebStringBuilder,d=0;d<e.files.length;d++)_=null!=(o=e.files[d])._hx_new_file_name?o._hx_new_file_name:o.name,s.append('<FILE NAME="'+HXWebJS.Core.MarkXMLSpecialChars(_)+'" INDEX="'+(d+1).toString()+'">'),s.append(o._hx_base64_file_content_str),s.append("</FILE>");n(s.toString())}};HXWebJS.Utility._Internal._ConvertFileContentAsBase64(0,e.files[0],t,a)},HXWebJS.Utility._Internal._DirectReadFileContentAsBase64=function(e,t,n){var l=new FileReader;l.onload=function(){t._hx_base64_file_content_str=l.result,n(e,t)},l.readAsDataURL(t)},HXWebJS.Utility._Internal._ConvertFileContentAsBase64=function(e,t,n,l){HXWebJS.Utility._Internal._IsPictureFile(t.name)?t.size<=1e3*n?HXWebJS.Utility._Internal._DirectReadFileContentAsBase64(e,t,l):HXWebJS.Utility._Internal._CompressPictureFile(e,t,n,l):HXWebJS.Utility._Internal._DirectReadFileContentAsBase64(e,t,l)},HXWebJS.Utility._Internal._CompressPictureFile=function(e,t,n,l){var a=new FileReader;a.onload=function(a){var r=new Image;r.onload=function(){canvas=document.createElement("canvas"),context=canvas.getContext("2d");var a=HXWebJS.Utility._Internal._CompressPictureFile_ReDrawImage(canvas,context,this,n);t._hx_new_file_name=t.name+".jpg",t._hx_base64_file_content_str=a,r.src="",l(e,t)};try{r.src=a.target.result}catch(n){return console.log("图片文件("+t.name+")压缩失败!"+n),void HXWebJS.Utility._Internal._DirectReadFileContentAsBase64(e,t,l)}};try{a.readAsDataURL(t)}catch(n){console.log("图片文件("+t.name+")压缩失败!"+n),HXWebJS.Utility._Internal._DirectReadFileContentAsBase64(e,t,l)}},HXWebJS.Utility._Internal._CompressPictureFile_ReDrawImage=function(e,t,n,l){var a=Math.sqrt(n.src.length/4*3/(1e3*l)),r=n.width/a,i=n.height/a;e.width=r,e.height=i,t.drawImage(n,0,0,r,i);var o=e.toDataURL("image/jpeg"),_=o.length/4*3/1e3/l;return(_>1||_<.8)&&(a*=Math.sqrt(_),r=n.width/a,i=n.height/a,e.width=r,e.height=i,t.drawImage(n,0,0,r,i),o=e.toDataURL("image/jpeg")),o},HXWebJS.Utility._Internal._PostFilesToServerWithAjax=function(e){var t=new HXWebStringBuilder;t.append("<ALL_DATA>"),t.append("<UPLOAD_FILES_INFO>"),t.append(e),t.append("</UPLOAD_FILES_INFO>"),t.append("<UPLOAD_CONFIG_INFO");var n=document.getElementById("hxwebfileboxcontrol_upload_file_fileboxsettingcode").value;t.append(' FILEBOX_SETTING_CODE="'+n+'"');var l=document.getElementById("hxwebfileboxcontrol_upload_file_allowfiletypelist").value;t.append(' ALLOW_FILE_TYPE_LIST="'+l+'"');var a=document.getElementById("hxwebfileboxcontrol_upload_file_maxfilesizekb").value;t.append(' MAX_FILE_SIZE_KB="'+a+'"');var r=document.getElementById("hxwebfileboxcontrol_is_base64_image_file_cnt_mode").value;t.append(' IS_BASE64_IMAGE_MODE="'+r+'"'),t.append(" />"),t.append("</ALL_DATA>");HXWebJS.Xml.XmlService.CallPageXmlServiceAsync("HXWEBFILEBOXCONTROL_UPLOAD_FILES_WITH_BASE64_MODE",t.toString(),function(e){null!=e&&HXWebJS.Utility._Internal._OnAfterFileUploadedToServer(e,!0)},{assembly_name:"TrustHX.HXWWW6",use_parallel_mode:!0})},HXWebJS.Utility.OpenFileDownloadOnlyPage=function(e,t,n){HXWebJS.Navigation.OpenFileDownloadOnlyPage(e,t,n)},HXWebJS.Utility.DownloadAndShowFileDirectly=function(e,t,n,l,a){null==a&&(a=!0);var r=["object_view_code",e,"field_code",t,"uuid",n,"page_name",HXWebPageGlobalVariables.CurrentPageName,"download_file_as_stream",a?"1":"0"],i=HXWebJS.Xml.XmlService.RegisterParameterValueToServer(r);if(null!=i&&""!=i){var o=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_object_file_download&hx_page_param_uuid="+i;a?HXWebJS.Navigation.OpenWebPage(o,l):HXWebJS.Navigation.OpenWebPopupPage(o,null,null)}},HXWebJS.AppUtility={},HXWebJS.AppUtility._Internal={},HXWebJS.AppUtility.Login=function(e,t,n,l,a){null==a&&(a={}),l&&(a.need_new_access_token=!0);var r=HXWebXmlService._Internal._UserLoginProcess(e,t,n,a);if(null!=r){if("HXSYS_LOGIN_BY_PWD_TRY_TIMES_WITHOUT_VERIFY_CODE_THRESHOLD_REACHED"==r.exit_category){alert(r.message);s=a.verify_code_display_image;return null!=s&&(s.src=r.verify_code_image_src),void(null!=a.verify_code_area_container&&(a.verify_code_area_container.style.display=""))}if("WARNING_MSG__HXSM_LOGIN_FAIL_6_PASSWORD_HAS_EXPIRED"!=r.exit_category){if(l&&(HXWebJS.DOM.Cookies.SetCookie("hxwebjs602_autologin_token_code",r.access_token_code,r.access_token_expire_days,HXWebPageGlobalVariables.WebRootPath),HXWebJS.DOM.Cookies.SetCookie("hxwebjs602_autologin_user_code",e,30,HXWebPageGlobalVariables.WebRootPath)),r.need_change_password)return alert(r.change_password_hint_text),void HXWebJS.AppUtility.OpenDynamicDataPage("hxsm_v6/hxsm_user__change_password.hxpage.xhtml",{show_style:1,dialog_width:500,dialog_height:300,dialog_scroll:0});var i=HXWebJS.Utility.GetUrlParameterValues(),o=null==i?"":i._hxpreviouspageurl;if(HXWebJS.Core.IsStringNullOrEmpty(o)){var _=window.document.documentElement.attributes._hxpreviouspageurl;o=null==_?"":_.value,HXWebJS.Core.IsStringNullOrEmpty(o)?top.location.replace(HXWebPageGlobalVariables.WebRootPath+"default.aspx"):top.location.href=o}else top.location.href=o}else HXWebJS.AppUtility.OpenDynamicDataPage("hxsm_v6r2/hxsm_user__change_password_v6r2.hxpage.xhtml",{show_style:1,dialog_width:800,dialog_height:480,dialog_scroll:0})}else if(null!=a.verify_code_area_container&&"none"!=a.verify_code_area_container.style.display){var s;null!=(s=a.verify_code_display_image)&&(s.src=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_verify_code_generate&t="+(new Date).getTime())}},HXWebJS.AppUtility.ADAutoLoginCheckAndProcess=function(){var e=HXWebPageGlobalVariables.WebRootPath+"hxwinautologin_v6/hxwinautologincheck6.aspx";$.ajax({url:e,type:"POST",dataType:"text",cache:!1,global:!1,async:!1,processData:!1,data:"",crossDomain:!1,xhrFields:{withCredentials:!0}}).done(function(e,t,n){200==n.status&&("ad_check_ok"==n.responseText?top.location.replace(HXWebPageGlobalVariables.WebRootPath+"hxwinautologin_v6/hxwinautologin6.aspx"):console.log("ADAutoLoginCheckAndProcess() Failed:"+n.responseText))})},HXWebJS.AppUtility.Logout=function(e){if(null==e&&(e=!1),!e){var t=HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__LOGOUT_CONFIRM");if(null!=t&&0==confirm(t))return}top.location.replace(HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxinterface6.aspx?_hxcategory=hx_logout")},HXWebJS.AppUtility.OpenDynamicDataPage=function(e,t,n){null==n&&(n={});var l=["_hxpage",e];if(null!=n.record_uuid&&(l.push("_hxuuid"),l.push(n.record_uuid)),null!=n.key_field_values&&(l.push("_hxkeys"),l.push(JSON.stringify(n.key_field_values))),null!=n.search_key_word&&(l.push("_hxsearchkeyword"),l.push(n.search_key_word)),null!=n.search_field_default_values&&(l.push("_hxsearchfieldvalues"),l.push(JSON.stringify(n.search_field_default_values))),null!=n.selected_record_uuid_list&&(l.push("_hxselectedrecorduuidlist"),l.push(n.selected_record_uuid_list)),1==n.is_print_preview&&(l.push("_hx_print_preview_mode"),l.push("1")),null!=n.extra_param_values)for(var a in n.extra_param_values)l.push(a),l.push(n.extra_param_values[a]);var r=HXWebJS.AppUtility._Internal._GetCurrentPageMenuSetCode();HXWebJS.Core.IsStringNullOrEmpty(r)||l.push("_hx_menu_set_app_code",r);var i=new HXWebStringBuilder;if(null!=n.extra_param_values_direct_in_url)for(var a in n.extra_param_values_direct_in_url)i.append("&"+a+"="+escape(n.extra_param_values_direct_in_url[a]));var o=HXWebXmlService.RegisterParameterValueToServer(l);if(null!=o&&""!=o){var _=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxdynamicpage6.aspx?hx_page_param_uuid="+o+i.toString();HXWebJS.Navigation.OpenWebPage(_,t)}},HXWebJS.AppUtility.OpenDynamicDataPageViaDb=function(e,t,n){var l=HXWebJS.Core.StringFormat("_hxviadb/{0}.hxpage.xhtml",e);HXWebJS.AppUtility.OpenDynamicDataPage(l,t,n)},HXWebJS.AppUtility.OpenDynamicDataCommonPageViaFile=function(e,t,n){var l={extra_param_values:n};HXWebJS.AppUtility.OpenDynamicDataPage(e,t,l)},HXWebJS.AppUtility.OpenDynamicDataEditPageViaFile=function(e,t,n,l,a){var r={record_uuid:t,key_field_values:n,extra_param_values:a};HXWebJS.AppUtility.OpenDynamicDataPage(e,l,r)},HXWebJS.AppUtility.OpenDynamicDataListPageViaFile=function(e,t,n,l){var a={search_field_default_values:n,extra_param_values:l};HXWebJS.AppUtility.OpenDynamicDataPage(e,t,a)},HXWebJS.AppUtility.RegisterReportParamValues=function(e){var t,n=arguments.length;{if(0!=n){var l=new HXWebStringBuilder;for(l.append("<RS_DATA><RS_ROW "),t=0;t<n;t++)l.append(" PARAM_VALUE_"),l.append((t+1).toString()),l.append('="'),l.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[t])),l.append('"');l.append(" /></RS_DATA>");return HXWebXmlService.CallPageXmlService("HXPGXMLSVC_REGISTER_REPORT_PARAM_VALUES",l.toString(),{assembly_name:"TrustHX.HXWWW6",use_parallel_mode:!0})}alert("调用HXWebJS.AppUtility.RegisterReportParamValues()函数至少需要传递一个参数！")}},HXWebJS.AppUtility.RegisterReportLongParamValues=function(e,t){var n,l=arguments.length;{if(!(l<2)){var a=new HXWebStringBuilder;for(a.append("<RS_DATA><RS_ROW "),a.append(' RPT_PARAM_UUID="'),a.append(HXWebJS.Xml.MarkXMLSpecialChars(e)),a.append('"'),n=1;n<l;n++)a.append(" LONG_PARAM_VALUE_"),a.append(n.toString()),a.append('="'),a.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[n])),a.append('"');return a.append(" /></RS_DATA>"),e=HXWebXmlService.CallPageXmlService("HXPGXMLSVC_REGISTER_REPORT_LONG_PARAM_VALUES",a.toString(),{assembly_name:"TrustHX.HXWWW6",use_parallel_mode:!0})}alert("调用HXWebJS.AppUtility.RegisterReportLongParamValues()函数至少需要传递两个参数！")}},HXWebJS.AppUtility.OpenReportingSvcReport=function(e,t,n,l,a,r){null==e&&(e=""),null==t&&(t=""),null==l&&(l=""),null==a&&(a=!0),null==r&&(r={});var i=!!r.show_pdf_in_html,o=r.show_pdf_page_number,_=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxssrsrptprocess6.aspx?rpt_param_uuid="+t+"&report_code="+e+"&export_format="+l+"&cfg_info_via="+(a?"db":"")+"&show_pdf_in_html="+(i?"1":"0")+"&show_pdf_page_number="+(null==o?"":o);for(var s in r)"show_pdf_in_html"!=s&&"show_pdf_page_number"!=s&&(_+="&"+s+"="+escape(r[s]));HXWebNavigation.OpenWebPage(_,n)},HXWebJS.AppUtility.ShowApprovalWorkflowEditor=function(e,t,n,l){null==t&&(t=""),null==l&&(l={});var a=["_hx_workflow_enginee_type","hxapprovalworkflow6","_hx_workflow_definition_code",e,"_hx_workflow_instance_code",t,"_hx_workflow_instance_code_2",null==l.workflow_instance_code?"":l.workflow_instance_code,"_hx_edit_mode",l.edit_mode?"1":"0","_hx_show_edit_mode_btn",null==l.show_edit_mode_btn||l.show_edit_mode_btn?"1":"0","_hx_show_xml_cnt_btn",null==l.show_xml_cnt_btn||l.show_xml_cnt_btn?"1":"0","_hx_show_title_bar",null==l.show_title_bar||l.show_title_bar?"1":"0"],r=HXWebJS.Xml.XmlService.RegisterParameterValueToServer(a);if(null!=r&&""!=r){var i=HXWebPageGlobalVariables.WebRootPath+"hxpublic_v6/hxworkfloweditor6.aspx?hx_page_param_uuid="+r;HXWebNavigation.OpenWebPage(i,n)}},HXWebJS.AppUtility.OpenReportCenter=function(e,t){var n={report_center_code:e},l={report_center_code:e};HXWebJS.AppUtility.OpenDynamicDataPage("hxsm_v6/hxsm_report_center__content_setting.hxpage.xhtml",t,{search_field_default_values:n,extra_param_values:l})},HXWebJS.AppUtility.RunInquiryReport=function(e,t,n,l){null==e&&(e=""),null==t&&(t="");var a;a="2.0"==l?"hxsm_v6/hxsm_inquiry_report__result_v2.hxpage.xhtml":"hxsm_v6/hxsm_inquiry_report__result.hxpage.xhtml";var r={inquiry_report_code:e,report_center_item_code:t};HXWebJS.AppUtility.OpenDynamicDataPage(a,n,{extra_param_values:r})},HXWebJS.AppUtility.ImportData=function(e,t,n){null==t?t={etl_rule_code:e}:t.etl_rule_code=e;var l;l="via_db"==t.src_data_from_type?"hxsm_v6/hxsm_data_etl_import__from_src_db.hxpage.xhtml":"hxsm_v6/hxsm_data_etl_import__upload_file.hxpage.xhtml";var a={show_style:1,dialog_width:800,dialog_height:550,dialog_scroll:!1,dialog_callback_func:n};HXWebJS.AppUtility.OpenDynamicDataCommonPageViaFile(l,a,t,"1.3")},HXWebJS.AppUtility.StaticUDCSetting=function(e,t,n){var l={subsys_code:e,udc_group:t};HXWebJS.AppUtility.OpenDynamicDataPage("hxmd_v6/hxmd_static_udc__list.hxpage.xhtml",n,{extra_param_values:l})},HXWebJS.AppUtility.OpenCommonParameterGetDialog=function(e,t){if(t&&t.field_list&&0!=t.field_list.length){var n=e||{};n.dialog_width||(n.dialog_width=HXWebJS.Core.Browser.IsMobile?$(window).width():600),n.dialog_height||(n.dialog_height=HXWebJS.Core.Browser.IsMobile?$(window).height():350),n.show_style=1,n.dialog_scroll=!!n.dialog_scroll;var l,a=new HXWebStringBuilder,r=t.field_list,i=t.default_object_view_code,o={};a.append("<RS_DATA>");for(var _=0,s=r.length;_<s;_++)(l=r[_])&&l.field_code&&(o[l.field_code]="",a.append('<RS_ROW HX_FIELD_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.field_code)+'"'),a.append(' HX_OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.object_view_code?l.object_view_code:i)+'"'),null!=l.hx_multiple_input_type&&a.append(' HX_MULTIPLE_INPUT_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_multiple_input_type)+'"'),null!=l.hx_field_code_to&&(o[l.hx_field_code_to]="",a.append(' HX_FIELD_CODE_TO="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_code_to)+'"')),null!=l.hx_field_show_as_map_desc_fld&&a.append(' HX_FIELD_SHOW_AS_MAP_DESC_FLD="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_show_as_map_desc_fld)+'"'),null!=l.hx_field_value_option_columns&&a.append(' HX_FIELD_VALUE_OPTION_COLUMNS="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_value_option_columns)+'"'),null!=l.hx_field_value_option_criteria&&a.append(' HX_FIELD_VALUE_OPTION_CRITERIA="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_value_option_criteria)+'"'),null!=l.hx_field_value_is_required&&a.append(' HX_FIELD_VALUE_IS_REQUIRED="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_value_is_required)+'"'),null!=l.hx_field_default_value&&a.append(' HX_FIELD_DEFAULT_VALUE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_default_value)+'"'),null!=l.hx_input_as_password&&a.append(' HX_INPUT_AS_PASSWORD="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_input_as_password)+'"'),null!=l.hx_field_read_only&&a.append(' HX_FIELD_READ_ONLY="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_read_only)+'"'),null!=l.hx_field_value_align_style&&a.append(' HX_FIELD_VALUE_ALIGN_STYLE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_value_align_style)+'"'),null!=l.hx_text_is_wrap&&a.append(' HX_TEXT_IS_WRAP="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_text_is_wrap)+'"'),null!=l.hx_placeholder&&a.append(' HX_PLACEHOLDER="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_placeholder)+'"'),null!=l.hx_placeholder_text_code&&a.append(' HX_PLACEHOLDER_TEXT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_placeholder_text_code)+'"'),null!=l.hx_field_has_caption&&a.append(' HX_FIELD_HAS_CAPTION="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_field_has_caption)+'"'),null!=l.hx_caption_ui_text_code&&a.append(' HX_CAPTION_UI_TEXT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_caption_ui_text_code)+'"'),null!=l.hx_caption_ui_text_cnt&&a.append(' HX_CAPTION_UI_TEXT_CNT="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_caption_ui_text_cnt)+'"'),null!=l.hx_caption_ui_text_cnt_ot&&a.append(' HX_CAPTION_UI_TEXT_CNT_OT="'+HXWebJS.Xml.MarkXMLSpecialChars(l.hx_caption_ui_text_cnt_ot)+'"'),null!=l.textarea_height&&a.append(' TEXTAREA_HEIGHT="'+HXWebJS.Xml.MarkXMLSpecialChars(l.textarea_height)+'"'),a.append("></RS_ROW>"));a.append("</RS_DATA>"),n.dialog_argument={field_values:o},t.extra_data&&(n.dialog_argument.extra_data=t.extra_data),t.assembly_class_name&&(n.dialog_argument.assembly_class_name=t.assembly_class_name);var d={field_defination:a.toString()};n.dialog_title&&(d.dialog_title=n.dialog_title),t.extra_css_style&&(d.extra_css_style=t.extra_css_style),HXWebJS.AppUtility.OpenDynamicDataPage("hxmd_v6/hxmd_common_parameter_get_dialog.hxpage.xhtml",n,{extra_param_values:d})}},HXWebJS.AppUtility.PDFContentShow=function(e,t,n){HXWebJS.Core.IsStringNullOrEmpty(e)&&console.log("要显示的PDF文件Url路径信息缺少！"),e=HXWebJS.Utility.Replace(e,"\\","/"),null==n&&(n={}),n.pdf_file_url=e,HXWebJS.AppUtility.OpenDynamicDataPage("pdfjs/hxsm_pdf_file_preview.hxpage.xhtml",t,{extra_param_values:n})},HXWebJS.AppUtility._Internal._GetCurrentPageMenuSetCode=function(){var e=$("div[hx_extend_webpart_type='cnt_page_menu_bar']");if(e.length>0)return e.attr("hx_menu_set_code");var t=$("div[hx_extend_webpart_type='mainpage_menu_bar']");return t.length>0?t.attr("hx_menu_set_code"):void 0},HXWebJS.Widget||(HXWebJS.Widget={}),HXWebJS.Widget.TableColumnResizable={},HXWebJS.Widget.TableColumnResizable._isResizing=!1,HXWebJS.Widget.TableColumnResizable._resizingElement=null,HXWebJS.Widget.TableColumnResizable._resizingStartMousePageX=0,HXWebJS.Widget.TableColumnResizable._isResizingStoppedMouseClick=!1,HXWebJS.Widget.TableColumnResizable._registed_elements_info={},HXWebJS.Widget.TableColumnResizable.register=function(e,t){HXWebJS.Widget.TableColumnResizable._registed_elements_info[e]||($(document).on("mousedown","[id='"+e+"'] thead",HXWebJS.Widget.TableColumnResizable._mousedownProcess),$(document).on("mousemove","[id='"+e+"'] thead",HXWebJS.Widget.TableColumnResizable._mousemoveProcess),$(document).on("mouseup","[id='"+e+"'] thead",HXWebJS.Widget.TableColumnResizable._mouseupProcess),$(document).on("mouseout","[id='"+e+"'] thead",HXWebJS.Widget.TableColumnResizable._mouseoutProcess),null==t&&(t={}),HXWebJS.Widget.TableColumnResizable._registed_elements_info[e]=t)},HXWebJS.Widget.TableColumnResizable.set_option=function(e,t){if(null!=t&&HXWebJS.Widget.TableColumnResizable._registed_elements_info){var n=HXWebJS.Widget.TableColumnResizable._registed_elements_info[e];null!=n&&(null!=t.twins_table_id&&(n.twins_table_id=t.twins_table_id),null!=t.onresize_callback&&(n.onresize_callback=t.onresize_callback),null!=t.onresizestop_callback&&(n.onresizestop_callback=t.onresizestop_callback))}},HXWebJS.Widget.TableColumnResizable._mousedownProcess=function(e){HXWebJS.Widget.TableColumnResizable._isResizing=!1,HXWebJS.Widget.TableColumnResizable._isResizingStoppedMouseClick=!1;var t=e.target;if(HXWebJS.Widget.TableColumnResizable._canAdjustColumnWidth(t,e))return HXWebJS.Widget.TableColumnResizable._isResizing=!0,HXWebJS.Widget.TableColumnResizable._resizingElement=t,HXWebJS.Widget.TableColumnResizable._resizingStartMousePageX=e.pageX,!1},HXWebJS.Widget.TableColumnResizable._canAdjustColumnWidth=function(e,t){if("TD"==e.nodeName.toUpperCase()&&"THEAD"==e.parentNode.parentNode.nodeName.toUpperCase()){var n=e.parentNode.parentNode.parentNode;if(HXWebJS.Widget.TableColumnResizable._registed_elements_info[n.id])return e.offsetWidth-t.offsetX<=8}},HXWebJS.Widget.TableColumnResizable._mousemoveProcess=function(e){if(HXWebJS.Widget.TableColumnResizable._isResizing){var t=HXWebJS.Widget.TableColumnResizable._resizingElement,n=e.pageX-HXWebJS.Widget.TableColumnResizable._resizingStartMousePageX;t.width=t.offsetWidth+n+"px",HXWebJS.Widget.TableColumnResizable._resizingStartMousePageX=e.pageX;var l=t.parentNode.parentNode.parentNode,a=HXWebJS.Widget.TableColumnResizable._registed_elements_info[l.id],r=HXWebJS.Widget.TableColumnResizable._findTwinsTable(l,a.twins_table_id);if(null!=r){var i=$.inArray(t,$(t.parentNode).children().toArray());HXWebJS.Widget.TableColumnResizable._AdjustTwinsTableColumn(r,i,t.offsetWidth);var o=HXWebJS.Xml._XmlDataIsland._binding_row_template_cache[r.id];null!=o&&HXWebJS.Widget.TableColumnResizable._AdjustTwinsTableColumn(o,i,t.offsetWidth)}return null!=a.onresize_callback&&a.onresize_callback(l.id,t,n),!1}var _=e.target,s=HXWebJS.Widget.TableColumnResizable._canAdjustColumnWidth(_,e);_.style.cursor=s?"e-resize":"default"},HXWebJS.Widget.TableColumnResizable._mouseupProcess=function(e){var t=HXWebJS.Widget.TableColumnResizable._isResizing;if(HXWebJS.Widget.TableColumnResizable._isResizing=!1,t){e.target.style.cursor="default",HXWebJS.Widget.TableColumnResizable._isResizingStoppedMouseClick=!0;var n=HXWebJS.Widget.TableColumnResizable._resizingElement,l=n.parentNode.parentNode.parentNode,a=HXWebJS.Widget.TableColumnResizable._registed_elements_info[l.id];if(null!=a.onresizestop_callback){var r=e.pageX-HXWebJS.Widget.TableColumnResizable._resizingStartMousePageX;a.onresizestop_callback(l.id,n,r)}return!1}},HXWebJS.Widget.TableColumnResizable._mouseoutProcess=function(e){if(HXWebJS.Widget.TableColumnResizable._isResizing){var t=HXWebJS.Widget.TableColumnResizable._resizingElement.parentNode.parentNode;$.contains(t,e.relatedTarget)||(HXWebJS.Widget.TableColumnResizable._isResizing=!1)}},HXWebJS.Widget.TableColumnResizable._findTwinsTable=function(e,t){if(HXWebJS.Core.IsStringNullOrEmpty(t))return null;var n=$("table[id='"+t+"']");if(0==n.length)return null;if(1==n.length)return n[0];for(var l=e.parentNode;null!=l;){var a=$("table[id='"+t+"']",l);if(a.length>0)return a[0];l=l.parentNode}return null},HXWebJS.Widget.TableColumnResizable._AdjustTwinsTableColumn=function(e,t,n){var l=null,a=$("thead tr",e);if(a.length>0?l=a[0]:(a=$("tbody tr",e)).length>0?l=a[0]:(a=$("tr",e)).length>0&&(l=a[0]),null!=l&&!(t>=l.cells.length)){l.cells[t].width=n+"px"}};