var HXWebDynamicPage={};HXWebDynamicPage._Internal={},HXWebDynamicPage._DataList={};var HXExtendWebPart={};HXWebDynamicPage.OnDocumentReady=null,HXWebDynamicPage.OnPrintPreviewModeReady=null,HXWebDynamicPage.OnClickHandlerProcess=null,HXWebDynamicPage.OnMouseOverHandlerProcess=null,HXWebDynamicPage.OnMouseOutHandlerProcess=null,HXWebDynamicPage.OnMessageHandlerProcess=null,HXWebDynamicPage.OnTextWebPartContentClicked=null,HXWebDynamicPage.OnExtCommandButtonClicked=null,HXWebDynamicPage.OnFieldWebPartHyperlinkContentClicked=null,HXWebDynamicPage.OnComboBoxFilterDataGet=null,HXWebDynamicPage.OnComboBoxDataChoosed=null,HXWebDynamicPage.OnPopupTreeViewFilterDataGet=null,HXWebDynamicPage.OnPopupTreeViewDataChoosed=null,HXWebDynamicPage.OnFileBoxFileUploaded=null,HXWebDynamicPage.OnChartBeforeShow=null,HXWebDynamicPage.OnChartDataPointClicked=null,HXWebDynamicPage.OnDataListCopyPasteFieldsListGet=null,HXWebDynamicPage.OnDataListBeforeCopyData=null,HXWebDynamicPage.OnDataListBeforePasteData=null,HXWebDynamicPage.OnDataListAfterPasteData=null,HXWebDynamicPage.OnDataListRowClicked=null,HXWebDynamicPage.OnDataListRowLineCmdButtonClicked=null,HXWebDynamicPage.OnDataListFieldAutoSumValueUpdated=null,HXWebDynamicPage.OnDataListBeforeRowAdded=null,HXWebDynamicPage.OnDataListBeforeRowTempRemoved=null,HXWebDynamicPage.OnDataListRowAfterTempRemoved=null,HXWebDynamicPage.OnDataListBeforeRowDeleted=null,HXWebDynamicPage.OnDataListAfterRowDeleted=null,HXWebDynamicPage.OnObjectExtendXmlSvcContentGet=null,HXWebDynamicPage.OnObjectExtendXmlSvcAfterCalled=null,HXWebJS.EventManager.OnDocumentReady=function(){$(document).on("mouseover",".hxtxt_nowrap",function(e){e.currentTarget.title=$(e.currentTarget).text()}),HXWebJS.Core.IsJavascriptFunctionDefined("_internal_hxfn_dynamic_data_page__auto_generate_code_init")&&_internal_hxfn_dynamic_data_page__auto_generate_code_init(),HXWebDynamicPage._Internal._DataListWebPartColumnResizableInit();var e=HXWebDynamicPage._Internal._GetPredefinedProcessClassViaPageType(HXWebPageGlobalVariables.DynamicPageType);if(null!=e&&e._Internal._predefined_onload_process(),null!=HXWebDynamicPage.OnDocumentReady){if(HXWebDynamicPage.OnDocumentReady())return!0}var a=HXWebDynamicPage.GetWebPageConfigDataValue("print_preview_mode");""!=a&&"0"!=a&&($(".hxpg_hide_when_print_preview").css("display","none"),HXWebDynamicPage._Internal._ExtendWebPartCallbacksExecute("_OnWebPartBeforePrint"),$("body").addClass("hxpg_print_preview_mode"),null!=HXWebDynamicPage.OnPrintPreviewModeReady&&HXWebDynamicPage.OnPrintPreviewModeReady())},HXWebDynamicPage.GetWebPageConfigDataValue=function(e){if(null==e||""==e)return"";var a=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_webpage_config_data");if(null==a)return"";var t=a.SelectSingleNode("//@"+e.toUpperCase());return null==t?"":t.GetText()},HXWebDynamicPage.SetWebPageConfigDataValue=function(e,a){if(null!=e&&""!=e){var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_webpage_config_data");if(null!=t){var n=t.SelectSingleNode("//@"+e.toUpperCase());null!=n&&n.SetText(a)}}},HXWebDynamicPage.GetHXXmlDocOfObjectViewListData=function(e){null!=e&&""!=e||(e=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"));var a="hxxml_listdata__"+e.toLowerCase();return HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(a)},HXWebDynamicPage.GetHXXmlDocOfObjectViewListBlankRow=function(e){null!=e&&""!=e||(e=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"));var a="hxxml_listdata_blankrow__"+e.toLowerCase();return HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(a)},HXWebDynamicPage.GetHXXmlDocOfObjectViewData=function(e){null!=e&&""!=e||(e=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"));var a="hxxml_data__"+e.toLowerCase();return HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(a)},HXWebDynamicPage.CalcAndFillObjectAutoSumFieldValue=function(e,a,t,n){var l=HXWebJS.DOM.GetElementAttributeValue(t,"hx_decimal_use_group_seperator"),i=null!=l&&""!=l&&"0"!=l,r=null==(l=HXWebJS.DOM.GetElementAttributeValue(t,"hx_decimal_scale"))||""==l?i?2:null:parseInt(l),_=HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue(e,a,r,i,!1,n);HXWebJS.DOM.SetElementInnerText(t,_)},HXWebDynamicPage._Internal._OnHXPageMouseOverHandlerProcess=function(e,a){"field_label_remark_show"!=e||HXWebDynamicPage._Internal._FieldLabelWebPartRemarkContentShow(a)},HXWebDynamicPage._Internal._OnHXPageClickHandlerProcess=function(e,a){var t=!0;"text_webpart_content"==e?HXWebDynamicPage._Internal._TextWebPartContent__Clicked(a):"command_webpart_container"==e?HXWebDynamicPage._Internal._CommandWebPartContent__Clicked(a):"hyperlink_field_content"==e?HXWebDynamicPage._Internal._FieldHyperlinkContent__Clicked(a):"filebox_container"==e?HXWebDynamicPage._Internal._FileBoxFieldWebPartContent__Clicked(a):"linecommand_webpart_container"==e?HXWebDynamicPage._DataList._LineCmdProcess(a):"datalist_choose_all_webpart"==e?HXWebDynamicPage._DataList._ChooseAllRowsOnPage(a):"datalist_headline_column_sort"==e?HXWebDynamicPage._DataList._HeadLineColumnSortProcess(a):"datalist_row_click"==e?HXWebDynamicPage._DataList._DataListRowClicked(a):"datalist_navigation_bar"==e?HXWebDynamicPage._ListStatPageShared._ListNavigationBar_Clicked(a):"datalist_search_keyword_icon"==e?HXWebDynamicPage._ListStatPageShared._ListSearchKeyWorkIcon_Clicked(a):t=!1,t&&a.stopPropagation()},HXWebDynamicPage._Internal._DeleteDataProcess=function(e,a,t,n,l,i){null==n&&(n=""),null==l&&(l="");var r=new HXWebStringBuilder;r.append('<RS_DATA><RS_ROW HXWEBJS_VERSION="6"'),r.append(' OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(e)+'"'),r.append(' HX_WORKFLOW_DOC_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'"'),r.append(' EXTRA_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'"'),r.append(" /></RS_DATA>");var _=HXWebJS.Xml.BuildAllXmlDatas("delete_data_basic_info",r.toString(),"delete_data_content",a);HXWebXmlService._CallObjectXmlService(e,"DELETE",_,t,i)},HXWebDynamicPage._Internal._GetCustomTypeCodeOfObjectView=function(e,a){if(HXWebJS.Core.IsStringNullOrEmpty(e))return"";if(HXWebJS.Core.IsStringNullOrEmpty(a))return"";var t,n,l=e.split(";");for(var i in l)if(n=l[i],!((t=n.indexOf(":"))<=0)&&n.substr(0,t).toLowerCase()==a.toLowerCase())return n.substring(t+1);return""},HXWebDynamicPage._Internal._GetExtendWebPartInstance=function(strExtendWebPartType){if(HXWebJS.Core.IsStringNullOrEmpty(strExtendWebPartType))return null;if(!HXExtendWebPart.hasOwnProperty(strExtendWebPartType))return null;var strInstanceName="HXExtendWebPart."+strExtendWebPartType,objExtendWebPartInstance=eval(strInstanceName);return objExtendWebPartInstance._name=strInstanceName,objExtendWebPartInstance},HXWebDynamicPage._Internal._GetPredefinedProcessClassViaPageType=function(e){return null==e&&(e=HXWebPageGlobalVariables.DynamicPageType),"dynamic_edit_page"==e?HXWebDynamicPage.EditPage:"dynamic_list_page"==e?HXWebDynamicPage.ListPage:"dynamic_statistic_page"==e?HXWebDynamicPage.StatPage:null},HXWebDynamicPage._Internal._object_view_custom_type_list_info=null,HXWebDynamicPage._Internal._GetCustomTypeOfObjectView=function(e){if(HXWebJS.Core.IsStringNullOrEmpty(e))return"";if(null==HXWebDynamicPage._Internal._object_view_custom_type_list_info){HXWebDynamicPage._Internal._object_view_custom_type_list_info={};var a=HXWebDynamicPage.GetWebPageConfigDataValue("CUSTOM_TYPE_OF_OBJECT_VIEWS");if(!HXWebJS.Core.IsStringNullOrEmpty(a))for(var t=a.split(/;/g),n=0;n<t.length;n++)if(!HXWebJS.Core.IsStringNullOrEmpty(t[n])){var l=t[n].split(/:/g);HXWebDynamicPage._Internal._object_view_custom_type_list_info[l[0]]=l.length>1?l[0]:""}}var i=HXWebDynamicPage._Internal._object_view_custom_type_list_info[e];return null!=i?i:""},HXWebDynamicPage.CallObjectExtendXmlService=function(e,a,t,n,l,i,r,_){var o=null!=HXWebDynamicPage.EditPage,s=o?HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"):"",d=HXWebDynamicPage._Internal._GetCustomTypeOfObjectView(s),b=HXWebDynamicPage._Internal._GetCustomTypeOfObjectView(e),c="";o&&(c=HXWebDynamicPage.GetHXXmlDocOfObjectViewData().GetXml()),null==r&&(r={});var m=null==r.line_command_row_data?"":r.line_command_row_data.GetXml(),u=r.extra_cmd_data,X=r.extend_webpart_html_id,W=n?"line_command":"command";HXWebDynamicPage._Internal._CallObjectExtendXmlService(t,W,e,b,a,s,d,c,m,l,u,X,function(l){null!=l&&null!=i&&i(t,n,e,a,u,r.line_command_row_data,l,_)},r)},HXWebDynamicPage._Internal._CallObjectExtendXmlService=function(e,a,t,n,l,i,r,_,o,s,d,b,c,m){var u=HXWebPageGlobalVariables.HXPageParamUUID,X=HXWebPageGlobalVariables.CurrentPageName;null==t&&(t=""),null==n&&(n=""),null==l&&(l=""),null==e&&(e=""),null==i&&(i=""),null==r&&(r=""),null==_&&(_=""),null==o&&(o=""),null==s&&(s=""),null==d&&(d=""),null==b&&(b=""),null==m?m={disable_input:!0,show_progressbar:!0}:(null==m.disable_input&&(m.disable_input=!0),null==m.show_progressbar&&(m.show_progressbar=!0)),null==m.use_parallel_mode&&(m.use_parallel_mode=!0),strAssemblyClassName=m.assembly_class_name,null==strAssemblyClassName&&(strAssemblyClassName="");var W=new HXWebStringBuilder;W.append("<OBJECT_EXTEND_XML_SERVICE"),W.append(' HX_PAGE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(X)+'"'),W.append(' HX_PAGE_PARAM_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(u)+'"'),W.append(' OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(t)+'"'),W.append(' OBJECT_VIEW_CUSTOM_TYPE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'"'),W.append(' OBJECT_EXTEND_PERMISSION_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(l)+'"'),W.append(' ASSEMBLY_CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strAssemblyClassName)+'"'),W.append(' CMD_TYPE="'+a+'"'),W.append(' CMD_CODE="'+e+'"'),W.append(' MAIN_OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(i)+'"'),W.append(' MAIN_OBJECT_VIEW_CUSTOM_TYPE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(r)+'"'),W.append(' MAIN_OBJECT_RECORD_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(_)+'"'),W.append(' LINE_CMD_OBJECT_RECORD_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(o)+'"'),W.append(' EXTRA_CMD_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(d)+'"'),W.append(' EXTEND_WEBPART_HTML_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(b)+'"'),W.append(" >"),W.append(HXWebJS.Xml.MarkXMLSpecialChars(s)),W.append("</OBJECT_EXTEND_XML_SERVICE>"),HXWebXmlService._Internal._SayToServer("HXSM","HXSM_OBJECT_EXTEND_XML_SERVICE",W.toString(),c,m)},HXWebDynamicPage._Internal._CallObjectExtendPermissionCommand=function(e,a,t,n,l,i,r,_,o,s){var d=null,b=null;r?(null!=_&&null!=_._OnObjectExtendXmlSvcContentGet&&(d=_._OnObjectExtendXmlSvcContentGet),null!=_&&null!=_._OnObjectExtendXmlSvcAfterCalled&&(b=_._OnObjectExtendXmlSvcAfterCalled)):(null!=HXWebDynamicPage.OnObjectExtendXmlSvcContentGet&&(d=HXWebDynamicPage.OnObjectExtendXmlSvcContentGet),null!=HXWebDynamicPage.OnObjectExtendXmlSvcAfterCalled&&(b=HXWebDynamicPage.OnObjectExtendXmlSvcAfterCalled));var c=function(r,_){null==_&&(_={}),_.line_command_row_data=i,_.extra_cmd_data=n,_.extend_webpart_html_id=o,HXWebDynamicPage.CallObjectExtendXmlService(a,t,e,l,r,b,_,s)};if(null!=d){var m={},u=d(e,l,a,t,n,i,c,m,s);null==u||"boolean"==typeof u&&0==u||c(u,m)}else c()},HXWebDynamicPage._Internal._Combobox__FilterDataCallback=function(e,a,t){var n=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a);if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=HXWebDynamicPage._Internal._GetExtendWebPartInstance(n);return null==l||null==l._OnComboBoxFilterDataGet?"":l._OnComboBoxFilterDataGet(e,a,t)}return null!=HXWebDynamicPage.OnComboBoxFilterDataGet?HXWebDynamicPage.OnComboBoxFilterDataGet(e,a,t):""},HXWebDynamicPage._Internal._Combobox__DataChosenCallback=function(e,a,t,n,l){var i=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a);if(!HXWebJS.Core.IsStringNullOrEmpty(i)){var r=HXWebDynamicPage._Internal._GetExtendWebPartInstance(i);if(null==r||null==r._OnComboBoxDataChoosed)return;r._OnComboBoxDataChoosed(e,a,t,n,l)}else null!=HXWebDynamicPage.OnComboBoxDataChoosed&&HXWebDynamicPage.OnComboBoxDataChoosed(e,a,t,n,l)},HXWebDynamicPage._Internal._PopupTreeView__FilterDataCallback=function(e,a,t){var n=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a);if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=HXWebDynamicPage._Internal._GetExtendWebPartInstance(n);return null==l||null==l._OnPopupTreeViewFilterDataGet?"":l._OnPopupTreeViewFilterDataGet(e,a,t)}return null!=HXWebDynamicPage.OnPopupTreeViewFilterDataGet?HXWebDynamicPage.OnPopupTreeViewFilterDataGet(e,a,t):""},HXWebDynamicPage._Internal._PopupTreeView__DataChosenCallback=function(e,a,t,n){var l=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a);if(!HXWebJS.Core.IsStringNullOrEmpty(l)){var i=HXWebDynamicPage._Internal._GetExtendWebPartInstance(l);if(null==i||null==i._OnPopupTreeViewDataChoosed)return;i._OnPopupTreeViewDataChoosed(e,a,t,n)}else null!=HXWebDynamicPage.OnPopupTreeViewDataChoosed&&HXWebDynamicPage.OnPopupTreeViewDataChoosed(e,a,t,n)},HXWebDynamicPage._Internal._FileBox_OnAfterFileUploaded=function(e,a,t){var n=null,l=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a);if(!HXWebJS.Core.IsStringNullOrEmpty(l)){var i=HXWebDynamicPage._Internal._GetExtendWebPartInstance(l);null!=i&&(n=i._OnFileBoxFileUploaded)}else n=HXWebDynamicPage.OnFileBoxFileUploaded;null!=n&&n(e,a,t)},HXWebDynamicPage._Internal._DataChart_BeforeShow=function(e,a,t,n){var l=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(n);if(!HXWebJS.Core.IsStringNullOrEmpty(l)){var i=HXWebDynamicPage._Internal._GetExtendWebPartInstance(l);if(null==i||null==i._OnChartBeforeShow)return;i._OnChartBeforeShow(e,a,n)}else{if(null==HXWebDynamicPage.OnChartBeforeShow)return;HXWebDynamicPage.OnChartBeforeShow(e,a,n)}},HXWebDynamicPage._Internal._DataChart_DataPointClicked=function(e,a,t,n,l){var i=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(chartContainer);if(!HXWebJS.Core.IsStringNullOrEmpty(i)){var r=HXWebDynamicPage._Internal._GetExtendWebPartInstance(i);if(null==r||null==r._OnChartDataPointClicked)return;r._OnChartDataPointClicked(e,a,t,n,l)}else{if(null==HXWebDynamicPage.OnChartDataPointClicked)return;HXWebDynamicPage.OnChartDataPointClicked(e,a,t,n,l)}},HXWebDynamicPage._Internal._FieldLabelWebPartRemarkContentShow=function(e){var a=e.currentTarget,t=$(a),n=t.attr("hx_full_field_title");if(HXWebJS.Core.IsStringNullOrEmpty(n)){var l=t.text();if(!HXWebJS.Core.IsStringNullOrEmpty(l)){var i=t.attr("hx_binding_datasrc");if(HXWebJS.Core.IsStringNullOrEmpty(i))a.title=l;else{var r=t.attr("hx_binding_datafld");if(HXWebJS.Core.IsStringNullOrEmpty(r)||r.length<5)a.title=l;else{var _=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(i);if(null!=_){var o=r.substr(5),s=_.SelectSingleNode("//@RMK__"+o.toUpperCase()),d=null==s?"":s.GetText();n=""==d?l:l+"\r\n"+d,t.attr("hx_full_field_title",n),a.title=n}else a.title=l}}}}else a.title=n},HXWebDynamicPage._Internal._TextWebPartContent__Clicked=function(e){var a=null,t=e.target;if(HXWebJS.DOM.CSSClass.HasClass(t,"hxtxt_hyperlink")){var n=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(t),l=null;!HXWebJS.Core.IsStringNullOrEmpty(n)?null!=(l=HXWebDynamicPage._Internal._GetExtendWebPartInstance(n))&&(a=l._OnTextWebPartContentClicked):a=HXWebDynamicPage.OnTextWebPartContentClicked,null!=a&&(e.stopPropagation(),HXWebJS.EventManager.FireEvent(document.body,"click"),a(t.parentNode))}},HXWebDynamicPage._Internal._CommandWebPartContent__Clicked=function(e){var a=$(e.target).parents("[hx_cmd_code]")[0],t=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_code"),n=HXWebJS.DOM.GetElementAttributeValue(a,"hx_object_view_code"),l=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_extra_data"),i=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_extra_data_2"),r=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_permission_code"),_=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a),o=!HXWebJS.Core.IsStringNullOrEmpty(_),s=null,d="";o&&(s=HXWebDynamicPage._Internal._GetExtendWebPartInstance(_),d=HXWebDynamicPage._Internal._GetContainerExtendWebPartHtmlId(a,_));var b=t.toUpperCase();if("HX_COPY_TO_CLPBD"!=b&&"HX_PASTE_FROM_CLPBD"!=b)if("HX_GO_HOME"!=b)if("HX_CLOSEWIN"!=b&&"HX_CANCEL"!=b)if("HX_LINE_TEMP_ADD"!=b&&"HX_LINE_TEMP_ADD_ON_TOP"!=b){if("HX_LINE_TEMP_UPLOAD_FILES"==b){var c="hx_filebox_container__hxlistarea__hxinputbox__"+n+"__"+l,m=!0;"single_file"==i&&(m=!1),HXWebFileBoxControl.set_options(c,{allow_multi_files_upload:m});var u=HXWebJS.DOM.GetElementBindingLineInfo(e.target),X="";return null!=u&&(objUpLevelBindingRowData=u.binding_row_data,X=objUpLevelBindingRowData.GetAttributeValue("_HXWEBJS_ROW_UUID")),void HXWebFileBoxControl.upload_new_files(c,X)}if("HX_PRINT_MODE"!=b){var W=HXWebDynamicPage._Internal._GetPredefinedProcessClassViaPageType(HXWebPageGlobalVariables.DynamicPageType);if(null!=W){var D=W._Internal._predefined_command_process(b,n,l,i);if(null==D||0==D)return}var g=!HXWebJS.Core.IsStringNullOrEmpty(n)&&!HXWebJS.Core.IsStringNullOrEmpty(r),H=g;if(H){"0"==HXWebJS.DOM.GetElementAttributeValue(a,"hx_trigger_object_extend_xml_svc")&&(H=!1)}if(g&&H)HXWebDynamicPage._Internal._CallObjectExtendPermissionCommand(t,n,r,l,!1,null,o,s,d,a);else if(o){if(null==s||null==s._OnExtCommandButtonClicked)return;s._OnExtCommandButtonClicked(t,n)}else{if(null==HXWebDynamicPage.OnExtCommandButtonClicked)return;HXWebDynamicPage.OnExtCommandButtonClicked(t,n)}}else{var p=HXWebPageGlobalVariables.HXPageParamUUID,P=window.location.pathname+"?hx_page_param_uuid="+p+"&_hx_print_preview_mode=1";HXWebNavigation.OpenWebPage(P,"_blank")}}else HXWebDynamicPage._DataList._add_row_on_page(a,n,"HX_LINE_TEMP_ADD_ON_TOP"==b,o,s);else HXWebJS.Navigation.IsWebPageOpenedInDialog()?HXWebJS.Navigation.CloseWebDialog():(HXWebJS.Core.Browser.IsIE&&(window.opener=null,window.open("","_self")),window.close());else HXWebJS.Navigation.GoHomePage();else{if(HXWebJS.Core.IsStringNullOrEmpty(n))return;var y;if(o){if(null==s||null==s._OnDataListCopyPasteFieldsListGet)return;y=s._OnDataListCopyPasteFieldsListGet(n)}else{if(null==HXWebDynamicPage.OnDataListCopyPasteFieldsListGet)return;y=HXWebDynamicPage.OnDataListCopyPasteFieldsListGet(n)}"HX_COPY_TO_CLPBD"==b?HXWebDynamicPage._DataList._copy_to_clipboard(n,y,o,s):HXWebDynamicPage._DataList._paste_from_clipboard(n,y,o,s)}},HXWebDynamicPage._Internal._FieldHyperlinkContent__Clicked=function(e){var a=null,t=e.target.parentNode,n=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(t);if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=HXWebDynamicPage._Internal._GetExtendWebPartInstance(n);null!=l&&(a=l._OnFieldWebPartHyperlinkContentClicked)}else a=HXWebDynamicPage.OnFieldWebPartHyperlinkContentClicked;if(null!=a){a(t,HXWebJS.DOM.GetElementBindingLineInfo(t))}},HXWebDynamicPage._Internal._FileBoxFieldWebPartContent__Clicked=function(e){HXWebFileBoxControl._Internal._onclick_handler_on_filebox(e)},HXWebDynamicPage._Internal._DataListWebPartColumnResizableInit=function(e){null!=HXWebJS.Widget&&null!=HXWebJS.Widget.TableColumnResizable&&(null==e&&(e=document.body),$("div[hx_is_data_list_area_container=1]",e).each(function(){var e=this.id,a=e+"__content_part",t=$(this).find("table[id='"+a+"']");if(t.length>0&&1==t.find("thead tr").length)HXWebJS.Widget.TableColumnResizable.register(a);else{var n=e+"__content_area_head_rows__table";if((t=$(this).find("table[id='"+n+"']")).length>0&&1==t.find("thead tr").length){var l={twins_table_id:e+"__content_area_data_rows__table"};HXWebJS.Widget.TableColumnResizable.register(n,l)}}}))},HXWebDynamicPage.CommandWebPartDisable=function(e,a){$("[hx_cmd_code="+e+"]>button").each(function(){this.disabled=a})},HXWebDynamicPage.CommandWebPartBadgeValueSet=function(e,a){var t=$("[hx_cmd_code="+e+"]>button>span[hx_btn_webpart__badge=1]");t.length>0&&t.text(a)},HXWebDynamicPage.FieldWebPartDisplayFormat=function(e,a,t,n){if(null!=t){var l=$("[hx_is_field_container=1][hx_field_code='"+a+"'][hx_object_view_code='"+e+"']",n),i=t.value_required,r=t.read_only;l.each(function(e){var a;null!=i&&((a=$("span.hxfld_required_flag",this)).length>0&&(a[0].style.visibility=i?"visible":"hidden"),i?$(this).attr("hx_input_is_must","1"):$(this).removeAttr("hx_input_is_must")),null!=r&&($(this).find("input[type='checkbox'],input[type='radio']").attr("disabled",0!=r),a=$(this).find("input[type!='checkbox'][type!='radio'],textarea"),0==r?(a.removeAttr("readonly"),a.removeAttr("hx_allow_readonly_pick"),a.removeClass("not_allow_pick")):2==r?(a.attr("readonly","readonly"),a.attr("hx_allow_readonly_pick","1"),a.removeClass("not_allow_pick")):(a.attr("readonly","readonly"),a.attr("hx_allow_readonly_pick","0"),a.addClass("not_allow_pick")),(a=$(this).find("span.hxfld_input_choose_btn")).length>0&&(1==r?0==$(this).find("textarea").length&&(a[0].style.visibility="hidden"):a[0].style.visibility="visible"))})}},HXWebDynamicPage.FieldInputBoxHtmlIdGet=function(e,a,t,n){e=e.toLowerCase(),a=a.toLowerCase(),t=HXWebJS.Core.IsStringNullOrEmpty(t)?"":HXWebJS.Core.Trim(t).toLowerCase(),n=HXWebJS.Core.IsStringNullOrEmpty(n)?"":HXWebJS.Core.Trim(n).toLowerCase();var l="search_field"==t?"hxsearcharea__":"list_field"==t?"hxlistarea__":"",i=""==n?"":"__"+n;return HXWebJS.Core.StringFormat("{0}hxinputbox__{1}__{2}{3}",l,e,a,i)},HXWebDynamicPage._Internal._extend_web_part_instance_list=[],HXWebDynamicPage._Internal._ExtendWebPartListRegister=function(){var e=HXWebDynamicPage.GetWebPageConfigDataValue("HX_EXTEND_WEBPART_LIST");if(null!=e&&""!=e){HXWebDynamicPage._Internal._extend_web_part_instance_list=[];var a,t=e.split(/[,|;]/g);for(var n in t){a=t[n];var l=$("[hx_element_type='extend'][hx_extend_webpart_type='"+a+"']");if(0!=l.length){HXWebDynamicPage._Internal._ExtendWebPartAutoLoadRefFileProcess(l,a);var i=HXWebDynamicPage._Internal._GetExtendWebPartInstance(a);null!=i&&HXWebDynamicPage._Internal._extend_web_part_instance_list.push(i)}}HXWebDynamicPage._Internal._ExtendWebPartDataListRebindingCallbackTrigger(),HXWebDynamicPage._Internal._ExtendWebPartCallbacksExecute("_OnWebPartLoaded")}},HXWebDynamicPage._Internal._ExtendWebPartAutoLoadRefFileProcess=function(e,a){var t=e.attr("hx_auto_load_ref_file_folder");if(!HXWebJS.Core.IsStringNullOrEmpty(t))return t=HXWebJS.Core.Trim(t),strRefCssFile="../"+t+"/webpart__"+a+".css",HXWebJS.Core.LoadJsCssFile(strRefCssFile),strRefJSFile="../"+t+"/webpart__"+a+".js",void HXWebJS.Core.LoadJsCssFile(strRefJSFile);var n=e.attr("hx_auto_load_ref_file_setting");if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=(n=HXWebJS.Core.Trim(n.toLowerCase())).split(/;|,/g);t=HXWebJS.Core.Trim(l[0]);if("browser"==(l.length>1?HXWebJS.Core.Trim(l[1]):"browser")){var i="platform_file"==(l.length>2?HXWebJS.Core.Trim(l[2]):""),r=l.length>3?HXWebJS.Core.Trim(l[3]).toLowerCase():"js+css";r.indexOf("css")>=0&&(i?HXWebJS.Core.LoadPlatformJsCssFile(t+"/"+a+".hxwebpart.css"):HXWebJS.Core.LoadJsCssFile("../"+t+"/"+a+".hxwebpart.css")),r.indexOf("js")>=0&&(i?HXWebJS.Core.LoadPlatformJsCssFile(t+"/"+a+".hxwebpart.js"):HXWebJS.Core.LoadJsCssFile("../"+t+"/"+a+".hxwebpart.js"))}}},HXWebJS.EventManager.RegisterFuncRunAfterOnLoad(HXWebDynamicPage._Internal._ExtendWebPartListRegister),HXWebDynamicPage._Internal._ExtendWebPartCallbacksExecute=function(strCallbackFuncName,blnAllowCancelByCallback,arrCallbackFuncParams){if(null==HXWebDynamicPage._Internal._extend_web_part_instance_list)return!0;null==blnAllowCancelByCallback&&(blnAllowCancelByCallback=!1),null==arrCallbackFuncParams&&(arrCallbackFuncParams=[]);var objExtendWebPartInstance,fnTempCallback,objTempResult,arrCallbackNamespaceParts=strCallbackFuncName.split(/\./g);for(var i in HXWebDynamicPage._Internal._extend_web_part_instance_list){if(objExtendWebPartInstance=HXWebDynamicPage._Internal._extend_web_part_instance_list[i],arrCallbackNamespaceParts.length>1){for(var blnNamespaceExist=!0,j=0;j<arrCallbackNamespaceParts.length-1;j++){var objTemp=eval("objExtendWebPartInstance."+arrCallbackNamespaceParts.slice(0,j+1).join("."));if(null==objTemp){blnNamespaceExist=!1;break}}if(!blnNamespaceExist)continue}if(null!=(fnTempCallback=eval("objExtendWebPartInstance."+strCallbackFuncName))){try{objTempResult=fnTempCallback.apply(window,arrCallbackFuncParams)}catch(e){console.log("扩展Web部件回调函数"+objExtendWebPartInstance._name+"."+strCallbackFuncName+"()调用失败。错误信息："+e)}if(blnAllowCancelByCallback&&"boolean"==typeof objTempResult&&0==objTempResult)return!1}}return!0},HXWebDynamicPage._Internal._GetContainerExtendWebPartHtmlId=function(e,a){var t=$(e).parents("[hx_element_type='extend'][hx_extend_webpart_type='"+a+"']");return 0==t.length?"":t[0].id},HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo=function(e){var a=$(e).parents("[hx_element_type='extend'][hx_extend_webpart_type]");return 0==a.length?"":a[0].getAttribute("hx_extend_webpart_type")},HXWebDynamicPage._Internal._ExtendWebPartDataListRebindingCallbackTrigger=function(){var e=[];if($("div[hx_element_type='extend'] div[hx_is_data_list_area_container=1][hx_binding_row_callback], div[hx_element_type='extend'][hx_is_data_list_area_container=1][hx_binding_row_callback]").each(function(a){var t=HXWebJS.DOM.GetElementAttributeValue(this,"hx_xml_data_island_id");!HXWebJS.Core.IsStringNullOrEmpty(t)&&$.inArray(t,e)<0&&e.push(t)}),null!=e&&0!=e.length)for(var a=0;a<e.length;a++)for(var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(e[a]).SelectNodes("//RS_ROW"),n=0;n<t.length;n++)HXWebJS.Xml._XmlDataIsland._TriggerRowRebindingCallback(t[n])},HXWebDynamicPage.ExtendWebPartBrowserSideInit=function(e,a,t){null==t&&(t={});var n=t.extra_data;null==n&&(n="");var l;l="string"==typeof e?document.getElementById(e):e;var i=null==t.show_loading_icon||t.show_loading_icon;i&&(l.innerHTML='<img class="hxsm_extend_webpart_loading_img" src="../hximages_v6/hxpub_loading.gif" />'),HXWebJS.DOM.SetElementAttributeValue(l,"hx_element_type","extend"),HXWebJS.DOM.SetElementAttributeValue(l,"hx_extend_webpart_type",a),HXWebJS.DOM.CSSClass.AddClass(l,a);var r=t.dashboard_html_id;null==r&&(r="");var _=t.dashboard_code;null==_&&(_="");var o=t.dashboard_widget_code;null==o&&(o="");var s=t.webpart_setting_info;null==s&&(s="");var d="dynamic_edit_page"==HXWebPageGlobalVariables.DynamicPageType,b=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE");null==b&&(b="");var c="";d&&(c=HXWebDynamicPage.GetHXXmlDocOfObjectViewData().GetXml());var m="",u="",X=HXWebJS.DOM.GetElementBindingLineInfo(l);null!=X&&(m=X.binding_list_container.getAttribute("hx_object_view_code"),u=X.binding_row_data.GetXml());var W=new HXWebStringBuilder;W.append("<RS_ROW"),W.append(' EXTEND_WEBPART_TYPE="'+HXWebJS.Xml.MarkXMLSpecialChars(a)+'"'),W.append(' WEBPART_SETTING_INFO="'+HXWebJS.Core.MarkXMLSpecialChars(s)+'"'),W.append(' DASHBOARD_HTML_ID="'+HXWebJS.Core.MarkXMLSpecialChars(r)+'"'),W.append(' DASHBOARD_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(_)+'"'),W.append(' DASHBOARD_WIDGET_CODE="'+HXWebJS.Core.MarkXMLSpecialChars(o)+'"'),W.append(' MAIN_OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(b)+'"'),W.append(' MAIN_OBJECT_RECORD_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(c)+'"'),W.append(' CHILD_OBJECT_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(m)+'"'),W.append(' CHILD_ROW_RECORD_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(u)+'"');var D=HXWebDynamicPage._Internal._GetExisttObjectViewCodeListWithUITextPackage();W.append(' EXIST_OBJECT_UI_TEXT_PACKAGES_LIST="'+HXWebJS.Xml.MarkXMLSpecialChars(D)+'"'),W.append(' EXTRA_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(n)+'"'),W.append(" />");var g={use_parallel_mode:!0,assembly_name:"TrustHX.HXPage6"};g.assembly_class_name="TrustHX.HXPage6._HXWebExtendWebPartBrowserSideInitHelper",g.ignore_bod_warning_msg=!0,g.ignore_bod_error_msg=!0,HXWebXmlService.CallPageXmlServiceAsync("_HXDYNAMICPAGE_EXTEND_WEB_PART__HTML_CONTENT_GET",W.toString(),function(e){if(null!=e){var t=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"webpart_html"),n=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"webpart_ref_file_folder"),r=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"webpart_used_ref_file_type"),_=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"auto_load_js_files_in_head"),o=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"webpart_init_data"),s=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"auto_load_js_codes"),d=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"auto_append_object_view_fields_info"),b=HXWebJS.Xml.GetCompositeXmlDataBlock(e,"auto_load_object_ui_text_packages");HXWebDynamicPage._Internal._ExtendWebPartBrowserSideHtmlFillAndRegister(l,a,t,_,s,n,r,o,d,b)}else i&&(l.innerHTML="")},g)},HXWebDynamicPage._Internal._ExtendWebPartBrowserSideHtmlFillAndRegister=function(webPartContainer,strExtendWebPartType,strWebPartHtml,strXmlAutoLoadJSFilesInHead,strAutoLoadJSCodes,strWebPartRefFileFolder,strWebPartUsedRefFileType,strDynamicWebPartInitData,strAutoAppendObjectViewFieldsInfo,strAutoLoadObjectUITextPackages){if(!HXWebJS.Core.IsStringNullOrEmpty(strXmlAutoLoadJSFilesInHead))for(var xmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlAutoLoadJSFilesInHead),xmlNodeListForScript=xmlDoc.SelectNodes("//script/@src"),i=0;i<xmlNodeListForScript.length;i++){var strSrcOfScriptFile=xmlNodeListForScript[i].GetText();HXWebJS.Core.LoadJsCssFile(strSrcOfScriptFile)}if(!HXWebJS.Core.IsStringNullOrEmpty(strAutoLoadJSCodes)){var fnTemp=eval(strAutoLoadJSCodes);"function"==typeof fnTemp&&fnTemp()}var objExtendWebPartInstance=null;HXWebJS.Core.IsStringNullOrEmpty(strWebPartRefFileFolder)||((strWebPartUsedRefFileType=HXWebJS.Core.IsStringNullOrEmpty(strWebPartUsedRefFileType)?"js+css":strWebPartUsedRefFileType.toLowerCase()).indexOf("js")>=0&&HXWebJS.Core.LoadPlatformJsCssFile(strWebPartRefFileFolder+"/"+strExtendWebPartType+".hxwebpart.js"),strWebPartUsedRefFileType.indexOf("css")>=0&&HXWebJS.Core.LoadPlatformJsCssFile(strWebPartRefFileFolder+"/"+strExtendWebPartType+".hxwebpart.css"),null!=(objExtendWebPartInstance=HXWebDynamicPage._Internal._GetExtendWebPartInstance(strExtendWebPartType))&&-1==$.inArray(objExtendWebPartInstance,HXWebDynamicPage._Internal._extend_web_part_instance_list)&&HXWebDynamicPage._Internal._extend_web_part_instance_list.push(objExtendWebPartInstance)),webPartContainer.innerHTML=strWebPartHtml,HXWebJS.Core.IsStringNullOrEmpty(strAutoLoadObjectUITextPackages)||HXWebDynamicPage._Internal._AutoLoadObjectUITextPackages(strAutoLoadObjectUITextPackages),HXWebDynamicPage._Internal._ExtendWebPartNewlyFieldAppendToDataIsland(webPartContainer,strAutoAppendObjectViewFieldsInfo),HXWebJS.Xml.XmlDataIslandBindingProcess(webPartContainer),null!=objExtendWebPartInstance&&objExtendWebPartInstance._OnWebPartLoaded&&objExtendWebPartInstance._OnWebPartLoaded(strDynamicWebPartInitData,webPartContainer),HXWebDynamicPage._Internal._DataListWebPartColumnResizableInit(webPartContainer)},HXWebDynamicPage._Internal._ExtendWebPartNewlyFieldAppendToDataIsland=function(e,a){if(!HXWebJS.Core.IsStringNullOrEmpty(a)){var t=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(a).GetRootXmlNode(),n=t.GetAttributeValue("OBJECT_VIEW_CODE"),l=HXWebDynamicPage.GetWebPageConfigDataValue("OBJECT_VIEW_CODE"),i=HXWebJS.DOM.GetElementBindingLineInfo(e);if(null==i){if("dynamic_edit_page"!=HXWebPageGlobalVariables.DynamicPageType)return;if(l!=n)return;var r=HXWebDynamicPage.GetHXXmlDocOfObjectViewData(l).SelectSingleNode("//RS_ROW");HXWebDynamicPage._Internal._ExtendWebPartNewlyFieldAppendToDataIsland_AppendFields(r,t)}else{var _=i.binding_row_data._xml_data_island_id;if(HXWebJS.Core.IsStringNullOrEmpty(_))return;if(_!="hxxml_listdata__"+n)return;HXWebDynamicPage._Internal._ExtendWebPartNewlyFieldAppendToDataIsland_AppendFields(i.binding_row_data,t)}}},HXWebDynamicPage._Internal._ExtendWebPartNewlyFieldAppendToDataIsland_AppendFields=function(e,a){for(var t,n,l,i=a.SelectNodes(".//RS_ROW/@*"),r=0;r<i.length;r++)n=(t=i[r]).GetName(),null==e.SelectSingleNode("@"+n)&&(l=t.GetText(),e.SetAttributeValue(n,l,!0,!1))},HXWebDynamicPage._Internal._GetExisttObjectViewCodeListWithUITextPackage=function(){var e=new HXWebStringBuilder;return $("hxxmldataisland").each(function(){var a=this.id;if(a.length>15&&0==a.indexOf("hxxml_ui_text")){var t=a.substr(15);e.isEmpty()||e.append(";"),e.append(t)}}),e.toString()},HXWebDynamicPage._Internal._AutoLoadObjectUITextPackages=function(e){if(!HXWebJS.Core.IsStringNullOrEmpty(e))for(var a,t,n,l=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(e).SelectNodes("//UI_TEXT_DATA"),i=0;i<l.length;i++)a=(n=l[i]).GetAttributeValue("OBJECT_VIEW_CODE"),null==document.getElementById("hxxml_ui_text__"+a)&&(t=n.GetAttributeValue("UI_TEXT_CNT"),HXWebJS.Xml.CreateXmlDataIsland("hxxml_ui_text__"+a,t))},HXWebDynamicPage._DataList._DataListRowClicked=function(e){var a=HXWebJS.DOM.GetElementBindingLineInfo(e.target);if(null!=a){var t=HXWebJS.DOM.GetElementAttributeValue(a.binding_row_container.parentNode,"hx_datalist_webpart_html_id");if(!HXWebJS.Core.IsStringNullOrEmpty(t))if("input"!=e.target.tagName.toLowerCase()){var n=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a.binding_row_container),l=null;if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var i=HXWebDynamicPage._Internal._GetExtendWebPartInstance(n);null!=i&&(l=i._OnDataListRowClicked)}else l=HXWebDynamicPage.OnDataListRowClicked;null!=l&&l(t,a,a.binding_row_container,a.binding_row_data,e)}else e.stopPropagation()}},HXWebDynamicPage._DataList._page_auto_sum__recalc_all=function(e,a){var t=$("[id='"+e+"']");if(0!=t.length)for(var n,l,i,r=0;r<t.length;r++){n=t[r],i="","sub_ref_data_list"!=(l=$(n).attr("hx_element_type"))&&"sub_child_data_list"!=l||(i=HXWebJS.DOM.GetElementBindingLineInfo(n).binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID"));var _=$(n).attr("hx_object_view_code"),o=null;o="1"==HXWebJS.DOM.GetElementAttributeValue(n,"hx_is_datalist_table_content_area")?[n]:HXWebJS.DOM.FindElementsByAttribute("hx_is_datalist_table_content_area","1","table",n);for(var s,d,b,c,m,u=0;u<o.length;u++)if(null!=(s=o[u]).tFoot&&null!=(d=HXWebJS.DOM.FindFirstElementById("hxtr_webdatalist_pagefootline_area",s.tFoot))){b=HXWebJS.DOM.FindElementsByAttribute("hx_is_auto_sum_result","1","span",d);for(var X=0;X<b.length;X++)m=b[X],c=HXWebJS.DOM.GetElementAttributeValue(m,"hx_field_name"),HXWebDynamicPage.CalcAndFillObjectAutoSumFieldValue(a,c,m,i)}HXWebDynamicPage._DataList._Call_AutoSumFieldValueUpdated_Callback(n,a,_,null,i)}},HXWebDynamicPage._DataList._Call_AutoSumFieldValueUpdated_Callback=function(e,a,t,n,l){if(null!=HXWebDynamicPage.OnDataListFieldAutoSumValueUpdated)if(null!=n){var i=HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue(a,n,null,null,null,l),r=HXWebJS.Utility.ConvertToNumber(i);HXWebDynamicPage.OnDataListFieldAutoSumValueUpdated(t,n,r,e)}else{var _=$("#hxtr_webdatalist_pagefootline_area span[hx_is_auto_sum_result=1]",e).toArray();for(var o in _){n=$(_[o]).attr("hx_field_name");var i=HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue(a,n,null,null,null,l),r=HXWebJS.Utility.ConvertToNumber(i);HXWebDynamicPage.OnDataListFieldAutoSumValueUpdated(t,n,r,e)}}},HXWebDynamicPage._DataList._page_auto_sum__auto_recalc_register=function(e,a){null!=document.getElementById(e)&&(HXWebJS.Xml.RegisterOnBindingValueChangedCallback(a.toLowerCase(),HXWebDynamicPage._DataList._page_auto_sum__field_change_handler),HXWebJS.Xml.RegisterOnBindingDataChangedCallback(a.toLowerCase(),HXWebDynamicPage._DataList._page_auto_sum__data_change_handler))},HXWebDynamicPage._DataList._page_auto_sum__field_change_handler=function(e,a,t,n,l,i){var r=$(i).parents("[hx_is_data_list_area_container=1]");if(0!=r.length){var _=r[0],o=HXWebJS.DOM.GetElementAttributeValue(_,"hx_object_view_code"),s="",d=$(_).attr("hx_element_type");"sub_ref_data_list"!=d&&"sub_child_data_list"!=d||(rowBindingInfo=HXWebJS.DOM.GetElementBindingLineInfo(_),s=rowBindingInfo.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID"));var b=$("#hxtr_webdatalist_pagefootline_area span[hx_is_auto_sum_result=1][hx_field_name='"+a+"']",_),c=b.length>0?b[0]:null;null!=c&&(HXWebDynamicPage.CalcAndFillObjectAutoSumFieldValue(e,a,c,s),HXWebDynamicPage._DataList._Call_AutoSumFieldValueUpdated_Callback(_,e,o,a,s))}},HXWebDynamicPage._DataList._page_auto_sum__data_change_handler=function(e){var a=$("div[hx_is_data_list_area_container='1'][hx_xml_data_island_id='"+e+"']");if(0!=a.length)for(var t,n,l=0;l<a.length;l++){var i=a[l],r=HXWebJS.DOM.GetElementAttributeValue(i,"hx_object_view_code");n="","sub_ref_data_list"!=(t=$(i).attr("hx_element_type"))&&"sub_child_data_list"!=t||(rowBindingInfo=HXWebJS.DOM.GetElementBindingLineInfo(i),n=rowBindingInfo.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID"));for(var _=$("#hxtr_webdatalist_pagefootline_area span[hx_is_auto_sum_result=1][hx_field_name]",i),o=0;o<_.length;o++){var s=_[o],d=$(s).attr("hx_field_name");HXWebDynamicPage.CalcAndFillObjectAutoSumFieldValue(e,d,s,n),HXWebDynamicPage._DataList._Call_AutoSumFieldValueUpdated_Callback(i,e,r,d,n)}}},HXWebDynamicPage._DataList._HeadLineColumnSortProcess=function(e){if(!(HXWebJS.Widget&&HXWebJS.Widget.TableColumnResizable&&HXWebJS.Widget.TableColumnResizable._isResizingStoppedMouseClick)){var a=e.target;if("TD"!=a.tagName.toUpperCase()&&(a=$(e.target).parents("td")[0]),null!=a&&null!=a.getAttribute("hx_field_name")&&null==a.getAttribute("hx_is_field_quick_sort_disabled")){for(var t=a.getAttribute("hx_field_name").toLowerCase(),n=a.parentNode;null!=n&&null==n.getAttribute("hx_is_data_list_area_container");)n=n.parentNode;if(null!=n){e.stopPropagation();var l="",i="";if(null!=n.getAttribute("hx_last_time_sort_field_name")&&(l=n.getAttribute("hx_last_time_sort_field_name").toLowerCase()),null!=n.getAttribute("hx_last_time_sort_type")&&(i=n.getAttribute("hx_last_time_sort_type").toUpperCase()),""!=l&&l!=t)for(var r,_,o=HXWebJS.DOM.FindElementsByTagName("table",n),s=0;s<o.length;s++){r=HXWebJS.DOM.FindElementsByTagName("td",o[s].tHead);for(var d=0;d<r.length;d++)if(null!=r[d].getAttribute("hx_field_name")&&r[d].getAttribute("hx_field_name").toLowerCase()==l&&null!=(_=HXWebJS.DOM.FindFirstElementById("hxbtn_sort_direction",r[d]))){_.style.display="none";break}}var b="ASC";l==t&&(b="ASC"==i?"DESC":"ASC");var c=HXWebJS.DOM.FindFirstElementById("hxbtn_sort_direction",a);null==c?(a.innerHTML+='<span id="hxbtn_sort_direction" class="" style="margin-left:2px;"></span>',c=HXWebJS.DOM.FindFirstElementById("hxbtn_sort_direction",a)):c.style.display="",c.className="ASC"==b?"fa fa-arrow-circle-o-up":"fa fa-arrow-circle-o-down",n.setAttribute("hx_last_time_sort_field_name",t),n.setAttribute("hx_last_time_sort_type",b);var m=n.getAttribute("hx_element_type");"ref_data_list"==m||"child_data_list"==m?HXWebDynamicPage._DataList._predefined_head_line_field_sort_process(n,t,"ASC"==b):"inquiry_data_list"==m?HXWebDynamicPage.ListPage._Internal._predefined_head_line_field_sort_process(t+" "+b):"statistic_data_list"==m&&HXWebDynamicPage.StatPage._Internal._predefined_head_line_field_sort_process(t+" "+b)}}}},HXWebDynamicPage._DataList._predefined_head_line_field_sort_process=function(e,a,t){var n=$(e).attr("hx_xml_data_island_id");if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n),i=l.GetXml(),r=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(i);null!=r&&(HXWebJS.Utility.HXXmlDataList_QuickSort(r,a.toUpperCase(),t),i=r.GetXml(),l.ReloadXML(i))}},HXWebDynamicPage._DataList._content_area_scrolled=function(e,a){var t=e.target,n=a+"__content_area_head_rows__container",l=HXWebJS.DOM.FindFirstElementById(n,t.parentNode,"div");null!=l&&(l.scrollLeft=t.scrollLeft);var i=a+"__freezen_area_data_rows__container",r=HXWebJS.DOM.FindFirstElementById(i,t.parentNode,"div");null!=r&&(r.scrollTop=t.scrollTop)},HXWebDynamicPage._DataList._copy_to_clipboard=function(e,a,t,n){var l=HXWebDynamicPage.GetHXXmlDocOfObjectViewListData(e);if(null!=l){var i=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text__"+e);if(null!=a&&""!=a){var r=a.split(/[,|;]/g);if(0!=r.length){var _,o,s,d,b,c,m=null!=i&&""!=i.GetXml(),u=l.SelectNodes("//RS_ROW"),X=[u.length+1];c=[r.length];for(P=0;P<r.length;P++)_=r[P],d=!1,m&&null!=(b=i.SelectSingleNode("//@LBL__"+_.toUpperCase()))&&""!=(o=b.GetText())&&(d=!0),c[P]=d?o:_;X[0]=c;for(var W,D=0;D<u.length;D++){W=u[D],c=[r.length];for(var g=0;g<r.length;g++)_=r[g],s=W.GetAttributeValue(_.toUpperCase()),c[g]=s;X[D+1]=c}var H=null;t?null!=n&&(H=n._OnDataListBeforeCopyData):H=HXWebDynamicPage.OnDataListBeforeCopyData,null!=H&&(X=H(e,X));for(var p=new HXWebStringBuilder,P=0;P<u.length+1;P++){P>0&&p.append("\r\n");for(var y=0;y<r.length;y++)y>0&&p.append("\t"),p.append(X[P][y])}if(window.clipboardData){C=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__DATA_LIST_COPY_TO_CLIPBOARD_OK");window.clipboardData.setData("text",p.toString()),alert(C)}else{var C=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__DATA_LIST_COPY_TO_CLIPBOARD_PLEASE_W3C");HXWebMessageBox.Show(C,p.toString()),document.getElementById("hxwebmessageboxcontrol__textarea").select()}}}}},HXWebDynamicPage._DataList._paste_from_clipboard=function(e,a,t,n){if(null!=a&&""!=a){var l=a.split(/[,|;]/g);if(0!=l.length){var i,r,_=function(a){if(null!=a){var r=a.split("\n");if(r.length<=1)return i=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_NO_DATA"),void alert(i);for(var _,o,s,d=new Array,b=0,c=0;c<r.length;c++)if(""!=(_=r[c])&&0!=(o=_.split("\t")).length){s=[l.length];for(var m=0;m<o.length&&m<l.length;m++)s[m]=o[m];d[b]=s,b++}if(b<=1)return i=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_NO_DATA"),void alert(i);var u=null;if(t?null!=n&&(u=n._OnDataListBeforePasteData):u=HXWebDynamicPage.OnDataListBeforePasteData,null==u||null!=(d=u(e,d))&&("boolean"!=typeof d||0!=d)){var X=HXWebDynamicPage.GetHXXmlDocOfObjectViewListData(e);if(null!=X){var W=HXWebDynamicPage.GetHXXmlDocOfObjectViewListBlankRow(e);if(null!=W){X.ReloadXML(W.GetXml());var D,g=X.SelectSingleNode("//RS_ROW");s=d[1];for(c=0;c<l.length;c++)null!=(D=g.SelectSingleNode("@"+l[c].toUpperCase()))&&D.SetText(s[c]);for(var H=2;H<b;H++){s=d[H],g=W.SelectSingleNode("//RS_ROW").CloneNode();for(c=0;c<l.length;c++)null!=(D=g.SelectSingleNode("@"+l[c].toUpperCase()))&&D.SetText(s[c]);X.GetRootXmlNode().AppendChild(g)}var p=null;t?null!=n&&(p=n._OnDataListAfterPasteData):p=HXWebDynamicPage.OnDataListAfterPasteData,null!=p&&p(e)}}}}};if(window.clipboardData){if(null==(r=window.clipboardData.getData("text"))||""==r)return i=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_NO_DATA"),void alert(i);_(r)}else{i=HXWebJS.Xml.XmlService.GetUITextOnServer("WARNING_MSG__HXWWW_HXWEBEDITPAGE__CLIPBOARD_PLEASE_COPY_DATA_W3C");var o={show_okcancel_button:!0,height:500,callback_after_ok_button_clicked:_};HXWebMessageBox.Show(i,"",o)}}}},HXWebDynamicPage._DataList._add_row_on_page=function(e,a,t,n,l){var i="",r=null,_=HXWebJS.DOM.GetElementBindingLineInfo(e);null!=_&&(i=(r=_.binding_row_data).GetAttributeValue("_HXWEBJS_ROW_UUID")),null==t&&(t=!1);var o=HXWebDynamicPage.GetHXXmlDocOfObjectViewListData(a);if(null!=o){var s=HXWebDynamicPage.GetHXXmlDocOfObjectViewListBlankRow(a);if(null!=s){var d=s.SelectSingleNode("//RS_ROW").CloneNode(),b=null;if(n?null!=l&&null!=l._OnDataListBeforeRowAdded&&(b=l._OnDataListBeforeRowAdded):null!=HXWebDynamicPage.OnDataListBeforeRowAdded&&(b=HXWebDynamicPage.OnDataListBeforeRowAdded),null!=b){if(0==b(a,d,r))return}-1==o.GetXml().indexOf("<RS_ROW")?(o.ReloadXML("<RS_DATA></RS_DATA>"),o.GetRootXmlNode().AppendChild(d,i)):t?o.GetRootXmlNode().InsertChild(d,o.GetRootXmlNode().GetFirstChild(),i):o.GetRootXmlNode().AppendChild(d,i)}}},HXWebDynamicPage._DataList._ChooseAllRowsOnPage=function(e){var a=e.target.checked?"-1":"0",t=$(e.target).attr("hx_datalist_webpart_html_id"),n=$(e.target).attr("hx_datalist_webpart_xmldataisland"),l=$(e.target).parents("#"+t);if(0!=l.length){var i=HXWebJS.DOM.GetElementBindingLineInfo(l[0]),r=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(n),_="//RS_ROW";if(null!=i){_="//RS_ROW[@_HXWEBJS_PARENT_ROW_UUID='"+i.binding_row_data.GetAttributeValue("_HXWEBJS_ROW_UUID")+"']"}else _="//RS_ROW";for(var o=r.SelectNodes(_),s=0;s<o.length;s++)o[s].SetAttributeValue("HXWEBDATALIST_IS_CHOOSED",a)}},HXWebDynamicPage._DataList._LineCmdProcess=function(e){var a=$(e.target).parents("[hx_cmd_code]")[0],t=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_code"),n=t.toLowerCase(),l=HXWebJS.DOM.GetElementAttributeValue(a,"hx_object_view_code");HXWebJS.Core.IsStringNullOrEmpty(l)&&(l=$(a).parents("[hx_is_data_list_area_container=1]").attr("hx_object_view_code"));var i=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_permission_code"),r=HXWebJS.DOM.GetElementAttributeValue(a,"hx_cmd_extra_data"),_=HXWebDynamicPage._Internal._GetExtendWebPartTypeBelongTo(a),o=!HXWebJS.Core.IsStringNullOrEmpty(_),s=HXWebJS.DOM.GetElementBindingLineInfo(a);if(null!=s){var d=s.binding_row_data,b=null,c="";if(o&&(b=HXWebDynamicPage._Internal._GetExtendWebPartInstance(_),c=HXWebDynamicPage._Internal._GetContainerExtendWebPartHtmlId(a,_)),"hx_line_delete"!=n&&"hx_line_temp_remove"!=n){var m=HXWebDynamicPage._Internal._GetPredefinedProcessClassViaPageType(HXWebPageGlobalVariables.DynamicPageType);if(null!=m){var u=m._Internal._predefined_line_command_process(a,l,n,d,r);if(null==u||0==u)return}var X=$(s.binding_row_container).parents("[hx_is_data_list_area_container=1]")[0],W=!HXWebJS.Core.IsStringNullOrEmpty(l)&&!HXWebJS.Core.IsStringNullOrEmpty(i),D=W;if(D){"0"==HXWebJS.DOM.GetElementAttributeValue(a,"hx_trigger_object_extend_xml_svc")&&(D=!1)}if(W&&D)HXWebDynamicPage._Internal._CallObjectExtendPermissionCommand(t,l,i,r,!0,d,o,b,c,a);else{var g=null;o?null!=b&&null!=b._OnDataListRowLineCmdButtonClicked&&(g=b._OnDataListRowLineCmdButtonClicked):null!=HXWebDynamicPage.OnDataListRowLineCmdButtonClicked&&(g=HXWebDynamicPage.OnDataListRowLineCmdButtonClicked),null!=g&&g(l,t,d,r,X,a)}}else HXWebDynamicPage._DataList._delete_row__main(a,l,s,"hx_line_delete"==n,d,o,b)}},HXWebDynamicPage._DataList._delete_row__main=function(e,a,t,n,l,i,r){if(!n||""!=a){var _=t.binding_row_data.SelectSingleNode("@HX_UUID"),o=null!=_?_.GetText():"";n&&""!=o?HXWebDynamicPage._DataList._delete_row_on_server_process(a,t,i,r):HXWebDynamicPage._DataList._delete_row_on_page_process(a,t,i,r)}},HXWebDynamicPage._DataList._delete_row_on_server_process=function(e,a,t,n){var l="",i=null;if(t?null!=n&&null!=n._OnDataListBeforeRowDeleted&&(i=n._OnDataListBeforeRowDeleted):null!=HXWebDynamicPage.OnDataListBeforeRowDeleted&&(i=HXWebDynamicPage.OnDataListBeforeRowDeleted),null!=i){var r=i(e,a);if(null!=r){if("boolean"==typeof r&&0==r)return;if(null!=r.is_ok){if(0==r.is_ok)return;l=r.extra_value}}}else{var _=HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_GENERAL__HINT_FOR_DELETE_RECORD_CONFIRM");if(0==confirm(_))return}var o=a.binding_row_data.GetXml();HXWebDynamicPage._Internal._DeleteDataProcess(e,o,function(l){if(null!=l){var r=HXWebDynamicPage._Internal._GetPredefinedProcessClassViaPageType(HXWebPageGlobalVariables.DynamicPageType);if(null!=r){var _=r._Internal._predefined_after_list_row_deleted_process;null!=_&&_(e,a)}i=null,t?null!=n&&null!=n._OnDataListAfterRowDeleted&&(i=n._OnDataListAfterRowDeleted):null!=HXWebDynamicPage.OnDataListAfterRowDeleted&&(i=HXWebDynamicPage.OnDataListAfterRowDeleted),null!=i&&i(e,a)}},l)},HXWebDynamicPage._DataList._delete_row_on_page_process=function(e,a,t,n){var l=null;if(t?null!=n&&null!=n._OnDataListBeforeRowTempRemoved&&(l=n._OnDataListBeforeRowTempRemoved):null!=HXWebDynamicPage.OnDataListBeforeRowTempRemoved&&(l=HXWebDynamicPage.OnDataListBeforeRowTempRemoved),null!=l){var i=l(e,a);if(null!=i&&0==i)return}var r=a.binding_row_data,_=r.SelectSingleNode(".//@HX_UUID"),o=null==_?"":_.GetText();HXWebDynamicPage._DataList._register_temp_removed_object_record_uuid(e,o),null==a.parent_level_row_container&&HXWebDynamicPage._DataList._delete_row_on_page_process__remove_lvl2_rows(e,a.binding_row_container,a.binding_row_data,t,n);var s=r._xml_data_island_id;HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(s).GetRootXmlNode().RemoveChild(r),l=null,t?null!=n&&null!=n._OnDataListRowAfterTempRemoved&&(l=n._OnDataListRowAfterTempRemoved):null!=HXWebDynamicPage.OnDataListRowAfterTempRemoved&&(l=HXWebDynamicPage.OnDataListRowAfterTempRemoved),null!=l&&l(e,a)},HXWebDynamicPage._DataList._deleted_object_record_uuid_list=[],HXWebDynamicPage._DataList._register_temp_removed_object_record_uuid=function(e,a){if(null!=a&&""!=a){var t=HXWebDynamicPage._DataList._deleted_object_record_uuid_list[e];null==t?HXWebDynamicPage._DataList._deleted_object_record_uuid_list[e]=[a]:HXWebJS.Utility.StringInArray(t,a)||t.push(a)}},HXWebDynamicPage._DataList._get_temp_removed_object_record_uuid_list=function(e){var a=HXWebDynamicPage._DataList._deleted_object_record_uuid_list[e];return null==a?"":a.join(",")},HXWebDynamicPage._DataList._delete_row_on_page_process__remove_lvl2_rows=function(e,a,t,n,l){var i=t._xml_data_island_id;if(!HXWebJS.Core.IsStringNullOrEmpty(i)){var r=$("[hx_element_type='sub_ref_data_list'] table[hx_binding_parent_datasrc='"+i+"']",a).add($("[hx_element_type='sub_child_data_list'] table[hx_binding_parent_datasrc='"+i+"']",a)).add($("[hx_element_type='sub_child_data_list'][hx_binding_parent_datasrc='"+i+"']",a)).add($("[hx_element_type='sub_child_data_list'][hx_binding_parent_datasrc='"+i+"']",a));0!=r.length&&r.each(function(e){var a,t=$(this),i=t.attr("hx_object_view_code");a="div"==this.tagName.toLowerCase()?t.children("div[hx_binding_row_container=1]"):t.children("tbody");for(var r,_=0;_<a.length;_++)r=HXWebJS.DOM.GetElementBindingLineInfo(a[_]),HXWebDynamicPage._DataList._delete_row_on_page_process(i,r,n,l)})}},HXWebDynamicPage._DataList._BizContextRecordLevelRowFormat=function(e,a,t){var n=$("#"+e).attr("hx_object_view_code");if(!HXWebJS.Core.IsStringNullOrEmpty(n)){var l=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_biz_context_record_level_check_format_info__"+n.toLowerCase());if(null!=l){var i=t.GetAttributeValue("HX_UUID");HXWebJS.Core.IsStringNullOrEmpty(i)&&(i="_new_record");var r=l.SelectSingleNode("//RS_ROW[@HX_UUID='"+i+"']");if(null!=r){var _=!0;"0"==r.GetAttributeValue("BIZ_CAN_BE_UPDATED")&&(_=!1);var o=r.GetAttributeValue("BIZ_RECORD_DEFAULT_EDIT_BEHAVIOR"),s=r.GetAttributeValue("BIZ_RECORD_FIELDS_EDIT_BEHAVIOR_LIST"),d=r.GetAttributeValue("BIZ_RECORD_READONLY_FIELDS_EDIT_DISPLAY_BEHAVIOR_LIST");HXWebDynamicPage._DataList._BizContextRecordLevelRowFormat_Fields(n,a,_,b,o,s,d);var b=!0;"0"==r.GetAttributeValue("BIZ_CAN_BE_DELETED")&&(b=!1);var c=r.GetAttributeValue("BIZ_RECORD_LINE_COMMAND_EXECUTE_BEHAVIOR_LIST");HXWebDynamicPage._DataList._BizContextRecordLevelRowFormat_LineCommands(n,a,_,b,c)}}}},HXWebDynamicPage._DataList._BizContextRecordLevelRowFormat_Fields=function(e,a,t,n,l,i,r){l=null==l?"nocontrol":l.toLowerCase();var _=HXWebJS.Utility.ConvertKeyValueListStringToDictionary(i),o=HXWebJS.Utility.ConvertKeyValueListStringToDictionary(r);$("[hx_is_field_container='1'][hx_object_view_code='"+e+"'][hx_field_code]",a).each(function(){var a,n,i,r=$(this).attr("hx_field_code");"defaulteditable"==l?(a=!t,n=!1,null!=(i=_[r])&&("readonly"==(i=i.toLowerCase())&&(a=!0),"editable_valuerequired"==i&&t&&(n=!0))):"defaultreadonly"==l?(a=!0,n=!1,null!=(i=_[r])&&("editable"==(i=i.toLowerCase())&&t&&(a=!1),"editable_valuerequired"==i&&t&&(n=!0))):(a=!t,n=!1);if(a&&null!=o[r]&&o[r].toLowerCase(),a||n){var s={};a&&(s.read_only=1),n&&(s.value_required=!0),HXWebDynamicPage.FieldWebPartDisplayFormat(e,r,s,this.parentNode)}})},HXWebDynamicPage._DataList._BizContextRecordLevelRowFormat_LineCommands=function(e,a,t,n,l){if(n||$("[hx_element_type='line_command'][hx_cmd_code='hx_line_delete'],[hx_element_type='line_command'][hx_cmd_code='hx_line_temp_remove']",a).each(function(){var a=$(this),t=a.attr("hx_object_view_code");t!=e&&null!=t||a.css("display","none")}),t||$("[hx_element_type='line_command'][hx_cmd_code='hx_line_edit']",a).each(function(){var a=$(this),t=a.attr("hx_object_view_code");t!=e&&null!=t||a.css("display","none")}),!HXWebJS.Core.IsStringNullOrEmpty(l)){var i=HXWebJS.Utility.ConvertKeyValueListStringToDictionary(l);$("[hx_element_type='line_command'][hx_object_view_code='"+e+"'][hx_cmd_permission_code]",a).each(function(){var e=$(this),a=e.attr("hx_cmd_permission_code");if(!HXWebJS.Core.IsStringNullOrEmpty(a)){var t=i[a];null!=t&&("disabled"!=(t=t.toLowerCase())&&"hidden"!=t&&"removed"!=t||e.css("visibility","hidden"))}})}};