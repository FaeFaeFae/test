if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());/*
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{s=decodeURIComponent(s.replace(pluses," "))}catch(e){return}try{return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}return(document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie}}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,"",$.extend({},options,{expires:-1}));return true}return false}}));var HXWebJS;if(!HXWebJS){HXWebJS={}}HXWebJS.Core={};HXWebJS.Core._Internal={};HXWebJS.Core.StringBuilder=function(){this._strings_=new Array()};HXWebJS.Core.StringBuilder.prototype.append=function(str){this._strings_.push(str)};HXWebJS.Core.StringBuilder.prototype.toString=function(){return this._strings_.join("")};HXWebJS.Core.StringBuilder.prototype.clear=function(){this._strings_=new Array()};HXWebJS.Core.StringBuilder.prototype.isEmpty=function(){return this._strings_.length==0};var HXWebStringBuilder=HXWebJS.Core.StringBuilder;HXWebJS.Core.Timer=function(){this._interval=500;this._enabled=false;this._uniqueID=null;this._timer=null;this._tickhandler=null};HXWebJS.Core.Timer.prototype={get_uniqueID:function(){return this._uniqueID},set_uniqueID:function(a){this._uniqueID=a},get_enabled:function(){return this._enabled},set_enabled:function(blnNewEnabledStatus){var blnOldEnabledStatus=this._enabled;if(blnOldEnabledStatus!=blnNewEnabledStatus){if(blnOldEnabledStatus==true){this._stopTimer()}this._enabled=blnNewEnabledStatus;if(blnNewEnabledStatus==true){this._startTimer()}}},get_interval:function(){return this._interval},set_interval:function(intInterval){if(this._interval!=intInterval){this._interval=intInterval;if(this._enabled){this._stopTimer();this._startTimer()}}},set_tickhandler:function(f){this._tickhandler=f},_startTimer:function(){this._timer=window.setTimeout(HXWebJS.Core.CreateDelegateFunction(this,this._raisetick),this.get_interval())},_stopTimer:function(){if(this._timer!==null){window.clearTimeout(this._timer);this._timer=null}},_raisetick:function(){this._tickhandler();this._startTimer()}};HXWebJS.Core.Browser={};HXWebJS.Core.Browser._userAgent=navigator.userAgent.toLowerCase();HXWebJS.Core.Browser.Version=(HXWebJS.Core.Browser._userAgent.match(/.+(?:rv|it|ra|ie|on|chrome)[\/: ]([\d.]+)/)||[0,"0"])[1];HXWebJS.Core.Browser.IsChrome=/\bchrome\b/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.Browser.IsSafari=/safari/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.Browser.IsOpera=/opera/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.Browser.IsMozilla=/mozilla/.test(HXWebJS.Core.Browser._userAgent)&&!/(compatible|webkit)/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.Browser.IsIE11=!HXWebJS.Core.Browser.IsChrome&&!HXWebJS.Core.Browser.IsSafari&&!HXWebJS.Core.Browser.IsOpera&&/trident/.test(HXWebJS.Core.Browser._userAgent)&&parseFloat(HXWebJS.Core.Browser.Version)>=11;HXWebJS.Core.Browser.IsIE10OrLess=/msie/.test(HXWebJS.Core.Browser._userAgent)&&!/opera/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.Browser.IsMobile=/mobile/.test(HXWebJS.Core.Browser._userAgent);HXWebJS.Core.WebPageGlobalVariables={};HXWebJS.Core.WebPageGlobalVariables._Internal={};HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrentPageName=function(){if(typeof(mstrCurrentWebPageName)=="string"){return mstrCurrentWebPageName}else{var i=location.pathname.lastIndexOf("/");return location.pathname.substr(i+1)}};HXWebJS.Core.WebPageGlobalVariables._Internal.GetWebRootPath=function(){if(typeof(gstrWebRootPath)!="string"){alert("HXWebJS.Core.WebPageGlobalVariables运行错误： WebRootPath参数值未被登记！");return null}return gstrWebRootPath};HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrentCultureName=function(){if(typeof(mstrCurrentWebLanguageCulture)!="string"){alert("HXWebJS.Core.WebPageGlobalVariables运行错误： CurrentWebLanguageCulture参数值未被登记！");return null}return mstrCurrentWebLanguageCulture};HXWebJS.Core.WebPageGlobalVariables._Internal.GetHXPageParamUUID=function(){if(typeof(mstrHXPageParamUUID)!="string"){alert("HXWebJS.Core.WebPageGlobalVariables运行错误： HXPageParamUUID参数值未被登记！");return null}return mstrHXPageParamUUID};HXWebJS.Core.WebPageGlobalVariables._Internal.GetPageXmlSvcAssemblyName=function(){if(typeof(mstrPageXmlServiceAssemblyName)!="string"){alert("HXWebJS.Core.WebPageGlobalVariables运行错误： PageXmlServiceAssemblyName参数值未被登记！");return null}return mstrPageXmlServiceAssemblyName};HXWebJS.Core.WebPageGlobalVariables._Internal.GetPageXmlSvcClassName=function(){if(typeof(mstrPageXmlServiceClassName)!="string"){alert("HXWebJS.Core.WebPageGlobalVariables运行错误： PageXmlServiceClassName参数值未被登记！");return null}return mstrPageXmlServiceClassName};HXWebJS.Core.WebPageGlobalVariables._Internal.GetDateDisplayFormatString=function(){if(typeof(mstrCurrentDateDisplayFormatString)!="string"){return"YYYY-MM-DD"}if(mstrCurrentDateDisplayFormatString==null||mstrCurrentDateDisplayFormatString==""){return"YYYY-MM-DD"}if(mstrCurrentDateDisplayFormatString.length!=10){return"YYYY-MM-DD"}return mstrCurrentDateDisplayFormatString};HXWebJS.Core.WebPageGlobalVariables._Internal.GetDecimalDisplayFormatType=function(){if(typeof(mintCurrentDecimalDisplayFormatType)!="number"){return 0}if(mintCurrentDecimalDisplayFormatType==null||mintCurrentDecimalDisplayFormatType!=1){return 0}return mintCurrentDecimalDisplayFormatType};HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrencyDisplayFormatScale=function(){var strType=typeof(mintCurrenyDisplayFormatScale);if(strType=="undefined"||strType!="number"){return 2}if(mintCurrenyDisplayFormatScale==null||mintCurrenyDisplayFormatScale<0){return 2}return mintCurrenyDisplayFormatScale};HXWebJS.Core.WebPageGlobalVariables.CurrentPageName=HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrentPageName();HXWebJS.Core.WebPageGlobalVariables.WebRootPath=HXWebJS.Core.WebPageGlobalVariables._Internal.GetWebRootPath();HXWebJS.Core.WebPageGlobalVariables.CurrentCultureName=HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrentCultureName();HXWebJS.Core.WebPageGlobalVariables.DateDisplayFormatString=HXWebJS.Core.WebPageGlobalVariables._Internal.GetDateDisplayFormatString();HXWebJS.Core.WebPageGlobalVariables.DecimalDisplayFormatType=HXWebJS.Core.WebPageGlobalVariables._Internal.GetDecimalDisplayFormatType();HXWebJS.Core.WebPageGlobalVariables.CurrencyDisplayFormatScale=HXWebJS.Core.WebPageGlobalVariables._Internal.GetCurrencyDisplayFormatScale();var HXWebPageGlobalVariables=HXWebJS.Core.WebPageGlobalVariables;HXWebJS.Core.CreateDelegateFunction=function(objElement,CallbackFunction){var args=[];for(var i=2;i<arguments.length;i++){args.push(arguments[i])}return function(){return CallbackFunction.apply(objElement,args)}};HXWebJS.Core.IsJavascriptFunctionDefined=function(fn){if(fn==null){return false}if(typeof(fn)=="undefined"){return false}if(typeof(fn)=="function"){return true}try{if(typeof(eval(fn))=="function"){return true}}catch(e){return false}};HXWebJS.Core.MarkXMLSpecialChars=function(strText){if(strText==null){return null}if(typeof(strText)!="string"){strText=strText.toString()}var strTemp=strText.replace(/&/g,"&amp;");strTemp=strTemp.replace(/</g,"&lt;");strTemp=strTemp.replace(/>/g,"&gt;");strTemp=strTemp.replace(/"/g,"&quot;");return strTemp};HXWebJS.Core.DebugMessageDisable=function(blnDisableDebugMsg){if(blnDisableDebugMsg==null){blnDisableDebugMsg=true}HXWebJS.Core._Internal._debug_message_output_disabled=blnDisableDebugMsg;$("#hxdiv_debug_log_message_display_area").hide()};HXWebJS.Core.CreateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)})};HXWebJS.Core.DebugMessageClear=function(){$("#hxdiv_debug_log_message_display_area").html("")};HXWebJS.Core.DebugMessageOutputOnPage=function(strDebugMessage){if(typeof HXWebJS.Core._Internal._debug_message_output_disabled=="undefined"){HXWebJS.Core._Internal._debug_message_output_disabled=false}if(HXWebJS.Core._Internal._debug_message_output_disabled==true){return}if(document.getElementById("hxdiv_debug_log_message_display_area")==null){var strHtmlForDebugLogArea='<div id="hxdiv_debug_log_message_display_area" style="position:absolute;z-index:88888;right:2px;width:360px;bottom:2px;height:240px;border:solid 1px red;background-color:yellow;overflow:auto;"><span style="width:100%;"><!--dummy for IE5 Qurick Bug --></span></div>';$("body").append(strHtmlForDebugLogArea);$("#hxdiv_debug_log_message_display_area").append('<div style="text-align:right;"><a href="#" id="btnCloseDebugMsgArea" style="margin-right:3px;text-decoration:none;">Close</a></div>');$("#hxdiv_debug_log_message_display_area #btnCloseDebugMsgArea").click(function(){HXWebJS.Core.DebugMessageDisable(true)})}var objTempDiv=document.getElementById("hxdiv_debug_log_message_display_area");var dtNow=new Date();var strTempDateTime=JSON.stringify(dtNow);strTempDateTime=strTempDateTime.substr(1,strTempDateTime.length-7);var strHtmlForDebugMessage="<div>"+strTempDateTime+"   "+HXWebJS.Core.MarkXMLSpecialChars(strDebugMessage)+"</div>";$("#hxdiv_debug_log_message_display_area").append(strHtmlForDebugMessage)};HXWebJS.Core.ThrowErrorAndLogToConsole=function(strErrorMessage){if(strErrorMessage==null||strErrorMessage==""){return}if(typeof(console)!="undefined"&&console!=null&&console.error!=null){console.error(strErrorMessage)}else{throw strErrorMessage}};HXWebJS.EventManager={};HXWebJS.EventManager._Internal={};HXWebJS.EventManager.OnDocumentReady=null;HXWebJS.EventManager._Internal._funcsAfterOnLoad=[];HXWebJS.EventManager._Internal._loadedOK=false;HXWebJS.EventManager.RegisterFuncRunAfterOnLoad=function(f){if(HXWebJS.EventManager._Internal._loadedOK){f()}else{HXWebJS.EventManager._Internal._funcsAfterOnLoad.push(f)}};HXWebJS.EventManager._Internal._runAfterOnLoad=function(){if(HXWebJS.EventManager._Internal._loadedOK){return}if(HXWebJS.Navigation!=null&&HXWebJS.Navigation.IsWebPageOpenedInDialog!=null&&HXWebJS.Navigation.IsWebPageOpenedInDialog()){HXWebJS.Navigation.SetWebDialogTitle()}if(HXWebJS.Xml!=null&&HXWebJS.Xml._XmlDataIsland!=null){HXWebJS.Xml._XmlDataIsland._onload_binding_process()}var fn;for(var i=0;i<HXWebJS.EventManager._Internal._funcsAfterOnLoad.length;i++){fn=HXWebJS.EventManager._Internal._funcsAfterOnLoad[i];try{fn()}catch(e){HXWebJS.Core.DebugMessageOutputOnPage("HXWebJS.EventManager执行通过RegisterFuncRunAfterOnLoad()注册的函数时发生错误。\r\n 函数："+fn.toString()+", 错误消息："+e)}}if(HXWebJS.EventManager.OnDocumentReady!=null&&typeof(HXWebJS.EventManager.OnDocumentReady)=="function"){HXWebJS.EventManager.OnDocumentReady()}HXWebJS.EventManager._Internal._loadedOK=true;delete HXWebJS.EventManager._Internal._funcsAfterOnLoad;delete HXWebJS.EventManager._Internal._runAfterOnLoad};$(window).load(HXWebJS.EventManager._Internal._runAfterOnLoad);HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick=[];HXWebJS.EventManager.RegisterFuncRunAfterOnDocumentClick=function(f){HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick.push(f)};$(document).ready(function(){$("body").click(function(event){var fn;for(var i=0;i<HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick.length;i++){fn=HXWebJS.EventManager._Internal._funcsAfterOnDocumentClick[i];try{fn(event)}catch(e){HXWebJS.Core.DebugMessageOutputOnPage("HXWebJS.EventManager执行通过_funcsAfterOnDocumentClick()注册的函数时发生错误。\r\n 函数："+fn.toString()+", 错误消息："+e)}}var objParentWin=HXWebJS.DOM.GetParentWindowInSameDomain(true);if(objParentWin!=null){try{$(objParentWin.document.body).trigger("click")}catch(e){}}})});HXWebJS.EventManager.AddListener=function(element,eventType,handler,data){$(element).bind(eventType,data,handler)};HXWebJS.EventManager.RemoveListener=function(element,eventType,handler){$(element).unbind(eventType,handler)};HXWebJS.EventManager.FireEvent=function(element,eventType,data){$(element).trigger(eventType,data)};HXWebJS.DOM={};HXWebJS.DOM._Internal={};HXWebJS.DOM.GetFrameWindow=function(frameIdOrElement){if(frameIdOrElement==null||frameIdOrElement==""){return null}if(typeof(frameIdOrElement)=="string"){frameIdOrElement=window.frames[frameIdOrElement];if(frameIdOrElement==null){return null}}if(frameIdOrElement.window){return frameIdOrElement.window}return frameIdOrElement.contentWindow};HXWebJS.DOM.GetChildWindowInSameDomain=function(strFrameId,blnOnlyHXWebJSUsedWindow){var objWin=HXWebJS.DOM.GetFrameWindow(strFrameId);if(objWin==null){return null}if(HXWebJS.DOM._Internal._IsSameDomainWindow(objWin,blnOnlyHXWebJSUsedWindow)==false){return null}return objWin};HXWebJS.DOM.SetFrameSource=function(frameIdOrElement,strUrl){var objFrameWindow=HXWebJS.DOM.GetFrameWindow(frameIdOrElement);if(objFrameWindow==null){return}var objDocument=objFrameWindow.document;if(objDocument==null){return null}objDocument.location.href=strUrl};HXWebJS.DOM.GetParentWindowInSameDomain=function(blnOnlyHXWebJSUsedWindow,objCurrentWindow){if(objCurrentWindow==null){objCurrentWindow=window}var objParentWindowDocumentBody=null;if(objCurrentWindow.parent!=null&&objCurrentWindow.parent!=objCurrentWindow.self){try{objParentWindowDocumentBody=objCurrentWindow.parent.document.body}catch(ex){}}if(objParentWindowDocumentBody==null){return null}var objWin=objCurrentWindow.parent;if(HXWebJS.DOM._Internal._IsSameDomainWindow(objWin,blnOnlyHXWebJSUsedWindow)==false){return null}return objWin};HXWebJS.DOM.GetTopWindowInSameDomain=function(blnOnlyHXWebJSUsedWindow){if(window.parent==window.self){return null}var objUpLevelWin=HXWebJS.DOM.GetParentWindowInSameDomain(blnOnlyHXWebJSUsedWindow);if(objUpLevelWin==null){return null}var objTempWin=HXWebJS.DOM.GetParentWindowInSameDomain(blnOnlyHXWebJSUsedWindow);while(objTempWin!=null){objUpLevelWin=objTempWin;objTempWin=HXWebJS.DOM.GetParentWindowInSameDomain(blnOnlyHXWebJSUsedWindow,objUpLevelWin)}return objUpLevelWin};HXWebJS.DOM._Internal._IsSameDomainWindow=function(objTargetWindow,blnOnlyHXWebJSUsedWindow){if(window.location.host!=objTargetWindow.location.host){return false}if(blnOnlyHXWebJSUsedWindow==null){blnOnlyHXWebJSUsedWindow=false}if(blnOnlyHXWebJSUsedWindow){if(objTargetWindow.HXWebJS==null){return false}}return true};HXWebJS.DOM.GetWindowWidth=function(objWin){if(objWin==null){objWin=window}var intWidth=jQuery(objWin).width();if(intWidth>0){return intWidth}intWidth=objWin.document.documentElement.clientWidth;if(intWidth>0){return intWidth}intWidth=objWin.document.body.clientWidth;if(intWidth>0){return intWidth}intWidth=objWin.document.documentElement.offsetWidth;if(intWidth>0){return intWidth}return 0};HXWebJS.DOM.GetWindowHeight=function(objWin){if(objWin==null){objWin=window}var intHeight=jQuery(objWin).height();if(intHeight>0){return intHeight}intHeight=objWin.document.documentElement.clientHeight;if(intHeight>0){return intHeight}intHeight=objWin.document.body.clientHeight;if(intHeight>0){return intHeight}intHeight=objWin.document.documentElement.offsetHeight;if(intHeight>0){return intHeight}return 0};HXWebJS.DOM.GetWindowX=function(objWin){if(objWin==null){objWin=window}if(objWin.screenLeft!=null){return objWin.screenLeft}if(objWin.screenX!=null){return objWin.screenX}return 0};HXWebJS.DOM.GetWindowY=function(objWin){if(objWin==null){objWin=window}if(objWin.screenTop!=null){return objWin.screenTop}if(objWin.screenY!=null){return objWin.screenY}return 0};HXWebJS.DOM.GetDocumentWidth=function(objWin){if(objWin==null){objWin=window}if(objWin.document.body.scrollWidth!=null){return objWin.document.body.scrollWidth}if(document.documentElement!=null&&document.documentElement.scrollWidth!=null){return objWin.document.documentElement.scrollWidth}return null};HXWebJS.DOM.GetDocumentHeight=function(objWin){if(objWin==null){objWin=window}if(document.body.scrollHeight!=null){return objWin.document.body.scrollHeight}if(document.documentElement!=null&&document.documentElement.scrollHeight!=null){return objWin.document.documentElement.scrollHeight}return null};HXWebJS.DOM.GetScrollLeft=function(objWin){if(objWin==null){objWin=window}return jQuery("body",objWin.document).scrollLeft()};HXWebJS.DOM.GetScrollTop=function(objWin){if(objWin==null){objWin=window}return jQuery("body",objWin.document).scrollTop()};HXWebJS.DOM.CreateElement=function(strElementHtmlContent){var objContainerDiv=document.createElement("div");objContainerDiv.innerHTML=strElementHtmlContent;return objContainerDiv.firstChild};HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV=function(blnShowMouseInputDisableCoverDIV,blnForFullWindow,objTopWindow,options){var str_div_name=(blnForFullWindow?"hxwebjs_progessbar_cover_div_to_disable_mouse_input":"hxwebjs_progessbar_cover_div_to_disable_mouse_input_under_dialog");if(objTopWindow==null){objTopWindow=HXWebJS.DOM.GetTopWindowInSameDomain(true)}if(objTopWindow==null){objTopWindow=window}var intOpacity=75;if(options!=null&&options.cover_div_opacity!=null){intOpacity=options.opacity}var blnBrightOrDark=(blnForFullWindow?true:false);var strDivBackgroundColor=(blnBrightOrDark?"#ffffff":"black");if(options!=null&&options.cover_div_background_color!=null){strDivBackgroundColor=options.cover_div_background_color}var objDivForDisableMouseInput=objTopWindow.document.getElementById(str_div_name);if(blnShowMouseInputDisableCoverDIV==false){if(objDivForDisableMouseInput!=null){objDivForDisableMouseInput.style.display="none"}return}var topWindowWidth=HXWebJS.DOM.GetWindowWidth(objTopWindow);var topWindowHeight=HXWebJS.DOM.GetWindowHeight(objTopWindow);var topDocumentWidth=HXWebJS.DOM.GetDocumentWidth(objTopWindow);var topDocumentHeight=HXWebJS.DOM.GetDocumentHeight(objTopWindow);var intCoverDivWidth=(topWindowWidth>topDocumentWidth?topWindowWidth:topDocumentWidth);var intCoverDivHeight=(topWindowHeight>topDocumentHeight?topWindowHeight:topDocumentHeight);if(objDivForDisableMouseInput==null){var sb_html=new HXWebStringBuilder();sb_html.append("<div");sb_html.append(' id="'+str_div_name+'"');sb_html.append(' style="position:absolute;top:0px;left:0px;');sb_html.append(" opacity:"+(intOpacity/100)+";filter:alpha(opacity="+intOpacity+");");sb_html.append(" z-index:"+(100000+(blnForFullWindow?1000:-1000))+";");sb_html.append(" background-color:"+strDivBackgroundColor+";");sb_html.append(" width:"+intCoverDivWidth+"px;");sb_html.append(" height:"+intCoverDivHeight+"px;");sb_html.append(' " />');var _div=jQuery(sb_html.toString())[0];objTopWindow.document.body.appendChild(_div);jQuery(_div).click(function(e){e.stopPropagation()})}else{objDivForDisableMouseInput.style.backgroundColor=strDivBackgroundColor;objDivForDisableMouseInput.style.width=intCoverDivWidth+"px";objDivForDisableMouseInput.style.height=intCoverDivHeight+"px";objDivForDisableMouseInput.style.display=""}};HXWebJS.DOM._Internal._DisableEnableMouseInput=function(blnDisableMouseInput,blnForFullWindow,objTopWindow,options){if(blnDisableMouseInput==null){blnDisableMouseInput=true}if(blnForFullWindow==null){blnForFullWindow=true}if(objTopWindow==null){objTopWindow=HXWebJS.DOM.GetTopWindowInSameDomain(true)}if(objTopWindow==null){objTopWindow=window}HXWebJS.DOM._Internal._ShowHideMouseInputDisableCoverDIV(blnDisableMouseInput,blnForFullWindow,objTopWindow,options)};HXWebJS.DOM._Internal._ShowHideProgressBar=function(blnShowProgressBar,objTopWindow,options){if(blnShowProgressBar==null){blnShowProgressBar=true}if(objTopWindow==null){objTopWindow=HXWebJS.DOM.GetTopWindowInSameDomain(true)}if(objTopWindow==null){objTopWindow=window}var strImgIDForProgressBar="hxwebjs_progessbar_img_for_animation";var objImg=objTopWindow.document.getElementById(strImgIDForProgressBar);if(!blnShowProgressBar){if(objImg!=null){objImg.style.visibility="hidden"}return}var strProgressBarImageSrc="hximages_v6/hxpub_waiting_hint_slow.gif";if(options!=null&&options.progressbar_img_src!=null){strProgressBarImageSrc=options.progressbar_img_src}var topWindowWidth=HXWebJS.DOM.GetWindowWidth(objTopWindow);var topWindowHeight=HXWebJS.DOM.GetWindowHeight(objTopWindow);if(objImg==null){var sb_html=new HXWebStringBuilder();sb_html.append("<img");sb_html.append(' id="'+strImgIDForProgressBar+'"');sb_html.append(' style="position:absolute;z-index:100001;"');sb_html.append(' src="'+gstrWebRootPath+strProgressBarImageSrc+'" />');var _img=jQuery(sb_html.toString())[0];_img.style.left=(topWindowWidth-160)/2+"px";_img.style.top=(topWindowHeight-16)/2+"px";objTopWindow.document.body.appendChild(_img)}else{if(options!=null&&options.progressbar_img_src!=null){objImg.src=gstrWebRootPath+options.progressbar_img_src}objImg.style.left=(topWindowWidth-160)/2+"px";objImg.style.top=(topWindowHeight-16)/2+"px";objImg.style.visibility="visible"}};HXWebJS.DOM.GetElementTopPosition=function(el){return $(el).offset().top};HXWebJS.DOM.GetElementLeftPosition=function(el){return $(el).offset().left};HXWebJS.DOM.GetElementOuterHTML=function(el){if(el==null){return""}return $(el).prop("outerHTML")};HXWebJS.DOM.GetElementInnerText=function(el){if(el==null){return""}return $(el).text()};HXWebJS.DOM.SetElementInnerText=function(el,sText){if(el==null){return}$(el).text(sText)};HXWebJS.DOM.GetElementAttributeValue=function(node,strAttributeName){if(node==null||strAttributeName==null){return null}return $(node).attr(strAttributeName)};HXWebJS.DOM.SetElementAttributeValue=function(node,strAttributeName,strAttributeValue){if(node==null||strAttributeName==null){return}$(node).attr(strAttributeName,strAttributeValue)};HXWebJS.DOM.ElementAttributeIsDefined=function(node,strAttributeName){var attrValue=HXWebJS.DOM.GetElementAttributeValue(node,strAttributeName);return(attrValue==null||attrValue==undefined?false:true)};HXWebJS.DOM.IsElementInContainer=function(objContainerElement,objElement){if(objContainerElement==null||objElement==null){return false}return($(objElement).parents(objContainerElement).length>0)};HXWebJS.DOM.IsPointInElementArea=function(objElement,iCoordX,iCoordY){var intTop=HXWebJS.DOM.GetElementTopPosition(objElement);var intLeft=HXWebJS.DOM.GetElementLeftPosition(objElement);var intWidth=objElement.offsetWidth;var intHeight=objElement.offsetHeight;if(iCoordX>=intLeft&&iCoordX<=(intLeft+intWidth)&&iCoordY>=intTop&&iCoordY<=(intTop+intHeight)){return true}return false};HXWebJS.DOM.GetElementById=function(strElementId){return document.getElementById(strElementId)};HXWebJS.DOM.FindElementsByTagName=function(strTagName,rootNode){if(!rootNode){rootNode=document}return rootNode.getElementsByTagName(strTagName)};HXWebJS.DOM.FindElementsById=function(strIDValue,rootNode,strTagName){return HXWebJS.DOM.FindElementsByAttribute("id",strIDValue,strTagName,rootNode)};HXWebJS.DOM.FindFirstElementById=function(strIDValue,rootNode,strTagName){var objTempCollection=HXWebJS.DOM.FindElementsByAttribute("id",strIDValue,strTagName,rootNode);if(objTempCollection==null||objTempCollection.length==0){return null}return objTempCollection[0]};HXWebJS.DOM.FindElementsByAttribute=function(strAttributeName,strAttributeValue,strTagName,rootNode){return $(rootNode).find((strTagName!=null?strTagName:"*")+"["+strAttributeName+(strAttributeValue==null?"":"='"+strAttributeValue+"'")+"]")};HXWebJS.DOM.GetElementBindingLineNo=function(element){if(element==null){return null}if(element.tagName.toUpperCase()=="TBODY"){var strTemp=element.getAttribute("hx_binding_line_no");if(strTemp!=null&&strTemp!=""){return parseInt(strTemp)}}var objTBody=HXWebJS.Xml._XmlDataIsland._GetElementBindingLineTBody(element);if(objTBody==null){return null}var strTemp=objTBody.getAttribute("hx_binding_line_no");if(strTemp!=null&&strTemp!=""){return parseInt(strTemp)}return null};HXWebJS.DOM.GetInputFieldFullName=function(objInputElement){var strTemp=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_is_field_input_textbox");if(strTemp==null||strTemp==""){return null}var strIsFieldContainer=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_is_field_container");if(strIsFieldContainer!="1"){var objTempElement=objInputElement.parentNode;while(objTempElement!=null){strIsFieldContainer=HXWebJS.DOM.GetElementAttributeValue(objTempElement,"hx_is_field_container");if(strIsFieldContainer!="1"){break}objTempElement=objTempElement.parentNode}}if(strIsFieldContainer!="1"){return null}var strFieldCode=HXWebJS.DOM.GetElementAttributeValue(objTempElement,"hx_field_code");var strObjectOrViewCode=HXWebJS.DOM.GetElementAttributeValue(objTempElement,"hx_object_or_view_code");var strInputFieldFullName=strFieldCode;var objHXXmlDocForText,objHXXmlNodeForText;objHXXmlDocForText=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland("hxxml_ui_text__"+strObjectOrViewCode);if(objHXXmlDocForText!=null){var objHXXmlNodeForText=objHXXmlDocForText.SelectSingleNode("//RS_ROW");if(objHXXmlNodeForText!=null){var strObjectName=objHXXmlNodeForText.GetAttributeValue("TITLE__HX_OBJECT_NAME");var strFieldName=objHXXmlNodeForText.GetAttributeValue("LBL__"+strFieldCode.toUpperCase());if(strFieldName==null||strFieldName==""){strFieldName=strFieldCode}if(strObjectName!=null&&strObjectName!=""&&strObjectName!=strObjectOrViewCode){strInputFieldFullName=strObjectName+"."+strInputFieldName}else{strInputFieldFullName=strInputFieldName}}}return strInputFieldFullName};HXWebJS.DOM.CSSAddStyle=function(strCSSContent){var styleElement=document.createElement("style");styleElement.type="text/css";if(HXWebJS.Core.Browser.IsIE){styleElement.styleSheet.cssText=strCSSContent}else{var frag=document.createDocumentFragment();frag.appendChild(document.createTextNode(strCSSContent));styleElement.appendChild(frag)}document.getElementsByTagName("head")[0].appendChild(styleElement)};HXWebJS.DOM.CSSClass={};HXWebJS.DOM.CSSClass.HasClass=function(objElement,strClassNames){$(objElement).hasClass(strClassNames)};HXWebJS.DOM.CSSClass.AddClass=function(objElement,strClassNames){$(objElement).addClass(strClassNames)};HXWebJS.DOM.CSSClass.RemoveClass=function(objElement,strClassNames){$(objElement).removeClass(strClassNames)};HXWebJS.DOM.CSSClass.ToggleClass=function(objElement,strClassName){$(objElement).toggleClass(strClassName)};HXWebJS.DOM.Cookies={};HXWebJS.DOM.Cookies.SetCookie=function(name,value){var argv=arguments,argc=arguments.length,expires=(argc>2)?argv[2]:null,path=(argc>3)?argv[3]:"/",domain=(argc>4)?argv[4]:null,secure=(argc>5)?argv[5]:false;var sb_str=new HXWebStringBuilder();sb_str.append(name+"="+escape(value));if(expires!=null){sb_str.append("; expires="+expires.toGMTString())}if(path!=null){sb_str.append("; path="+path)}if(domain!=null){sb_str.append("; domain="+domain)}if(secure==true){sb_str.append("; secure")}document.cookie=sb_str.toString()};HXWebJS.DOM.Cookies.GetCookie=function(name){var arg=name+"=",alen=arg.length,clen=document.cookie.length,i=0,j=0;while(i<clen){j=i+alen;if(document.cookie.substring(i,j)==arg){return HXWebJS.DOM.Cookies._getCookieVal(j)}i=document.cookie.indexOf(" ",i)+1;if(i===0){break}}return null};HXWebJS.DOM.Cookies.RemoveCookie=function(name,path){if(HXWebJS.DOM.Cookies.GetCookie(name)){path=path||"/";document.cookie=name+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path="+path}};HXWebJS.DOM.Cookies._getCookieVal=function(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length}return unescape(document.cookie.substring(offset,endstr))};var HXWebJS;if(!HXWebJS){HXWebJS={}}HXWebJS.Xml={};HXWebJS.Xml.MarkXMLSpecialChars=function(strText){return HXWebJS.Core.MarkXMLSpecialChars(strText)};HXWebJS.Xml.BuildAllXmlDatas=function(strDataBlockCode1,strDataBlockContent1,strDataBlockCode2,strDataBlockContent2){var i,numArgs=arguments.length;if(numArgs<4){HXWebJS.Core.DebugMessageOutputOnPage("HXWebJS.Xml.BuildAllXmlDatas()函数的参数数量太少（至少需要4个或者以上）。");return}var sb_all=new HXWebStringBuilder();sb_all.append("<HX_ALL_DATAS>");for(i=0;i<numArgs;i+=2){sb_all.append('<HX_DATA_BLOCK CODE="');sb_all.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i].toLowerCase()));sb_all.append('">');sb_all.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i+1]));sb_all.append("</HX_DATA_BLOCK>")}sb_all.append("</HX_ALL_DATAS>");return sb_all.toString()};HXWebJS.Xml._Internal={};HXWebJS.Xml._Internal._build_xmlstring_via_element_content=function(docelt){var strTemp;var sb=new HXWebJS.Core.StringBuilder();var attr;sb.append("<");sb.append(docelt.nodeName.toUpperCase());for(var i=0;i<docelt.attributes.length;i++){attr=docelt.attributes[i];sb.append(" ");sb.append(attr.nodeName.toUpperCase());sb.append('="');strTemp=HXWebJS.Xml.MarkXMLSpecialChars(attr.nodeValue);if(strTemp!=""){strTemp=strTemp.replace(/\r/g,"&#10;").replace(/\n/g,"&#13;")}sb.append(strTemp);sb.append('"')}sb.append(">");var childNode;for(var i=0;i<docelt.childNodes.length;i++){childNode=docelt.childNodes[i];if(childNode.nodeType==1){sb.append(HXWebJS.Xml._Internal._build_xmlstring_via_element_content(childNode))}}sb.append("</");sb.append(docelt.nodeName.toUpperCase());sb.append(">");return sb.toString()};HXWebJS.Xml._Internal._get_xml_object_type=function(){if(typeof(window.DOMParser)!="undefined"&&typeof(document.createExpression)!="undefined"){return"w3c_xml_object"}else{var objTemp=null;try{objTemp=new ActiveXObject("Microsoft.XMLDOM")}catch(ex){}if(objTemp!=null){return"ie_xml_object"}else{return"unknown"}}};HXWebJS.Xml._Internal._xml_object_type=HXWebJS.Xml._Internal._get_xml_object_type();HXWebJS.Xml.GetHXXmlDocumentViaXmlString=function(strXml){if(strXml==null||strXml==""){return null}var objHXXmlDoc=new HXWebJS.Xml.HXXmlDocument();objHXXmlDoc._xml_data_island_id="";if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){objHXXmlDoc._xmldoc=(new DOMParser()).parseFromString(strXml,"text/xml")}else{if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){objHXXmlDoc._xmldoc=new ActiveXObject("Microsoft.XMLDOM");objHXXmlDoc._xmldoc.async=false;objHXXmlDoc._xmldoc.loadXML(strXml);objHXXmlDoc._xml_object_type="ie_xml"}else{throw"HXWebJS.Xml.GetHXXmlDocumentViaXmlString()函数运行错误：不能确定当前浏览器的XmlDOM类型！"}}return objHXXmlDoc};HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland=function(id){if(id==null){return null}var xmldoc=document.getElementById(id);if(xmldoc==null){return null}var objHXXmlDoc;if(!HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland){HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland={}}var objHXXmlDoc=HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[id];if(objHXXmlDoc){return objHXXmlDoc}var blnUseV6PageServerEnginee=(typeof(mstrHXPageServerEnginee)=="string"&&mstrHXPageServerEnginee=="V6");if(blnUseV6PageServerEnginee){objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(HXWebJS.DOM.GetElementAttributeValue(xmldoc,"content"));objHXXmlDoc._xml_data_island_id=id;HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[id]=objHXXmlDoc;return objHXXmlDoc}var strXmlData;if(xmldoc.xml!=null){strXmlData=xmldoc.xml}else{if(xmldoc.firstChild!=null){var docelt=xmldoc.firstChild;while(docelt!=null){if(docelt.nodeType==1){break}docelt=docelt.nextSibling}if(docelt==null){objHXXmlDoc=new HXWebJS.Xml.HXXmlDocument(null,id);return objHXXmlDoc}strXmlData=HXWebJS.Xml._Internal._build_xmlstring_via_element_content(docelt)}else{return null}}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlData);objHXXmlDoc._xml_data_island_id=id;HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[id]=objHXXmlDoc;return objHXXmlDoc};HXWebJS.Xml.GetHXXmlDocumentViaURL=function(strURL){if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("GET",strURL,false);xmlhttp.send();var _xmlDoc=xmlhttp.responseXML;var objHXXmlDoc=new HXWebJS.Xml.HXXmlDocument(_xmlDoc,"");return objHXXmlDoc};HXWebJS.Xml.HXXmlDocument_Demo={GetXml:function(){},GetRootXmlNode:function(){},SelectSingleNode:function(xpathText){},SelectNodes:function(xpathText){},ReloadXML:function(strXmlContent){},InsertChild:function(objHXXmlNodeToInsert,insertBefore){},AppendChild:function(objHXXmlNodeToAppend){},RemoveChild:function(objHXXmlNodeToRemove){}};HXWebJS.Xml.HXXmlNode_Demo={SelectSingleNode:function(xpathText){},SelectNodes:function(xpathText){},GetFirstChild:function(){},GetText:function(){},SetText:function(str){},GetXml:function(){},CloneNode:function(){},GetAttributeValue:function(strAttributeName){},SetAttributeValue:function(strAttributeName,strAttributeValue){},InsertChild:function(objHXXmlNodeToInsert,insertBefore){},AppendChild:function(objHXXmlNodeToAppend){},RemoveChild:function(objHXXmlNodeToRemove){},ReplaceChild:function(objOldHXXmlNode,objNewHXXmlNode){}};HXWebJS.Xml.HXXmlDocument=function(objXmlDoc,strXmlDataIslandId){if(strXmlDataIslandId==null){strXmlDataIslandId=""}this._xml_data_island_id=strXmlDataIslandId;this._xmldoc=objXmlDoc};HXWebJS.Xml.HXXmlDocument.prototype.GetXml=function(){var objXmlDoc=this._xmldoc;if(objXmlDoc==null){return""}if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){return objXmlDoc.xml}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){var strXml=(new XMLSerializer()).serializeToString(objXmlDoc);if(strXml.indexOf("<?xml")!=-1){strXml=strXml.substr(21)}return strXml}else{throw"HXWebJS.Xml.HXXmlDocument.GetXml()函数运行错误：无法正确获取XmlDoc对象"+objXmlDoc+"的内容"}}};HXWebJS.Xml.HXXmlDocument.prototype.GetRootXmlNode=function(){if(this._xmldoc==null){return null}var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){objHXXmlNode._xmlnode=this._xmldoc.documentElement}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){var docelt=this._xmldoc.firstChild;while(docelt!=null){if(docelt.nodeType==1){break}docelt=docelt.nextSibling}objHXXmlNode._xmlnode=docelt}}return objHXXmlNode};HXWebJS.Xml.HXXmlDocument.prototype.SelectSingleNode=function(xpathText){if(this._xmldoc==null){return null}var objHXXmlNode=this.GetRootXmlNode();if(objHXXmlNode==null){return null}return objHXXmlNode.SelectSingleNode(xpathText)};HXWebJS.Xml.HXXmlDocument.prototype.SelectNodes=function(xpathText){if(this._xmldoc==null){return null}var objHXXmlNode=this.GetRootXmlNode();if(objHXXmlNode==null){return null}return objHXXmlNode.SelectNodes(xpathText)};HXWebJS.Xml.HXXmlDocument.prototype.ReloadXML=function(strXmlContent){if(strXmlContent==null){strXmlContent=""}if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){if(this._xmldoc==null){this._xmldoc=new ActiveXObject("Microsoft.XMLDOM")}this._xmldoc.async=false;this._xmldoc.loadXML(strXmlContent)}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){if(strXmlContent==""){this._xmldoc=document.implementation.createDocument("","",null)}else{this._xmldoc=(new DOMParser()).parseFromString(strXmlContent,"text/xml")}}}if(this._xml_data_island_id!=null&&this._xml_data_island_id!=""){if(HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[this._xml_data_island_id]==null){HXWebJS.Xml._Internal._xmldoc_cache_for_xmldataisland[this._xml_data_island_id]=this}HXWebJS.Xml._XmlDataIsland._reload_xml_and_rebinding_process(this._xml_data_island_id)}};HXWebJS.Xml.HXXmlDocument.prototype.InsertChild=function(objHXXmlNodeToInsert,insertBefore){return this.GetRootXmlNode().InsertChild(objHXXmlNodeToInsert,insertBefore)};HXWebJS.Xml.HXXmlDocument.prototype.AppendChild=function(objHXXmlNodeToAppend){return this.GetRootXmlNode().InsertChild(objHXXmlNodeToAppend,null)};HXWebJS.Xml.HXXmlDocument.prototype.RemoveChild=function(objHXXmlNodeToRemove){return this.GetRootXmlNode().RemoveChild(objHXXmlNodeToRemove)};HXWebJS.Xml.HXXmlDocument.prototype.ClearAllContents=function(){var objHXXmlNodeList=this.SelectNodes("//RS_ROW");for(var i=objHXXmlNodeList.length-1;i>=0;i--){this.RemoveChild(objHXXmlNodeList[i])}this.ReloadXML("")};HXWebJS.Xml.HXXmlNode=function(){this._xml_data_island_id="";this._xmlnode=null};HXWebJS.Xml.HXXmlNode.prototype.SelectSingleNode=function(xpathText){if(this._xmlnode==null){return null}if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){var _xmldoc=(this._xmlnode.ownerDocument==null?this._xmlnode:this._xmlnode.ownerDocument);var xpathExpr=_xmldoc.createExpression(xpathText,null);var result=xpathExpr.evaluate(this._xmlnode,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(result.singleNodeValue==null){return null}var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;objHXXmlNode._xmlnode=result.singleNodeValue;return objHXXmlNode}else{if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){var doc=this._xmlnode.ownerDocument;if(doc==null){doc=this._xmlnode}if(this._xmlnode==doc){this._xmlnode=doc.documentElement}var _tempNode=this._xmlnode.selectSingleNode(xpathText);if(_tempNode==null){return null}var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;objHXXmlNode._xmlnode=_tempNode;return objHXXmlNode}else{throw"HXWebJS.Xml.HXXmlNode.SelectSingleNode()运行错误：当前浏览器不支持 XPath."+e}}};HXWebJS.Xml.HXXmlNode.prototype.SelectNodes=function(xpathText){if(this._xmlnode==null){return(new Array(0))}if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){var _xmldoc=(this._xmlnode.ownerDocument==null?this._xmlnode:this._xmlnode.ownerDocument);var xpathExpr=_xmldoc.createExpression(xpathText,function(prefix){return null});var result=xpathExpr.evaluate(this._xmlnode,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var a=new Array(result.snapshotLength);for(var i=0;i<result.snapshotLength;i++){var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;objHXXmlNode._xmlnode=result.snapshotItem(i);a[i]=objHXXmlNode}return a}if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){var doc=this._xmlnode.ownerDocument;if(doc==null){doc=this._xmlnode}if(this._xmlnode==doc){this._xmlnode=doc.documentElement}var _tempNodeList=this._xmlnode.selectNodes(xpathText);var a=new Array(_tempNodeList.length);for(var i=0;i<_tempNodeList.length;i++){var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;objHXXmlNode._xmlnode=_tempNodeList.item(i);a[i]=objHXXmlNode}return a}throw"HXWebJS.Xml.HXXmlNode.SelectNodes()运行错误：当前浏览器不支持 XPath."+e};HXWebJS.Xml.HXXmlNode.prototype.GetFirstChild=function(){if(this._xmlnode==null){return null}var objTempXmlNode=this._xmlnode.firstChild;if(objTempXmlNode==null){return null}var objHXXmlNode=new HXWebJS.Xml.HXXmlNode();objHXXmlNode._xml_data_island_id=this._xml_data_island_id;objHXXmlNode._xmlnode=objTempXmlNode;return objHXXmlNode};HXWebJS.Xml.HXXmlNode.prototype.GetName=function(){if(this._xmlnode==null){return""}return this._xmlnode.nodeName};HXWebJS.Xml.HXXmlNode.prototype.GetText=function(){if(this._xmlnode==null){return""}if(typeof this._xmlnode.text!="undefined"){return this._xmlnode.text}if(typeof this._xmlnode.textContent!="undefined"){return this._xmlnode.textContent}throw"HXWebJS.Xml.HXXmlNode.GetText()运行错误：当前浏览器不支持Xml."};HXWebJS.Xml.HXXmlNode.prototype._SetText=function(str){if(this._xmlnode==null){return}if(typeof this._xmlnode.text!="undefined"){this._xmlnode.text=str;return}if(typeof this._xmlnode.textContent!="undefined"){this._xmlnode.textContent=str;return}if(typeof this._xmlnode.value!="undefined"){this._xmlnode.value=str;return}throw"HXWebJS.Xml.HXXmlNode.SetText()运行错误：当前浏览器不支持Xml."};HXWebJS.Xml.HXXmlNode.prototype.SetText=function(str){this._SetText(str);if(this._xml_data_island_id!=""){if(this._xmlnode.nodeType!=2){return}var strAttributeName=this._xmlnode.nodeName}};HXWebJS.Xml.HXXmlNode.prototype.SetCDATAText=function(strText){if(this._xmlnode==null){return}if(this._xmlnode.nodeType!=1){return}this._SetText("");var xmldoc=this._xmlnode.ownerDocument;if(xmldoc==null){throw"没有找到当前节点的归属Xml文档对象（可能是孤立节点）！不能创建CDATA段！"}var newnode=xmldoc.createCDATASection(strText);this._xmlnode.appendChild(newnode)};HXWebJS.Xml.HXXmlNode.prototype.GetXml=function(){var objXmlNode=this._xmlnode;if(objXmlNode==null){return""}if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){return objXmlNode.xml}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){return(new XMLSerializer()).serializeToString(objXmlNode)}else{throw"HXWebJS.Xml.HXXmlNode.GetXml()函数运行错误：无法正确获取XmlNode对象"+objXmlNode+"的内容"}}};HXWebJS.Xml.HXXmlNode.prototype.GetAttributeValue=function(strAttributeName){var objXmlNode=this._xmlnode;if(objXmlNode==null){return null}if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){if(objXmlNode.selectSingleNode("@"+strAttributeName)==null){return null}return objXmlNode.selectSingleNode("@"+strAttributeName).text}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){return objXmlNode.getAttribute(strAttributeName)}}return null};HXWebJS.Xml.HXXmlNode.prototype._SetAttributeValueOnly=function(strAttributeName,strAttributeValue,blnCreateIfNotExist){if(this._xmlnode==null){return}if(blnCreateIfNotExist==null){blnCreateIfNotExist=false}if(strAttributeValue==null){strAttributeValue=""}var objXmlNode=this._xmlnode;if(HXWebJS.Xml._Internal._xml_object_type=="ie_xml_object"){var objTemp=objXmlNode.selectSingleNode("@"+strAttributeName);if(objTemp!=null){objTemp.text=strAttributeValue}else{if(blnCreateIfNotExist){var objNewAttribute=objXmlNode.ownerDocument.createAttribute(strAttributeName);objNewAttribute.value=strAttributeValue;objXmlNode.attributes.setNamedItem(objNewAttribute)}}}else{if(HXWebJS.Xml._Internal._xml_object_type=="w3c_xml_object"){objXmlNode.setAttribute(strAttributeName,strAttributeValue)}else{throw"HXWebJS.Xml.HXXmlNode._SetAttributeValueOnly()运行错误：当前浏览器不支持 Xml属性处理。"}}};HXWebJS.Xml.HXXmlNode.prototype.SetAttributeValue=function(strAttributeName,strAttributeValue,blnCreateIfNotExist){this._SetAttributeValueOnly(strAttributeName,strAttributeValue,blnCreateIfNotExist);if(this._xml_data_island_id!=""){}};HXWebJS.Xml.HXXmlNode.prototype.RemoveAttribute=function(strAttributeName){if(this._xmlnode==null){return}var objXmlNode=this._xmlnode;if(typeof objXmlNode.removeAttribute=="function"){objXmlNode.removeAttribute(strAttributeName)}else{if(objXmlNode.attributes){var objTemp=objXmlNode.selectSingleNode("@"+strAttributeName);if(objTemp!=null){objXmlNode.attributes.removeNamedItem(strAttributeName)}}else{throw"HXWebJS.Xml.HXXmlNode.RemoveAttribute()运行错误：当前浏览器不支持 Xml属性移除操作。"}}};HXWebJS.Xml.HXXmlNode.prototype.CloneNode=function(){var obj=new HXWebJS.Xml.HXXmlNode();obj._xml_data_island_id="";obj._xmlnode=this._xmlnode.cloneNode(true);return obj};HXWebJS.Xml.HXXmlNode.prototype.InsertChild=function(objHXXmlNodeToInsert,insertBefore,strUpLevelWebJSRowUUID){if(this._xmlnode==null){return null}if(objHXXmlNodeToInsert==null){return null}if(objHXXmlNodeToInsert._xmlnode==null){return null}var _ib=null;if(insertBefore!=null&&insertBefore._xmlnode!=null){_ib=insertBefore._xmlnode}objHXXmlNodeToInsert._xml_data_island_id=this._xml_data_island_id;this._xmlnode.insertBefore(objHXXmlNodeToInsert._xmlnode,_ib);if(this._xml_data_island_id!=""){HXWebJS.Xml._XmlDataIsland._insert_new_binding_line_content(objHXXmlNodeToInsert,insertBefore,strUpLevelWebJSRowUUID)}return objHXXmlNodeToInsert};HXWebJS.Xml.HXXmlNode.prototype.AppendChild=function(objHXXmlNodeToAppend){return this.InsertChild(objHXXmlNodeToAppend,null)};HXWebJS.Xml.HXXmlNode.prototype.RemoveChild=function(objHXXmlNodeToRemove){if(this._xmlnode==null){return null}if(objHXXmlNodeToRemove==null){return null}if(objHXXmlNodeToRemove._xmlnode==null){return null}if(this._xml_data_island_id!=""){HXWebJS.Xml._XmlDataIsland._remove_binding_line(objHXXmlNodeToRemove)}this._xmlnode.removeChild(objHXXmlNodeToRemove._xmlnode);return objHXXmlNodeToRemove};HXWebJS.Xml.HXXmlNode.prototype.ReplaceChild=function(objOldHXXmlNode,objNewHXXmlNode){if(this._xmlnode==null){return null}if(objOldHXXmlNode==null){return null}if(objOldHXXmlNode._xmlnode==null){return null}if(objNewHXXmlNode==null){return null}if(objNewHXXmlNode._xmlnode==null){return null}this._xmlnode.replaceChild(objNewHXXmlNode._xmlnode,objOldHXXmlNode._xmlnode);if(this._xml_data_island_id!=""){var strOldRowWebJSUUID=objOldHXXmlNode.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strOldRowWebJSUUID==null||strOldRowWebJSUUID==""){return}objNewHXXmlNode._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",strOldRowWebJSUUID,true);objNewHXXmlNode._xml_data_island_id=this._xml_data_island_id;HXWebJS.Xml._XmlDataIsland._refresh_binding_line_content(objNewHXXmlNode,strOldRowWebJSUUID)}return objNewHXXmlNode};HXWebJS.Xml.CreateNode=function(strXml){if(strXml==null||strXml==""){return null}var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXml);if(objHXXmlDoc==null){return null}var objHXXmlNode=objHXXmlDoc.GetRootXmlNode();if(objHXXmlNode==null){return null}return objHXXmlNode.CloneNode()};HXWebJS.Xml._XmlDataIsland={};HXWebJS.Xml._XmlDataIsland._table_tbody_row_template_cache={};HXWebJS.Xml._XmlDataIsland._gblnDataHasChanged=false;HXWebJS.Xml._XmlDataIsland._onload_binding_process=function(){HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(document.body);HXWebJS.EventManager.AddListener(document.body,"change",HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process);HXWebJS.EventManager.AddListener(document.body,"click",HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process)};HXWebJS.Xml._XmlDataIsland._reload_xml_and_rebinding_process=function(str_xml_data_island_id){if(str_xml_data_island_id==null||str_xml_data_island_id==""){return}HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(document.body,str_xml_data_island_id)};HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element=function(element,strSpecifiedXmlDataIslandName){if(!element){element=document.body}else{if(typeof element=="string"){element=document.getElementById(element)}}strSpecifiedXmlDataIslandName=(strSpecifiedXmlDataIslandName==null?"":strSpecifiedXmlDataIslandName.toLowerCase());var strDataSrcName=element.getAttribute("hx_data_src");strDataSrcName=(strDataSrcName!=null?strDataSrcName.toLowerCase():"");var strDataFldName=element.getAttribute("hx_data_fld");strDataFldName=(strDataFldName!=null?strDataFldName.toLowerCase():"");var strElementTagName=element.tagName.toLowerCase();var blnElementNeedBindingProcess=false;if(strDataSrcName!=""){if(strSpecifiedXmlDataIslandName!=""&&strSpecifiedXmlDataIslandName!=strDataSrcName){blnElementNeedBindingProcess=false}else{if(strDataFldName!=""||strElementTagName=="table"){blnElementNeedBindingProcess=true}}}if(blnElementNeedBindingProcess==true){if(strElementTagName=="table"){var strHXParentDataSrc=element.getAttribute("hx_parent_data_src");strHXParentDataSrc=(strHXParentDataSrc==null?"":strHXParentDataSrc.toLowerCase());var strHXDataJoin=element.getAttribute("hx_data_join");if(strHXDataJoin==null){strHXDataJoin=""}var objUpLvelBindingInfo=null;if(strHXParentDataSrc!=""&&strHXDataJoin!=""){objUpLvelBindingInfo=HXWebJS.Xml._XmlDataIsland._BuildTableFullDataSeekViaDataJoin(element.parentNode,strHXParentDataSrc,strHXDataJoin)}if(objUpLvelBindingInfo!=null){element.setAttribute("_hxwebjs_parent_row_uuid",objUpLvelBindingInfo.parent_hxwebjs_row_uuid)}HXWebJS.Xml._XmlDataIsland._binding_process_for_table_element(element,strDataSrcName,objUpLvelBindingInfo,strSpecifiedXmlDataIslandName)}else{var strHXDataSeek=element.getAttribute("hx_data_seek");var objValue=HXWebJS.Xml._XmlDataIsland._GetBindingXmlDataIslandValue(strDataSrcName,strDataFldName,strHXDataSeek);if(objValue!=null){HXWebJS.Xml._XmlDataIsland._set_bind_value(element,strElementTagName,objValue._hxwebjs_row_uuid,objValue.value)}}return}var i;if(blnElementNeedBindingProcess==false){var kids=[];for(i=0;i<element.childNodes.length;i++){var c=element.childNodes[i];if(c.nodeType==1){kids.push(element.childNodes[i])}}for(i=0;i<kids.length;i++){HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(kids[i],strSpecifiedXmlDataIslandName)}}};HXWebJS.Xml._XmlDataIsland._binding_process_for_table_element=function(objHtmlTable,strDataSrcName,objUpLevelBindingInfo,strSpecifiedXmlDataIslandName){var strTableElementId=objHtmlTable.id;if(strTableElementId==null){strTableElementId=""}var objTemplateElementForTBody=HXWebJS.Xml._XmlDataIsland._binding_table_template_cache_process(objHtmlTable);var tempChildNodesOfTable=objHtmlTable.childNodes;var tempChildNode,tempNodeName;for(var i=tempChildNodesOfTable.length-1;i>=0;i--){tempChildNode=tempChildNodesOfTable[i];tempNodeName=tempChildNode.nodeName.toLowerCase();if(tempNodeName=="thead"||tempNodeName=="tfoot"){HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(tempChildNode,strSpecifiedXmlDataIslandName)}}if(objTemplateElementForTBody==null){return}var objHXXmlDocForTable=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strDataSrcName);if(objHXXmlDocForTable==null){return}var objXmlNodesForHtmlRows;if(objUpLevelBindingInfo==null){objXmlNodesForHtmlRows=objXmlNodeForTable.SelectNodes("//RS_ROW")}else{objXmlNodesForHtmlRows=objXmlNodeForTable.SelectNodes("//RS_ROW["+objUpLevelBindingInfo.data_seek+"]")}if(objXmlNodesForHtmlRows==null||objXmlNodesForHtmlRows.length==0){return}for(i=0;i<objXmlNodesForHtmlRows.length;i++){var copy=objTemplateElementForTBody.cloneNode(true);copy.setAttribute("_hxwebjs_row_uuid",objXmlNodesForHtmlRows[i].GetAttributeValue("_HXWEBJS_ROW_UUID"));if(objUpLevelBindingInfo!=null){copy.setAttribute("hx_parent_webjs_row_uuid",objUpLevelBindingInfo._hxwebjs_row_uuid)}HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objXmlNodesForHtmlRows[i],copy,(objUpLevelBindingInfo!=null?objUpLevelBindingInfo._hxwebjs_row_uuid:""),strSpecifiedXmlDataIslandName);objHtmlTable.appendChild(copy)}HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func(element,objXmlNodesForHtmlRows)};HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process=function(strDataSrcName,objHXXmlNodeOfRow,element,strUpLevelRowWebJSUUID,strSpecifiedXmlDataIslandName){var strTempDataSrcName,strDataFldName;var strElementTagName;for(var c=element.firstChild;c!=null;c=c.nextSibling){if(c.nodeType!=1){continue}strTempDataSrcName=c.getAttribute("hx_data_src");strTempDataSrcName=(strTempDataSrcName==null?"":strTempDataSrcName.toLowerCase());strDataFldName=c.getAttribute("hx_data_fld");strDataFldName=(strDataFldName==null?"":strDataFldName.toLowerCase());strElementTagName=c.tagName.toLowerCase();if(strElementTagName=="table"){if(strTempDataSrcName==null||strTempDataSrcName==""||strTempDataSrcName==strDataSrcName){HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objHXXmlNodeOfRow,c,strParentRowWebJSUUID,strSpecifiedXmlDataIslandName)}else{var strHXParentDataSrc=c.getAttribute("hx_parent_data_src");strHXParentDataSrc=(strHXParentDataSrc==null?"":strHXParentDataSrc.toLowerCase());var strHXDataJoin=c.getAttribute("hx_data_join");if(strHXDataJoin==null){strHXDataJoin=""}if(strHXParentDataSrc==strDataSrcName&&strHXDataJoin!=""){var objUpLvelBindingInfo=null;if(strHXParentDataSrc!=""&&strHXDataJoin!=""){objUpLvelBindingInfo=HXWebJS.Xml._XmlDataIsland._BuildTableFullDataSeekViaDataJoin(c.parentNode,strHXParentDataSrc,strHXDataJoin)}if(objUpLvelBindingInfo!=null){c.setAttribute("_hxwebjs_parent_row_uuid",objUpLvelBindingInfo.parent_hxwebjs_row_uuid)}HXWebJS.Xml._XmlDataIsland._binding_process_for_table_element(c,strTempDataSrcName,objUpLvelBindingInfo,strSpecifiedXmlDataIslandName)}else{HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(c)}}}else{if(strDataFldName==null||strDataFldName==""){HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objHXXmlNodeOfRow,c,lineNo,strSpecifiedXmlDataIslandName)}else{if(strTempDataSrcName==null||strTempDataSrcName==""||strTempDataSrcName==strDataSrcName){var strBindingRowUUID=objHXXmlNodeOfRow.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strBindingRowUUID==null||strBindingRowUUID==""){strBindingRowUUID=HXWebJS.Core.CreateUUID();objHXXmlNodeOfRow._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",strBindingRowUUID,true)}var strXmlNodeValue=objHXXmlNodeOfRow.GetAttributeValue(strDataFldName.toUpperCase());if(strXmlNodeValue==null){continue}HXWebJS.Xml._XmlDataIsland._set_bind_value(c,strElementTagName,strBindingRowUUID,strXmlNodeValue)}else{HXWebJS.Xml._XmlDataIsland._binding_process_for_normal_element(c)}}}}};HXWebJS.Xml._XmlDataIsland._set_bind_value=function(element,strElementTagName,strHXWebJSRowUUID,strXmlNodeValue){if(strElementTagName=="input"){var strInputType=element.type;if(strInputType==null){strInputType="text"}strInputType=strInputType.toLowerCase();if(strInputType=="text"||strInputType=="hidden"||strInputType=="password"||strInputType=="button"){element.value=strXmlNodeValue}else{if(strInputType=="checkbox"){element.checked=(strXmlNodeValue==null||strXmlNodeValue==""||strXmlNodeValue=="0"?false:true)}if(strInputType=="radio"){if(element.value==strXmlNodeValue){element.checked=true}else{element.checked=false}}}element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}if(strElementTagName=="select"){element.value=strXmlNodeValue;element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}if(strElementTagName=="textarea"){element.value=strXmlNodeValue;element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}if(strElementTagName=="span"||strElementTagName=="div"||strElementTagName=="button"||strElementTagName=="label"||strElementTagName=="legend"||strElementTagName=="marquee"){HXWebJS.DOM.SetElementInnerText(element,strXmlNodeValue);element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}if(strElementTagName=="a"){element.href=strXmlNodeValue;element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}if(strElementTagName=="img"){element.src=strXmlNodeValue;element.setAttribute("_hxwebjs_row_uuid",strHXWebJSRowUUID);return}};HXWebJS.Xml._XmlDataIsland._update_binding_elements_value=function(objHXXmlNode,strAttributeName,strAttributeValue,objTriggeredBindingElement){if(objHXXmlNode==null){return}var strDataSrcName=objHXXmlNode._xml_data_island_id;var strBindingRowUUID=objHXXmlNode.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strBindingRowUUID==null||strBindingRowUUID==""){return}var tmpElementsCollection=$("*[hx_data_src='"+strDataSrcName+"'][hx_data_fld='"+strAttributeName+"'][_hxwebjs_row_uuid='"+strBindingRowUUID+"']");if(tmpElementsCollection==null){return}for(var i=0;i<tmpElementsCollection.length;i++){tmpElement=tmpElementsCollection[i];if(objTriggeredBindingElement!=null&&tmpElement===objTriggeredBindingElement){continue}HXWebJS.Xml._XmlDataIsland._set_bind_value(tmpElement,tmpElement.tagName.toLowerCase(),strBindingRowUUID,strAttributeValue)}};HXWebJS.Xml._XmlDataIsland._insert_new_binding_line_content=function(objHXXmlNodeToInsert,insertBefore,strUpLevelWebJSRowUUID){if(objHXXmlNodeToInsert==null){return}var strBindingRowUUID=objHXXmlNodeToInsert.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strBindingRowUUID==null||strBindingRowUUID==""){strBindingRowUUID=HXWebJS.Core.CreateUUID();objHXXmlNodeToInsert._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",strBindingRowUUID,true)}var strDataSrcName=objHXXmlNodeToInsert._xml_data_island_id;var matchedTBodyRowsCollection_insertBefore=null;if(insertBefore!=null){var strWebJSRowUUID_insertBeforeNode=insertBefore.GetAttributeValue("_HXWEBJS_ROW_UUID");var matchedTBodyRowsCollection_insertBefore=$("table[hx_data_src='"+strDataSrcName+"'] tbody[_hxwebjs_row_uuid='"+strWebJSRowUUID_insertBeforeNode+"']");if(matchedTBodyRowsCollection_insertBefore!=null&&matchedTBodyRowsCollection_insertBefore.length>0){var tmpTBody_insertBefore;var tmpTBody_New;for(var i=0;i<matchedTBodyRowsCollection_insertBefore.length;i++){tmpTBody_insertBefore=matchedTBodyRowsCollection_insertBefore[i];tmpTBody_New=HXWebJS.Xml._XmlDataIsland.__insert_new_tbody(tmpTBody_insertBefore.parentNode,tmpTBody_insertBefore);if(tmpTBody_New==null){continue}tmpTBody_New.setAttribute("_hxwebjs_row_uuid",strBindingRowUUID);HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objHXXmlNodeToInsert,tmpTBody_New,strUpLevelWebJSRowUUID,strDataSrcName);HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func_one_line(tmpTBody_New,objHXXmlNodeToInsert)}}}else{var matchedTableCollection_AppendTo=$("table[hx_data_src='"+strDataSrcName+"']"+(strUpLevelWebJSRowUUID==""?"":"[_hxwebjs_parent_row_uuid='"+strUpLevelWebJSRowUUID+"']"));if(matchedTableCollection_AppendTo!=null&&matchedTableCollection_AppendTo.length>0){var tmpBindingTable;for(var i=0;i<matchedTableCollection_AppendTo.length;i++){tmpBindingTable=matchedTableCollection_AppendTo[i];tmpTBody_New=HXWebJS.Xml._XmlDataIsland.__insert_new_tbody(tmpBindingTable,null);if(tmpTBody_New==null){continue}tmpTBody_New.setAttribute("_hxwebjs_row_uuid",strBindingRowUUID);HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objHXXmlNodeToInsert,tmpTBody_New,strUpLevelWebJSRowUUID,strDataSrcName);HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func_one_line(tmpTBody_New,objHXXmlNodeToInsert)}}}};HXWebJS.Xml._XmlDataIsland._remove_binding_line=function(objHXXmlNodeToRemove){if(objHXXmlNodeToRemove==null){return}var strBindingRowUUID=objHXXmlNodeToRemove.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strBindingRowUUID==null||strBindingRowUUID==""){return}var strDataSrcName=objHXXmlNodeToRemove._xml_data_island_id;var matchedTBodyRowsCollection=$("table[hx_data_src='"+strDataSrcName+"'] tbody[_hxwebjs_row_uuid='"+strBindingRowUUID+"']");if(matchedTBodyRowsCollection==null||matchedTBodyRowsCollection.length==0){return}var tmpTable,tmpTBody;for(var i=0;i<matchedTBodyRowsCollection.length;i++){tmpTBody=matchedTBodyRowsCollection[i];tmpTable=tmpTBody.parentNode;tmpTable.removeChild(tmpTBody)}};HXWebJS.Xml._XmlDataIsland._refresh_binding_line_content=function(objHXXmlNodeAfterReplaced,strOldRowWebJSUUID){if(objHXXmlNodeAfterReplaced==null){return}var strDataSrcName=objHXXmlNodeAfterReplaced._xml_data_island_id;var matchedTBodyRowsCollection=$("table[hx_data_src='"+strDataSrcName+"'] tbody[_hxwebjs_row_uuid='"+strOldRowWebJSUUID+"']");if(matchedTBodyRowsCollection==null||matchedTBodyRowsCollection.length==0){return}var tmpTable,tmpTBody;var strUpLevelWebJSRowUUID;for(var i=0;i<matchedTBodyRowsCollection.length;i++){tmpTBody=matchedTBodyRowsCollection[i];tmpTable=tmpTBody.parentNode;strUpLevelWebJSRowUUID=tmpTable.getAttribute("_hxwebjs_parent_row_uuid");HXWebJS.Xml._XmlDataIsland._expand_single_table_row_process(strDataSrcName,objHXXmlNodeAfterReplaced,tmpTBody,strUpLevelWebJSRowUUID,strDataSrcName);HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func_one_line(tmpTBody,objHXXmlNodeAfterReplaced)}};HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_process=function(objEventData){if(objEventData.type=="click"){var strTempTagName=objEventData.target.tagName.toUpperCase();if(strTempTagName!="INPUT"){return}var strTempInputType=objEventData.target.type.toLowerCase();if(strTempInputType!="checkbox"&&strTempInputType!="radio"){return}}HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_xmldata_update(objEventData.target,objEventData.type,true)};HXWebJS.Xml._XmlDataIsland._binding_element_onchanged_xmldata_update=function(objElement,strEventType,blnFireCallback){var objBindingElementData=HXWebJS.Xml._XmlDataIsland._get_input_element_binding_data(objElement,strEventType);if(objBindingElementData==null){return}var strBindingDataSrcName=objBindingElementData.hx_data_src;var strBindingDataFldName=objBindingElementData.hx_data_fld;var strBindingRowWebJSUUID=objBindingElementData.hx_webjs_row_uuid;var strBindingElementValue=objBindingElementData.element_value;var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strBindingDataSrcName);if(objHXXmlDoc==null){return}var strXPathText="//RS_ROW[@_HXWEBJS_ROW_UUID='"+strBindingRowWebJSUUID+"']";var objHXXmlNode=objHXXmlDoc.SelectSingleNode(strXPathText);if(objHXXmlNode==null){return}var strOldValue=objHXXmlNode.GetAttributeValue(strBindingDataFldName);objHXXmlNode._SetAttributeValueOnly(strBindingDataFldName,strInputElementValue);HXWebJS.Xml._XmlDataIsland._update_binding_elements_value(objHXXmlNode,strAttributeName,strInputElementValue,objElement);HXWebJS.Xml._XmlDataIsland._gblnDataHasChanged=true;if(blnFireCallback){var strFunctionNameCallback="HXWebDynamicPageJSExt._Internal._AfterBindingValueUpdatedCallback";var blnIsCallbackExist_AfterBindingValueUpdate=HXWebJS.Core.IsJavascriptFunctionDefined(strFunctionNameCallback);if(!blnIsCallbackExist_AfterBindingValueUpdate){return}var fnCallback=eval(strFunctionNameCallback);fnCallback(strBindingDataSrcName,strBindingDataFldName,strBindingElementValue,strOldValue,objHXXmlNode,objElement)}};HXWebJS.Xml._XmlDataIsland._MarkDataHasChanged=function(blnDataHasChanged){if(blnDataHasChanged==null){blnDataHasChanged=true}HXWebJS.Xml._XmlDataIsland._gblnDataHasChanged=blnDataHasChanged};HXWebJS.Xml._XmlDataIsland._HasAnyXmlDataChanged=function(){return HXWebJS.Xml._XmlDataIsland._gblnDataHasChanged};HXWebJS.Xml._XmlDataIsland._get_input_element_binding_data=function(element,eventType){if(element==null){return}var strDataFldName=HXWebJS.DOM.ElementAttributeGetValue(element,"hx_data_fld");if(strDataFldName==null||strDataFldName==""){return null}var strDataSrcName=HXWebJS.DOM.ElementAttributeGetValue(element,"hx_data_src");if(strDataSrcName==null||strDataSrcName==""){return null}var strBindingRowWebJSUUID=element.getAttribute("_hxwebjs_row_uuid");if(strBindingRowWebJSUUID==null||strBindingRowWebJSUUID==""){return null}var strInputElementValue;var strElementTagName=element.tagName.toLowerCase();if(strElementTagName=="input"){var strInputType=element.type;if(strInputType==null){strInputType="text"}strInputType=strInputType.toLowerCase();if(strInputType=="text"&&eventType=="change"){strInputElementValue=element.value}else{if(strInputType=="checkbox"&&eventType=="click"){strInputElementValue=(element.checked?"-1":"0")}else{if(strInputType=="radio"&&eventType=="click"){strInputElementValue=element.value}else{if(strInputType=="password"&&eventType=="change"){strInputElementValue=element.value}else{if(strInputType=="file"&&eventType=="change"){strInputElementValue=element.value}else{return null}}}}}}else{if(strElementTagName=="select"){if(eventType=="change"){strInputElementValue=element.value}else{return null}}else{if(strElementTagName=="textarea"){if(eventType=="change"){strInputElementValue=element.value}else{return null}}}}return{hx_data_src:strDataSrcName,hx_data_fld:strDataFldName,hx_webjs_row_uuid:strBindingRowWebJSUUID,element_value:strInputElementValue}};HXWebJS.Xml._XmlDataIsland._binding_table_template_cache_process=function(objTable){if(objTable==null){return null}var strTableElementId=objTable.id;if(strTableElementId==null||strTableElementId==""){return null}var objTemplateElementForTBody=HXWebJS.Xml._XmlDataIsland._table_tbody_row_template_cache[strTableElementId];if(objTemplateElementForTBody!=null){return objTemplateElementForTBody}var tempChildNodesOfTable=objTable.childNodes;if(tempChildNodesOfTable==null){return null}for(var i=0;i<tempChildNodesOfTable.length;i++){var tempChildNode=tempChildNodesOfTable[i];var tempNodeName=tempChildNode.nodeName.toLowerCase();if(tempNodeName=="tbody"){objTemplateElementForTBody=tempChildNode.cloneNode(true);HXWebJS.Xml._XmlDataIsland._table_tbody_row_template_cache[strTableElementId]=objTemplateElementForTBody;return objTemplateElementForTBody}}return null};HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func=function(objtable,objHXXmlNodeList){var strFuncNameForDataRowRebinding=objtable.getAttribute("hx_customized_row_rebinding_func");if(strFuncNameForDataRowRebinding==null||strFuncNameForDataRowRebinding==""){strFuncNameForDataRowRebinding="HXWebDynamicPageJSExt._Internal._AfterDataListRowRebindingCallback"}else{if(strFuncNameForDataRowRebinding.toLowerCase()=="none"){return}}var blnIsCallbackExist_AfterRowRebinding=HXWebJS.Core.IsJavascriptFunctionDefined(strFuncNameForDataRowRebinding);var fnCallbackDataRowRebinding=(blnIsCallbackExist_AfterRowRebinding?eval(strFuncNameForDataRowRebinding):null);try{for(var i=0;i<objtable.tBodies.length;i++){objtable.tBodies[i].style.display="";if(blnIsCallbackExist_AfterRowRebinding){fnCallbackDataRowRebinding(objtable.id,objtable.tBodies[i],objHXXmlNodeList[i])}}}catch(ex){alert(strFuncNameForDataRowRebinding+"()函数调用失败。错误详情： "+(ex.description!=null?ex.description:ex))}};HXWebJS.Xml._XmlDataIsland._call__webdatalist__after_data_row_rebinding_func_one_line=function(objTBody,objHXXmlNode){if(objTBody==null){return}var objtable=objTBody.parentNode;objTBody.style.display="";var strFuncNameForDataRowRebinding=objtable.getAttribute("hx_customized_row_rebinding_func");if(strFuncNameForDataRowRebinding==null||strFuncNameForDataRowRebinding==""){strFuncNameForDataRowRebinding="HXWebDynamicPageJSExt._Internal._AfterDataListRowRebindingCallback"}else{if(strFuncNameForDataRowRebinding.toLowerCase()=="none"){return}}var blnIsCallbackExist_AfterRowRebinding=HXWebJS.Core.IsJavascriptFunctionDefined(strFuncNameForDataRowRebinding);if(!blnIsCallbackExist_AfterRowRebinding){return}var fnCallbackDataRowRebinding=eval(strFuncNameForDataRowRebinding);try{fnCallbackDataRowRebinding(objtable.id,objTBody,objHXXmlNode)}catch(ex){alert(strFuncNameForDataRowRebinding+"()函数调用失败。错误详情： "+(ex.description!=null?ex.description:ex))}};HXWebJS.Xml._XmlDataIsland.__insert_new_tbody=function(objTable,objTBody_insertBefore){var strTableElementId=objTable.id;if(strTableElementId==null||strTableElementId==""){alert("使用Xml绑定技术的Table元素对象必需指定id属性的值。");return null}var objTemplateElementForTBody=HXWebJS.Xml._XmlDataIsland._table_tbody_row_template_cache[strTableElementId];if(objTemplateElementForTBody==null){return null}var copy=objTemplateElementForTBody.cloneNode(true);return objTBody_insertBefore.parentNode.insertBefore(copy,objTBody_insertBefore)};HXWebJS.Xml._XmlDataIsland._GetBindingXmlDataIslandValue=function(strDataSrcName,strDataFldName,strHXDataSeek){if(document.getElementById(strDataSrcName)==null){return null}objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strDataSrcName);if(objHXXmlDoc==null){return null}if(strDataFldName==""){return null}var objHXXmlNodeOfRow;if(strHXDataSeek!=null&&strHXDataSeek!=""){objHXXmlNodeOfRow=objHXXmlDoc.SelectSingleNode("//RS_DATA//RS_ROW["+strHXDataSeek+"]")}else{objHXXmlNodeOfRow=objHXXmlDoc.SelectSingleNode("//RS_DATA//RS_ROW")}if(objHXXmlNodeOfRow==null){return null}var strBindingRowUUID=objHXXmlNodeOfRow.GetAttributeValue("_HXWEBJS_ROW_UUID");if(strBindingRowUUID==null||strBindingRowUUID==""){strBindingRowUUID=HXWebJS.Core.CreateUUID();objHXXmlNodeOfRow._SetAttributeValueOnly("_HXWEBJS_ROW_UUID",strBindingRowUUID,true)}var strValue=objHXXmlNodeOfRow.GetAttributeValue(strDataFldName.toUpperCase());if(strValue==null){return null}return{_hxwebjs_row_uuid:strBindingRowUUID,value:strValue}};HXWebJS.Xml._XmlDataIsland._BuildTableFullDataSeekViaDataJoin=function(element,strHXParentDataSrc,strHXDataJoin){var objTBody=HXWebJS.Xml._XmlDataIsland._GetElementBindingLineTBody(element);if(objTBody==null){throw"未找到元素所在的绑定行tbody元素"}var strBindingDataSrcId=objTBody.parentNode.getAttribute("hx_data_src");var strBindingRowUUID=objTBody.getAttribute("_hxwebjs_row_uuid");if(strBindingDataSrcId!=strHXParentDataSrc){throw"二级绑定数据源定义和该table所在的上级tbody对应的绑定数据源不一致！操作撤消。"}var objBindingHXXmlNode=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strBindingDataSrcId).SelectSingleNode("//RS_ROW[@_HXWEBJS_ROW_UUID='"+strBindingRowUUID+"']");if(objBindingHXXmlNode==null){return null}var strParentFieldPlaceHolder,chLast;var strFieldName,strFieldValue;var arrParentFieldNames=strHXDataJoin.match(/(PARENT\.@\w+[ |\)])|(PARENT\.@\w+$)/ig);for(var i in arrParentFieldNames){strParentFieldPlaceHolder=arrParentFieldNames[i];chLast=strParentFieldPlaceHolder.substr(strParentFieldPlaceHolder.length-1);if(chLast==" "||chLast==")"){strParentFieldPlaceHolder=strParentFieldPlaceHolder.substr(0,strParentFieldPlaceHolder.length-1)}strFieldName=strParentFieldPlaceHolder.substr(7);strFieldValue=objBindingHXXmlNode.GetAttributeValue(strFieldName);if(strFieldValue==null||strFieldValue==""){return{parent_hxwebjs_row_uuid:strBindingRowUUID,data_seek:"1=0"}}strHXDataJoin=strHXDataJoin.replace(strParentFieldPlaceHolder,"'"+strFieldValue+"'")}return{parent_data_src:strHXParentDataSrc,parent_hxwebjs_row_uuid:strBindingRowUUID,data_seek:strHXDataJoin}};HXWebJS.Xml._XmlDataIsland._GetElementBindingLineTBody=function(element){var objTemp=element;var strTemp;while(objTemp!=null){if(objTemp.tagName!=null&&objTemp.tagName.toLowerCase()=="tbody"){strTemp=objTemp.getAttribute("_hxwebjs_row_uuid");if(strTemp!=null&&strTemp!=""){return objTemp}}objTemp=objTemp.parentNode}return null};HXWebJS.Xml.XmlService={};HXWebJS.Xml.XmlService._Internal={};var HXWebXmlService=HXWebJS.Xml.XmlService;HXWebXmlService._Internal._SayToServer=function(strSubSystemCode,strXmlCmdCode,xmlCmdContent,fnCallback,options){if(options==null){options={async:true,disable_input:false,show_progressbar:false,crossDomain:false,ignore_bod_warning_msg:false,ignore_bod_error_msg:false,ignore_connect_fail_msg:false}}else{if(options.async!=false){options.async=true}if(options.disable_input!=true){options.disable_input=false}if(options.show_progressbar!=true){options.show_progressbar=false}if(options.ignore_bod_warning_msg!=true){options.ignore_bod_warning_msg=false}if(options.ignore_bod_error_msg!=true){options.ignore_bod_error_msg=false}if(options.ignore_connect_fail_msg!=true){options.ignore_connect_fail_msg=false}if(options.crossDomain!=true){options.crossDomain=false}}var strRequestFullXmlData=HXWebXmlService._Internal._HXBOD205_Build(strSubSystemCode,strXmlCmdCode,xmlCmdContent);if(options.disable_input){HXWebJS.DOM._Internal._DisableEnableMouseInput()}if(options.show_progressbar){HXWebJS.DOM._Internal._ShowHideProgressBar()}var strUrl=gstrWebRootPath+"hxpublic_v6/hxxmlservice.aspx";if(typeof(mstrHXPageServerEnginee)=="string"){if(mstrHXPageServerEnginee=="V6"){strUrl=gstrWebRootPath+"hxpublic_v6/hxxmlservice6.aspx"}}$.ajax({url:strUrl,type:"POST",dataType:"text",global:false,async:options.async,processData:false,data:strRequestFullXmlData,crossDomain:options.crossDomain,complete:HXWebXmlService._Internal._GetSayToServerCompleteCallbackFunc(fnCallback,options)})};HXWebJS.Xml.XmlService._Internal._HXBOD205_Build=function(strSubSystemCode,strXmlCmdCode,xmlCmdContent){var sb_xmlcmd_content=new HXWebStringBuilder();sb_xmlcmd_content.append("<HXBOD205><CNTROLAREA>");sb_xmlcmd_content.append("<SUBSYSTEM>"+strSubSystemCode+"</SUBSYSTEM>");sb_xmlcmd_content.append("<TASK>"+strXmlCmdCode+"</TASK>");sb_xmlcmd_content.append("</CNTROLAREA>");sb_xmlcmd_content.append("<DATAAREA>");sb_xmlcmd_content.append(xmlCmdContent);sb_xmlcmd_content.append("</DATAAREA></HXBOD205>");return HXWebJS.Xml.MarkXMLSpecialChars(sb_xmlcmd_content.toString())};HXWebJS.Xml.XmlService._Internal._GetSayToServerCompleteCallbackFunc=function(fnCallback,options){return function(xhr,status){if(options.disable_input){HXWebJS.DOM._Internal._DisableEnableMouseInput(false)}if(options.show_progressbar){HXWebJS.DOM._Internal._ShowHideProgressBar(false)}if(xhr.status>=200&&xhr.status<300){var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(xhr.responseText);var strXmlResult=HXWebXmlService._Internal._HXBOD205_ErrorHandle(objHXXmlDoc,options);if(fnCallback!=null){fnCallback(strXmlResult)}return}if(!options.ignore_connect_fail_msg){var strTemp=HXWebJS.Xml.XmlService._Internal._GetTrustHXAppOfflineHtmlPageFriendlyNoticeText(xhr.responseText);if(strTemp!=null&&strTemp!=""){alert(strTemp)}else{strTemp=xhr.responseText;if(strTemp!=null){var intTemp=strTemp.indexOf("<BODY");if(intTemp==-1){intTemp=strTemp.indexOf("<body")}if(intTemp!=-1){strTemp=strTemp.substr(intTemp)}strTemp=strTemp.replace(/\r\n\r\n/g,"\r\n");alert("HXWebXmlService通信或服务器处理出现错误。参考信息：\r\n"+strTemp)}else{alert("HXWebXmlService通信出现错误且未返回任何响应消息。通常由跨域访问限制引发。参考状态信息：\r\n"+xhr.statusText)}}}if(fnCallback!=null){fnCallback(null)}}};HXWebJS.Xml.XmlService._Internal._GetTrustHXAppOfflineHtmlPageFriendlyNoticeText=function(strTempResponseText){if(!strTempResponseText){return null}var intBeginIndex_FriendMsgString=strTempResponseText.indexOf("trusthx_app_offline_html_page_flag__used_for_hxxmlservice_friend_notice");if(intBeginIndex_FriendMsgString!=-1){intBeginIndex_FriendMsgString=strTempResponseText.indexOf(">",intBeginIndex_FriendMsgString+1);if(intBeginIndex_FriendMsgString==-1){return null}var intEndIndex_FriendMsgString=strTempResponseText.indexOf("</span>",intBeginIndex_FriendMsgString+1);var strMsgText=(intEndIndex_FriendMsgString==-1?strTempResponseText.substr(intBeginIndex_FriendMsgString+1):strTempResponseText.substring(intBeginIndex_FriendMsgString+1,intEndIndex_FriendMsgString));strMsgText=strMsgText.replace(/<br \/>/g,"\r\n");return strMsgText}return null};HXWebJS.Xml.XmlService._Internal._HXBOD205_ErrorHandle=function(objHXXmlDoc,options){var status=objHXXmlDoc.SelectSingleNode("/HXBOD205_CONFIRM/STATUSLVL").GetText();var msg=objHXXmlDoc.SelectSingleNode("/HXBOD205_CONFIRM/DESCRIPTN").GetText();var result=objHXXmlDoc.SelectSingleNode("/HXBOD205_CONFIRM/CONFIRM_DATA").GetText();var strExtraData=objHXXmlDoc.SelectSingleNode("/HXBOD205_CONFIRM/ERROR_CODE").GetText();if(status==0){return(result)}if(status==1){if(strExtraData!=null&&strExtraData!=""){var obj=new Object();obj.value=result;obj.message=msg;obj.extra_data=strExtraData;alert(msg);return obj}else{if(result=="hxwww_warning_msg__xmlservice_no_active_session"){if(HXWebDynamicPageJSExt!=null&&HXWebDynamicPageJSExt.OnXmlServiceNoActiveSession!=null){HXWebDynamicPageJSExt.OnXmlServiceNoActiveSession(msg);return null}}}alert(msg);return(result)}if(status==2){if(!options.ignore_bod_warning_msg){alert(msg)}return(null)}if(status==3){if(!options.ignore_bod_error_msg){alert("服务器端处理出现错误（Server Side Error Happened）. "+msg)}return(null)}};HXWebXmlService.IsOnline=function(fnOnline,fnOffline,options){if(options==null){options={async:true,crossDomain:true,ignore_bod_warning_msg:true,ignore_bod_error_msg:true,ignore_connect_fail_msg:true}}var fnCallback=function(strXmlResult){if(strXmlResult=="OK"){if(fnOnline!=null){fnOnline(true)}}else{if(fnOffline!=null){fnOffline(false)}}};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_ONLINE_CHECK","",fnCallback,options)};HXWebXmlService.LoginVerifyPictureAcquire=function(objImage){var strXmlResult=null;var fnCallback=function(strTemp){strXmlResult=strTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_LOGIN_VERIFY_DATA_BUILD","",fnCallback,{async:false,show_progressbar:true,crossDomain:true});if(strXmlResult!=null){var strTokenForVerifyCode=strXmlResult.substr(0,36);objImage.src=strXmlResult.substr(40);return strTokenForVerifyCode}return null};HXWebXmlService.LoginByPasswordProcess=function(strUserCode,strPassword,strVerifyCode,extraData){return HXWebXmlService._Internal._UserLoginProcess(strUserCode,strPassword,strVerifyCode,"",extraData,false)};HXWebXmlService.LoginByTokenProcess=function(strUserCode,strAccessTokenCode,extraData){return HXWebXmlService._Internal._UserLoginProcess(strUserCode,"","",strAccessTokenCode,extraData,true)};HXWebXmlService._Internal._UserLoginProcess=function(strUserCode,strPassword,strVerifyCode,strAccessTokenCode,extraData,blnIgnoreWarningOrErrorMsg){if(strUserCode==null){strUserCode=""}if(strPassword==null){strPassword=""}if(strVerifyCode==null){strVerifyCode=""}if(strAccessTokenCode==null){strAccessTokenCode=""}if(blnIgnoreWarningOrErrorMsg==null){blnIgnoreWarningOrErrorMsg=false}var strRequestSystemCode=(extraData!=null&&extraData.request_system_code!=null?extraData.request_system_code:"");var strRequestCultureName=(extraData!=null&&extraData.request_culture_name!=null?extraData.request_culture_name:"");var strRequestUITheme=(extraData!=null&&extraData.request_ui_theme!=null?extraData.request_ui_theme:"");var strRequestDateDisplayFormat=(extraData!=null&&extraData.request_date_display_format!=null?extraData.request_date_display_format:"");var strRequestDecimalDisplayFormat=(extraData!=null&&extraData.request_decimal_display_format!=null?extraData.request_decimal_display_format:"");var strRequestCustomizedData=(extraData!=null&&extraData.request_extra_data!=null?extraData.request_extra_data:"");var strTokenForVerifyCode=(extraData!=null&&extraData.token_for_verify_code!=null?extraData.token_for_verify_code:"");var sb_xml=new HXWebStringBuilder();sb_xml.append("<RS_DATA><RS_ROW");sb_xml.append(' USER_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strUserCode)+'"');sb_xml.append(' PASSWORD="'+HXWebJS.Xml.MarkXMLSpecialChars(strPassword)+'"');sb_xml.append(' VERIFY_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strVerifyCode)+'"');sb_xml.append(' TOKEN_FOR_VERIFY_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strTokenForVerifyCode)+'"');sb_xml.append(' ACCESS_TOKEN_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strAccessTokenCode)+'"');sb_xml.append(' REQUEST_SYSTEM_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestSystemCode)+'"');sb_xml.append(' REQUEST_CULTURE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestCultureName)+'"');sb_xml.append(' REQUEST_UI_THEME="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestUITheme)+'"');sb_xml.append(' REQUEST_DATE_DISPLAY_FORMAT="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestDateDisplayFormat)+'"');sb_xml.append(' REQUEST_DECIMAL_DISPLAY_FORMAT="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestDecimalDisplayFormat)+'"');sb_xml.append(' REQUEST_CUSTOMIZED_DATA="'+HXWebJS.Xml.MarkXMLSpecialChars(strRequestCustomizedData)+'"');sb_xml.append(" /></RS_DATA>");var objLoginFeedbackResult=null;var fnCallback=function(strXmlResult){if(strXmlResult!=null){var objHXXmlDoc_Result=HXWebJS.Xml.GetHXXmlDocumentViaXmlString(strXmlResult);var strNewAccessTokenCode=objHXXmlDoc_Result.SelectSingleNode("//@ACCESS_TOKEN_CODE").GetText();var strNewCultureCode=objHXXmlDoc_Result.SelectSingleNode("//@CULTURE_CODE").GetText();var strTemp=objHXXmlDoc_Result.SelectSingleNode("//@NEED_CHANGE_PWD").GetText();var blnNeedChangePassword=(strTemp!=""&&strTemp!="0");var strChangePasswordHintText=objHXXmlDoc_Result.SelectSingleNode("//@CHANGE_PWD_TEXT").GetText();objLoginFeedbackResult={access_token_code:strNewAccessTokenCode,culture_code:strNewCultureCode,need_change_password:blnNeedChangePassword,change_password_hint_text:strChangePasswordHintText}}};var options={async:false,disable_input:true,show_progressbar:true,crossDomain:true,ignore_bod_warning_msg:blnIgnoreWarningOrErrorMsg,ignore_bod_error_msg:blnIgnoreWarningOrErrorMsg};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_USER_LOGIN",sb_xml.toString(),fnCallback,options);return objLoginFeedbackResult};HXWebJS.Xml.XmlService._Internal._BuildPageXmlSvcXmlCmdContent=function(PageXmlSvcCode,PageXmlSvcCnt,PageXmlSvcAssemblyName,PageXmlSvcClassName,strExtendWebPartHtmlId){var strHXPageParamUUID="";if(typeof(mstrHXPageParamUUID)=="string"){strHXPageParamUUID=mstrHXPageParamUUID}var strHXPageName=HXWebPageGlobalVariables.CurrentPageName;if(PageXmlSvcCnt==null){PageXmlSvcCnt=""}if(strExtendWebPartHtmlId==null){strExtendWebPartHtmlId=""}var sb_xmlcmd=new HXWebStringBuilder();sb_xmlcmd.append('<PAGE_XML_SERVICE ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(PageXmlSvcAssemblyName)+'"');sb_xmlcmd.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(PageXmlSvcClassName)+'"');sb_xmlcmd.append(' HX_PAGE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strHXPageName)+'"');sb_xmlcmd.append(' HX_PAGE_PARAM_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strHXPageParamUUID)+'"');sb_xmlcmd.append(' EXTEND_WEBPART_HTML_ID="'+HXWebJS.Xml.MarkXMLSpecialChars(strExtendWebPartHtmlId)+'"');sb_xmlcmd.append(' PAGE_XML_SERVICE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(PageXmlSvcCode)+'"');sb_xmlcmd.append(">");sb_xmlcmd.append(HXWebJS.Xml.MarkXMLSpecialChars(PageXmlSvcCnt));sb_xmlcmd.append("</PAGE_XML_SERVICE>");return sb_xmlcmd.toString()};HXWebXmlService._Internal._CallPageXmlService=function(PageXmlSvcCode,PageXmlSvcCnt,ResponseFunction,PageXmlSvcAssemblyName,PageXmlSvcClassName,options){var strAssemblyName=(PageXmlSvcAssemblyName!=null?PageXmlSvcAssemblyName:HXWebPageGlobalVariables._Internal.GetPageXmlSvcAssemblyName());if(strAssemblyName==null){return null}var strSvcClassName=(PageXmlSvcClassName!=null?PageXmlSvcClassName:HXWebPageGlobalVariables._Internal.GetPageXmlSvcClassName());if(strSvcClassName==null){return null}if(PageXmlSvcCnt==null){PageXmlSvcCnt=""}var strExtendWebPartHtmlId=options.extend_web_part_html_id;var xmlCmdContent=HXWebXmlService._Internal._BuildPageXmlSvcXmlCmdContent(PageXmlSvcCode,PageXmlSvcCnt,strAssemblyName,strSvcClassName,strExtendWebPartHtmlId);HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_XML_SERVICE",xmlCmdContent,ResponseFunction,options)};HXWebXmlService.CallPageXmlService=function(PageXmlSvcCode,PageXmlSvcCnt,PageXmlSvcAssemblyName,PageXmlSvcClassName,options){var objXmlServiceResult=null;var fnCallback=function(objTemp){objXmlServiceResult=objTemp};if(options==null){options={async:false}}if(options.async!=false){options.async=false}HXWebXmlService._Internal._CallPageXmlService(PageXmlSvcCode,PageXmlSvcCnt,fnCallback,PageXmlSvcAssemblyName,PageXmlSvcClassName,options);return objXmlServiceResult};HXWebXmlService.CallPageXmlServiceAsync=function(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,PageXmlSvcAssemblyName,PageXmlSvcClassName,options){if(options==null){options={async:true}}if(options.async!=true){options.async=true}HXWebXmlService._Internal._CallPageXmlService(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,PageXmlSvcAssemblyName,PageXmlSvcClassName,options)};HXWebXmlService.PageXmlService=function(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,options){HXWebXmlService._Internal._CallPageXmlService(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,"","",options)};HXWebXmlService.CallPageXmlServiceAsyncWithProgressBar=function(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,PageXmlSvcAssemblyName,PageXmlSvcClassName,options){if(options==null){options={async:true}}if(options.async!=true){options.async=true}if(options.disable_input!=true){options.disable_input=true}if(options.show_progressbar!=true){options.show_progressbar=true}HXWebXmlService._Internal._CallPageXmlService(PageXmlSvcCode,PageXmlSvcCnt,fnResponseCallback,PageXmlSvcAssemblyName,PageXmlSvcClassName,options)};HXWebJS.Xml.XmlService._Internal._BuildObjectXmlSvcXmlCmdContent=function(ObjectOrViewCode,ObjectXmlSvcCode,ObjectXmlSvcCnt,ObjectXmlSvcAssemblyName,ObjectXmlSvcClassName){var strHXPageParamUUID="";if(typeof(mstrHXPageParamUUID)=="string"){strHXPageParamUUID=mstrHXPageParamUUID}var strHXPageName=HXWebPageGlobalVariables.CurrentPageName;if(ObjectXmlSvcCode==null){ObjectXmlSvcCode=""}var sb_xmlcmd=new HXWebStringBuilder();sb_xmlcmd.append('<OBJECT_XML_SERVICE ASSEMBLY="'+HXWebJS.Xml.MarkXMLSpecialChars(ObjectXmlSvcAssemblyName)+'"');sb_xmlcmd.append(' CLASS_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(ObjectXmlSvcClassName)+'"');sb_xmlcmd.append(' HX_PAGE_NAME="'+HXWebJS.Xml.MarkXMLSpecialChars(strHXPageName)+'"');sb_xmlcmd.append(' HX_PAGE_PARAM_UUID="'+HXWebJS.Xml.MarkXMLSpecialChars(strHXPageParamUUID)+'"');sb_xmlcmd.append(' OBJECT_OR_VIEW_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(ObjectOrViewCode)+'"');sb_xmlcmd.append(' OBJECT_XML_SERVICE_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(ObjectXmlSvcCode)+'"');sb_xmlcmd.append(' USE_DEFAULT_PROCESS_FOR_BASIC_OPERATION="1"');sb_xmlcmd.append(" >");sb_xmlcmd.append(HXWebJS.Xml.MarkXMLSpecialChars(ObjectXmlSvcCnt));sb_xmlcmd.append("</OBJECT_XML_SERVICE>");return sb_xmlcmd.toString()};HXWebXmlService._Internal._CallObjectXmlService=function(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,ResponseFunction,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options){var strAssemblyName=(strObjectXmlSvcAssemblyName!=null?strObjectXmlSvcAssemblyName:HXWebPageGlobalVariables._Internal.GetPageXmlSvcAssemblyName());if(strAssemblyName==null){return null}var strSvcClassName=(strObjectXmlSvcClassName!=null?strObjectXmlSvcClassName:HXWebPageGlobalVariables._Internal.GetPageXmlSvcClassName());if(strSvcClassName==null){return null}var xmlCmdContent=HXWebJS.Xml.XmlService._Internal._BuildObjectXmlSvcXmlCmdContent(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,strAssemblyName,strSvcClassName);HXWebXmlService._Internal._SayToServer("HXSM","HXSM_OBJECT_XML_SERVICE",xmlCmdContent,ResponseFunction,options)};HXWebXmlService.CallObjectXmlService=function(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options){var objXmlServiceResult=null;var fnCallback=function(objTemp){objXmlServiceResult=objTemp};if(options==null){options={async:false}}if(options.async!=false){options.async=false}HXWebXmlService._Internal._CallObjectXmlService(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,fnCallback,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options);return objXmlServiceResult};HXWebJS.Xml.XmlService.CallObjectXmlServiceAsync=function(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,fnResponseCallback,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options){if(options==null){options={async:true}}if(options.async!=true){options.async=true}HXWebXmlService._Internal._CallObjectXmlService(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,fnResponseCallback,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options)};HXWebJS.Xml.XmlService.CallObjectXmlServiceAsyncWithProgressBar=function(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,fnResponseCallback,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName){if(options==null){options={async:true}}if(options.async!=true){options.async=true}if(options.disable_input!=true){options.disable_input=true}if(options.show_progressbar!=true){options.show_progressbar=true}HXWebXmlService._Internal._CallObjectXmlService(strObjectOrViewCode,strObjectXmlSvcCode,strObjectXmlSvcCnt,fnResponseCallback,strObjectXmlSvcAssemblyName,strObjectXmlSvcClassName,options)};HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray=function(arrParamKeyValues){var numArgs=(arrParamKeyValues==null?0:arrParamKeyValues.length);if(numArgs<2){alert("调用HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray()函数时参数数量不足！");return""}var sb_AllParamInfo=new HXWebStringBuilder();sb_AllParamInfo.append("<RS_DATA>");for(var i=0;i<numArgs;i+=2){sb_AllParamInfo.append('<RS_ROW PARAM_NAME="');sb_AllParamInfo.append(HXWebJS.Xml.MarkXMLSpecialChars(arrParamKeyValues[i]).toUpperCase());sb_AllParamInfo.append('" PARAM_VALUE="');sb_AllParamInfo.append(arrParamKeyValues[i+1]==null?"":HXWebJS.Xml.MarkXMLSpecialChars(arrParamKeyValues[i+1]));sb_AllParamInfo.append('" />')}sb_AllParamInfo.append("</RS_DATA>");var strReturnValue=HXWebJS.Xml.XmlService._Internal._RegisterServerSessionValue("HXPARAM",sb_AllParamInfo.toString(),true);if(strReturnValue==null){return""}return strReturnValue};HXWebJS.Xml.XmlService.RegisterParameterValueToServer=function(strParamName1,strParamValue1){var numArgs=arguments.length;if(numArgs<2){alert("调用HXWebJS.Xml.XmlService.RegisterParameterValueToServer()函数时参数数量不足！");return""}var arrTemp=[];for(var i=0;i<numArgs;i++){arrTemp.push(arguments[i])}return HXWebXmlService.RegisterParameterValueToServerViaArray(arrTemp)};HXWebJS.Xml.XmlService._Internal._RegisterServerSessionValue=function(strSessionVariableName,strVariableValue,blnIsCreateSuffix){strSessionVariableName=HXWebJS.Xml.MarkXMLSpecialChars(strSessionVariableName);strVariableValue=HXWebJS.Xml.MarkXMLSpecialChars(strVariableValue);var intIsCreateSuffix;if(blnIsCreateSuffix==null||blnIsCreateSuffix!=true){intIsCreateSuffix=0}else{intIsCreateSuffix=1}var sb_Xml=new HXWebStringBuilder();sb_Xml.append('<RS_ROW VARIABLE_NAME="');sb_Xml.append(strSessionVariableName);sb_Xml.append('" VARIABLE_VALUE="');sb_Xml.append(strVariableValue);sb_Xml.append('" IS_CREATE_SUFFIX="');sb_Xml.append(intIsCreateSuffix.toString());sb_Xml.append('" />');var xmlresult=null;var fnCallback=function(objTemp){xmlresult=objTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_SERVER_SESSION_VALUE_REGISTER",sb_Xml.toString(),fnCallback,{async:false});return(xmlresult)};HXWebJS.Xml.XmlService._Internal._AppendParameterValueToServer=function(strHXPageParamUUID,strParamName1,strParamValue1){var numArgs=arguments.length;if(numArgs<3){alert("调用_AppendParameterValueToServer()函数时传递的参数数量不足！");return""}var sb_AllParamInfo=new HXWebStringBuilder();sb_AllParamInfo.append("<RS_DATA>");for(var i=1;i<numArgs;i+=2){sb_AllParamInfo.append('<RS_ROW PARAM_NAME="');sb_AllParamInfo.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i]).toUpperCase());sb_AllParamInfo.append('" PARAM_VALUE="');sb_AllParamInfo.append(arguments[i+1]==null?"":HXWebJS.Xml.MarkXMLSpecialChars(arguments[i+1]));sb_AllParamInfo.append('" />')}sb_AllParamInfo.append("</RS_DATA>");var strAllXmlData=HXWebJS.Xml.BuildAllXmlDatas("hx_page_param_uuid",strHXPageParamUUID,"appended_param_values",sb_AllParamInfo.toString());var strReturnValue=null;var fnCallback=function(objTemp){strReturnValue=objTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_PARAMETER_VALUE_APPEND",strAllXmlData,fnCallback,{async:false});if(strReturnValue==null){return""}return strReturnValue};HXWebJS.Xml.XmlService._Internal._RemoveParameterValueToServer=function(strHXPageParamUUID,strParamName1){var numArgs=arguments.length;if(numArgs<2){alert("调用_RemoveParameterValueToServer()函数时传递的参数数量不足！");return""}var sb_AllParamInfo=new HXWebStringBuilder();sb_AllParamInfo.append("<RS_DATA>");for(var i=1;i<numArgs;i++){sb_AllParamInfo.append('<RS_ROW PARAM_NAME="');sb_AllParamInfo.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i]).toUpperCase());sb_AllParamInfo.append('" />')}sb_AllParamInfo.append("</RS_DATA>");var strAllXmlData=HXWebJS.Xml.BuildAllXmlDatas("hx_page_param_uuid",strHXPageParamUUID,"removed_param_name",sb_AllParamInfo.toString());var strReturnValue=null;var fnCallback=function(objTemp){strReturnValue=objTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_PAGE_PARAMETER_VALUE_REMOVE",strAllXmlData,fnCallback,{async:false});if(strReturnValue==null){return""}return strReturnValue};HXWebJS.Xml.XmlService.GetUITextOnServer=function(strTextCode){var strReturnValue=null;var fnCallback=function(objTemp){strReturnValue=objTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_UTILITY_GET_HXEIMS_CORE_UI_TEXT",strTextCode,fnCallback,{async:false});return strReturnValue};HXWebJS.Xml.XmlService.GetObjectUITextOnServer=function(strObjectCode,strTextCode){if(strObjectCode==null){strObjectCode=""}var sb=new HXWebStringBuilder();sb.append("<RS_DATA><RS_ROW");sb.append(' OBJECT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strObjectCode)+'"');sb.append(' TEXT_CODE="'+HXWebJS.Xml.MarkXMLSpecialChars(strTextCode)+'"');sb.append(" /></RS_DATA>");var strReturnValue=null;var fnCallback=function(objTemp){strReturnValue=objTemp};HXWebXmlService._Internal._SayToServer("HXSM","HXSM_UTILITY_GET_UI_TEXT",sb.toString(),fnCallback,{async:false});return strReturnValue};HXWebJS.Navigation={};HXWebJS.Navigation._Internal={};var HXWebNavigation=HXWebJS.Navigation;HXWebJS.Navigation.PostDataToWebPage=function(strTagertWebPageName,strWindowName,strParamName1,strData1){var sb_HtmlFrmQuery=new HXWebStringBuilder();sb_HtmlFrmQuery.append('<Form method="POST" name="frmHXPostDataToWebPage" id="frmHXPostDataToWebPage">');var i,numArgs=arguments.length;if(numArgs<4){alert("调用HXWebJS.Navigation.PostDataToWebPage()时参数数量不足！");return}for(i=2;i<numArgs;i+=2){sb_HtmlFrmQuery.append('<INPUT name="');sb_HtmlFrmQuery.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i]));sb_HtmlFrmQuery.append('" Type=hidden value="');sb_HtmlFrmQuery.append(HXWebJS.Xml.MarkXMLSpecialChars(arguments[i+1]));sb_HtmlFrmQuery.append('">')}sb_HtmlFrmQuery.append("</Form>");var frmQuery=HXWebJS.DOM.CreateElement(sb_HtmlFrmQuery.toString());document.body.appendChild(frmQuery);frmQuery.action=strTagertWebPageName;if(strWindowName!=null){frmQuery.target=strWindowName}frmQuery.submit();document.body.removeChild(frmQuery)};HXWebJS.Navigation.OpenWebPage=function(href,strWindowName){if(strWindowName==null){strWindowName=(window.parent==null||window.parent==window?null:"_blank")}if(strWindowName==null){window.location.href=href;return window}else{var objWin=window.open(href,strWindowName,"height="+(screen.availHeight-28*5-6)+",left=0,top=0,width="+(screen.availWidth-12)+",location=yes,menubar=yes,toolbar=yes, status=yes,scrollbars=yes, resizable=yes");if(objWin.location.protocol.indexOf("http"!=-1)){objWin.focus()}}return objWin};HXWebJS.Navigation.OpenWebPopupPage=function(href,width,height,Scroll){if(height==null||isNaN(height)){height=screen.availHeight/2}if(width==null||isNaN(width)){width=screen.availWidth/2}if(Scroll==null){Scroll="yes"}var intTop=((screen.availHeight-28-6)-height)/2;var intLeft=((screen.availWidth-12)-width)/2;var objWin=window.open(href,"_blank","height="+height+",left="+intLeft+",top="+intTop+",width="+width+",location=no,menubar=no,toolbar=no, status=yes,scrollbars="+Scroll+", resizable=yes");if(objWin.location.protocol.indexOf("http"!=-1)){objWin.focus()}return objWin};HXWebJS.Navigation.OpenWebPageViaWindowSetting=function(strUrl,objWindowSetting){var intShowStyle=0;var strWindowName="_blank";var intDialogWidth=null,intDialogHeight=null;var fnDialogCallback=null;var objDialogArguments=null;if(objWindowSetting!=null){intShowStyle=objWindowSetting.show_style;if(intShowStyle==null||(intShowStyle!=1&&intShowStyle!=2&&intShowStyle!=10)){intShowStyle=0}strWindowName=objWindowSetting.window_name;intDialogWidth=objWindowSetting.dialog_width;intDialogHeight=objWindowSetting.dialog_height;fnDialogCallback=objWindowSetting.dialog_callback_func;objDialogArguments=objWindowSetting.dialog_argument}if(intShowStyle==0){HXWebJS.Navigation.OpenWebPage(strUrl,strWindowName);return}if(intShowStyle==1){HXWebJS.Navigation.OpenWebDialog(strUrl,objDialogArguments,intDialogWidth,intDialogHeight,fnDialogCallback);return}if(intShowStyle==2){HXWebJS.DOM.SetFrameSource(strWindowName,strUrl);return}if(intShowStyle==10){if(top.hxmainpage_navigate_to_page!=null){top.hxmainpage_navigate_to_page(strUrl,"content_zone",objWindowSetting.web_page_menu_cmd_code,objWindowSetting.web_page_tag_name)}else{HXWebJS.DOM.SetFrameSource(strWindowName,strUrl);return}return}};HXWebJS.Navigation.OpenWebPageInFrameWindow=function(href,strFrameHtmlElementId){HXWebJS.DOM.SetFrameSource(strFrameHtmlElementId,href)};HXWebJS.Navigation.OpenWebDialog=function(strUrl,objDialogArguments,intDialogWidth,intDialogHeight,blnScroll,fnDialogCallback,blnShowCloseButton,blnShowTitleBar){var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){objTopLevelWin._hx_web_dialog_divs_stacks=[]}var intExistDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;var objHXWebDialogData=HXWebJS.Navigation._Internal._CreateNewDialogHtmlElement(objTopLevelWin,intExistDialogsCount+1,strUrl,intDialogWidth,intDialogHeight,fnDialogCallback,objDialogArguments,blnScroll,blnShowCloseButton,blnShowTitleBar);if(intExistDialogsCount==0){HXWebJS.DOM._Internal._DisableEnableMouseInput(true,false,objTopLevelWin)}else{objTopLevelWin._hx_web_dialog_divs_stacks[intExistDialogsCount-1]._hx_dialog_div_object.style.display="none"}objTopLevelWin._hx_web_dialog_divs_stacks.push(objHXWebDialogData);objHXWebDialogData._hx_dialog_div_object.style.display=""};HXWebJS.Navigation.CloseWebDialog=function(returnValue){if(typeof(returnValue)=="undefined"){returnValue=null}var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null||objTopLevelWin._hx_web_dialog_divs_stacks.length==0){window.returnValue=returnValue;window.close();return}var objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks.pop();objHXWebDialogData._hx_dialog_div_object.style.display="none";var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){HXWebJS.DOM._Internal._DisableEnableMouseInput(false,false,objTopLevelWin);objTopLevelWin._hx_web_dialog_divs_stacks=null}else{objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1]._hx_dialog_div_object.style.display=""}var fnCallback=objHXWebDialogData._hx_dialog_callback_func;if(fnCallback!=null){var objParentWin=objHXWebDialogData._hx_dialog_opened_from_window;if(objParentWin==null){return}fnCallback.call(objParentWin,returnValue)}objHXWebDialogData._hx_dialog_div_object.parentNode.removeChild(objHXWebDialogData._hx_dialog_div_object);objHXWebDialogData._hx_dialog_div_object=null};HXWebJS.Navigation.SetWebDialogTitle=function(strTitle){var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){return}var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){return}var objHXWebDialogData=null;objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1];if(strTitle==null||strTitle==""){strTitle=window.document.title}jQuery("#hxwebjs_span_for_web_dialog_title",objHXWebDialogData._hx_dialog_div_object).text(strTitle)};HXWebJS.Navigation.GetWebDialogArgumentsData=function(){var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){return null}var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){return null}var objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1];return objHXWebDialogData._hx_dialog_argument};HXWebJS.Navigation.IsWebPageOpenedInDialog=function(){if(window.dialogLeft!=null){return true}var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){return false}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){return false}var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){return false}var objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1];var objWin_OpenCurrentDialog=objHXWebDialogData._hx_dialog_opened_from_window;if(window.parent===objWin_OpenCurrentDialog){return true}return false};HXWebJS.Navigation.ShowWebDialogExtendButton=function(intExtendButtonNo,strExtendButtonClass,intMarginTop){var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){return}var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){return}var objHXWebDialogData=null;objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1];var objDivForWebDialog=objHXWebDialogData._hx_dialog_div_object;var objImg=jQuery("#hxwebjs_img_for_web_dialog_ext_button_"+intExtendButtonNo,objDivForWebDialog).addClass(strExtendButtonClass)[0];if(intMarginTop!=null){objImg.style.marginTop=intMarginTop+"px"}objImg.style.display=""};HXWebJS.Navigation._Internal._CreateNewDialogHtmlElement=function(objTopLevelWin,intDialogDeepLevel,href,width,height,fnCallback,Argument,blnScroll,blnShowCloseButton,blnShowTitleBar){var intViewportWidth=HXWebJS.DOM.GetWindowWidth(objTopLevelWin);var intViewportHeight=HXWebJS.DOM.GetWindowHeight(objTopLevelWin);if(width==null||width==""||isNaN(width)){width=intViewportWidth/2}if(height==null||height==""||isNaN(height)){height=intViewportHeight/2}var intLeft=HXWebJS.DOM.GetScrollLeft(objTopLevelWin)+(intViewportWidth-width)/2;var intTop=HXWebJS.DOM.GetScrollTop(objTopLevelWin)+(intViewportHeight-height)/2;if(intLeft<=0){intLeft=20}if(intTop<=0){intTop=20}var sb_html=new HXWebStringBuilder();sb_html.append('<div id="hxwebjs_div_for_web_dialog_container_v6" class=hxwebjs_web_dialog_container');sb_html.append(' style="position:absolute;background-color:white;');sb_html.append("z-index:"+(100000+intDialogDeepLevel).toString()+";");sb_html.append("top:"+intTop+"px;left:"+intLeft+"px;width:"+(width+2)+"px;height:"+(height+2)+"px;");sb_html.append('">');sb_html.append('<span id="hxwebjs_span_for_web_dialog_title" class="hxwebjs_web_dialog_title"');sb_html.append(' style="position:absolute;left:0px;top:0px;height:24px;line-height:24px;padding-left:18px;;width:'+(parseInt(width)-(HXWebJS.Core.Browser.IsIE10OrLess&&HXWebJS.Core.Browser.Version=="7.0"?18:0))+"px;display:"+(blnShowTitleBar?"":"none")+";z-index:"+(100000+intDialogDeepLevel+20)+'"');sb_html.append("></span>");sb_html.append('<img id="hxwebjs_img_for_web_dialog_decoration" src="../hximages_v6/hxpub_clear.gif"');sb_html.append(' class="hxicon_star hxwebjs_web_dialog_decoration_icon"');sb_html.append(' style="position:absolute;top:5px;left:4px;;z-index:'+(100000+intDialogDeepLevel+25)+'"');sb_html.append(" />");sb_html.append('<div style="position:absolute;right:20px;width:60px;height:24px;top:0px;text-align:right;');sb_html.append("z-index:"+(100000+intDialogDeepLevel+20));sb_html.append(' ">');sb_html.append('<img id="hxwebjs_img_for_web_dialog_ext_button_2" src="../hximages_v6/hxpub_clear.gif"');sb_html.append(' class="hxwebjs_web_dialog_extend_button_2"');sb_html.append(' style="vertical-align:middle;margin-left:8px;display:none;z-index:'+(100000+intDialogDeepLevel+25)+'"');sb_html.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(2)" />');sb_html.append('<img id="hxwebjs_img_for_web_dialog_ext_button_1" src="../hximages_v6/hxpub_clear.gif"');sb_html.append(' class="hxwebjs_web_dialog_extend_button_1"');sb_html.append(' style="vertical-align:middle;margin-left:8px;display:none;z-index:'+(100000+intDialogDeepLevel+25)+'"');sb_html.append(' onclick="HXWebJS.Navigation._Internal._ExtendButtonClicked(1)" />');sb_html.append("</div>");sb_html.append('<img id="hxwebjs_img_for_web_dialog_close_button" src="../hximages_v6/hxpub_clear.gif"');sb_html.append(' class="hxicon_delete hxwebjs_web_dialog_close_button"');sb_html.append(' style="position:absolute;right:4px;top:6px;display:'+(blnShowCloseButton&&blnShowTitleBar?"":"none")+";z-index:"+(100000+intDialogDeepLevel+25)+'"');sb_html.append(' onclick="HXWebJS.Navigation.CloseWebDialog()" />');sb_html.append('<iframe id="hxwebjs_iframe_for_web_dialog_window_'+intDialogDeepLevel+'"');sb_html.append(" frameborder=0 border=0 scrolling="+(blnScroll||blnScroll=="yes"||blnScroll=="1"?"yes":"no"));sb_html.append(' src="'+href+'" class="hxwebjs_iframe_for_web_dialog_window"');sb_html.append(' style="position:absolute;left:0px;background-color:white;top:'+(blnShowTitleBar?24:0)+"px;width:"+width+"px;height:"+(height-(blnShowTitleBar?24:0)).toString()+"px;z-index:"+(100000+intDialogDeepLevel+10)+'">');sb_html.append("</iframe>");objDivForWebDialog=HXWebJS.DOM.CreateElement(sb_html.toString());objTopLevelWin.document.body.appendChild(objDivForWebDialog);var objHXWebDialogData=new Object();objHXWebDialogData._hx_dialog_div_object=objDivForWebDialog;objHXWebDialogData._hx_dialog_opened_from_window=window;objHXWebDialogData._hx_dialog_deep_level=intDialogDeepLevel;objHXWebDialogData._hx_dialog_argument=Argument;objHXWebDialogData._hx_dialog_callback_func=fnCallback;return objHXWebDialogData};HXWebJS.Navigation._Internal._ExtendButtonClicked=function(intExtendButtonNo){var objTopLevelWin=HXWebJS.DOM.GetTopWindowInSameDomain();if(objTopLevelWin==null){objTopLevelWin=window.self}if(objTopLevelWin._hx_web_dialog_divs_stacks==null){return}var intDialogsCount=objTopLevelWin._hx_web_dialog_divs_stacks.length;if(intDialogsCount==0){return}var objHXWebDialogData=null;objHXWebDialogData=objTopLevelWin._hx_web_dialog_divs_stacks[intDialogsCount-1];var objDivForWebDialog=objHXWebDialogData._hx_dialog_div_object;var objIFrameElement=jQuery("iframe",objDivForWebDialog)[0];var objIFrameWindow=(objIFrameElement.contentWindow?objIFrameElement.contentWindow:objIFrameElement);if(objIFrameWindow.HXWebJS!=null&&objIFrameWindow.HXWebJS.DOM!=null&&objIFrameWindow.HXWebJS.DOM.OnDialogExtendButtonClicked!=null){objIFrameWindow.HXWebJS.DOM.OnDialogExtendButtonClicked(intExtendButtonNo)}};HXWebJS.Utility={};HXWebJS.Utility._Internal={};HXWebJS.Utility.Trim=function(strText){return $.trim()};HXWebJS.Utility.StringFormat=function(strTemplate,arg0){if(strTemplate==null){return null}var re;var strResult=strTemplate;for(var i=1;i<arguments.length;i++){re=new RegExp("\\{"+(i-1).toString()+"\\}","g");strResult=strResult.replace(re,arguments[i])}return strResult};HXWebJS.Utility.GetStringPixelWidth=function(str,intPixelWidthPerEnglishChar,intPixelWidthPerWideChar){if(str==null||str==""){return 0}var intCountOfEnglishChars=0,intCountWideChars=0;for(var i=0;i<str.length;i++){if(str.charCodeAt(i)>=255){intCountWideChars++}else{intCountOfEnglishChars++}}if(intPixelWidthPerEnglishChar==null){intPixelWidthPerEnglishChar=8}if(intPixelWidthPerWideChar==null){intPixelWidthPerWideChar=12}return intCountOfEnglishChars*intPixelWidthPerEnglishChar+intCountWideChars*intPixelWidthPerWideChar};HXWebJS.Utility.IsStringHasInvalidChar=function(strInput,blnAllowSpaceChar){if(strInput==null||strInput==""){return false}if(blnAllowSpaceChar==null||blnAllowSpaceChar!=true){blnAllowSpaceChar=false}if(blnAllowSpaceChar==false){if(strInput.indexOf(" ")!=-1){return false}}var re=new RegExp("[,:'`*|?\\\\\"&%$!+[\\]=(){}\\f\\n\\r\\t\\v]");return(!re.test(strInput))};HXWebJS.Utility.StringInArray=function(arr,str,blnIgnoreCase){if(arr==null||arr.length==null||arr.length==0){return false}if(str==null||str==""){return false}if(blnIgnoreCase==null){blnIgnoreCase=false}var str_UpperCased=(blnIgnoreCase?str.toUpperCase():str);var s;for(var i=0;i<arr.length;i++){s=arr[i];if(s==null||s==""){continue}if(s==str){return true}if(blnIgnoreCase&&s.toUpperCase()==str_UpperCased){return true}}return false};HXWebJS.Utility.Round=function(val,scale,intNegativeNumberRoundingRule){if(intNegativeNumberRoundingRule==null){intNegativeNumberRoundingRule=0}if(val>=0||intNegativeNumberRoundingRule==1){if(scale==null||scale<=0){return Math.round(val)}return Math.round(val*Math.pow(10,scale))/Math.pow(10,scale)}else{return HXWebJS.Utility.Round(Math.abs(val),scale)*-1}};HXWebJS.Utility.ConvertToNumber=function(strValue){if(strValue==null||strValue==""){return null}strValue=HXWebJS.Utility.Trim(strValue);var strGroupingSeperator=(HXWebPageGlobalVariables.DecimalDisplayFormatType==1?".":",");strValue=strValue.replace(new RegExp("\\"+strGroupingSeperator,"g"),"");if(HXWebPageGlobalVariables.DecimalDisplayFormatType==1){strValue=strValue.replace(/,/g,".")}var blnUsePercentChar=false;if(strValue.substr(strValue.length-1,1)=="%"){strValue=strValue.substr(0,strValue.length-1);blnUsePercentChar=true}var re=/^[+-]?\d*[\.]?\d*$/g;if(re.test(strValue)==false){return null}var n=parseFloat(strValue);return(blnUsePercentChar?n/100:n)};HXWebJS.Utility.IsNumeric=function(val){var n=HXWebJS.Utility.ConvertToNumber(val);return(n!=null)};HXWebJS.Utility.FormatNumber=function(value,scale,negativeRoundRule,showGroupingChar){if(value==null){return""}var groupingChar=(HXWebPageGlobalVariables.DecimalDisplayFormatType==1?".":",");var decimalChar=(HXWebPageGlobalVariables.DecimalDisplayFormatType==1?",":".");if(scale!=null){value=HXWebJS.Utility.Round(value,scale,negativeRoundRule)}var sb_NewValue=new HXWebStringBuilder();var strOriginalValue=value.toString();if(strOriginalValue.substring(0,1)=="-"){sb_NewValue.append("-");strOriginalValue=strOriginalValue.substring(1,strOriginalValue.length)}var strArray=strOriginalValue.split(".");var intLength=strArray[0].length;var strTemp;if(showGroupingChar){var intCount=intLength<4?0:parseInt((intLength-1)/3);sb_NewValue.append(strArray[0].substring(0,intLength-intCount*3));for(var i=intCount;i>0;i--){strTemp=strArray[0].substring(intLength-i*3,intLength-(i-1)*3);sb_NewValue.append(groupingChar+strTemp)}}else{sb_NewValue.append(strArray[0])}if(scale!=null&&scale>0){if(strArray.length>1){sb_NewValue.append(decimalChar+strArray[1]);for(var i=strArray[1].length;i<scale;i++){sb_NewValue.append("0")}}else{sb_NewValue.append(decimalChar);for(var i=0;i<scale;i++){sb_NewValue.append("0")}}}else{if(strArray.length>1){sb_NewValue.append(decimalChar+strArray[1])}}return sb_NewValue.toString()};HXWebJS.Utility.ConvertJSONToUrlParamString=function(objJSON){if(objJSON==null){return""}var sb=new HXWebStringBuilder();for(var name in objJSON){sb.append("&"+name+"="+escape(objJSON[name]))}return sb.toString()};HXWebJS.Utility.ConvertStringToJSON=function(strJSONContent){eval("var theJsonValue="+strJSONContent);return theJsonValue};HXWebJS.Utility.CovertToDate=function(strDate,strDateDisplayFormatString){if(strDate==null){return null}if(strDateDisplayFormatString==null){strDateDisplayFormatString=HXWebPageGlobalVariables.DateDisplayFormatString}var re=/^d{8}$/;if(re.test(strDate)){eval("var dt = new Date("+strDate.substr(0,4)+"-"+strDate.substr(4,2)+"-"+strDate.substr(6,2)+")");if(!dt instanceof Date){return null}return dt}strDatePartArray=strDate.split(/\D/);if(strDatePartArray[strDatePartArray.length-1]==""){strDatePartArray.splice(strDatePartArray.length-1,1)}if(strDatePartArray.length<3){return null}var strTemp;if(strDateDisplayFormatString.substr(0,2)=="MM"){strTemp=strDatePartArray[2];strDatePartArray[2]=strDatePartArray[1];strDatePartArray[1]=strDatePartArray[0];strDatePartArray[0]=strTemp}else{if(strDateDisplayFormatString.substr(0,2)=="DD"){strTemp=strDatePartArray[2];strDatePartArray[2]=strDatePartArray[0];strDatePartArray[0]=strTemp}}strDatePartArray[1]--;eval("var dt = new Date("+strDatePartArray.join(",")+")");if(!dt instanceof Date){return null}return dt};HXWebJS.Utility.FormatDateTime=function(dt,intFormatType,strDateDisplayFormatString){if(dt==null){return null}if(strDateDisplayFormatString==null){strDateDisplayFormatString=HXWebPageGlobalVariables.DateDisplayFormatString}if(typeof dt=="string"){dt=HXWebJS.Utility.CovertToDate(dt)}if(dt==null){return null}if(intFormatType==null||(intFormatType!=1&&intFormatType!=2&&intFormatType!=3&&intFormatType!=4)){intFormatType=2}var intDate=dt.getFullYear()*10000+(dt.getMonth()+1)*100+dt.getDate();if(intFormatType==1){return intDate}var strSeperator=(strDateDisplayFormatString.substr(0,4)=="YYYY"?strDateDisplayFormatString.substr(4,1):strDateDisplayFormatString.substr(2,1));var str=intDate.toString();var strSimpleDate=str.substr(0,4)+strSeperator+str.substr(4,2)+strSeperator+str.substr(6,2);if(strDateDisplayFormatString.substr(0,2)=="MM"){strSimpleDate=str.substr(4,2)+strSeperator+str.substr(6,2)+strSeperator+str.substr(0,4)}if(strDateDisplayFormatString.substr(0,2)=="DD"){strSimpleDate=str.substr(6,2)+strSeperator+str.substr(4,2)+strSeperator+str.substr(0,4)}if(intFormatType==2){return strSimpleDate}var strTimePart=dt.getHours().toString()+":"+dt.getMinutes().toString()+":"+dt.getSeconds().toString();if(intFormatType==3){return strSimpleDate+" "+strTimePart}if(intFormatType==4){return strSimpleDate+" "+strTimePart+"."+dt.getMilliseconds().toString()}};HXWebJS.Utility.IsPeriod=function(strValue){if(strValue==null){return false}if(typeof(strValue)!="string"&&typeof(strValue)!="number"){return false}if(typeof(strValue)=="number"){strValue=strValue.toString()}if(strValue.length!=6){return false}return/^(\d{4})([01]\d)$/.test(strValue)};HXWebJS.Utility.IsDate=function(strDate,strDateDisplayFormatString){if(strDate==null){return false}if(typeof(strDate)!="string"){return false}if(strDateDisplayFormatString==null){strDateDisplayFormatString=HXWebPageGlobalVariables.DateDisplayFormatString}var re=/^(\d{4})[^\d]{1}([01]?\d)[^\d]{1}([0123]?\d)[^\d]?$/;if(strDateDisplayFormatString.substr(0,2)=="MM"){re=/^([01]?\d)[^\d]{1}([0123]?\d)[^\d]{1}(\d{4})[^\d]?$/}else{if(strDateDisplayFormatString.substr(0,2)=="DD"){re=/^([0123]?\d)[^\d]{1}([01]?\d)[^\d]{1}(\d{4})[^\d]?$/}}if(!re.test(strDate)){return false}var strDatePartArray=strDate.split(/\D/);if(strDatePartArray[strDatePartArray.length-1]==""){strDatePartArray.splice(strDatePartArray.length-1,1)}var intYear,intMonth,intDay;if(strDateDisplayFormatString.substr(0,2)=="MM"){intYear=parseInt(strDatePartArray[2],10);intMonth=parseInt(strDatePartArray[0],10);intDay=parseInt(strDatePartArray[1],10)}else{if(strDateDisplayFormatString.substr(0,2)=="DD"){intYear=parseInt(strDatePartArray[2],10);intMonth=parseInt(strDatePartArray[1],10);intDay=parseInt(strDatePartArray[0],10)}else{intYear=parseInt(strDatePartArray[0],10);intMonth=parseInt(strDatePartArray[1],10);intDay=parseInt(strDatePartArray[2],10)}}if(intMonth<1||intMonth>12){return false}if(intDay>31){return false}if(intDay==31&&(intMonth==2||intMonth==4||intMonth==6||intMonth==9||intMonth==11)){return false}if(intMonth==2&&intDay>29){return false}return true};HXWebJS.Utility.IsTime=function(strTime){if(strTime==null){return false}if(typeof(strTime)!="string"){return false}var re=new RegExp("^\\d{1,2}:\\d{1,2}(:\\d{1,2})?(.\\d{1,4})?$");if(!re.test(strTime.toString())){return false}var ss=strTime.split(/[:]/);var intHour=parseInt(ss[0],10);var intMinute=parseInt(ss[1],10);var intSecond=0;if(ss.length==3){intSecond=parseInt(ss[2],10)}if(intHour>=24){return false}if(intMinute>=60||intSecond>=60){return false}return true};HXWebJS.Utility.IsDateTime=function(strDateTime,strDateDisplayFormatString){if(strDateTime==null){return false}if(typeof(strDateTime)!="string"){return false}var intIndexOfFirstSpaceChar=strDateTime.indexOf(" ");var strDatePart=(intIndexOfFirstSpaceChar==-1?strDateTime:strDateTime.substr(0,intIndexOfFirstSpaceChar));if(!HXWebJS.Utility.IsDate(strDatePart,strDateDisplayFormatString)){return false}if(intIndexOfFirstSpaceChar==-1){return true}var strTimePart=strDateTime.substring(intIndexOfFirstSpaceChar+1);if(!HXWebJS.Utility.IsTime(strTimePart)){return false}return true};HXWebJS.Utility.IsIntegerDate=function(val){if(val==null){return false}if(isNaN(val)){return false}var strTemp=val.toString();if(strTemp.toString().length!=8){return false}var strDate=strTemp.substr(0,4)+"-"+strTemp.substr(4,2)+"-"+strTemp.substr(6,2);return HXWebJS.Utility.IsDate(strDate,"YYYY-MM-DD")};HXWebJS.Utility.DateAdd=function(dtBase,strIntervalType,number){if(dtBase==null){return null}var dt=new Date(dtBase);number=parseFloat(number);var intFirstLevelNum=parseInt(number);var dblSecondLevelNum=number-intFirstLevelNum;dblSecondLevelNum=Math.round(dblSecondLevelNum*Math.pow(10,3))/Math.pow(10,3);switch(strIntervalType){case"y":dt.setFullYear(dt.getFullYear()+intFirstLevelNum,dt.getMonth()+dblSecondLevelNum*12);break;case"m":var dtTemp=new Date(dt.getFullYear(),dt.getMonth()+intFirstLevelNum+1,0);if(dtTemp.getDate()<dt.getDate()){dt=dtTemp}else{dt.setMonth(dt.getMonth()+intFirstLevelNum,dt.getDate()+dblSecondLevelNum*30)}break;case"w":dt.setDate(dt.getDate()+7*intFirstLevelNum);break;case"d":dt.setDate(dt.getDate()+intFirstLevelNum);break;case"h":dt.setHours(dt.getHours()+intFirstLevelNum,dt.getMinutes()+dblSecondLevelNum*60);break;case"n":dt.setMinutes(dt.getMinutes()+intFirstLevelNum,dt.getSeconds()+dblSecondLevelNum*60);break;case"s":dt.setSeconds(dt.getSeconds()+intFirstLevelNum,dt.getMilliseconds()+dblSecondLevelNum*1000);break;case"l":dt.setMilliseconds(dt.getMilliseconds()+intFirstLevelNum);break;default:return dt.setDate(dt.getDate()+intFirstLevelNum);break}return dt};HXWebJS.Utility.DateDiff=function(dateA,dateB,strIntervalType){if(typeof dateA=="string"){dateA=HXWebJS.Utility.CovertToDate(dateA)}if(typeof dateB=="string"){dateB=HXWebJS.Utility.CovertToDate(dateB)}if(dateA==null||dateB==null){return null}if(strIntervalType==null){strIntervalType="d"}if(strIntervalType=="y"){return dateA.getFullYear()-dateB.getFullYear()}if(strIntervalType=="m"){return(dateA.getFullYear()*12+dateA.getMonth())-(dateB.getFullYear()*12+dateB.getMonth())}var intMillisecondsCount=dateA-dateB;var intReturnValue;switch(strIntervalType){case"w":intReturnValue=Math.ceil(intMillisecondsCount/3600000/168);break;case"d":intReturnValue=Math.ceil(intMillisecondsCount/3600000/24);break;case"h":intReturnValue=Math.ceil(intMillisecondsCount/3600000);break;case"n":intReturnValue=Math.ceil(intMillisecondsCount/60000);break;case"s":intReturnValue=Math.ceil(intMillisecondsCount/1000);break;case"l":intReturnValue=intMillisecondsCount;break;default:intReturnValue=Math.ceil(intMillisecondsCount/3600000/24);break}return intReturnValue};HXWebJS.Utility.HXXmlDataList_QuickSort=function(objXmlRootNode,strFieldName,blnAscOrDesc,begin,end){if(objXmlRootNode==null){return}var swap=function(objXmlRootNode,indexA,indexB){if(indexA==indexB){return}var objXmlNode1=objXmlRootNode.childNodes[indexA];var objXmlNode2=objXmlRootNode.childNodes[indexB];var objXmlNodeTemp=objXmlNode1.cloneNode(true);objXmlRootNode.replaceChild(objXmlNode2.cloneNode(true),objXmlNode1);objXmlRootNode.replaceChild(objXmlNodeTemp,objXmlNode2)};var compare=function(v1,v2,strCompareMethod){if(HXWebJS.Utility.IsNumeric(v1)&&HXWebJS.Utility.IsNumeric(v2)){if(strCompareMethod==">"){return(parseFloat(v1)>parseFloat(v2)?true:false)}else{return(parseFloat(v1)<parseFloat(v2)?true:false)}}else{if(HXWebJS.Utility.IsDate(v1)&&HXWebJS.Utility.IsDate(v2)){if(strCompareMethod==">"){return(HXWebJS.Utility.CovertToDate(v1)>HXWebJS.Utility.CovertToDate(v2)?true:false)}else{return(HXWebJS.Utility.CovertToDate(v1)<HXWebJS.Utility.CovertToDate(v2)?true:false)}}else{if(v1==null||v1==""){return(v2==null||v2==""?false:true)}else{if(strCompareMethod==">"){if(v2==null||v2==""){return true}return(v1.toString().localeCompare(v2)==1)}else{if(v2==null||v2==""){return false}return(v1.toString().localeCompare(v2)==-1)}}}}};var getkey=function(objXmlRootNode,strFieldName,index){var objTempXmlNode=objXmlRootNode.childNodes[index];if(document.createExpression){var _xmldoc=(objTempXmlNode.ownerDocument==null?objTempXmlNode:objTempXmlNode.ownerDocument);var xpathExpr=_xmldoc.createExpression(strFieldName,null);var result=xpathExpr.evaluate(objTempXmlNode,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return result.singleNodeValue.textContent}else{return objTempXmlNode.selectSingleNode(strFieldName).text}};var partition=function(objXmlRootNode,strFieldName,begin,end,pivot,strCompareMethod){var piv=getkey(objXmlRootNode,strFieldName,pivot);swap(objXmlRootNode,pivot,end-1);var store=begin;var ix;for(ix=begin;ix<end-1;++ix){var v1=getkey(objXmlRootNode,strFieldName,ix);if(compare(v1,piv,strCompareMethod)){swap(objXmlRootNode,store,ix);++store}}swap(objXmlRootNode,end-1,store);return store};var qsort=function(objXmlRootNode,strFieldName,begin,end,strCompareMethod){if(end-1>begin){if(end-begin<9){insertsort(objXmlRootNode,strFieldName,strCompareMethod,begin,end-begin);return}var pivot=begin+Math.floor(Math.random()*(end-begin));pivot=partition(objXmlRootNode,strFieldName,begin,end,pivot,strCompareMethod);qsort(objXmlRootNode,strFieldName,begin,pivot,strCompareMethod);qsort(objXmlRootNode,strFieldName,pivot+1,end,strCompareMethod)}};var insertsort=function(objXmlRootNode,strFieldName,strCompareMethod,intBegin,intListSize){var j,v1,v2;for(var i=1;i<intListSize;i++){j=i;while(j>0){v1=getkey(objXmlRootNode,strFieldName,intBegin+j);v2=getkey(objXmlRootNode,strFieldName,intBegin+j-1);if(compare(v1,v2,strCompareMethod)==false){break}else{swap(objXmlRootNode,intBegin+j,intBegin+j-1);j--}}}};if(begin==null){begin=0}if(end==null){end=objXmlRootNode.childNodes.length}if(blnAscOrDesc==null){blnAscOrDesc=true}var strCompareMethod=(blnAscOrDesc?"<":">");qsort(objXmlRootNode,strFieldName,begin,end,strCompareMethod)};HXWebJS.Utility.GetSumValueOfXmlDataIslandFieldValue=function(strXmlDataIslandCode,strFieldCode,intDecimalScale,blnFormatWithGroupSeperator,blnReFillFieldValueWithFormat){var objHXXmlDoc=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strXmlDataIslandCode);var objHXNodeList=objHXXmlDoc.SelectNodes("//RS_ROW");strFieldCode=strFieldCode.toUpperCase();if(blnFormatWithGroupSeperator==null){blnFormatWithGroupSeperator=false}if(blnReFillFieldValueWithFormat==null){blnReFillFieldValueWithFormat=false}var dblTotalValue=0;var dblTempValue;var objTempHXXmlNode;for(var i=0;i<(objHXNodeList==null?0:objHXNodeList.length);i++){objTempHXXmlNode=objHXNodeList[i].SelectSingleNode("@"+strFieldCode);var strLineValue=objTempHXXmlNode.GetText();if(strLineValue==""){continue}dblTempValue=HXWebJS.Utility.ConvertToNumber(strLineValue);if(dblTempValue==null){if(blnReFillFieldValueWithFormat){objTempHXXmlNode.SetText("")}continue}dblTotalValue=dblTotalValue+dblTempValue;if(blnFormatWithGroupSeperator&&blnReFillFieldValueWithFormat){strLineValue=HXWebJS.Utility.FormatNumber(dblTempValue,intDecimalScale,null,true);objTempHXXmlNode.SetText(strLineValue)}}if(blnFormatWithGroupSeperator){return HXWebJS.Utility.FormatNumber(dblTotalValue,intDecimalScale,null,true)}else{if(intDecimalScale!=null&&intDecimalScale>-1){return HXWebJS.Utility.FormatNumber(dblTotalValue,intDecimalScale)}else{return HXWebJS.Utility.FormatNumber(dblTotalValue)}}};HXWebJS.Utility.CheckInputValidation=function(objContainerElement,strValidGroupName){if(objContainerElement==null){objContainerElement=document}var strDateDisplayFormatString=HXWebPageGlobalVariables.DateDisplayFormatString;var intCurrencyDisplayFormatType=HXWebPageGlobalVariables.DecimalDisplayFormatType;var blnIsCheckOK;var it=$("input:visible",objContainerElement);for(var i=0;i<it.length;i++){blnIsCheckOK=HXWebJS.Utility._Internal._CheckInputValidation_Single(it[i],strValidGroupName,strDateDisplayFormatString,intCurrencyDisplayFormatType);if(!blnIsCheckOK){return false}}it=$("select:visible",objContainerElement);for(var i=0;i<it.length;i++){blnIsCheckOK=HXWebJS.Utility._Internal._CheckInputValidation_Single(it[i],strValidGroupName);if(!blnIsCheckOK){return false}}it=$("textarea:visible",objContainerElement);for(var i=0;i<it.length;i++){blnIsCheckOK=HXWebJS.Utility._Internal._CheckInputValidation_Single(it[i],strValidGroupName);if(!blnIsCheckOK){return false}}return true};HXWebJS.Utility._Internal._CheckInputValidation_Single=function(objInputElement,strValidGroupName,strDateDisplayFormatString,intCurrencyDisplayFormatType){if(objInputElement==null){return true}if(objInputElement.offsetHeight<=0){return true}var strInputGroup=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_input_group");if(strValidGroupName!=null){if(strInputGroup==null||strInputGroup.indexOf(strValidGroupName)==-1){return true}}var strInputElementTagName=objInputElement.tagName.toLowerCase();if(strInputElementTagName=="select"){return HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheck(objInputElement)}if(strInputElementTagName=="textarea"){return HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheck(objInputElement)}if(strInputElementTagName=="input"){var strInputElementType=objInputElement.type.toLowerCase();if(strInputElementType=="file"||strInputElementType=="password"){return HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheck(objInputElement)}if(strInputElementType!="text"){return true}var blnIsMustInputCheckOK=HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheck(objInputElement);if(blnIsMustInputCheckOK==false){return false}return HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck(objInputElement,strDateDisplayFormatString,intCurrencyDisplayFormatType)}return true};HXWebJS.Utility._Internal._CheckInputValidation_IsMustInputCheck=function(objInputElement){var blnIsMustInputDefined=HXWebJS.DOM.ElementAttributeIsDefined(objInputElement,"hx_input_is_must");if(!blnIsMustInputDefined||objInputElement.value!=""){return true}var strMessageText;var strInputFieldFullName=HXWebJS.DOM.GetInputFieldFullName(objInputElement);if(strInputFieldFullName==null||strInputFieldFullName==""){strMessageText=HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_INPUT_VALIDATION__VALUE_CANNOT_EMPTY");alert(strMessageText)}else{strMessageText=HXWebXmlService.GetUITextOnServer("WARNING_MSG__HXWWW_INPUT_VALIDATION__VALUE_CANNOT_EMPTY__WITH_FIELD_NAME");alert(HXWebJS.Utility.StringFormat(strMessageText,strInputFieldFullName))}if(!objInputElement.disabled){objInputElement.focus()}return false};HXWebJS.Utility._Internal._CheckInputValidation_DataContentInputCheck=function(objInputElement,strDateDisplayFormatString,intCurrencyDisplayFormatType){var strInputDataType=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_input_data_type");strInputDataType=(strInputDataType==null?"normal_str":strInputDataType.toLowerCase());var strInputDataValue=objInputElement.value;if(strInputDataValue==null||strInputDataValue==""){return true}var blnIsCheckOK=true;var strMessageUITextCode;var strInputDataCheckTypeWhenCheckFail="";if(strInputDataType=="word_str"){var re=new RegExp("^[\\w]+$");if(!re.test(strInputDataValue)){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__WORDSTR_LIMITATION";blnIsCheckOK=false}}if(strInputDataType=="key_str"){if(!HXWebJS.Utility.IsStringHasInvalidChar(strInputDataValue)){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__KEYSTR_LIMITATION";blnIsCheckOK=false}}if(strInputDataType=="date"){if(HXWebJS.Utility.IsDate(strInputDataValue,strDateDisplayFormatString)==false&&HXWebJS.Utility.IsIntegerDate(strInputDataValue)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_DATE";blnIsCheckOK=false;strInputDataCheckTypeWhenCheckFail="date"}}if(strInputDataType=="time"){if(HXWebJS.Utility.IsTime(strInputDataValue)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_TIME";blnIsCheckOK=false}}if(strInputDataType=="datetime"){if(HXWebJS.Utility.IsDateTime(strInputDataValue,strDateDisplayFormatString)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_DATETIME";blnIsCheckOK=false;strInputDataCheckTypeWhenCheckFail="datetime"}}if(strInputDataType=="intdate"){if(HXWebJS.Utility.IsIntegerDate(strInputDataValue)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_INTDATE";blnIsCheckOK=false}}if(strInputDataType=="period"){if(HXWebJS.Utility.IsPeriod(strInputDataValue)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_PERIOD";blnIsCheckOK=false}}var strInputCustomRule="";if(strInputDataType=="custom"){strInputCustomRule=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_input_custom_rule");if(strInputCustomRule!=null&&strInputCustomRule!=""){var re=new RegExp(strInputCustomRule,"g");if(re.test(strInputDataValue)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__CUSTOM_RULE_CHECK_FAILED";blnIsCheckOK=false;strInputDataCheckTypeWhenCheckFail="custom"}}}if(strInputDataType.indexOf("number")!=-1){var arrTemp=HXWebJS.Utility._Internal._BuildNumberCheckRegExpAndSampleString(strInputDataType,intCurrencyDisplayFormatType);var strRegExpContent=arrTemp[0];var strSampleString=arrTemp[1];var strNumberSign=arrTemp[2];var re=new RegExp(strRegExpContent);var dcmlTempValue=HXWebJS.Utility.ConvertToNumber(strInputDataValue);if(dcmlTempValue==null){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__INVALID_NUMBER";blnIsCheckOK=false}else{if(strNumberSign=="+"&&dcmlTempValue<0){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_MUST_BE_POSITIVE";blnIsCheckOK=false}else{if(strNumberSign=="-"&&dcmlTempValue>0){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_MUST_BE_NEGATIVE";blnIsCheckOK=false}else{var strTemp=HXWebJS.Utility.FormatNumber(dcmlTempValue);if(re.test(strTemp)==false){strMessageUITextCode="WARNING_MSG__HXWWW_INPUT_VALIDATION__NUMBER_PRECISION_INVALID";strInputDataCheckTypeWhenCheckFail="number__precision";blnIsCheckOK=false}}}}}if(blnIsCheckOK==false){var strInputFieldFullName=HXWebJS.DOM.GetInputFieldFullName(objInputElement);var strMessageText;if(strInputFieldFullName==null||strInputFieldFullName==""){strMessageText=HXWebXmlService.GetUITextOnServer(strMessageUITextCode)}else{strMessageText=HXWebXmlService.GetUITextOnServer(strMessageUITextCode+"__WITH_FIELD_NAME");strMessageText=HXWebJS.Utility.StringFormat(strMessageText,strInputFieldFullName)}if(strInputDataCheckTypeWhenCheckFail=="number__precision"){strMessageText+=" "+strSampleString}else{if(strInputDataCheckTypeWhenCheckFail=="custom"){var strTemp=HXWebJS.Utility._Internal._CheckInputValidation_GetCustomInvalidMsgText(objInputElement);if(strTemp!=null&&strTemp!=""){strMessageText=strTemp}else{strMessageText+=" "+strInputCustomRule}}else{if(strInputDataCheckTypeWhenCheckFail=="date"||strInputDataCheckTypeWhenCheckFail=="datetime"){strTemp=strDateDisplayFormatString.replace("MM","08").replace("DD","28").replace("YYYY","2008");strMessageText=strMessageText.replace(/2008-08-28/g,strTemp)}}}alert(strMessageText);if(objInputElement.disabled==false){objInputElement.focus()}return false}return true};HXWebJS.Utility._Internal._BuildNumberCheckRegExpAndSampleString=function(strInputDataType,intCurrencyDisplayFormatType){var strNumberSign,strNumberPrecision,strNumberScale;var re1;var strDecimalSeperator=(intCurrencyDisplayFormatType==0?".":",");strNumberSign=(strInputDataType.substr(strInputDataType.length-1,1));if(strNumberSign!="+"&&strNumberSign!="-"){strNumberSign=""}if(strInputDataType.indexOf("(")==-1||strInputDataType.indexOf(")")==-1){strNumberPrecision="";strNumberScale=""}else{var strTemp=strInputDataType.substring(strInputDataType.indexOf("(")+1,strInputDataType.indexOf(")"));strTemp=strTemp.replace(/ /g,"");if(strTemp.indexOf(",")==-1){strNumberPrecision=strTemp;strNumberScale=""}else{strNumberPrecision=strTemp.substr(0,strTemp.indexOf(","));strNumberScale=strTemp.substr(strTemp.indexOf(",")+1)}re1=new RegExp("^\\d{1,2}$");if(re1.test(strNumberPrecision)==false){strNumberPrecision=""}if(re1.test(strNumberScale)==false){strNumberScale=""}if(strNumberPrecision!=""&&strNumberScale!=""){if(parseInt(strNumberScale)>=parseInt(strNumberPrecision)){strNumberScale=parseInt(strNumberPrecision)-1}}}var strRegExpContent;if(strNumberSign==""){strRegExpContent="^[+-]?"}else{if(strNumberSign=="+"){strRegExpContent="^[+]?"}else{strRegExpContent="^-"}}if(strNumberPrecision==""){strRegExpContent+="\\d*[\\"+strDecimalSeperator+"]?\\d*$"}else{if(strNumberScale==""){strRegExpContent+="\\d{1,"+strNumberPrecision+"}$"}else{strRegExpContent+="\\d{1,"+(parseInt(strNumberPrecision)-parseInt(strNumberScale))+"}([\\"+strDecimalSeperator+"]\\d{0,"+strNumberScale+"})?$"}}var strSampleString="";if(strNumberPrecision!=""){var intTemp1,intTemp2;if(strNumberScale==""){intTemp2=0}else{intTemp2=parseInt(strNumberScale)}intTemp1=parseInt(strNumberPrecision)-intTemp2;for(var ii=0;ii<intTemp1;ii++){strSampleString+="n"}if(intTemp2>0){strSampleString+=strDecimalSeperator;for(var ii=0;ii<intTemp2;ii++){strSampleString+="n"}}}var arr=[strRegExpContent,strSampleString,strNumberSign];return arr};HXWebJS.Utility._Internal._CheckInputValidation_GetCustomInvalidMsgText=function(objInputElement){var strInvalidMsgDataFld=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_input_invalid_msg_datafld");if(strInvalidMsgDataFld==null||strInvalidMsgDataFld==""){return null}var strInvalidMsgDataSrc=HXWebJS.DOM.GetElementAttributeValue(objInputElement,"hx_input_invalid_msg_datasrc");if(strInvalidMsgDataSrc==null||strInvalidMsgDataSrc==""){strInvalidMsgDataSrc="hxxml_ui_text"}var strMessageText=null;var objHXXmlDocForText,objHXXmlNodeForText;objHXXmlDocForText=HXWebJS.Xml.GetHXXmlDocumentViaXmlDataIsland(strInvalidMsgDataSrc);if(objHXXmlDocForText!=null){var objHXXmlNodeForText=objHXXmlDocForText.SelectSingleNode("//RS_ROW");if(objHXXmlNodeForText!=null){strMessageText=objHXXmlNodeForText.GetAttributeValue(strInvalidMsgDataFld.toUpperCase())}}return strMessageText};HXWebJS.AppUtility={};HXWebJS.AppUtility._Internal={};HXWebJS.AppUtility.OpenDynamicDataEditPageViaFile=function(strScreenLayoutFileName,strRecordUUID,objKeyFieldValues,objWindowSetting,objExtrPageParamValues){var strUrl=HXWebJS.AppUtility._Internal._BuildDynamicDataEditPageUrl("via_file",strScreenLayoutFileName,"1.1",strRecordUUID,objKeyFieldValues,objWindowSetting,objExtrPageParamValues);HXWebJS.Navigation.OpenWebPageViaWindowSetting(strUrl,objWindowSetting)};HXWebJS.AppUtility.OpenDynamicDataEditPageViaDB=function(strScreenLayoutCode,strRecordUUID,objKeyFieldValues,objWindowSetting,objExtrPageParamValues){var strUrl=HXWebJS.AppUtility._Internal._BuildDynamicDataEditPageUrl("via_db",strScreenLayoutCode,"1.1",strRecordUUID,objKeyFieldValues,objWindowSetting,objExtrPageParamValues);HXWebJS.Navigation.OpenWebPageViaWindowSetting(strUrl,objWindowSetting)};HXWebJS.AppUtility._Internal._BuildDynamicDataEditPageUrl=function(strViaType,strScreenLayoutFileNameOrCode,strDynamicPageVersion,strRecordUUID,objKeyFieldValues,objExtrPageParamValues){if(strScreenLayoutFileNameOrCode==null){strScreenLayoutFileNameOrCode=""}if(strRecordUUID==null){strRecordUUID=""}var arrParamKeyValues=["_hx_via_type",strViaType,"_hx_screen_layout_file_or_code",strScreenLayoutFileNameOrCode,"_hx_uuid",strRecordUUID];if(objKeyFieldValues!=null){var sb_temp=new HXWebStringBuilder();sb_temp.append("<RS_DATA>");for(var name in objKeyFieldValues){sb_temp.append("<RS_ROW ");sb_temp.append(name.toUpperCase()+'="'+HXWebJS.Xml.MarkXMLSpecialChars(objSearchFieldDefaultValues[name])+'" />')}sb_temp.append("</RS_DATA>");arrParamKeyValues.push("_hx_key_field_values");arrParamKeyValues.push(sb_temp.toString())}if(objExtrPageParamValues!=null){for(var name in objExtrPageParamValues){arrParamKeyValues.push(name);arrParamKeyValues.push(objExtrPageParamValues[name])}}var strPageParamUUID=HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray(arrParamKeyValues);var strUrl=gstrWebRootPath+"hxmd/hxdynamicpage__edit_v1_1.aspx?hx_page_param_uuid="+strPageParamUUID;return strUrl};HXWebJS.AppUtility.OpenDynamicDataListPageViaFile=function(strScreenLayoutFileName,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){HXWebJS.AppUtility._Internal._OpenDynamicDataListPage("via_file",strScreenLayoutFileName,"1.1",objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues)};HXWebJS.AppUtility.OpenDynamicDataListPageViaDB=function(strScreenLayoutCode,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){HXWebJS.AppUtility._Internal._OpenDynamicDataListPage("via_db",strScreenLayoutCode,"1.1",objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues)};HXWebJS.AppUtility._Internal._OpenDynamicDataListPage=function(strViaType,strScreenLayoutFileNameOrCode,strScreenLayoutVersion,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){var strUrl=HXWebJS.AppUtility._Internal._BuildDynamicDataListPageUrl(strViaType,strScreenLayoutFileNameOrCode,strScreenLayoutVersion,objSearchFieldDefaultValues,objExtrPageParamValues);HXWebJS.Navigation.OpenWebPageViaWindowSetting(strUrl,objWindowSetting)};HXWebJS.AppUtility._Internal._BuildDynamicDataListPageUrl=function(strViaType,strScreenLayoutFileNameOrCode,strScreenLayoutVersion,objSearchFieldDefaultValues,objExtrPageParamValues){if(strScreenLayoutFileNameOrCode==null){strScreenLayoutFileNameOrCode=""}var arrParamKeyValues=["_hx_via_type",strViaType,(strScreenLayoutVersion=="1.0"?"_hx_screen_layout_file":"_hx_screen_layout_file_or_code"),strScreenLayoutFileNameOrCode,"_hx_is_first_time_onload","1"];if(objSearchFieldDefaultValues!=null){var sb_temp=new HXWebStringBuilder();sb_temp.append("<RS_DATA>");for(var name in objSearchFieldDefaultValues){sb_temp.append("<RS_ROW ");sb_temp.append(name.toUpperCase()+'="'+HXWebJS.Xml.MarkXMLSpecialChars(objSearchFieldDefaultValues[name])+'" />')}sb_temp.append("</RS_DATA>");arrParamKeyValues.push("_hx_search_field_values");arrParamKeyValues.push(sb_temp.toString())}if(objExtrPageParamValues!=null){for(var name in objExtrPageParamValues){arrParamKeyValues.push(name);arrParamKeyValues.push(objExtrPageParamValues[name])}}var strPageParamUUID=HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray(arrParamKeyValues);var strUrl;strUrl=gstrWebRootPath+"hxmd/hxdynamicpage__list_v1_1.aspx?hx_page_param_uuid="+strPageParamUUID;return strUrl};HXWebJS.AppUtility.OpenDynamicDataReportPageViaFile=function(strScreenLayoutFileName,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){HXWebJS.AppUtility._Internal._OpenDynamicDataReportPage("via_file",strScreenLayoutFileName,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues)};HXWebJS.AppUtility.OpenDynamicDataReportPageViaDB=function(strScreenLayoutCode,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){HXWebJS.AppUtility._Internal._OpenDynamicDataReportPage("via_db",strScreenLayoutCode,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues)};HXWebJS.AppUtility._Internal._OpenDynamicDataReportPage=function(strViaType,strScreenLayoutFileNameOrCode,objWindowSetting,objSearchFieldDefaultValues,objExtrPageParamValues){var strUrl=HXWebJS.AppUtility._Internal._BuildDynamicDataReportPageUrl(strViaType,strScreenLayoutFileNameOrCode,objSearchFieldDefaultValues,objExtrPageParamValues);HXWebJS.Navigation.OpenWebPageViaWindowSetting(strUrl,objWindowSetting)};HXWebJS.AppUtility._Internal._BuildDynamicDataReportPageUrl=function(strViaType,strScreenLayoutFileNameOrCode,objSearchFieldDefaultValues,objExtrPageParamValues){if(strScreenLayoutFileNameOrCode==null){strScreenLayoutFileNameOrCode=""}var arrParamKeyValues=["_hx_via_type",strViaType,"_hx_screen_layout_file_or_code",strScreenLayoutFileNameOrCode,"_hx_is_first_time_onload","1"];if(objSearchFieldDefaultValues!=null){var sb_temp=new HXWebStringBuilder();sb_temp.append("<RS_DATA>");for(var name in objSearchFieldDefaultValues){sb_temp.append("<RS_ROW ");sb_temp.append(name.toUpperCase()+'="'+HXWebJS.Xml.MarkXMLSpecialChars(objSearchFieldDefaultValues[name])+'" />')}sb_temp.append("</RS_DATA>");arrParamKeyValues.push("_hx_search_field_default_values");arrParamKeyValues.push(sb_temp.toString())}if(objExtrPageParamValues!=null){for(var name in objExtrPageParamValues){arrParamKeyValues.push(name);arrParamKeyValues.push(objExtrPageParamValues[name])}}var strPageParamUUID=HXWebJS.Xml.XmlService.RegisterParameterValueToServerViaArray(arrParamKeyValues);var strUrl=gstrWebRootPath+"hxmd/hxdynamicpage__report.aspx?hx_page_param_uuid="+strPageParamUUID;return strUrl};HXWebJS.AppUtility.WeChatJSInterfaceInit=function(option){if(!wx){return}if(option==null){return}if(option.appId==null||option.timestamp==null||option.nonceStr==null||option.signature==null){return}var arrJSApiList=["chooseImage","previewImage","uploadImage","downloadImage","openLocation","getLocation","closeWindow","scanQRCode"];if(option.jsExtendApiList!=null){var arrTemp=option.jsExtendApiList.split(/;/);for(var str in arrTemp){if(HXWebJS.Utility.StringInArray(arrJSApiList,str,true)){continue}arrJSApiList.push(str)}}wx.config({debug:!!option.debug,appId:option.appId,timestamp:option.timestamp,nonceStr:option.nonceStr,signature:option.signature,jsApiList:arrJSApiList})};